import{S as xt,i as Ct,s as yt,n as Ce,d as f,o as re,c as i,a as J,b as n,e as u,f as p,g as D,p as B,j as d,k as T,t as U,G as zt,h as z,l as oe,x as it,r as et,Z as _t,u as ht,a2 as us,F as ds,H as Xe,B as ul,v as ke,D as fs,J as Wt,K as Qt,L as St,M as Ke,N as Ge,O as Yt,P as Jt,Q as jt,R as Bt,T as Ut,m as dl,q as ms,A as hs,U as $t}from"../chunks/Ci_mYp0l.js";import{e as Ne,o as gt,h as bs,a as Je}from"../chunks/B7Jf-8xW.js";import"../chunks/IHki7fMi.js";import{p as ps}from"../chunks/Bn8W9W94.js";import{u as vs}from"../chunks/Dj1ipyZ7.js";import{h as Kt,f as fl,g as ml,e as hl,i as bl}from"../chunks/BvvFRrhp.js";import{g as _s,c as pl,q as vl,w as Xt,o as _l,a as gs}from"../chunks/eN7n43qG.js";import{c as xs}from"../chunks/Bhgkhhu0.js";function gl(l,e,t){const s=l.slice();return s[11]=e[t],s}function xl(l){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-tne6n3"&&(e.textContent=t),this.h()},h(){i(e,"class","absolute -top-3 -right-3 badge badge-ornate text-sm sm:text-lg animate-bounce z-10")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Cl(l){let e,t='<span class="text-4xl sm:text-6xl">üíÄ</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1m5cl71"&&(e.innerHTML=t),this.h()},h(){i(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function yl(l){let e,t,s=l[0].armorClass+"",a;return{c(){e=d("div"),t=U("üõ°Ô∏è AC "),a=U(s),this.h()},l(o){e=u(o,"DIV",{class:!0});var r=p(e);t=B(r,"üõ°Ô∏è AC "),a=B(r,s),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm bg-info/30 text-neutral border-info/50")},m(o,r){J(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&s!==(s=o[0].armorClass+"")&&re(a,s)},d(o){o&&f(e)}}}function El(l){let e,t,s='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,o,r,c,m="üóëÔ∏è Eliminar",b,h;return{c(){e=d("div"),t=d("label"),t.innerHTML=s,a=T(),o=d("ul"),r=d("li"),c=d("a"),c.textContent=m,this.h()},l(C){e=u(C,"DIV",{class:!0});var g=p(e);t=u(g,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-13tftyw"&&(t.innerHTML=s),a=D(g),o=u(g,"UL",{tabindex:!0,class:!0});var y=p(o);r=u(y,"LI",{});var _=p(r);c=u(_,"A",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-hji4ll"&&(c.textContent=m),_.forEach(f),y.forEach(f),g.forEach(f),this.h()},h(){i(t,"tabindex","0"),i(t,"class","btn btn-ghost btn-xs btn-circle"),i(c,"class","text-error"),i(o,"tabindex","0"),i(o,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary text-sm"),i(e,"class","dropdown dropdown-end flex-shrink-0")},m(C,g){J(C,e,g),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),b||(h=oe(c,"click",l[9]),b=!0)},p:Ce,d(C){C&&f(e),b=!1,h()}}}function Cs(l){let e,t,s,a="Estado",o,r,c,m=l[4].icon+"",b,h,C,g=l[4].label+"",y,_,E,v,w,x,I;return{c(){e=d("div"),t=d("div"),s=d("span"),s.textContent=a,o=T(),r=d("div"),c=d("span"),b=U(m),h=T(),C=d("span"),y=U(g),E=T(),v=d("div"),w=d("div"),this.h()},l(V){e=u(V,"DIV",{class:!0});var P=p(e);t=u(P,"DIV",{class:!0});var A=p(t);s=u(A,"SPAN",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1lnb92u"&&(s.textContent=a),o=D(A),r=u(A,"DIV",{class:!0});var k=p(r);c=u(k,"SPAN",{class:!0});var H=p(c);b=B(H,m),H.forEach(f),h=D(k),C=u(k,"SPAN",{class:!0});var S=p(C);y=B(S,g),S.forEach(f),k.forEach(f),A.forEach(f),E=D(P),v=u(P,"DIV",{class:!0});var G=p(v);w=u(G,"DIV",{class:!0,style:!0}),p(w).forEach(f),G.forEach(f),P.forEach(f),this.h()},h(){i(s,"class","text-xs font-medieval text-neutral/70"),i(c,"class","text-lg sm:text-xl"),i(C,"class",_="font-medieval text-xs sm:text-sm "+l[4].color+" font-bold"),i(r,"class","flex items-center gap-1"),i(t,"class","flex items-center justify-between gap-2"),i(w,"class",x="bg-"+l[6]+" h-full rounded-full transition-all duration-300"),_t(w,"width",l[3]+"%"),i(v,"class","w-full bg-neutral/20 rounded-full h-1.5 sm:h-2 mt-1"),i(e,"class",I="bg-"+l[6]+"/10 p-2 rounded-lg border border-"+l[6]+"/30")},m(V,P){J(V,e,P),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(c,b),n(r,h),n(r,C),n(C,y),n(e,E),n(e,v),n(v,w)},p(V,P){P&16&&m!==(m=V[4].icon+"")&&re(b,m),P&16&&g!==(g=V[4].label+"")&&re(y,g),P&16&&_!==(_="font-medieval text-xs sm:text-sm "+V[4].color+" font-bold")&&i(C,"class",_),P&64&&x!==(x="bg-"+V[6]+" h-full rounded-full transition-all duration-300")&&i(w,"class",x),P&8&&_t(w,"width",V[3]+"%"),P&64&&I!==(I="bg-"+V[6]+"/10 p-2 rounded-lg border border-"+V[6]+"/30")&&i(e,"class",I)},d(V){V&&f(e)}}}function ys(l){let e,t,s="Puntos de Vida",a,o,r=l[0].currentHp+"",c,m,b=l[0].maxHp+"",h,C,g,y,_,E;return{c(){e=d("div"),t=d("span"),t.textContent=s,a=T(),o=d("span"),c=U(r),m=U("/"),h=U(b),C=T(),g=d("progress"),this.h()},l(v){e=u(v,"DIV",{class:!0});var w=p(e);t=u(w,"SPAN",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1a9ef08"&&(t.textContent=s),a=D(w),o=u(w,"SPAN",{class:!0});var x=p(o);c=B(x,r),m=B(x,"/"),h=B(x,b),x.forEach(f),w.forEach(f),C=D(v),g=u(v,"PROGRESS",{class:!0,max:!0}),p(g).forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70"),i(o,"class","font-bold text-neutral text-sm sm:text-base"),i(e,"class","flex justify-between items-center mb-1"),i(g,"class",y="progress progress-"+l[6]+" w-full h-2 sm:h-3"),g.value=_=l[0].currentHp,i(g,"max",E=l[0].maxHp)},m(v,w){J(v,e,w),n(e,t),n(e,a),n(e,o),n(o,c),n(o,m),n(o,h),J(v,C,w),J(v,g,w)},p(v,w){w&1&&r!==(r=v[0].currentHp+"")&&re(c,r),w&1&&b!==(b=v[0].maxHp+"")&&re(h,b),w&64&&y!==(y="progress progress-"+v[6]+" w-full h-2 sm:h-3")&&i(g,"class",y),w&1&&_!==(_=v[0].currentHp)&&(g.value=_),w&1&&E!==(E=v[0].maxHp)&&i(g,"max",E)},d(v){v&&(f(e),f(C),f(g))}}}function kl(l){let e,t,s="Condiciones:",a,o,r=Ne(l[0].conditions),c=[];for(let m=0;m<r.length;m+=1)c[m]=wl(gl(l,r,m));return{c(){e=d("div"),t=d("span"),t.textContent=s,a=T(),o=d("div");for(let m=0;m<c.length;m+=1)c[m].c();this.h()},l(m){e=u(m,"DIV",{class:!0});var b=p(e);t=u(b,"SPAN",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-maxnwi"&&(t.textContent=s),a=D(b),o=u(b,"DIV",{class:!0});var h=p(o);for(let C=0;C<c.length;C+=1)c[C].l(h);h.forEach(f),b.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 block mb-1"),i(o,"class","flex flex-wrap gap-1"),i(e,"class","mt-2")},m(m,b){J(m,e,b),n(e,t),n(e,a),n(e,o);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null)},p(m,b){if(b&1){r=Ne(m[0].conditions);let h;for(h=0;h<r.length;h+=1){const C=gl(m,r,h);c[h]?c[h].p(C,b):(c[h]=wl(C),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=r.length}},d(m){m&&f(e),it(c,m)}}}function wl(l){let e,t=l[11]+"",s;return{c(){e=d("div"),s=U(t),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=p(e);s=B(o,t),o.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm badge-warning")},m(a,o){J(a,e,o),n(e,s)},p(a,o){o&1&&t!==(t=a[11]+"")&&re(s,t)},d(a){a&&f(e)}}}function Il(l){let e,t,s="üíö HP",a,o,r="‚ö†Ô∏è Estado",c,m;return{c(){e=d("div"),t=d("button"),t.textContent=s,a=T(),o=d("button"),o.textContent=r,this.h()},l(b){e=u(b,"DIV",{class:!0});var h=p(e);t=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1u8cl5l"&&(t.textContent=s),a=D(h),o=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-1lc9vql"&&(o.textContent=r),h.forEach(f),this.h()},h(){i(t,"class","btn btn-xs sm:btn-sm btn-success flex-1"),i(o,"class","btn btn-xs sm:btn-sm btn-warning flex-1"),i(e,"class","flex gap-2 mt-3")},m(b,h){J(b,e,h),n(e,t),n(e,a),n(e,o),c||(m=[oe(t,"click",l[7]),oe(o,"click",l[8])],c=!0)},p:Ce,d(b){b&&f(e),c=!1,et(m)}}}function Es(l){let e,t,s,a,o,r,c,m,b,h=l[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",C,g,y,_,E,v=l[0].name+"",w,x,I,V,P,A=l[0].initiative+"",k,H,S,G,j,F,M,q,L=l[1]&&xl(),O=l[5]&&Cl(),X=l[2]&&yl(l),se=l[2]&&El(l);function ie(R,Z){return R[2]?ys:Cs}let ne=ie(l),ee=ne(l),W=l[0].conditions&&l[0].conditions.length>0&&kl(l),te=l[2]&&Il(l);return{c(){e=d("div"),L&&L.c(),t=T(),O&&O.c(),s=T(),a=d("div"),o=d("div"),r=d("div"),c=d("div"),m=d("div"),b=d("span"),C=U(h),y=T(),_=d("div"),E=d("h3"),w=U(v),x=T(),I=d("div"),V=d("div"),P=U("üé≤ "),k=U(A),H=T(),X&&X.c(),S=T(),se&&se.c(),G=T(),j=d("div"),ee.c(),F=T(),W&&W.c(),M=T(),te&&te.c(),this.h()},l(R){e=u(R,"DIV",{class:!0});var Z=p(e);L&&L.l(Z),t=D(Z),O&&O.l(Z),s=D(Z),a=u(Z,"DIV",{class:!0});var Y=p(a);o=u(Y,"DIV",{class:!0});var ce=p(o);r=u(ce,"DIV",{class:!0});var ae=p(r);c=u(ae,"DIV",{class:!0});var ge=p(c);m=u(ge,"DIV",{class:!0});var pe=p(m);b=u(pe,"SPAN",{class:!0});var _e=p(b);C=B(_e,h),_e.forEach(f),pe.forEach(f),ge.forEach(f),ae.forEach(f),y=D(ce),_=u(ce,"DIV",{class:!0});var K=p(_);E=u(K,"H3",{class:!0});var fe=p(E);w=B(fe,v),fe.forEach(f),x=D(K),I=u(K,"DIV",{class:!0});var de=p(I);V=u(de,"DIV",{class:!0});var le=p(V);P=B(le,"üé≤ "),k=B(le,A),le.forEach(f),H=D(de),X&&X.l(de),de.forEach(f),K.forEach(f),S=D(ce),se&&se.l(ce),ce.forEach(f),G=D(Y),j=u(Y,"DIV",{class:!0});var N=p(j);ee.l(N),N.forEach(f),F=D(Y),W&&W.l(Y),M=D(Y),te&&te.l(Y),Y.forEach(f),Z.forEach(f),this.h()},h(){i(b,"class","text-xl sm:text-2xl"),i(m,"class","bg-primary/20 flex items-center justify-center"),i(c,"class",g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(l[1]?"ring-secondary":"ring-primary/50")),i(r,"class","avatar flex-shrink-0"),i(E,"class","font-medieval text-base sm:text-lg text-neutral font-bold truncate"),i(V,"class","badge badge-xs sm:badge-sm bg-primary/30 text-neutral border-primary/50"),i(I,"class","flex flex-wrap gap-1 sm:gap-2 mt-1"),i(_,"class","flex-1 min-w-0"),i(o,"class","flex items-start gap-2 sm:gap-3"),i(j,"class","mt-2 sm:mt-3"),i(a,"class","card-body p-3 sm:p-4"),i(e,"class",q="card-parchment corner-ornament relative "+(l[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(l[5]?"opacity-50":""))},m(R,Z){J(R,e,Z),L&&L.m(e,null),n(e,t),O&&O.m(e,null),n(e,s),n(e,a),n(a,o),n(o,r),n(r,c),n(c,m),n(m,b),n(b,C),n(o,y),n(o,_),n(_,E),n(E,w),n(_,x),n(_,I),n(I,V),n(V,P),n(V,k),n(I,H),X&&X.m(I,null),n(o,S),se&&se.m(o,null),n(a,G),n(a,j),ee.m(j,null),n(a,F),W&&W.m(a,null),n(a,M),te&&te.m(a,null)},p(R,[Z]){R[1]?L||(L=xl(),L.c(),L.m(e,t)):L&&(L.d(1),L=null),R[5]?O||(O=Cl(),O.c(),O.m(e,s)):O&&(O.d(1),O=null),Z&1&&h!==(h=R[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(C,h),Z&2&&g!==(g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(R[1]?"ring-secondary":"ring-primary/50"))&&i(c,"class",g),Z&1&&v!==(v=R[0].name+"")&&re(w,v),Z&1&&A!==(A=R[0].initiative+"")&&re(k,A),R[2]?X?X.p(R,Z):(X=yl(R),X.c(),X.m(I,null)):X&&(X.d(1),X=null),R[2]?se?se.p(R,Z):(se=El(R),se.c(),se.m(o,null)):se&&(se.d(1),se=null),ne===(ne=ie(R))&&ee?ee.p(R,Z):(ee.d(1),ee=ne(R),ee&&(ee.c(),ee.m(j,null))),R[0].conditions&&R[0].conditions.length>0?W?W.p(R,Z):(W=kl(R),W.c(),W.m(a,M)):W&&(W.d(1),W=null),R[2]?te?te.p(R,Z):(te=Il(R),te.c(),te.m(a,null)):te&&(te.d(1),te=null),Z&34&&q!==(q="card-parchment corner-ornament relative "+(R[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(R[5]?"opacity-50":""))&&i(e,"class",q)},i:Ce,o:Ce,d(R){R&&f(e),L&&L.d(),O&&O.d(),X&&X.d(),se&&se.d(),ee.d(),W&&W.d(),te&&te.d()}}}function ks(l){return l<=0?{label:"Ca√≠do",icon:"üíÄ",color:"text-error"}:l<25?{label:"Gravemente herido",icon:"ü©∏",color:"text-error"}:l<50?{label:"Herido",icon:"ü§ï",color:"text-warning"}:l<75?{label:"Lastimado",icon:"üò£",color:"text-warning"}:l<100?{label:"Ligeramente herido",icon:"üòê",color:"text-success"}:{label:"Ileso",icon:"üí™",color:"text-success"}}function ws(l,e,t){let s,a,o,r,{combatant:c}=e,{isCurrentTurn:m=!1}=e,{isDM:b=!1}=e;const h=zt();function C(){h("updateHP",c)}function g(){h("addCondition",c)}function y(){h("remove",c)}return l.$$set=_=>{"combatant"in _&&t(0,c=_.combatant),"isCurrentTurn"in _&&t(1,m=_.isCurrentTurn),"isDM"in _&&t(2,b=_.isDM)},l.$$.update=()=>{l.$$.dirty&1&&t(3,s=c.currentHp/c.maxHp*100),l.$$.dirty&8&&t(6,a=s>50?"success":s>25?"warning":"error"),l.$$.dirty&1&&t(5,o=c.currentHp<=0),l.$$.dirty&8&&t(4,r=ks(s))},[c,m,b,s,r,o,a,C,g,y]}class Is extends xt{constructor(e){super(),Ct(this,e,ws,Es,yt,{combatant:0,isCurrentTurn:1,isDM:2})}}var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ds(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Ts(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var rs=Ts,Vs=typeof Ot=="object"&&Ot&&Ot.Object===Object&&Ot,Hs=Vs,Ms=Hs,As=typeof self=="object"&&self&&self.Object===Object&&self,Ps=Ms||As||Function("return this")(),as=Ps,Ls=as,Ns=function(){return Ls.Date.now()},Os=Ns,Ss=/\s/;function js(l){for(var e=l.length;e--&&Ss.test(l.charAt(e)););return e}var Bs=js,Us=Bs,zs=/^\s+/;function Rs(l){return l&&l.slice(0,Us(l)+1).replace(zs,"")}var Fs=Rs,qs=as,Gs=qs.Symbol,os=Gs,Dl=os,is=Object.prototype,Ws=is.hasOwnProperty,Qs=is.toString,vt=Dl?Dl.toStringTag:void 0;function Js(l){var e=Ws.call(l,vt),t=l[vt];try{l[vt]=void 0;var s=!0}catch{}var a=Qs.call(l);return s&&(e?l[vt]=t:delete l[vt]),a}var Ks=Js,Xs=Object.prototype,Zs=Xs.toString;function Ys(l){return Zs.call(l)}var $s=Ys,Tl=os,en=Ks,tn=$s,ln="[object Null]",sn="[object Undefined]",Vl=Tl?Tl.toStringTag:void 0;function nn(l){return l==null?l===void 0?sn:ln:Vl&&Vl in Object(l)?en(l):tn(l)}var rn=nn;function an(l){return l!=null&&typeof l=="object"}var on=an,cn=rn,un=on,dn="[object Symbol]";function fn(l){return typeof l=="symbol"||un(l)&&cn(l)==dn}var mn=fn,hn=Fs,Hl=rs,bn=mn,Ml=NaN,pn=/^[-+]0x[0-9a-f]+$/i,vn=/^0b[01]+$/i,_n=/^0o[0-7]+$/i,gn=parseInt;function xn(l){if(typeof l=="number")return l;if(bn(l))return Ml;if(Hl(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=Hl(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=hn(l);var t=vn.test(l);return t||_n.test(l)?gn(l.slice(2),t?2:8):pn.test(l)?Ml:+l}var Cn=xn,yn=rs,Zt=Os,Al=Cn,En="Expected a function",kn=Math.max,wn=Math.min;function In(l,e,t){var s,a,o,r,c,m,b=0,h=!1,C=!1,g=!0;if(typeof l!="function")throw new TypeError(En);e=Al(e)||0,yn(t)&&(h=!!t.leading,C="maxWait"in t,o=C?kn(Al(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g);function y(A){var k=s,H=a;return s=a=void 0,b=A,r=l.apply(H,k),r}function _(A){return b=A,c=setTimeout(w,e),h?y(A):r}function E(A){var k=A-m,H=A-b,S=e-k;return C?wn(S,o-H):S}function v(A){var k=A-m,H=A-b;return m===void 0||k>=e||k<0||C&&H>=o}function w(){var A=Zt();if(v(A))return x(A);c=setTimeout(w,E(A))}function x(A){return c=void 0,g&&s?y(A):(s=a=void 0,r)}function I(){c!==void 0&&clearTimeout(c),b=0,s=m=a=c=void 0}function V(){return c===void 0?r:x(Zt())}function P(){var A=Zt(),k=v(A);if(s=arguments,a=this,m=A,k){if(c===void 0)return _(m);if(C)return clearTimeout(c),c=setTimeout(w,e),y(m)}return c===void 0&&(c=setTimeout(w,e)),r}return P.cancel=I,P.flush=V,P}var Dn=In;const cs=Ds(Dn);function Pl(l,e,t){const s=l.slice();return s[49]=e[t],s}function Ll(l,e,t){const s=l.slice();return s[46]=e[t],s}function Nl(l){let e,t,s,a,o="‚öîÔ∏è Agregar Combatiente",r,c,m,b,h,C,g,y,_,E,v,w,x,I="‚úï",V,P,A,k,H,S="Cancelar",G,j,F,M="‚öîÔ∏è",q,L,O,X;function se(ee,W){return ee[2]==="player"?Vn:Tn}let ie=se(l),ne=ie(l);return{c(){e=d("div"),t=d("div"),s=d("div"),a=d("h3"),a.textContent=o,r=T(),c=d("div"),m=d("button"),b=U("üßù Jugador"),g=T(),y=d("button"),_=U("üêâ Monstruo"),w=T(),x=d("button"),x.textContent=I,V=T(),P=d("div"),ne.c(),A=T(),k=d("div"),H=d("button"),H.textContent=S,G=T(),j=d("button"),F=d("span"),F.textContent=M,q=U(" Agregar al Combate"),this.h()},l(ee){e=u(ee,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var W=p(e);t=u(W,"DIV",{class:!0});var te=p(t);s=u(te,"DIV",{class:!0});var R=p(s);a=u(R,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(a)!=="svelte-cw4yad"&&(a.textContent=o),r=D(R),c=u(R,"DIV",{class:!0,role:!0,"aria-label":!0});var Z=p(c);m=u(Z,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var Y=p(m);b=B(Y,"üßù Jugador"),Y.forEach(f),g=D(Z),y=u(Z,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var ce=p(y);_=B(ce,"üêâ Monstruo"),ce.forEach(f),Z.forEach(f),w=D(R),x=u(R,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(x)!=="svelte-1j9u8d0"&&(x.textContent=I),R.forEach(f),V=D(te),P=u(te,"DIV",{class:!0});var ae=p(P);ne.l(ae),ae.forEach(f),A=D(te),k=u(te,"DIV",{class:!0});var ge=p(k);H=u(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),z(H)!=="svelte-toewbe"&&(H.textContent=S),G=D(ge),j=u(ge,"BUTTON",{class:!0});var pe=p(j);F=u(pe,"SPAN",{class:!0,"data-svelte-h":!0}),z(F)!=="svelte-v5ojki"&&(F.textContent=M),q=B(pe," Agregar al Combate"),pe.forEach(f),ge.forEach(f),te.forEach(f),W.forEach(f),this.h()},h(){i(a,"id","modal-title"),i(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),i(m,"role","tab"),i(m,"aria-selected",h=l[2]==="player"),i(m,"aria-controls","player-panel"),i(m,"class",C="btn btn-sm font-medieval "+(l[2]==="player"?"btn-primary":"btn-outline")),i(y,"role","tab"),i(y,"aria-selected",E=l[2]==="monster"),i(y,"aria-controls","monster-panel"),i(y,"class",v="btn btn-sm font-medieval "+(l[2]==="monster"?"btn-primary":"btn-outline")),i(c,"class","flex gap-2"),i(c,"role","tablist"),i(c,"aria-label","Tipo de combatiente"),i(x,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),i(x,"aria-label","Cerrar modal"),i(s,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),i(P,"class","flex-1 overflow-y-auto p-4 space-y-4"),i(H,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),i(F,"class","text-xl"),i(j,"class","btn btn-dnd w-full md:w-auto"),j.disabled=L=l[2]==="player"?!l[16]:!l[15],i(k,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),i(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","modal-title")},m(ee,W){J(ee,e,W),n(e,t),n(t,s),n(s,a),n(s,r),n(s,c),n(c,m),n(m,b),n(c,g),n(c,y),n(y,_),n(s,w),n(s,x),n(t,V),n(t,P),ne.m(P,null),n(t,A),n(t,k),n(k,H),n(k,G),n(k,j),n(j,F),n(j,q),O||(X=[oe(m,"click",l[23]),oe(y,"click",l[24]),oe(x,"click",l[22]),oe(H,"click",l[22]),oe(j,"click",function(){us(l[2]==="player"?l[18]:l[21])&&(l[2]==="player"?l[18]:l[21]).apply(this,arguments)}),oe(e,"keydown",l[38])],O=!0)},p(ee,W){l=ee,W[0]&4&&h!==(h=l[2]==="player")&&i(m,"aria-selected",h),W[0]&4&&C!==(C="btn btn-sm font-medieval "+(l[2]==="player"?"btn-primary":"btn-outline"))&&i(m,"class",C),W[0]&4&&E!==(E=l[2]==="monster")&&i(y,"aria-selected",E),W[0]&4&&v!==(v="btn btn-sm font-medieval "+(l[2]==="monster"?"btn-primary":"btn-outline"))&&i(y,"class",v),ie===(ie=se(l))&&ne?ne.p(l,W):(ne.d(1),ne=ie(l),ne&&(ne.c(),ne.m(P,null))),W[0]&98308&&L!==(L=l[2]==="player"?!l[16]:!l[15])&&(j.disabled=L)},d(ee){ee&&f(e),ne.d(),O=!1,et(X)}}}function Tn(l){let e,t,s,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',o,r,c,m,b='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',h,C,g,y,_,E,v,w='<span class="label-text font-medieval text-neutral">Nombre <span class="text-error">*</span></span>',x,I,V,P,A,k,H,S,G='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',j,F,M,q,L,O,X,se='<span class="label-text font-medieval text-neutral">HP M√°ximo <span class="text-error">*</span></span>',ie,ne,ee,W,te,R,Z,Y='<span class="label-text font-medieval text-neutral">AC <span class="text-error">*</span></span>',ce,ae,ge,pe,_e,K,fe=l[13]&&Ol(),de=l[14]&&!l[13]&&Sl(),le=l[12].length>0&&!l[13]&&jl(l),N=l[8].name&&l[9].name&&Ul(l),$=l[8].initiative&&l[9].initiative&&zl(l),me=l[8].maxHp&&l[9].maxHp&&Rl(l),ue=l[8].armorClass&&l[9].armorClass&&Fl(l);return{c(){e=d("div"),t=d("div"),s=d("label"),s.innerHTML=a,o=T(),r=d("input"),c=T(),m=d("label"),m.innerHTML=b,h=T(),fe&&fe.c(),C=T(),de&&de.c(),g=T(),le&&le.c(),y=T(),_=d("div"),E=d("div"),v=d("label"),v.innerHTML=w,x=T(),I=d("input"),P=T(),N&&N.c(),A=T(),k=d("div"),H=d("div"),S=d("label"),S.innerHTML=G,j=T(),F=d("input"),q=T(),$&&$.c(),L=T(),O=d("div"),X=d("label"),X.innerHTML=se,ie=T(),ne=d("input"),W=T(),me&&me.c(),te=T(),R=d("div"),Z=d("label"),Z.innerHTML=Y,ce=T(),ae=d("input"),pe=T(),ue&&ue.c(),this.h()},l(Q){e=u(Q,"DIV",{class:!0});var he=p(e);t=u(he,"DIV",{class:!0});var we=p(t);s=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1s7wqfp"&&(s.innerHTML=a),o=D(we),r=u(we,"INPUT",{type:!0,placeholder:!0,class:!0}),c=D(we),m=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1b81k6w"&&(m.innerHTML=b),we.forEach(f),h=D(he),fe&&fe.l(he),C=D(he),de&&de.l(he),g=D(he),le&&le.l(he),y=D(he),_=u(he,"DIV",{class:!0});var Re=p(_);E=u(Re,"DIV",{class:!0});var Ae=p(E);v=u(Ae,"LABEL",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1i5ppw8"&&(v.innerHTML=w),x=D(Ae),I=u(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),P=D(Ae),N&&N.l(Ae),Ae.forEach(f),A=D(Re),k=u(Re,"DIV",{class:!0});var ye=p(k);H=u(ye,"DIV",{class:!0});var Ie=p(H);S=u(Ie,"LABEL",{class:!0,"data-svelte-h":!0}),z(S)!=="svelte-wfd6ji"&&(S.innerHTML=G),j=D(Ie),F=u(Ie,"INPUT",{type:!0,min:!0,max:!0,class:!0}),q=D(Ie),$&&$.l(Ie),Ie.forEach(f),L=D(ye),O=u(ye,"DIV",{class:!0});var Ve=p(O);X=u(Ve,"LABEL",{class:!0,"data-svelte-h":!0}),z(X)!=="svelte-1ah5i3w"&&(X.innerHTML=se),ie=D(Ve),ne=u(Ve,"INPUT",{type:!0,min:!0,max:!0,class:!0}),W=D(Ve),me&&me.l(Ve),Ve.forEach(f),te=D(ye),R=u(ye,"DIV",{class:!0});var Oe=p(R);Z=u(Oe,"LABEL",{class:!0,"data-svelte-h":!0}),z(Z)!=="svelte-1yx9bl7"&&(Z.innerHTML=Y),ce=D(Oe),ae=u(Oe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),pe=D(Oe),ue&&ue.l(Oe),Oe.forEach(f),ye.forEach(f),Re.forEach(f),he.forEach(f),this.h()},h(){i(s,"class","label"),i(r,"type","text"),i(r,"placeholder","Ej: kobold, goblin, dragon..."),i(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),i(m,"class","label"),i(t,"class","form-control mb-4"),i(v,"class","label"),i(I,"type","text"),i(I,"placeholder","Nombre de la criatura"),i(I,"class",V="input input-bordered bg-[#2d241c] text-base-content "+(l[8].name&&l[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(E,"class","form-control"),i(S,"class","label"),i(F,"type","number"),i(F,"min","1"),i(F,"max","100"),i(F,"class",M="input input-bordered bg-[#2d241c] text-base-content "+(l[8].initiative&&l[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(H,"class","form-control"),i(X,"class","label"),i(ne,"type","number"),i(ne,"min","1"),i(ne,"max","999"),i(ne,"class",ee="input input-bordered bg-[#2d241c] text-base-content "+(l[8].maxHp&&l[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(O,"class","form-control"),i(Z,"class","label"),i(ae,"type","number"),i(ae,"min","1"),i(ae,"max","30"),i(ae,"class",ge="input input-bordered bg-[#2d241c] text-base-content "+(l[8].armorClass&&l[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(R,"class","form-control"),i(k,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),i(_,"class","space-y-4"),i(e,"class","space-y-4")},m(Q,he){J(Q,e,he),n(e,t),n(t,s),n(t,o),n(t,r),ke(r,l[11]),n(t,c),n(t,m),n(e,h),fe&&fe.m(e,null),n(e,C),de&&de.m(e,null),n(e,g),le&&le.m(e,null),n(e,y),n(e,_),n(_,E),n(E,v),n(E,x),n(E,I),ke(I,l[5]),n(E,P),N&&N.m(E,null),n(_,A),n(_,k),n(k,H),n(H,S),n(H,j),n(H,F),ke(F,l[3]),n(H,q),$&&$.m(H,null),n(k,L),n(k,O),n(O,X),n(O,ie),n(O,ne),ke(ne,l[6]),n(O,W),me&&me.m(O,null),n(k,te),n(k,R),n(R,Z),n(R,ce),n(R,ae),ke(ae,l[7]),n(R,pe),ue&&ue.m(R,null),_e||(K=[oe(r,"input",l[28]),oe(r,"input",l[19]),oe(I,"input",l[30]),oe(I,"blur",l[31]),oe(F,"input",l[32]),oe(F,"blur",l[33]),oe(ne,"input",l[34]),oe(ne,"blur",l[35]),oe(ae,"input",l[36]),oe(ae,"blur",l[37])],_e=!0)},p(Q,he){he[0]&2048&&r.value!==Q[11]&&ke(r,Q[11]),Q[13]?fe||(fe=Ol(),fe.c(),fe.m(e,C)):fe&&(fe.d(1),fe=null),Q[14]&&!Q[13]?de||(de=Sl(),de.c(),de.m(e,g)):de&&(de.d(1),de=null),Q[12].length>0&&!Q[13]?le?le.p(Q,he):(le=jl(Q),le.c(),le.m(e,y)):le&&(le.d(1),le=null),he[0]&768&&V!==(V="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].name&&Q[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(I,"class",V),he[0]&32&&I.value!==Q[5]&&ke(I,Q[5]),Q[8].name&&Q[9].name?N?N.p(Q,he):(N=Ul(Q),N.c(),N.m(E,null)):N&&(N.d(1),N=null),he[0]&768&&M!==(M="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].initiative&&Q[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(F,"class",M),he[0]&8&&Xe(F.value)!==Q[3]&&ke(F,Q[3]),Q[8].initiative&&Q[9].initiative?$?$.p(Q,he):($=zl(Q),$.c(),$.m(H,null)):$&&($.d(1),$=null),he[0]&768&&ee!==(ee="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].maxHp&&Q[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(ne,"class",ee),he[0]&64&&Xe(ne.value)!==Q[6]&&ke(ne,Q[6]),Q[8].maxHp&&Q[9].maxHp?me?me.p(Q,he):(me=Rl(Q),me.c(),me.m(O,null)):me&&(me.d(1),me=null),he[0]&768&&ge!==(ge="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].armorClass&&Q[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(ae,"class",ge),he[0]&128&&Xe(ae.value)!==Q[7]&&ke(ae,Q[7]),Q[8].armorClass&&Q[9].armorClass?ue?ue.p(Q,he):(ue=Fl(Q),ue.c(),ue.m(R,null)):ue&&(ue.d(1),ue=null)},d(Q){Q&&f(e),fe&&fe.d(),de&&de.d(),le&&le.d(),N&&N.d(),$&&$.d(),me&&me.d(),ue&&ue.d(),_e=!1,et(K)}}}function Vn(l){var te,R,Z;let e,t,s,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador <span class="text-error">*</span></span>',o,r,c,m="-- Elegir jugador --",b,h,C,g='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',y,_,E,v,w,x,I,V,P,A=(((te=l[10])==null?void 0:te.name)||"Elegir jugador")+"",k,H,S,G,j=(((R=l[10])==null?void 0:R.maxHp)||0)+"",F,M,q=(((Z=l[10])==null?void 0:Z.armorClass)||0)+"",L,O,X,se=Ne(l[1]),ie=[];for(let Y=0;Y<se.length;Y+=1)ie[Y]=ql(Ll(l,se,Y));function ne(Y,ce){return Y[8].initiative&&Y[9].initiative?Mn:Hn}let ee=ne(l),W=ee(l);return{c(){e=d("div"),t=d("div"),s=d("label"),s.innerHTML=a,o=T(),r=d("select"),c=d("option"),c.textContent=m;for(let Y=0;Y<ie.length;Y+=1)ie[Y].c();b=T(),h=d("div"),C=d("label"),C.innerHTML=g,y=T(),_=d("input"),v=T(),W.c(),w=T(),x=d("div"),I=d("div"),V=d("div"),P=d("p"),k=U(A),H=T(),S=d("p"),G=U("HP: "),F=U(j),M=U(" | AC: "),L=U(q),this.h()},l(Y){e=u(Y,"DIV",{class:!0});var ce=p(e);t=u(ce,"DIV",{class:!0});var ae=p(t);s=u(ae,"LABEL",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-aatn1l"&&(s.innerHTML=a),o=D(ae),r=u(ae,"SELECT",{class:!0});var ge=p(r);c=u(ge,"OPTION",{"data-svelte-h":!0}),z(c)!=="svelte-ws9sqz"&&(c.textContent=m);for(let N=0;N<ie.length;N+=1)ie[N].l(ge);ge.forEach(f),ae.forEach(f),b=D(ce),h=u(ce,"DIV",{class:!0});var pe=p(h);C=u(pe,"LABEL",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1kjkdwe"&&(C.innerHTML=g),y=D(pe),_=u(pe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),v=D(pe),W.l(pe),pe.forEach(f),w=D(ce),x=u(ce,"DIV",{class:!0});var _e=p(x);I=u(_e,"DIV",{class:!0});var K=p(I);V=u(K,"DIV",{});var fe=p(V);P=u(fe,"P",{class:!0});var de=p(P);k=B(de,A),de.forEach(f),H=D(fe),S=u(fe,"P",{class:!0});var le=p(S);G=B(le,"HP: "),F=B(le,j),M=B(le," | AC: "),L=B(le,q),le.forEach(f),fe.forEach(f),K.forEach(f),_e.forEach(f),ce.forEach(f),this.h()},h(){i(s,"class","label"),c.__value="",ke(c,c.__value),c.disabled=!0,c.selected=!0,i(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),l[4]===void 0&&fs(()=>l[25].call(r)),i(t,"class","form-control"),i(C,"class","label"),i(_,"type","number"),i(_,"min","1"),i(_,"max","100"),i(_,"step","1"),_.required=!0,i(_,"class",E="input input-bordered bg-[#2d241c] text-base-content "+(l[8].initiative&&l[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(h,"class","form-control"),i(P,"class","text-lg font-bold text-neutral"),i(S,"class","text-sm text-neutral/70"),i(I,"class","flex items-center gap-4"),i(x,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),i(e,"class","space-y-4")},m(Y,ce){J(Y,e,ce),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c);for(let ae=0;ae<ie.length;ae+=1)ie[ae]&&ie[ae].m(r,null);ul(r,l[4],!0),n(e,b),n(e,h),n(h,C),n(h,y),n(h,_),ke(_,l[3]),n(h,v),W.m(h,null),n(e,w),n(e,x),n(x,I),n(I,V),n(V,P),n(P,k),n(V,H),n(V,S),n(S,G),n(S,F),n(S,M),n(S,L),O||(X=[oe(r,"change",l[25]),oe(_,"input",l[26]),oe(_,"blur",l[27])],O=!0)},p(Y,ce){var ae,ge,pe;if(ce[0]&2){se=Ne(Y[1]);let _e;for(_e=0;_e<se.length;_e+=1){const K=Ll(Y,se,_e);ie[_e]?ie[_e].p(K,ce):(ie[_e]=ql(K),ie[_e].c(),ie[_e].m(r,null))}for(;_e<ie.length;_e+=1)ie[_e].d(1);ie.length=se.length}ce[0]&18&&ul(r,Y[4]),ce[0]&768&&E!==(E="input input-bordered bg-[#2d241c] text-base-content "+(Y[8].initiative&&Y[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(_,"class",E),ce[0]&8&&Xe(_.value)!==Y[3]&&ke(_,Y[3]),ee===(ee=ne(Y))&&W?W.p(Y,ce):(W.d(1),W=ee(Y),W&&(W.c(),W.m(h,null))),ce[0]&1024&&A!==(A=(((ae=Y[10])==null?void 0:ae.name)||"Elegir jugador")+"")&&re(k,A),ce[0]&1024&&j!==(j=(((ge=Y[10])==null?void 0:ge.maxHp)||0)+"")&&re(F,j),ce[0]&1024&&q!==(q=(((pe=Y[10])==null?void 0:pe.armorClass)||0)+"")&&re(L,q)},d(Y){Y&&f(e),it(ie,Y),W.d(),O=!1,et(X)}}}function Ol(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex justify-center items-center py-4")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Sl(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert bg-warning/20 border-warning/40")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function jl(l){let e,t,s,a=l[12].length+"",o,r,c=l[12].length!==1?"s":"",m,b,h=l[12].length!==1?"s":"",C,g,y,_=Ne(l[12]),E=[];for(let v=0;v<_.length;v+=1)E[v]=Bl(Pl(l,_,v));return{c(){e=d("div"),t=d("p"),s=U("üìñ "),o=U(a),r=U(" criatura"),m=U(c),b=U(" encontrada"),C=U(h),g=T(),y=d("div");for(let v=0;v<E.length;v+=1)E[v].c();this.h()},l(v){e=u(v,"DIV",{class:!0});var w=p(e);t=u(w,"P",{class:!0});var x=p(t);s=B(x,"üìñ "),o=B(x,a),r=B(x," criatura"),m=B(x,c),b=B(x," encontrada"),C=B(x,h),x.forEach(f),g=D(w),y=u(w,"DIV",{class:!0});var I=p(y);for(let V=0;V<E.length;V+=1)E[V].l(I);I.forEach(f),w.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 mb-2"),i(y,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),i(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(v,w){J(v,e,w),n(e,t),n(t,s),n(t,o),n(t,r),n(t,m),n(t,b),n(t,C),n(e,g),n(e,y);for(let x=0;x<E.length;x+=1)E[x]&&E[x].m(y,null)},p(v,w){if(w[0]&4096&&a!==(a=v[12].length+"")&&re(o,a),w[0]&4096&&c!==(c=v[12].length!==1?"s":"")&&re(m,c),w[0]&4096&&h!==(h=v[12].length!==1?"s":"")&&re(C,h),w[0]&1052672){_=Ne(v[12]);let x;for(x=0;x<_.length;x+=1){const I=Pl(v,_,x);E[x]?E[x].p(I,w):(E[x]=Bl(I),E[x].c(),E[x].m(y,null))}for(;x<E.length;x+=1)E[x].d(1);E.length=_.length}},d(v){v&&f(e),it(E,v)}}}function Bl(l){let e,t,s,a=l[49].name+"",o,r,c,m=l[49].type+"",b,h,C=l[49].challenge_rating+"",g,y,_,E="Seleccionar",v,w,x;function I(){return l[29](l[49])}return{c(){e=d("button"),t=d("div"),s=d("span"),o=U(a),r=T(),c=d("span"),b=U(m),h=U(" | CR "),g=U(C),y=T(),_=d("span"),_.textContent=E,v=T(),this.h()},l(V){e=u(V,"BUTTON",{class:!0});var P=p(e);t=u(P,"DIV",{class:!0});var A=p(t);s=u(A,"SPAN",{class:!0});var k=p(s);o=B(k,a),k.forEach(f),r=D(A),c=u(A,"SPAN",{class:!0});var H=p(c);b=B(H,m),h=B(H," | CR "),g=B(H,C),H.forEach(f),A.forEach(f),y=D(P),_=u(P,"SPAN",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-15711il"&&(_.textContent=E),v=D(P),P.forEach(f),this.h()},h(){i(s,"class","font-bold text-neutral block"),i(c,"class","text-xs text-neutral/60"),i(t,"class","flex-1"),i(_,"class","text-xs badge badge-sm badge-primary"),i(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(V,P){J(V,e,P),n(e,t),n(t,s),n(s,o),n(t,r),n(t,c),n(c,b),n(c,h),n(c,g),n(e,y),n(e,_),n(e,v),w||(x=oe(e,"click",I),w=!0)},p(V,P){l=V,P[0]&4096&&a!==(a=l[49].name+"")&&re(o,a),P[0]&4096&&m!==(m=l[49].type+"")&&re(b,m),P[0]&4096&&C!==(C=l[49].challenge_rating+"")&&re(g,C)},d(V){V&&f(e),w=!1,x()}}}function Ul(l){let e,t,s,a=l[8].name+"",o;return{c(){e=d("label"),t=d("span"),s=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=p(e);t=u(c,"SPAN",{class:!0});var m=p(t);s=B(m,"‚ö†Ô∏è "),o=B(m,a),m.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){J(r,e,c),n(e,t),n(t,s),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].name+"")&&re(o,a)},d(r){r&&f(e)}}}function zl(l){let e,t,s=l[8].initiative+"",a;return{c(){e=d("label"),t=d("span"),a=U(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=p(e);t=u(r,"SPAN",{class:!0});var c=p(t);a=B(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].initiative+"")&&re(a,s)},d(o){o&&f(e)}}}function Rl(l){let e,t,s=l[8].maxHp+"",a;return{c(){e=d("label"),t=d("span"),a=U(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=p(e);t=u(r,"SPAN",{class:!0});var c=p(t);a=B(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].maxHp+"")&&re(a,s)},d(o){o&&f(e)}}}function Fl(l){let e,t,s=l[8].armorClass+"",a;return{c(){e=d("label"),t=d("span"),a=U(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=p(e);t=u(r,"SPAN",{class:!0});var c=p(t);a=B(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].armorClass+"")&&re(a,s)},d(o){o&&f(e)}}}function ql(l){let e,t=l[46].name+"",s,a;return{c(){e=d("option"),s=U(t),this.h()},l(o){e=u(o,"OPTION",{});var r=p(e);s=B(r,t),r.forEach(f),this.h()},h(){e.__value=a=l[46].id,ke(e,e.__value)},m(o,r){J(o,e,r),n(e,s)},p(o,r){r[0]&2&&t!==(t=o[46].name+"")&&re(s,t),r[0]&2&&a!==(a=o[46].id)&&(e.__value=a,ke(e,e.__value))},d(o){o&&f(e)}}}function Hn(l){let e,t='<span class="label-text-alt text-neutral/60 italic text-xs">Valor de iniciativa tirado (1-100)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(s){e=u(s,"LABEL",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-18jw2s3"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Mn(l){let e,t,s,a=l[8].initiative+"",o;return{c(){e=d("label"),t=d("span"),s=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=p(e);t=u(c,"SPAN",{class:!0});var m=p(t);s=B(m,"‚ö†Ô∏è "),o=B(m,a),m.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){J(r,e,c),n(e,t),n(t,s),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].initiative+"")&&re(o,a)},d(r){r&&f(e)}}}function An(l){let e,t=l[0]&&Nl(l);return{c(){t&&t.c(),e=ht()},l(s){t&&t.l(s),e=ht()},m(s,a){t&&t.m(s,a),J(s,e,a)},p(s,a){s[0]?t?t.p(s,a):(t=Nl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(s){s&&f(e),t&&t.d(s)}}}function Pn(l,e,t){let s,a,o,{isOpen:r=!1}=e,{players:c=[]}=e;const m=zt();let b="player",h=0,C="",g="",y=[],_=null,E=!1,v=!1,w="",x=0,I=10,V="",P="",A="",k={name:"",initiative:"",maxHp:"",armorClass:""},H={name:!1,initiative:!1,maxHp:!1,armorClass:!1};function S(K){t(9,H[K]=!0,H)}function G(){if(b==="player"){t(9,H.initiative=!0,H);const K=Kt(h);return t(8,k.initiative=K.error||"",k),K.valid&&s!==void 0}else{Object.keys(H).forEach(N=>{t(9,H[N]=!0,H)});const K=hl(w),fe=Kt(h),de=fl(x),le=ml(I);return t(8,k.name=K.error||"",k),t(8,k.initiative=fe.error||"",k),t(8,k.maxHp=de.error||"",k),t(8,k.armorClass=le.error||"",k),K.valid&&fe.valid&&de.valid&&le.valid}}function j(){G()&&s&&(m("add",{type:"character",characterId:s.id,name:s.name,maxHp:s.maxHp,armorClass:s.armorClass,initiative:h,isNpc:!1}),L())}const F=cs(async()=>{const K=g.trim();if(!K){t(12,y=[]),t(14,v=!1);return}t(13,E=!0),t(14,v=!1);try{const fe=await gt.searchMonsters(K);t(12,y=fe.results||[]),t(14,v=y.length===0)}catch(fe){console.error("Error buscando monstruos:",fe),t(12,y=[]),t(14,v=!0)}finally{t(13,E=!1)}},500);async function M(K){_=await gt.getMonster(K.slug),t(5,w=_.name),t(6,x=_.hit_points),t(7,I=_.armor_class),V=_.challenge_rating,_.type,P=_.size,A=_.alignment,t(12,y=[]),t(11,g=""),t(9,H.name=!0,H),t(9,H.maxHp=!0,H),t(9,H.armorClass=!0,H)}function q(){G()&&(m("add",{type:"creature",name:w,initiative:h,maxHp:x,armorClass:I,cr:V,size:P,alignment:A,isNpc:!0}),L())}function L(){t(4,C=""),_=null,t(11,g=""),t(12,y=[]),t(14,v=!1),t(5,w=""),t(3,h=0),t(6,x=0),t(7,I=10),V="",P="",A="",t(13,E=!1),Object.keys(H).forEach(K=>{t(9,H[K]=!1,H)}),Object.keys(k).forEach(K=>{t(8,k[K]="",k)}),m("close")}const O=()=>t(2,b="player"),X=()=>t(2,b="monster");function se(){C=ds(this),t(4,C),t(1,c)}function ie(){h=Xe(this.value),t(3,h)}const ne=()=>S("initiative");function ee(){g=this.value,t(11,g)}const W=K=>M(K);function te(){w=this.value,t(5,w)}const R=()=>S("name");function Z(){h=Xe(this.value),t(3,h)}const Y=()=>S("initiative");function ce(){x=Xe(this.value),t(6,x)}const ae=()=>S("maxHp");function ge(){I=Xe(this.value),t(7,I)}const pe=()=>S("armorClass"),_e=K=>K.key==="Escape"&&L();return l.$$set=K=>{"isOpen"in K&&t(0,r=K.isOpen),"players"in K&&t(1,c=K.players)},l.$$.update=()=>{if(l.$$.dirty[0]&18&&t(10,s=c.find(K=>K.id===C)),l.$$.dirty[0]&548&&H.name&&b==="monster"&&w){const K=hl(w);t(8,k.name=K.valid?"":K.error||"",k)}if(l.$$.dirty[0]&520&&H.initiative&&h!==null){const K=Kt(h);t(8,k.initiative=K.valid?"":K.error||"",k)}if(l.$$.dirty[0]&576&&H.maxHp&&x!==null){const K=fl(x);t(8,k.maxHp=K.valid?"":K.error||"",k)}if(l.$$.dirty[0]&640&&H.armorClass&&I!==null){const K=ml(I);t(8,k.armorClass=K.valid?"":K.error||"",k)}l.$$.dirty[0]&1288&&t(16,a=s&&h>=1&&!k.initiative),l.$$.dirty[0]&488&&t(15,o=!k.name&&!k.initiative&&!k.maxHp&&!k.armorClass&&w.trim()&&x>0&&I>0&&h>=1)},[r,c,b,h,C,w,x,I,k,H,s,g,y,E,v,o,a,S,j,F,M,q,L,O,X,se,ie,ne,ee,W,te,R,Z,Y,ce,ae,ge,pe,_e]}class Ln extends xt{constructor(e){super(),Ct(this,e,Pn,An,yt,{isOpen:0,players:1},null,[-1,-1])}}function Nn(l){let e,t,s,a="üö´",o,r,c="Acceso Denegado",m,b,h="Solo el Dungeon Master puede gestionar los puntos de vida.",C,g,y="Entendido",_,E;return{c(){e=d("div"),t=d("div"),s=d("div"),s.textContent=a,o=T(),r=d("h3"),r.textContent=c,m=T(),b=d("p"),b.textContent=h,C=T(),g=d("button"),g.textContent=y,this.h()},l(v){e=u(v,"DIV",{class:!0});var w=p(e);t=u(w,"DIV",{class:!0});var x=p(t);s=u(x,"DIV",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-13ghcez"&&(s.textContent=a),o=D(x),r=u(x,"H3",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-13fk1x3"&&(r.textContent=c),m=D(x),b=u(x,"P",{class:!0,"data-svelte-h":!0}),z(b)!=="svelte-1myopqh"&&(b.textContent=h),C=D(x),g=u(x,"BUTTON",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-1bzkva0"&&(g.textContent=y),x.forEach(f),w.forEach(f),this.h()},h(){i(s,"class","text-6xl mb-4"),i(r,"class","text-2xl font-medieval text-neutral mb-3"),i(b,"class","text-neutral/70 font-body mb-6"),i(g,"class","btn btn-dnd"),i(t,"class","card-parchment border-4 border-error w-11/12 max-w-md text-center p-8"),i(e,"class","modal modal-open z-50")},m(v,w){J(v,e,w),n(e,t),n(t,s),n(t,o),n(t,r),n(t,m),n(t,b),n(t,C),n(t,g),_||(E=oe(g,"click",l[12]),_=!0)},p:Ce,d(v){v&&f(e),_=!1,E()}}}function On(l){let e,t,s,a="‚úï",o,r,c,m="üíö Gesti√≥n de HP",b,h,C,g,y,_,E=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,w,x,I,V=l[1].name+"",P,A,k,H,S,G,j,F,M="HP ACTUAL",q,L,O,X=l[1].currentHp+"",se,ie,ne,ee,W=l[1].maxHp+"",te,R,Z,Y,ce,ae,ge,pe,_e=l[5].toFixed(0)+"",K,fe,de,le,N,$="HP NUEVO",me,ue,Q,he,we,Re,Ae,ye,Ie,Ve,Oe,We,Qe=l[3].toFixed(0)+"",De,ct,Ze,He,be,xe,Ye='<span class="label-text font-medieval text-neutral text-sm sm:text-base">üé≤ Cantidad de HP</span>',tt,Se,Pe,ut,Fe,Le,Be,bt="üí•",lt,je,dt="Da√±o",$e,ft,Te,Ue,pt="üíö",st,ze,at="Curar",ot,Rt,el,Me=l[1].isNpc&&Gl();function tl(ve,Ee){return ve[8]!==0?jn:Sn}let Et=tl(l),qe=Et(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=m,b=T(),h=d("div"),C=d("div"),g=d("div"),y=d("div"),_=d("span"),v=U(E),w=T(),x=d("div"),I=d("h4"),P=U(V),A=T(),k=d("div"),Me&&Me.c(),H=T(),S=d("div"),G=d("div"),j=d("div"),F=d("p"),F.textContent=M,q=T(),L=d("div"),O=d("p"),se=U(X),ie=T(),ne=d("p"),ee=U("de "),te=U(W),R=T(),Z=d("progress"),ge=T(),pe=d("p"),K=U(_e),fe=U("%"),de=T(),le=d("div"),N=d("p"),N.textContent=$,me=T(),ue=d("div"),Q=d("p"),he=U(l[4]),Re=T(),qe.c(),Ae=T(),ye=d("progress"),Oe=T(),We=d("p"),De=U(Qe),ct=U("%"),He=T(),be=d("div"),xe=d("label"),xe.innerHTML=Ye,tt=T(),Se=d("div"),Pe=d("input"),ut=T(),Fe=d("div"),Le=d("button"),Be=d("span"),Be.textContent=bt,lt=T(),je=d("span"),je.textContent=dt,ft=T(),Te=d("button"),Ue=d("span"),Ue.textContent=pt,st=T(),ze=d("span"),ze.textContent=at,this.h()},l(ve){e=u(ve,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var Ee=p(e);t=u(Ee,"DIV",{class:!0});var mt=p(t);s=u(mt,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(s)!=="svelte-1h1x9md"&&(s.textContent=a),o=D(mt),r=u(mt,"DIV",{class:!0});var kt=p(r);c=u(kt,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(c)!=="svelte-15n0he0"&&(c.textContent=m),b=D(kt),h=u(kt,"DIV",{class:!0});var wt=p(h);C=u(wt,"DIV",{class:!0});var ll=p(C);g=u(ll,"DIV",{class:!0});var sl=p(g);y=u(sl,"DIV",{class:!0});var nl=p(y);_=u(nl,"SPAN",{class:!0});var rl=p(_);v=B(rl,E),rl.forEach(f),nl.forEach(f),sl.forEach(f),ll.forEach(f),w=D(wt),x=u(wt,"DIV",{class:!0});var It=p(x);I=u(It,"H4",{class:!0});var al=p(I);P=B(al,V),al.forEach(f),A=D(It),k=u(It,"DIV",{class:!0});var ol=p(k);Me&&Me.l(ol),ol.forEach(f),It.forEach(f),wt.forEach(f),kt.forEach(f),H=D(mt),S=u(mt,"DIV",{class:!0});var Dt=p(S);G=u(Dt,"DIV",{class:!0});var Tt=p(G);j=u(Tt,"DIV",{class:!0});var nt=p(j);F=u(nt,"P",{class:!0,"data-svelte-h":!0}),z(F)!=="svelte-15e8cb6"&&(F.textContent=M),q=D(nt),L=u(nt,"DIV",{class:!0});var Vt=p(L);O=u(Vt,"P",{class:!0});var il=p(O);se=B(il,X),il.forEach(f),ie=D(Vt),ne=u(Vt,"P",{class:!0});var Ft=p(ne);ee=B(Ft,"de "),te=B(Ft,W),Ft.forEach(f),Vt.forEach(f),R=D(nt),Z=u(nt,"PROGRESS",{class:!0,max:!0}),p(Z).forEach(f),ge=D(nt),pe=u(nt,"P",{class:!0});var qt=p(pe);K=B(qt,_e),fe=B(qt,"%"),qt.forEach(f),nt.forEach(f),de=D(Tt),le=u(Tt,"DIV",{class:!0});var rt=p(le);N=u(rt,"P",{class:!0,"data-svelte-h":!0}),z(N)!=="svelte-ukgy9p"&&(N.textContent=$),me=D(rt),ue=u(rt,"DIV",{class:!0});var Ht=p(ue);Q=u(Ht,"P",{class:!0});var cl=p(Q);he=B(cl,l[4]),cl.forEach(f),Re=D(Ht),qe.l(Ht),Ht.forEach(f),Ae=D(rt),ye=u(rt,"PROGRESS",{class:!0,max:!0}),p(ye).forEach(f),Oe=D(rt),We=u(rt,"P",{class:!0});var Gt=p(We);De=B(Gt,Qe),ct=B(Gt,"%"),Gt.forEach(f),rt.forEach(f),Tt.forEach(f),He=D(Dt),be=u(Dt,"DIV",{});var Mt=p(be);xe=u(Mt,"LABEL",{class:!0,"data-svelte-h":!0}),z(xe)!=="svelte-640liv"&&(xe.innerHTML=Ye),tt=D(Mt),Se=u(Mt,"DIV",{class:!0});var At=p(Se);Pe=u(At,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ut=D(At),Fe=u(At,"DIV",{class:!0});var Pt=p(Fe);Le=u(Pt,"BUTTON",{class:!0});var Lt=p(Le);Be=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Be)!=="svelte-orvybg"&&(Be.textContent=bt),lt=D(Lt),je=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),z(je)!=="svelte-117bemg"&&(je.textContent=dt),Lt.forEach(f),ft=D(Pt),Te=u(Pt,"BUTTON",{class:!0});var Nt=p(Te);Ue=u(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ue)!=="svelte-rpoyvz"&&(Ue.textContent=pt),st=D(Nt),ze=u(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),z(ze)!=="svelte-v46veg"&&(ze.textContent=at),Nt.forEach(f),Pt.forEach(f),At.forEach(f),Mt.forEach(f),Dt.forEach(f),mt.forEach(f),Ee.forEach(f),this.h()},h(){i(s,"class","btn btn-xs sm:btn-sm btn-circle btn-ghost absolute right-2 sm:right-3 top-2 sm:top-3 z-10 hover:bg-error/20"),i(s,"aria-label","Cerrar modal"),i(c,"id","hp-modal-title"),i(c,"class","font-bold text-xl sm:text-2xl font-medieval text-neutral text-center mb-2 sm:mb-3"),i(_,"class","text-lg sm:text-xl"),i(y,"class","bg-primary/20 flex items-center justify-center"),i(g,"class","w-10 h-10 sm:w-12 sm:h-12 rounded-full ring-2 ring-secondary"),i(C,"class","avatar flex-shrink-0"),i(I,"class","text-base sm:text-lg font-medieval text-neutral font-bold truncate"),i(k,"class","flex gap-2 mt-1"),i(x,"class","flex-1 min-w-0"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-2 sm:p-3 rounded-lg border border-primary/30 flex items-center gap-2 sm:gap-3"),i(r,"class","p-3 sm:p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent border-b-2 border-secondary"),i(F,"class","text-xs font-medieval text-neutral/60 text-center"),i(O,"class","text-xl sm:text-2xl font-bold text-neutral"),i(ne,"class","text-xs sm:text-sm text-neutral/60"),i(L,"class","text-center"),i(Z,"class",Y="progress progress-"+l[9]+" w-full h-2 sm:h-3"),Z.value=ce=l[1].currentHp,i(Z,"max",ae=l[1].maxHp),i(pe,"class","text-xs text-center text-neutral/60"),i(j,"class","bg-neutral/10 flex flex-col gap-1 p-2 sm:p-3 rounded-lg border-2 border-primary/30"),i(N,"class","text-xs font-medieval text-neutral/60 text-center"),i(Q,"class",we="text-xl sm:text-2xl font-bold text-"+(l[8]!==0?l[8]>0?"success":"error":"neutral")),i(ue,"class","text-center"),i(ye,"class",Ie="progress progress-"+(l[8]!==0?l[7]:l[9])+" w-full h-2 sm:h-3"),ye.value=l[4],i(ye,"max",Ve=l[1].maxHp),i(We,"class","text-xs text-center text-neutral/60"),i(le,"class",Ze="bg-"+(l[8]!==0?l[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(l[8]!==0?l[8]>0?"success":"error":"primary")+"/30"),i(G,"class","grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4"),i(xe,"class","label"),i(Pe,"type","number"),i(Pe,"placeholder","Ej: 15"),i(Pe,"class","input input-sm sm:input-md input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-lg sm:text-2xl font-bold focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(Pe,"min","0"),i(Be,"class","text-base sm:text-xl"),i(je,"class","font-medieval text-xs sm:text-sm"),i(Le,"class","btn btn-error btn-sm sm:btn-md flex-1"),Le.disabled=$e=l[6]<=0,i(Ue,"class","text-base sm:text-xl"),i(ze,"class","font-medieval text-xs sm:text-sm"),i(Te,"class","btn btn-success btn-sm sm:btn-md flex-1"),Te.disabled=ot=l[6]<=0,i(Fe,"class","grid grid-cols-2 sm:flex gap-2 flex-1"),i(Se,"class","flex flex-col sm:flex-row gap-2"),i(S,"class","flex-1 p-3 sm:p-4 overflow-y-auto"),i(t,"class","card-parchment border-2 sm:border-4 border-secondary mx-2 sm:mx-4 relative w-[95vw] sm:w-[90vw] md:w-3/4 lg:w-1/2 max-h-[90vh] flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","hp-modal-title")},m(ve,Ee){J(ve,e,Ee),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),n(h,C),n(C,g),n(g,y),n(y,_),n(_,v),n(h,w),n(h,x),n(x,I),n(I,P),n(x,A),n(x,k),Me&&Me.m(k,null),n(t,H),n(t,S),n(S,G),n(G,j),n(j,F),n(j,q),n(j,L),n(L,O),n(O,se),n(L,ie),n(L,ne),n(ne,ee),n(ne,te),n(j,R),n(j,Z),n(j,ge),n(j,pe),n(pe,K),n(pe,fe),n(G,de),n(G,le),n(le,N),n(le,me),n(le,ue),n(ue,Q),n(Q,he),n(ue,Re),qe.m(ue,null),n(le,Ae),n(le,ye),n(le,Oe),n(le,We),n(We,De),n(We,ct),n(S,He),n(S,be),n(be,xe),n(be,tt),n(be,Se),n(Se,Pe),ke(Pe,l[6]),n(Se,ut),n(Se,Fe),n(Fe,Le),n(Le,Be),n(Le,lt),n(Le,je),n(Fe,ft),n(Fe,Te),n(Te,Ue),n(Te,st),n(Te,ze),Rt||(el=[oe(s,"click",l[12]),oe(Pe,"input",l[14]),oe(Le,"click",l[10]),oe(Te,"click",l[11]),oe(e,"keydown",l[15])],Rt=!0)},p(ve,Ee){Ee&2&&E!==(E=ve[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(v,E),Ee&2&&V!==(V=ve[1].name+"")&&re(P,V),ve[1].isNpc?Me||(Me=Gl(),Me.c(),Me.m(k,null)):Me&&(Me.d(1),Me=null),Ee&2&&X!==(X=ve[1].currentHp+"")&&re(se,X),Ee&2&&W!==(W=ve[1].maxHp+"")&&re(te,W),Ee&512&&Y!==(Y="progress progress-"+ve[9]+" w-full h-2 sm:h-3")&&i(Z,"class",Y),Ee&2&&ce!==(ce=ve[1].currentHp)&&(Z.value=ce),Ee&2&&ae!==(ae=ve[1].maxHp)&&i(Z,"max",ae),Ee&32&&_e!==(_e=ve[5].toFixed(0)+"")&&re(K,_e),Ee&16&&re(he,ve[4]),Ee&256&&we!==(we="text-xl sm:text-2xl font-bold text-"+(ve[8]!==0?ve[8]>0?"success":"error":"neutral"))&&i(Q,"class",we),Et===(Et=tl(ve))&&qe?qe.p(ve,Ee):(qe.d(1),qe=Et(ve),qe&&(qe.c(),qe.m(ue,null))),Ee&896&&Ie!==(Ie="progress progress-"+(ve[8]!==0?ve[7]:ve[9])+" w-full h-2 sm:h-3")&&i(ye,"class",Ie),Ee&16&&(ye.value=ve[4]),Ee&2&&Ve!==(Ve=ve[1].maxHp)&&i(ye,"max",Ve),Ee&8&&Qe!==(Qe=ve[3].toFixed(0)+"")&&re(De,Qe),Ee&256&&Ze!==(Ze="bg-"+(ve[8]!==0?ve[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(ve[8]!==0?ve[8]>0?"success":"error":"primary")+"/30")&&i(le,"class",Ze),Ee&64&&Xe(Pe.value)!==ve[6]&&ke(Pe,ve[6]),Ee&64&&$e!==($e=ve[6]<=0)&&(Le.disabled=$e),Ee&64&&ot!==(ot=ve[6]<=0)&&(Te.disabled=ot)},d(ve){ve&&f(e),Me&&Me.d(),qe.d(),Rt=!1,et(el)}}}function Gl(l){let e,t="NPC";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-31ycly"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-error")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Sn(l){let e,t="Sin cambios";return{c(){e=d("p"),e.textContent=t,this.h()},l(s){e=u(s,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-rbv1yy"&&(e.textContent=t),this.h()},h(){i(e,"class","text-xs sm:text-sm text-neutral/60")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function jn(l){let e,t=l[8]>0?"+":"",s,a,o;return{c(){e=d("p"),s=U(t),a=U(l[8]),this.h()},l(r){e=u(r,"P",{class:!0});var c=p(e);s=B(c,t),a=B(c,l[8]),c.forEach(f),this.h()},h(){i(e,"class",o="text-base sm:text-lg font-bold text-"+(l[8]>0?"success":"error"))},m(r,c){J(r,e,c),n(e,s),n(e,a)},p(r,c){c&256&&t!==(t=r[8]>0?"+":"")&&re(s,t),c&256&&re(a,r[8]),c&256&&o!==(o="text-base sm:text-lg font-bold text-"+(r[8]>0?"success":"error"))&&i(e,"class",o)},d(r){r&&f(e)}}}function Bn(l){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return On;if(o[0]&&o[1]&&!o[2])return Nn}let s=t(l),a=s&&s(l);return{c(){a&&a.c(),e=ht()},l(o){a&&a.l(o),e=ht()},m(o,r){a&&a.m(o,r),J(o,e,r)},p(o,[r]){s===(s=t(o))&&a?a.p(o,r):(a&&a.d(1),a=s&&s(o),a&&(a.c(),a.m(e.parentNode,e)))},i:Ce,o:Ce,d(o){o&&f(e),a&&a.d(o)}}}function Un(l,e,t){let s,a,o,r,c,m,{isOpen:b=!1}=e,{combatant:h=null}=e,{isDM:C=!1}=e;const g=zt();let y=0,_=0;function E(){if(h&&_>0){const V=-Math.abs(_);g("apply",V),t(6,_=0)}}function v(){if(h&&_>0){const V=Math.abs(_);g("apply",V),t(6,_=0)}}function w(){t(13,y=0),t(6,_=0),g("close")}function x(){_=Xe(this.value),t(6,_)}const I=V=>V.key==="Escape"&&w();return l.$$set=V=>{"isOpen"in V&&t(0,b=V.isOpen),"combatant"in V&&t(1,h=V.combatant),"isDM"in V&&t(2,C=V.isDM)},l.$$.update=()=>{l.$$.dirty&2&&t(5,s=h?h.currentHp/h.maxHp*100:0),l.$$.dirty&32&&t(9,a=s>50?"success":s>25?"warning":"error"),l.$$.dirty&8194&&t(4,o=h?Math.max(0,Math.min(h.maxHp,h.currentHp+y)):0),l.$$.dirty&18&&t(8,r=h?o-h.currentHp:0),l.$$.dirty&18&&t(3,c=h?o/h.maxHp*100:0),l.$$.dirty&8&&t(7,m=c>50?"success":c>25?"warning":"error")},[b,h,C,c,o,s,_,m,r,a,E,v,w,y,x,I]}class zn extends xt{constructor(e){super(),Ct(this,e,Un,Bn,yt,{isOpen:0,combatant:1,isDM:2})}}function Wl(l,e,t){const s=l.slice();return s[21]=e[t],s}function Ql(l,e,t){const s=l.slice();s[16]=e[t];const a=Array.isArray(s[1].conditions)?s[1].conditions:[];s[17]=a;const o=s[17].includes(s[16].name);return s[18]=o,s}function Jl(l,e,t){const s=l.slice();return s[21]=e[t],s}function Rn(l){let e,t,s,a="‚úï",o,r,c,m=l[1].name+"",b,h,C,g,y,_="Solo el DM puede modificar estados",E,v,w="Cerrar",x,I;function V(k,H){return H&2&&(C=null),C==null&&(C=!!(k[1].conditions&&Array.isArray(k[1].conditions)&&k[1].conditions.length>0)),C?Gn:qn}let P=V(l,-1),A=P(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("h3"),c=U("‚ö†Ô∏è Estados de "),b=U(m),h=T(),A.c(),g=T(),y=d("p"),y.textContent=_,E=T(),v=d("button"),v.textContent=w,this.h()},l(k){e=u(k,"DIV",{class:!0});var H=p(e);t=u(H,"DIV",{class:!0});var S=p(t);s=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-1t0z3ws"&&(s.textContent=a),o=D(S),r=u(S,"H3",{class:!0});var G=p(r);c=B(G,"‚ö†Ô∏è Estados de "),b=B(G,m),G.forEach(f),h=D(S),A.l(S),g=D(S),y=u(S,"P",{class:!0,"data-svelte-h":!0}),z(y)!=="svelte-1mg2e4g"&&(y.textContent=_),E=D(S),v=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1vgxpha"&&(v.textContent=w),S.forEach(f),H.forEach(f),this.h()},h(){i(s,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),i(r,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),i(y,"class","text-xs text-center text-neutral/60 italic mt-4"),i(v,"class","btn btn-dnd w-full mt-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-md relative p-6"),i(e,"class","modal modal-open z-50")},m(k,H){J(k,e,H),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,b),n(t,h),A.m(t,null),n(t,g),n(t,y),n(t,E),n(t,v),x||(I=[oe(s,"click",l[9]),oe(v,"click",l[9]),oe(e,"keydown",l[10])],x=!0)},p(k,H){H&2&&m!==(m=k[1].name+"")&&re(b,m),P===(P=V(k,H))&&A?A.p(k,H):(A.d(1),A=P(k),A&&(A.c(),A.m(t,g)))},d(k){k&&f(e),A.d(),x=!1,et(I)}}}function Fn(l){let e,t,s,a="‚úï",o,r,c,m="‚ö†Ô∏è Estados de Combate",b,h,C,g,y,_,E=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,w,x,I,V=l[1].name+"",P,A,k,H,S,G=l[1].currentHp+"",j,F,M=l[1].maxHp+"",q,L,O,X,se=l[1].armorClass+"",ie,ne,ee,W,te,R,Z,Y="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ce,ae,ge=(l[1].conditions&&Array.isArray(l[1].conditions)?l[1].conditions.length:0)+"",pe,_e,K,fe,de,le,N,$,me,ue,Q="üîç",he,we,Re="Base de datos oficial de D&D 5e",Ae,ye,Ie,Ve,Oe;function We(be,xe){return xe&2&&(K=null),K==null&&(K=!!(be[1].conditions&&Array.isArray(be[1].conditions)&&be[1].conditions.length>0)),K?Qn:Wn}let Qe=We(l,-1),De=Qe(l);function ct(be,xe){return xe&8&&(Ie=null),be[5]?Zn:be[4].length>0?Xn:(Ie==null&&(Ie=!!be[3].trim()),Ie?Kn:Jn)}let Ze=ct(l,-1),He=Ze(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=m,b=T(),h=d("div"),C=d("div"),g=d("div"),y=d("div"),_=d("span"),v=U(E),w=T(),x=d("div"),I=d("h4"),P=U(V),A=T(),k=d("div"),H=d("div"),S=U("‚ù§Ô∏è "),j=U(G),F=U("/"),q=U(M),L=T(),O=d("div"),X=U("üõ°Ô∏è "),ie=U(se),ne=T(),ee=d("div"),W=d("div"),te=d("div"),R=d("div"),Z=d("h5"),Z.innerHTML=Y,ce=T(),ae=d("span"),pe=U(ge),_e=T(),De.c(),fe=T(),de=d("div"),le=d("div"),N=d("div"),$=d("input"),me=T(),ue=d("div"),ue.textContent=Q,he=T(),we=d("p"),we.textContent=Re,Ae=T(),ye=d("div"),He.c(),this.h()},l(be){e=u(be,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var xe=p(e);t=u(xe,"DIV",{class:!0});var Ye=p(t);s=u(Ye,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(s)!=="svelte-hn98im"&&(s.textContent=a),o=D(Ye),r=u(Ye,"DIV",{class:!0});var tt=p(r);c=u(tt,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(c)!=="svelte-1wgccba"&&(c.textContent=m),b=D(tt),h=u(tt,"DIV",{class:!0});var Se=p(h);C=u(Se,"DIV",{class:!0});var Pe=p(C);g=u(Pe,"DIV",{class:!0});var ut=p(g);y=u(ut,"DIV",{class:!0});var Fe=p(y);_=u(Fe,"SPAN",{class:!0});var Le=p(_);v=B(Le,E),Le.forEach(f),Fe.forEach(f),ut.forEach(f),Pe.forEach(f),w=D(Se),x=u(Se,"DIV",{class:!0});var Be=p(x);I=u(Be,"H4",{class:!0});var bt=p(I);P=B(bt,V),bt.forEach(f),A=D(Be),k=u(Be,"DIV",{class:!0});var lt=p(k);H=u(lt,"DIV",{class:!0});var je=p(H);S=B(je,"‚ù§Ô∏è "),j=B(je,G),F=B(je,"/"),q=B(je,M),je.forEach(f),L=D(lt),O=u(lt,"DIV",{class:!0});var dt=p(O);X=B(dt,"üõ°Ô∏è "),ie=B(dt,se),dt.forEach(f),lt.forEach(f),Be.forEach(f),Se.forEach(f),tt.forEach(f),ne=D(Ye),ee=u(Ye,"DIV",{class:!0,style:!0});var $e=p(ee);W=u($e,"DIV",{class:!0,style:!0});var ft=p(W);te=u(ft,"DIV",{class:!0});var Te=p(te);R=u(Te,"DIV",{class:!0});var Ue=p(R);Z=u(Ue,"H5",{class:!0,"data-svelte-h":!0}),z(Z)!=="svelte-12hilzf"&&(Z.innerHTML=Y),ce=D(Ue),ae=u(Ue,"SPAN",{class:!0});var pt=p(ae);pe=B(pt,ge),pt.forEach(f),Ue.forEach(f),_e=D(Te),De.l(Te),Te.forEach(f),ft.forEach(f),fe=D($e),de=u($e,"DIV",{class:!0,style:!0});var st=p(de);le=u(st,"DIV",{class:!0});var ze=p(le);N=u(ze,"DIV",{class:!0});var at=p(N);$=u(at,"INPUT",{type:!0,placeholder:!0,class:!0}),me=D(at),ue=u(at,"DIV",{class:!0,"data-svelte-h":!0}),z(ue)!=="svelte-1duc997"&&(ue.textContent=Q),at.forEach(f),he=D(ze),we=u(ze,"P",{class:!0,"data-svelte-h":!0}),z(we)!=="svelte-hqlo3f"&&(we.textContent=Re),ze.forEach(f),Ae=D(st),ye=u(st,"DIV",{class:!0});var ot=p(ye);He.l(ot),ot.forEach(f),st.forEach(f),$e.forEach(f),Ye.forEach(f),xe.forEach(f),this.h()},h(){i(s,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(s,"aria-label","Cerrar modal"),i(c,"id","condition-modal-title"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(_,"class","text-xl"),i(y,"class","bg-primary/20 flex items-center justify-center"),i(g,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(C,"class","avatar"),i(I,"class","text-lg font-medieval text-neutral font-bold truncate"),i(H,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),i(O,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),i(k,"class","flex gap-2 mt-1"),i(x,"class","flex-1 min-w-0"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),i(Z,"class","font-medieval text-neutral font-bold flex items-center gap-2"),i(ae,"class","badge badge-warning badge-sm"),i(R,"class","flex items-center justify-between mb-3"),i(te,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),i(W,"class","md:w-1/3 flex flex-col"),_t(W,"min-height","300px"),i($,"type","text"),i($,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),i($,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),i(ue,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),i(N,"class","relative"),i(we,"class","text-xs text-neutral/50 mt-1 italic"),i(le,"class","mb-3"),i(ye,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),i(de,"class","md:w-2/3 flex flex-col"),_t(de,"min-height","300px"),i(ee,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),_t(ee,"min-height","0"),i(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","condition-modal-title")},m(be,xe){J(be,e,xe),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),n(h,C),n(C,g),n(g,y),n(y,_),n(_,v),n(h,w),n(h,x),n(x,I),n(I,P),n(x,A),n(x,k),n(k,H),n(H,S),n(H,j),n(H,F),n(H,q),n(k,L),n(k,O),n(O,X),n(O,ie),n(t,ne),n(t,ee),n(ee,W),n(W,te),n(te,R),n(R,Z),n(R,ce),n(R,ae),n(ae,pe),n(te,_e),De.m(te,null),n(ee,fe),n(ee,de),n(de,le),n(le,N),n(N,$),ke($,l[3]),n(N,me),n(N,ue),n(le,he),n(le,we),n(de,Ae),n(de,ye),He.m(ye,null),Ve||(Oe=[oe(s,"click",l[9]),oe($,"input",l[12]),oe($,"input",l[6]),oe(e,"keydown",l[10])],Ve=!0)},p(be,xe){xe&2&&E!==(E=be[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(v,E),xe&2&&V!==(V=be[1].name+"")&&re(P,V),xe&2&&G!==(G=be[1].currentHp+"")&&re(j,G),xe&2&&M!==(M=be[1].maxHp+"")&&re(q,M),xe&2&&se!==(se=be[1].armorClass+"")&&re(ie,se),xe&2&&ge!==(ge=(be[1].conditions&&Array.isArray(be[1].conditions)?be[1].conditions.length:0)+"")&&re(pe,ge),Qe===(Qe=We(be,xe))&&De?De.p(be,xe):(De.d(1),De=Qe(be),De&&(De.c(),De.m(te,null))),xe&8&&$.value!==be[3]&&ke($,be[3]),Ze===(Ze=ct(be,xe))&&He?He.p(be,xe):(He.d(1),He=Ze(be),He&&(He.c(),He.m(ye,null)))},d(be){be&&f(e),De.d(),He.d(),Ve=!1,et(Oe)}}}function qn(l){let e,t='<div class="text-4xl mb-2">üòå</div> <p class="text-neutral/70 font-body">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-18t8x0o"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Gn(l){let e,t=Ne(l[1].conditions),s=[];for(let a=0;a<t.length;a+=1)s[a]=Kl(Wl(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=p(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&2){t=Ne(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=Wl(a,t,r);s[r]?s[r].p(c,o):(s[r]=Kl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Kl(l){let e,t,s=l[21]+"",a,o;return{c(){e=d("div"),t=d("span"),a=U(s),o=T(),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=p(e);t=u(c,"SPAN",{class:!0});var m=p(t);a=B(m,s),m.forEach(f),o=D(c),c.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40")},m(r,c){J(r,e,c),n(e,t),n(t,a),n(e,o)},p(r,c){c&2&&s!==(s=r[21]+"")&&re(a,s)},d(r){r&&f(e)}}}function Wn(l){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Qn(l){let e,t=Ne(l[1].conditions),s=[];for(let a=0;a<t.length;a+=1)s[a]=Xl(Jl(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=p(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&258){t=Ne(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=Jl(a,t,r);s[r]?s[r].p(c,o):(s[r]=Xl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Xl(l){let e,t,s=l[21]+"",a,o,r,c="‚úï",m,b,h;function C(){return l[11](l[21])}return{c(){e=d("div"),t=d("span"),a=U(s),o=T(),r=d("button"),r.textContent=c,m=T(),this.h()},l(g){e=u(g,"DIV",{class:!0});var y=p(e);t=u(y,"SPAN",{class:!0});var _=p(t);a=B(_,s),_.forEach(f),o=D(y),r=u(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(r)!=="svelte-5t970f"&&(r.textContent=c),m=D(y),y.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral flex-1"),i(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),i(r,"title","Eliminar"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(g,y){J(g,e,y),n(e,t),n(t,a),n(e,o),n(e,r),n(e,m),b||(h=oe(r,"click",C),b=!0)},p(g,y){l=g,y&2&&s!==(s=l[21]+"")&&re(a,s)},d(g){g&&f(e),b=!1,h()}}}function Jn(l){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Kn(l){let e,t,s="üîç",a,o,r,c,m,b,h,C,g="‚ûï Agregar como personalizado",y,_;return{c(){e=d("div"),t=d("div"),t.textContent=s,a=T(),o=d("p"),r=U('No se encontr√≥ "'),c=d("span"),m=U(l[3]),b=U('"'),h=T(),C=d("button"),C.textContent=g,this.h()},l(E){e=u(E,"DIV",{class:!0});var v=p(e);t=u(v,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sy51vw"&&(t.textContent=s),a=D(v),o=u(v,"P",{class:!0});var w=p(o);r=B(w,'No se encontr√≥ "'),c=u(w,"SPAN",{class:!0});var x=p(c);m=B(x,l[3]),x.forEach(f),b=B(w,'"'),w.forEach(f),h=D(v),C=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1rs0apo"&&(C.textContent=g),v.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(c,"class","font-bold"),i(o,"class","text-neutral/70 font-body mb-3"),i(C,"class","btn btn-primary btn-sm"),i(e,"class","flex flex-col items-center justify-center h-full text-center")},m(E,v){J(E,e,v),n(e,t),n(e,a),n(e,o),n(o,r),n(o,c),n(c,m),n(o,b),n(e,h),n(e,C),y||(_=oe(C,"click",l[14]),y=!0)},p(E,v){v&8&&re(m,E[3])},d(E){E&&f(e),y=!1,_()}}}function Xn(l){let e,t=Ne(l[4]),s=[];for(let a=0;a<t.length;a+=1)s[a]=Yl(Ql(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=p(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&146){t=Ne(a[4]);let r;for(r=0;r<t.length;r+=1){const c=Ql(a,t,r);s[r]?s[r].p(c,o):(s[r]=Yl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Zn(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Zl(l){let e,t="‚úì Activo";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=u(s,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-success shrink-0")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Yl(l){let e,t,s,a=l[16].name+"",o,r,c,m,b=gt.cleanDescription(l[16].desc,120)+"",h,C,g,y,_,E,v=l[18]&&Zl();function w(){return l[13](l[16])}return{c(){e=d("button"),t=d("div"),s=d("span"),o=U(a),r=T(),v&&v.c(),c=T(),m=d("p"),h=U(b),C=T(),this.h()},l(x){e=u(x,"BUTTON",{class:!0});var I=p(e);t=u(I,"DIV",{class:!0});var V=p(t);s=u(V,"SPAN",{class:!0});var P=p(s);o=B(P,a),P.forEach(f),r=D(V),v&&v.l(V),V.forEach(f),c=D(I),m=u(I,"P",{class:!0});var A=p(m);h=B(A,b),A.forEach(f),C=D(I),I.forEach(f),this.h()},h(){i(s,"class","font-medieval font-bold text-neutral"),i(t,"class","flex items-start justify-between gap-2 mb-1"),i(m,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=g=l[18],i(e,"class",y="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(x,I){J(x,e,I),n(e,t),n(t,s),n(s,o),n(t,r),v&&v.m(t,null),n(e,c),n(e,m),n(m,h),n(e,C),_||(E=oe(e,"click",w),_=!0)},p(x,I){l=x,I&16&&a!==(a=l[16].name+"")&&re(o,a),l[18]?v||(v=Zl(),v.c(),v.m(t,null)):v&&(v.d(1),v=null),I&16&&b!==(b=gt.cleanDescription(l[16].desc,120)+"")&&re(h,b),I&18&&g!==(g=l[18])&&(e.disabled=g),I&18&&y!==(y="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&i(e,"class",y)},d(x){x&&f(e),v&&v.d(),_=!1,E()}}}function Yn(l){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return Fn;if(o[0]&&o[1]&&!o[2])return Rn}let s=t(l),a=s&&s(l);return{c(){a&&a.c(),e=ht()},l(o){a&&a.l(o),e=ht()},m(o,r){a&&a.m(o,r),J(o,e,r)},p(o,[r]){s===(s=t(o))&&a?a.p(o,r):(a&&a.d(1),a=s&&s(o),a&&(a.c(),a.m(e.parentNode,e)))},i:Ce,o:Ce,d(o){o&&f(e),a&&a.d(o)}}}function $n(l,e,t){let{isOpen:s=!1}=e,{combatant:a=null}=e,{isDM:o=!1}=e;const r=zt();let c="",m=[],b=!1;const h=cs(async()=>{if(!c.trim()){t(4,m=[]);return}t(5,b=!0);try{const I=await gt.searchConditions(c);t(4,m=I.results)}catch(I){console.error("Error searching conditions:",I),t(4,m=[])}finally{t(5,b=!1)}},300);function C(I){if(!a||!I.trim()||!o)return;if((Array.isArray(a.conditions)?a.conditions:[]).includes(I)){console.log("Condici√≥n ya existe:",I);return}console.log("Agregando condici√≥n:",I),r("add",I),t(3,c=""),t(4,m=[])}function g(I){!a||!o||(console.log("Removiendo condici√≥n:",I),r("remove",I))}function y(){t(3,c=""),t(4,m=[]),r("close")}function _(I){I.key==="Escape"&&y()}const E=I=>g(I);function v(){c=this.value,t(3,c)}const w=I=>C(I.name),x=()=>C(c.trim());return l.$$set=I=>{"isOpen"in I&&t(0,s=I.isOpen),"combatant"in I&&t(1,a=I.combatant),"isDM"in I&&t(2,o=I.isDM)},[s,a,o,c,m,b,h,C,g,y,_,E,v,w,x]}class er extends xt{constructor(e){super(),Ct(this,e,$n,Yn,yt,{isOpen:0,combatant:1,isDM:2})}}function $l(l,e,t){const s=l.slice();return s[49]=e[t],s[51]=t,s}function es(l){let e,t,s,a,o,r,c="‚úï",m,b;return{c(){e=d("div"),t=d("div"),s=d("span"),a=U(l[7]),o=T(),r=d("button"),r.textContent=c,this.h()},l(h){e=u(h,"DIV",{class:!0});var C=p(e);t=u(C,"DIV",{class:!0});var g=p(t);s=u(g,"SPAN",{});var y=p(s);a=B(y,l[7]),y.forEach(f),o=D(g),r=u(g,"BUTTON",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-4tcifc"&&(r.textContent=c),g.forEach(f),C.forEach(f),this.h()},h(){i(r,"class","btn btn-sm"),i(t,"class","alert alert-error flex justify-between items-center"),i(e,"class","container mx-auto p-4")},m(h,C){J(h,e,C),n(e,t),n(t,s),n(s,a),n(t,o),n(t,r),m||(b=oe(r,"click",l[31]),m=!0)},p(h,C){C[0]&128&&re(a,h[7])},d(h){h&&f(e),m=!1,b()}}}function tr(l){let e,t,s,a,o,r=l[2].name+"",c,m,b,h,C,g=l[2].round+"",y,_,E,v,w=l[3].length+"",x,I,V,P,A,k,H,S,G=l[14]&&ts(l),j=l[13]&&ls(l);const F=[rr,nr],M=[];function q(L,O){return L[3].length===0?0:1}return k=q(l),H=M[k]=F[k](l),{c(){e=d("div"),t=d("div"),s=d("div"),a=d("div"),o=d("h2"),c=U(r),m=T(),b=d("div"),h=d("div"),C=U("üîÑ Ronda "),y=U(g),_=T(),E=d("div"),v=U("üë• "),x=U(w),I=U(" Combatientes"),V=T(),G&&G.c(),P=T(),j&&j.c(),A=T(),H.c(),this.h()},l(L){e=u(L,"DIV",{class:!0});var O=p(e);t=u(O,"DIV",{class:!0});var X=p(t);s=u(X,"DIV",{class:!0});var se=p(s);a=u(se,"DIV",{class:!0});var ie=p(a);o=u(ie,"H2",{class:!0});var ne=p(o);c=B(ne,r),ne.forEach(f),m=D(ie),b=u(ie,"DIV",{class:!0});var ee=p(b);h=u(ee,"DIV",{class:!0});var W=p(h);C=B(W,"üîÑ Ronda "),y=B(W,g),W.forEach(f),_=D(ee),E=u(ee,"DIV",{class:!0});var te=p(E);v=B(te,"üë• "),x=B(te,w),I=B(te," Combatientes"),te.forEach(f),ee.forEach(f),ie.forEach(f),V=D(se),G&&G.l(se),se.forEach(f),P=D(X),j&&j.l(X),X.forEach(f),A=D(O),H.l(O),O.forEach(f),this.h()},h(){i(o,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),i(h,"class","badge badge-ornate badge-md"),i(E,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),i(b,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),i(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),i(s,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),i(t,"class","card-parchment mb-6 corner-ornament"),i(e,"class","p-4 max-w-5xl mx-auto")},m(L,O){J(L,e,O),n(e,t),n(t,s),n(s,a),n(a,o),n(o,c),n(a,m),n(a,b),n(b,h),n(h,C),n(h,y),n(b,_),n(b,E),n(E,v),n(E,x),n(E,I),n(s,V),G&&G.m(s,null),n(t,P),j&&j.m(t,null),n(e,A),M[k].m(e,null),S=!0},p(L,O){(!S||O[0]&4)&&r!==(r=L[2].name+"")&&re(c,r),(!S||O[0]&4)&&g!==(g=L[2].round+"")&&re(y,g),(!S||O[0]&8)&&w!==(w=L[3].length+"")&&re(x,w),L[14]?G?G.p(L,O):(G=ts(L),G.c(),G.m(s,null)):G&&(G.d(1),G=null),L[13]?j?j.p(L,O):(j=ls(L),j.c(),j.m(t,null)):j&&(j.d(1),j=null);let X=k;k=q(L),k===X?M[k].p(L,O):($t(),Ke(M[X],1,1,()=>{M[X]=null}),Yt(),H=M[k],H?H.p(L,O):(H=M[k]=F[k](L),H.c()),Ge(H,1),H.m(e,null))},i(L){S||(Ge(H),S=!0)},o(L){Ke(H),S=!1},d(L){L&&f(e),G&&G.d(),j&&j.d(),M[k].d()}}}function lr(l){let e,t,s,a="‚öîÔ∏è",o,r,c="No hay combate activo",m,b,h="El DM debe iniciar un encuentro para comenzar la batalla",C;function g(E,v){return E[14]?or:ar}let y=g(l),_=y(l);return{c(){e=d("div"),t=d("div"),s=d("div"),s.textContent=a,o=T(),r=d("h2"),r.textContent=c,m=T(),b=d("p"),b.textContent=h,C=T(),_.c(),this.h()},l(E){e=u(E,"DIV",{class:!0});var v=p(e);t=u(v,"DIV",{class:!0});var w=p(t);s=u(w,"DIV",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-19xxu84"&&(s.textContent=a),o=D(w),r=u(w,"H2",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-itogws"&&(r.textContent=c),m=D(w),b=u(w,"P",{class:!0,"data-svelte-h":!0}),z(b)!=="svelte-1smrxik"&&(b.textContent=h),C=D(w),_.l(w),w.forEach(f),v.forEach(f),this.h()},h(){i(s,"class","text-6xl mb-4"),i(r,"class","text-3xl font-medieval text-neutral mb-4"),i(b,"class","text-neutral/70 font-body mb-6"),i(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),i(e,"class","flex items-center justify-center h-full p-4")},m(E,v){J(E,e,v),n(e,t),n(t,s),n(t,o),n(t,r),n(t,m),n(t,b),n(t,C),_.m(t,null)},p(E,v){y===(y=g(E))&&_?_.p(E,v):(_.d(1),_=y(E),_&&(_.c(),_.m(t,null)))},i:Ce,o:Ce,d(E){E&&f(e),_.d()}}}function sr(l){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center justify-center h-full")},m(s,a){J(s,e,a)},p:Ce,i:Ce,o:Ce,d(s){s&&f(e)}}}function ts(l){let e,t,s='<span class="text-lg">‚ûï</span> Agregar',a,o,r,c="‚ñ∂Ô∏è",m,b,h,C,g="üèÅ Finalizar",y,_;return{c(){e=d("div"),t=d("button"),t.innerHTML=s,a=T(),o=d("button"),r=d("span"),r.textContent=c,m=U(" Siguiente Turno"),h=T(),C=d("button"),C.textContent=g,this.h()},l(E){e=u(E,"DIV",{class:!0});var v=p(e);t=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sdwydq"&&(t.innerHTML=s),a=D(v),o=u(v,"BUTTON",{class:!0});var w=p(o);r=u(w,"SPAN",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-vhmvlx"&&(r.textContent=c),m=B(w," Siguiente Turno"),w.forEach(f),h=D(v),C=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1oa32z5"&&(C.textContent=g),v.forEach(f),this.h()},h(){i(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),i(r,"class","text-lg"),i(o,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),o.disabled=b=l[3].length===0,i(C,"class","btn btn-error btn-sm flex-1 sm:flex-none"),i(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(E,v){J(E,e,v),n(e,t),n(e,a),n(e,o),n(o,r),n(o,m),n(e,h),n(e,C),y||(_=[oe(t,"click",l[33]),oe(o,"click",l[27]),oe(C,"click",l[18])],y=!0)},p(E,v){v[0]&8&&b!==(b=E[3].length===0)&&(o.disabled=b)},d(E){E&&f(e),y=!1,et(_)}}}function ls(l){let e,t,s="TURNO ACTUAL",a,o,r=l[13].name+"",c;return{c(){e=d("div"),t=d("p"),t.textContent=s,a=T(),o=d("p"),c=U(r),this.h()},l(m){e=u(m,"DIV",{class:!0});var b=p(e);t=u(b,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-j3qdhu"&&(t.textContent=s),a=D(b),o=u(b,"P",{class:!0});var h=p(o);c=B(h,r),h.forEach(f),b.forEach(f),this.h()},h(){i(t,"class","text-sm font-medieval text-neutral/70 mb-1"),i(o,"class","text-2xl font-bold font-medieval text-neutral"),i(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(m,b){J(m,e,b),n(e,t),n(e,a),n(e,o),n(o,c)},p(m,b){b[0]&8192&&r!==(r=m[13].name+"")&&re(c,r)},d(m){m&&f(e)}}}function nr(l){let e,t,s=Ne(l[3]),a=[];for(let r=0;r<s.length;r+=1)a[r]=ss($l(l,s,r));const o=r=>Ke(a[r],1,1,()=>{a[r]=null});return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var c=p(e);for(let m=0;m<a.length;m+=1)a[m].l(c);c.forEach(f),this.h()},h(){i(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,c){J(r,e,c);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);t=!0},p(r,c){if(c[0]&7356428){s=Ne(r[3]);let m;for(m=0;m<s.length;m+=1){const b=$l(r,s,m);a[m]?(a[m].p(b,c),Ge(a[m],1)):(a[m]=ss(b),a[m].c(),Ge(a[m],1),a[m].m(e,null))}for($t(),m=s.length;m<a.length;m+=1)o(m);Yt()}},i(r){if(!t){for(let c=0;c<s.length;c+=1)Ge(a[c]);t=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Ke(a[c]);t=!1},d(r){r&&f(e),it(a,r)}}}function rr(l){let e,t,s="üé≤",a,o,r="Sin combatientes",c,m,b=l[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",h;return{c(){e=d("div"),t=d("div"),t.textContent=s,a=T(),o=d("p"),o.textContent=r,c=T(),m=d("p"),h=U(b),this.h()},l(C){e=u(C,"DIV",{class:!0});var g=p(e);t=u(g,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-9xsxws"&&(t.textContent=s),a=D(g),o=u(g,"P",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-180lhql"&&(o.textContent=r),c=D(g),m=u(g,"P",{class:!0});var y=p(m);h=B(y,b),y.forEach(f),g.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(o,"class","text-xl font-medieval text-neutral mb-2"),i(m,"class","text-neutral/70 font-body"),i(e,"class","card-parchment p-12 text-center")},m(C,g){J(C,e,g),n(e,t),n(e,a),n(e,o),n(e,c),n(e,m),n(m,h)},p(C,g){g[0]&16384&&b!==(b=C[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&re(h,b)},i:Ce,o:Ce,d(C){C&&f(e)}}}function ss(l){let e,t;return e=new Is({props:{combatant:l[49],isCurrentTurn:l[51]===l[2].turnIndex%l[3].length,isDM:!!l[14]}}),e.$on("updateHP",l[21]),e.$on("addCondition",l[22]),e.$on("remove",l[20]),{c(){Ut(e.$$.fragment)},l(s){Bt(e.$$.fragment,s)},m(s,a){jt(e,s,a),t=!0},p(s,a){const o={};a[0]&8&&(o.combatant=s[49]),a[0]&12&&(o.isCurrentTurn=s[51]===s[2].turnIndex%s[3].length),a[0]&16384&&(o.isDM=!!s[14]),e.$set(o)},i(s){t||(Ge(e.$$.fragment,s),t=!0)},o(s){Ke(e.$$.fragment,s),t=!1},d(s){St(e,s)}}}function ar(l){let e,t="Esperando que el DM inicie el combate...";return{c(){e=d("p"),e.textContent=t,this.h()},l(s){e=u(s,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){i(e,"class","text-sm text-neutral/50 italic")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function or(l){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,s,a;return{c(){e=d("button"),e.innerHTML=t,this.h()},l(o){e=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-dnd btn-lg")},m(o,r){J(o,e,r),s||(a=oe(e,"click",l[32]),s=!0)},p:Ce,d(o){o&&f(e),s=!1,a()}}}function ns(l){let e,t,s,a="‚öîÔ∏è Iniciar Encuentro",o,r,c,m='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro <span class="text-error">*</span></span>',b,h,C,g,y,_,E,v="Cancelar",w,x,I,V="‚öîÔ∏è",P,A,k,H;function S(F,M){return F[0]&&F[1]?cr:ir}let G=S(l),j=G(l);return{c(){e=d("div"),t=d("div"),s=d("h3"),s.textContent=a,o=T(),r=d("div"),c=d("label"),c.innerHTML=m,b=T(),h=d("input"),g=T(),j.c(),y=T(),_=d("div"),E=d("button"),E.textContent=v,w=T(),x=d("button"),I=d("span"),I.textContent=V,P=U(`\r
          Iniciar Combate`),this.h()},l(F){e=u(F,"DIV",{class:!0});var M=p(e);t=u(M,"DIV",{class:!0});var q=p(t);s=u(q,"H3",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-jkbohq"&&(s.textContent=a),o=D(q),r=u(q,"DIV",{class:!0});var L=p(r);c=u(L,"LABEL",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-18eazf9"&&(c.innerHTML=m),b=D(L),h=u(L,"INPUT",{type:!0,placeholder:!0,class:!0}),g=D(L),j.l(L),L.forEach(f),y=D(q),_=u(q,"DIV",{class:!0});var O=p(_);E=u(O,"BUTTON",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-1rt1icx"&&(E.textContent=v),w=D(O),x=u(O,"BUTTON",{class:!0});var X=p(x);I=u(X,"SPAN",{class:!0,"data-svelte-h":!0}),z(I)!=="svelte-v5ojki"&&(I.textContent=V),P=B(X,`\r
          Iniciar Combate`),X.forEach(f),O.forEach(f),q.forEach(f),M.forEach(f),this.h()},h(){i(s,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),i(c,"class","label"),i(h,"type","text"),i(h,"placeholder","Ej: Emboscada de Orcos"),i(h,"class",C="input input-bordered bg-[#2d241c] text-base-content "+(l[0]&&l[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(r,"class","form-control"),i(E,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),i(I,"class","text-xl"),i(x,"class","btn btn-dnd"),x.disabled=A=!l[15],i(_,"class","modal-action justify-center gap-4"),i(t,"class","modal-box card-parchment border-4 border-secondary"),i(e,"class","modal modal-open z-50")},m(F,M){J(F,e,M),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),ke(h,l[4]),n(r,g),j.m(r,null),n(t,y),n(t,_),n(_,E),n(_,w),n(_,x),n(x,I),n(x,P),k||(H=[oe(h,"input",l[34]),oe(h,"input",l[16]),oe(E,"click",l[23]),oe(x,"click",l[17])],k=!0)},p(F,M){M[0]&3&&C!==(C="input input-bordered bg-[#2d241c] text-base-content "+(F[0]&&F[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(h,"class",C),M[0]&16&&h.value!==F[4]&&ke(h,F[4]),G===(G=S(F))&&j?j.p(F,M):(j.d(1),j=G(F),j&&(j.c(),j.m(r,null))),M[0]&32768&&A!==(A=!F[15])&&(x.disabled=A)},d(F){F&&f(e),j.d(),k=!1,et(H)}}}function ir(l){let e,t='<span class="label-text-alt text-neutral/60 italic">Nombre del encuentro (3-100 caracteres)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(s){e=u(s,"LABEL",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-61x4np"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function cr(l){let e,t,s,a="‚ö†Ô∏è",o,r;return{c(){e=d("label"),t=d("span"),s=d("span"),s.textContent=a,o=T(),r=U(l[0]),this.h()},l(c){e=u(c,"LABEL",{class:!0});var m=p(e);t=u(m,"SPAN",{class:!0});var b=p(t);s=u(b,"SPAN",{class:!0,"data-svelte-h":!0}),z(s)!=="svelte-15g1o1n"&&(s.textContent=a),o=D(b),r=B(b,l[0]),b.forEach(f),m.forEach(f),this.h()},h(){i(s,"class","text-lg"),i(t,"class","label-text-alt text-error"),i(e,"class","label")},m(c,m){J(c,e,m),n(e,t),n(t,s),n(t,o),n(t,r)},p(c,m){m[0]&1&&re(r,c[0])},d(c){c&&f(e)}}}function ur(l){let e,t,s,a,o,r,c,m,b,h,C,g,y,_,E,v,w,x=l[7]&&es(l);const I=[sr,lr,tr],V=[];function P(M,q){return M[6]?0:M[2]?2:1}o=P(l),r=V[o]=I[o](l);let A=l[9]&&ns(l);function k(M){l[35](M)}let H={combatant:l[12],isDM:!!l[14]};l[10]!==void 0&&(H.isOpen=l[10]),b=new zn({props:H}),Wt.push(()=>Qt(b,"isOpen",k)),b.$on("apply",l[24]),b.$on("close",l[36]);function S(M){l[37](M)}let G={combatant:l[12],isDM:!!l[14]};l[11]!==void 0&&(G.isOpen=l[11]),g=new er({props:G}),Wt.push(()=>Qt(g,"isOpen",S)),g.$on("add",l[25]),g.$on("remove",l[26]),g.$on("close",l[38]);function j(M){l[39](M)}let F={players:l[5]};return l[8]!==void 0&&(F.isOpen=l[8]),E=new Ln({props:F}),Wt.push(()=>Qt(E,"isOpen",j)),E.$on("add",l[19]),E.$on("close",l[40]),{c(){e=d("div"),x&&x.c(),t=T(),s=d("div"),a=d("div"),r.c(),c=T(),A&&A.c(),m=T(),Ut(b.$$.fragment),C=T(),Ut(g.$$.fragment),_=T(),Ut(E.$$.fragment),this.h()},l(M){e=u(M,"DIV",{class:!0});var q=p(e);x&&x.l(q),t=D(q),s=u(q,"DIV",{class:!0});var L=p(s);a=u(L,"DIV",{class:!0});var O=p(a);r.l(O),O.forEach(f),L.forEach(f),q.forEach(f),c=D(M),A&&A.l(M),m=D(M),Bt(b.$$.fragment,M),C=D(M),Bt(g.$$.fragment,M),_=D(M),Bt(E.$$.fragment,M),this.h()},h(){i(a,"class","flex-1"),i(s,"class","flex flex-1"),i(e,"class","min-h-screen flex flex-col")},m(M,q){J(M,e,q),x&&x.m(e,null),n(e,t),n(e,s),n(s,a),V[o].m(a,null),J(M,c,q),A&&A.m(M,q),J(M,m,q),jt(b,M,q),J(M,C,q),jt(g,M,q),J(M,_,q),jt(E,M,q),w=!0},p(M,q){M[7]?x?x.p(M,q):(x=es(M),x.c(),x.m(e,t)):x&&(x.d(1),x=null);let L=o;o=P(M),o===L?V[o].p(M,q):($t(),Ke(V[L],1,1,()=>{V[L]=null}),Yt(),r=V[o],r?r.p(M,q):(r=V[o]=I[o](M),r.c()),Ge(r,1),r.m(a,null)),M[9]?A?A.p(M,q):(A=ns(M),A.c(),A.m(m.parentNode,m)):A&&(A.d(1),A=null);const O={};q[0]&4096&&(O.combatant=M[12]),q[0]&16384&&(O.isDM=!!M[14]),!h&&q[0]&1024&&(h=!0,O.isOpen=M[10],Jt(()=>h=!1)),b.$set(O);const X={};q[0]&4096&&(X.combatant=M[12]),q[0]&16384&&(X.isDM=!!M[14]),!y&&q[0]&2048&&(y=!0,X.isOpen=M[11],Jt(()=>y=!1)),g.$set(X);const se={};q[0]&32&&(se.players=M[5]),!v&&q[0]&256&&(v=!0,se.isOpen=M[8],Jt(()=>v=!1)),E.$set(se)},i(M){w||(Ge(r),Ge(b.$$.fragment,M),Ge(g.$$.fragment,M),Ge(E.$$.fragment,M),w=!0)},o(M){Ke(r),Ke(b.$$.fragment,M),Ke(g.$$.fragment,M),Ke(E.$$.fragment,M),w=!1},d(M){M&&(f(e),f(c),f(m),f(C),f(_)),x&&x.d(),V[o].d(),A&&A.d(M),St(b,M),St(g,M),St(E,M)}}}function dr(l,e,t){let s,a,o,r,c,m;dl(l,vs,N=>t(29,c=N)),dl(l,ps,N=>t(30,m=N)),bs.set("Combate");let b="",h=!1;function C(){t(1,h=!0)}let g=null,y=null,_=[],E=[],v=!0,w="",x=!1,I=!1,V="",P=!1,A=!1,k=null,H=null,S=null;const G=_s(xs);ms(async()=>{await M(),await q(),await j()}),hs(()=>{H&&H(),S&&S()});async function j(){try{t(6,v=!0);const N=pl(G,"encounters"),$=vl(N,Xt("campaignId","==",a),Xt("isActive","==",!0));H=_l($,me=>{if(me.empty)t(2,y=null),t(3,_=[]),S&&(S(),S=null);else{const ue=me.docs[0];t(2,y={id:ue.id,...ue.data()}),!S&&y&&F(y.id)}t(6,v=!1)},me=>{console.error("Error en listener de encuentro:",me),t(7,w=me.message),t(6,v=!1)})}catch(N){t(7,w=N.message),t(6,v=!1)}}function F(N){const $=pl(G,"combatants"),me=vl($,Xt("encounterId","==",N),gs("initiative","desc"));S=_l(me,ue=>{if(t(3,_=ue.docs.map(Q=>({id:Q.id,...Q.data()}))),k){const Q=_.find(he=>he.id===k.id);Q&&t(12,k=Q)}},ue=>{console.error("Error en listener de combatientes:",ue)})}async function M(){try{t(28,g=await Je.getCampaign(a))}catch(N){t(7,w=N.message)}}async function q(){try{t(5,E=await Je.getCampaignCharacters(a))}catch(N){console.error("Error loading characters:",N)}}async function L(){t(1,h=!0);const N=bl(V);if(!N.valid){t(0,b=N.error||"");return}try{await Je.createEncounter(a,V),t(9,I=!1),t(4,V=""),t(1,h=!1),t(0,b="")}catch($){t(7,w=$.message)}}async function O(){if(!(!y||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Je.endEncounter(y.id)}catch(N){t(7,w=N.message)}}async function X(N){if(y)try{await Je.addCombatant(y.id,N.detail),t(8,x=!1)}catch($){t(7,w=$.message)}}async function se(N){const $=N.detail;if(confirm(`¬øEliminar a ${$.name} del combate?`))try{await Je.removeCombatant($.id)}catch(me){t(7,w=me.message)}}function ie(N){t(12,k=N.detail),t(10,P=!0),t(11,A=!1)}function ne(N){t(12,k=N.detail),t(11,A=!0),t(10,P=!1)}function ee(){t(9,I=!1),t(4,V=""),t(1,h=!1),t(0,b="")}async function W(N){if(k)try{const $=N.detail,me=Math.max(0,Math.min(k.maxHp,k.currentHp+$));await Je.updateCombatant(k.id,{currentHp:me}),t(10,P=!1),t(12,k=null)}catch($){t(7,w=$.message)}}async function te(N){if(k)try{const $=N.detail,me=Array.isArray(k.conditions)?k.conditions:[];if(me.includes($)){console.log("Condici√≥n ya existe, ignorando");return}const ue=[...me,$];await Je.updateCombatant(k.id,{conditions:ue})}catch($){t(7,w=$.message)}}async function R(N){if(k)try{const $=N.detail,ue=(Array.isArray(k.conditions)?k.conditions:[]).filter(Q=>Q!==$);await Je.updateCombatant(k.id,{conditions:ue})}catch($){t(7,w=$.message)}}async function Z(){if(y)try{await Je.nextTurn(y.id)}catch(N){t(7,w=N.message)}}const Y=()=>t(7,w=""),ce=()=>t(9,I=!0),ae=()=>t(8,x=!0);function ge(){V=this.value,t(4,V)}function pe(N){P=N,t(10,P)}const _e=()=>{t(10,P=!1),t(12,k=null)};function K(N){A=N,t(11,A)}const fe=()=>{t(11,A=!1),t(12,k=null)};function de(N){x=N,t(8,x)}const le=()=>t(8,x=!1);return l.$$.update=()=>{if(l.$$.dirty[0]&18&&h&&V){const N=bl(V);t(0,b=N.valid?"":N.error||"")}l.$$.dirty[0]&17&&t(15,s=!b&&V.trim()),l.$$.dirty[0]&1073741824&&(a=m.params.id||""),l.$$.dirty[0]&805306368&&t(14,o=g&&c&&g.dmId===c.uid),l.$$.dirty[0]&12&&t(13,r=y&&_.length>0?_[y.turnIndex%_.length]:null)},[b,h,y,_,V,E,v,w,x,I,P,A,k,r,o,s,C,L,O,X,se,ie,ne,ee,W,te,R,Z,g,c,m,Y,ce,ae,ge,pe,_e,K,fe,de,le]}class xr extends xt{constructor(e){super(),Ct(this,e,dr,ur,yt,{},null,[-1,-1])}}export{xr as component};
