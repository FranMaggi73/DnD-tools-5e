import{S as Le,i as je,s as Ae,n as ae,d as p,b as L,c as o,m as d,e as m,f as y,o as M,h as k,q as xe,j as h,k as E,p as He,a as te,y as ye,g as z,z as Ce,t as G,u as Se,v as ke,r as le,x as Me,w as ie}from"../chunks/B11dj0TC.js";import{h as Be,a as ue,e as oe}from"../chunks/BFUIfuOa.js";import"../chunks/IHki7fMi.js";import{g as qe}from"../chunks/4AD-5CNy.js";function Ee(i,e,t){const l=i.slice();return l[12]=e[t].campaign,l[13]=e[t].members,l}function we(i,e,t){const l=i.slice();return l[16]=e[t],l}function De(i){let e,t,l,s,r,n;return{c(){e=h("div"),t=Ce("svg"),l=Ce("path"),s=E(),r=h("span"),n=G(i[4]),this.h()},l(c){e=m(c,"DIV",{class:!0});var a=y(e);t=ye(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var g=y(t);l=ye(g,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(p),g.forEach(p),s=k(a),r=m(a,"SPAN",{class:!0});var f=y(r);n=z(f,i[4]),f.forEach(p),a.forEach(p),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"stroke-width","2"),d(l,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"class","stroke-error shrink-0 h-6 w-6"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(r,"class","font-body"),d(e,"class","alert bg-error/20 border-2 border-error mb-6")},m(c,a){L(c,e,a),o(e,t),o(t,l),o(e,s),o(e,r),o(r,n)},p(c,a){a&16&&te(n,c[4])},d(c){c&&p(e)}}}function Ue(i){let e,t=oe(i[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Ve(Ee(i,t,s));return{c(){e=h("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=m(s,"DIV",{class:!0});var r=y(e);for(let n=0;n<l.length;n+=1)l[n].l(r);r.forEach(p),this.h()},h(){d(e,"class","w-fit gap-6")},m(s,r){L(s,e,r);for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(e,null)},p(s,r){if(r&1){t=oe(s[0]);let n;for(n=0;n<t.length;n+=1){const c=Ee(s,t,n);l[n]?l[n].p(c,r):(l[n]=Ve(c),l[n].c(),l[n].m(e,null))}for(;n<l.length;n+=1)l[n].d(1);l.length=t.length}},d(s){s&&p(e),Me(l,s)}}}function Oe(i){let e,t,l="üìñ",s,r,n="Tu Grimorio est√° Vac√≠o",c,a,g="No has creado ninguna campa√±a a√∫n. ¬°Comienza tu primera aventura √©pica!",f,_,u="Crear Primera Campa√±a",v,b;return{c(){e=h("div"),t=h("div"),t.textContent=l,s=E(),r=h("h2"),r.textContent=n,c=E(),a=h("p"),a.textContent=g,f=E(),_=h("button"),_.textContent=u,this.h()},l(x){e=m(x,"DIV",{class:!0});var C=y(e);t=m(C,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-jm5f9e"&&(t.textContent=l),s=k(C),r=m(C,"H2",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-lu3jlk"&&(r.textContent=n),c=k(C),a=m(C,"P",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1p29ydw"&&(a.textContent=g),f=k(C),_=m(C,"BUTTON",{class:!0,"data-svelte-h":!0}),M(_)!=="svelte-1tu7q9a"&&(_.textContent=u),C.forEach(p),this.h()},h(){d(t,"class","text-6xl mb-4"),d(r,"class","text-2xl font-medieval mb-3 text-neutral"),d(a,"class","text-neutral/70 font-body text-lg mb-6"),d(_,"class","btn btn-dnd"),d(e,"class","card-parchment max-w-2xl mx-auto p-12 text-center corner-ornament")},m(x,C){L(x,e,C),o(e,t),o(e,s),o(e,r),o(e,c),o(e,a),o(e,f),o(e,_),v||(b=le(_,"click",i[6]),v=!0)},p:ae,d(x){x&&p(e),v=!1,b()}}}function ze(i){let e,t='<div class="relative"><span class="loading loading-spinner loading-lg text-secondary"></span> <p class="mt-4 text-secondary font-medieval">Consultando el grimorio...</p></div>';return{c(){e=h("div"),e.innerHTML=t,this.h()},l(l){e=m(l,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-prkuak"&&(e.innerHTML=t),this.h()},h(){d(e,"class","flex justify-center py-20")},m(l,s){L(l,e,s)},p:ae,d(l){l&&p(e)}}}function Ge(i){let e,t="En busca de valientes aventureros...";return{c(){e=h("p"),e.textContent=t,this.h()},l(l){e=m(l,"P",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-1olkbmy"&&(e.textContent=t),this.h()},h(){d(e,"class","text-sm text-neutral/60 font-body italic")},m(l,s){L(l,e,s)},p:ae,d(l){l&&p(e)}}}function Re(i){var n,c;let e,t,l=oe((((n=i[13])==null?void 0:n.players)??[]).slice(0,6)),s=[];for(let a=0;a<l.length;a+=1)s[a]=Ie(we(i,l,a));let r=(((c=i[13])==null?void 0:c.players)??[]).length>6&&Ne(i);return{c(){e=h("div");for(let a=0;a<s.length;a+=1)s[a].c();t=E(),r&&r.c(),this.h()},l(a){e=m(a,"DIV",{class:!0});var g=y(e);for(let f=0;f<s.length;f+=1)s[f].l(g);t=k(g),r&&r.l(g),g.forEach(p),this.h()},h(){d(e,"class","flex flex-wrap gap-2")},m(a,g){L(a,e,g);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);o(e,t),r&&r.m(e,null)},p(a,g){var f,_;if(g&1){l=oe((((f=a[13])==null?void 0:f.players)??[]).slice(0,6));let u;for(u=0;u<l.length;u+=1){const v=we(a,l,u);s[u]?s[u].p(v,g):(s[u]=Ie(v),s[u].c(),s[u].m(e,t))}for(;u<s.length;u+=1)s[u].d(1);s.length=l.length}(((_=a[13])==null?void 0:_.players)??[]).length>6?r?r.p(a,g):(r=Ne(a),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(a){a&&p(e),Me(s,a),r&&r.d()}}}function Ie(i){let e,t,l,s,r,n;return{c(){e=h("div"),t=h("div"),l=h("img"),this.h()},l(c){e=m(c,"DIV",{class:!0,title:!0});var a=y(e);t=m(a,"DIV",{class:!0});var g=y(t);l=m(g,"IMG",{src:!0,alt:!0}),g.forEach(p),a.forEach(p),this.h()},h(){ie(l.src,s=i[16].userPhoto||"")||d(l,"src",s),d(l,"alt",r=i[16].userName||"Jugador"),d(t,"class","w-9 rounded-full ring-2 ring-success ring-offset-2 ring-offset-[#f4e4c1]"),d(e,"class","avatar"),d(e,"title",n=i[16].userName||"Jugador")},m(c,a){L(c,e,a),o(e,t),o(t,l)},p(c,a){a&1&&!ie(l.src,s=c[16].userPhoto||"")&&d(l,"src",s),a&1&&r!==(r=c[16].userName||"Jugador")&&d(l,"alt",r),a&1&&n!==(n=c[16].userName||"Jugador")&&d(e,"title",n)},d(c){c&&p(e)}}}function Ne(i){var c;let e,t,l,s,r=(((c=i[13])==null?void 0:c.players)??[]).length-6+"",n;return{c(){e=h("div"),t=h("div"),l=h("span"),s=G("+"),n=G(r),this.h()},l(a){e=m(a,"DIV",{class:!0});var g=y(e);t=m(g,"DIV",{class:!0});var f=y(t);l=m(f,"SPAN",{class:!0});var _=y(l);s=z(_,"+"),n=z(_,r),_.forEach(p),f.forEach(p),g.forEach(p),this.h()},h(){d(l,"class","text-xs font-bold"),d(t,"class","w-9 rounded-full bg-neutral text-secondary ring-2 ring-secondary"),d(e,"class","avatar placeholder")},m(a,g){L(a,e,g),o(e,t),o(t,l),o(l,s),o(l,n)},p(a,g){var f;g&1&&r!==(r=(((f=a[13])==null?void 0:f.players)??[]).length-6+"")&&te(n,r)},d(a){a&&p(e)}}}function Ve(i){var ve,pe,_e;let e,t,l,s=i[12].name+"",r,n,c,a,g="DUNGEON MASTER",f,_,u,v,b,x,C,B,D,w,P=(((pe=(ve=i[13])==null?void 0:ve.dm)==null?void 0:pe.userName)||i[12].dmName||"Dungeon Master")+"",W,K,T,j,Y,N=(((_e=i[13])==null?void 0:_e.players)??[]).length+"",A,q,U,R,O,J,fe=`<span class="text-xl">‚öîÔ∏è</span>
                Entrar a la Aventura`,ce,de,me;function he(H,V){var I;return(((I=H[13])==null?void 0:I.players)??[]).length>0?Re:Ge}let se=he(i),S=se(i);function Pe(){return i[7](i[12])}return{c(){e=h("div"),t=h("div"),l=h("h2"),r=G(s),n=E(),c=h("div"),a=h("p"),a.textContent=g,f=E(),_=h("div"),u=h("div"),v=h("div"),b=h("img"),B=E(),D=h("div"),w=h("p"),W=G(P),K=E(),T=h("div"),j=h("p"),Y=G("AVENTUREROS ("),A=G(N),q=G(")"),U=E(),S.c(),R=E(),O=h("div"),J=h("button"),J.innerHTML=fe,ce=E(),this.h()},l(H){e=m(H,"DIV",{class:!0});var V=y(e);t=m(V,"DIV",{class:!0});var I=y(t);l=m(I,"H2",{class:!0});var F=y(l);r=z(F,s),F.forEach(p),n=k(I),c=m(I,"DIV",{class:!0});var Q=y(c);a=m(Q,"P",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-1wz0qbo"&&(a.textContent=g),f=k(Q),_=m(Q,"DIV",{class:!0});var X=y(_);u=m(X,"DIV",{class:!0});var Z=y(u);v=m(Z,"DIV",{class:!0});var $=y(v);b=m($,"IMG",{src:!0,alt:!0}),$.forEach(p),Z.forEach(p),B=k(X),D=m(X,"DIV",{});var ee=y(D);w=m(ee,"P",{class:!0});var ge=y(w);W=z(ge,P),ge.forEach(p),ee.forEach(p),X.forEach(p),Q.forEach(p),K=k(I),T=m(I,"DIV",{class:!0});var re=y(T);j=m(re,"P",{class:!0});var ne=y(j);Y=z(ne,"AVENTUREROS ("),A=z(ne,N),q=z(ne,")"),ne.forEach(p),U=k(re),S.l(re),re.forEach(p),R=k(I),O=m(I,"DIV",{class:!0});var be=y(O);J=m(be,"BUTTON",{class:!0,"data-svelte-h":!0}),M(J)!=="svelte-nl0ij0"&&(J.innerHTML=fe),be.forEach(p),I.forEach(p),ce=k(V),V.forEach(p),this.h()},h(){var H,V,I,F;d(l,"class","card-title text-2xl font-medieval text-neutral mb-4 text-center"),d(a,"class","text-xs font-medieval text-neutral/60 mb-2 tracking-wider"),ie(b.src,x=((V=(H=i[13])==null?void 0:H.dm)==null?void 0:V.userPhoto)||i[12].dmPhoto||"")||d(b,"src",x),d(b,"alt",C=((F=(I=i[13])==null?void 0:I.dm)==null?void 0:F.userName)||i[12].dmName||"DM"),d(v,"class","w-10 rounded-full ring-2 ring-secondary ring-offset-2 ring-offset-[#f4e4c1]"),d(u,"class","avatar"),d(w,"class","font-bold text-neutral font-body"),d(_,"class","flex items-center gap-3"),d(c,"class","mb-4 bg-gradient-to-r from-primary/20 to-accent/20 p-3 rounded-lg border border-primary/30"),d(j,"class","text-xs font-medieval text-neutral/60 mb-2 tracking-wider"),d(T,"class","bg-gradient-to-r from-info/10 to-success/10 p-3 rounded-lg border border-info/30"),d(J,"class","btn btn-dnd w-full"),d(O,"class","card-actions justify-center mt-6"),d(t,"class","card-body"),d(e,"class","card-parchment card-hover corner-ornament")},m(H,V){L(H,e,V),o(e,t),o(t,l),o(l,r),o(t,n),o(t,c),o(c,a),o(c,f),o(c,_),o(_,u),o(u,v),o(v,b),o(_,B),o(_,D),o(D,w),o(w,W),o(t,K),o(t,T),o(T,j),o(j,Y),o(j,A),o(j,q),o(T,U),S.m(T,null),o(t,R),o(t,O),o(O,J),o(e,ce),de||(me=le(J,"click",Pe),de=!0)},p(H,V){var I,F,Q,X,Z,$,ee;i=H,V&1&&s!==(s=i[12].name+"")&&te(r,s),V&1&&!ie(b.src,x=((F=(I=i[13])==null?void 0:I.dm)==null?void 0:F.userPhoto)||i[12].dmPhoto||"")&&d(b,"src",x),V&1&&C!==(C=((X=(Q=i[13])==null?void 0:Q.dm)==null?void 0:X.userName)||i[12].dmName||"DM")&&d(b,"alt",C),V&1&&P!==(P=((($=(Z=i[13])==null?void 0:Z.dm)==null?void 0:$.userName)||i[12].dmName||"Dungeon Master")+"")&&te(W,P),V&1&&N!==(N=(((ee=i[13])==null?void 0:ee.players)??[]).length+"")&&te(A,N),se===(se=he(i))&&S?S.p(i,V):(S.d(1),S=se(i),S&&(S.c(),S.m(T,null)))},d(H){H&&p(e),S.d(),de=!1,me()}}}function Te(i){let e,t,l,s="üìú Crear Nueva Campa√±a",r,n,c,a='<span class="label-text font-medieval text-neutral text-lg">Nombre de la Campa√±a</span>',g,f,_,u,v='<span class="label-text-alt text-neutral/60 italic">Elige un nombre √©pico para tu aventura</span>',b,x,C,B="Cancelar",D,w,P,W="‚ú®",K,T,j,Y;return{c(){e=h("div"),t=h("div"),l=h("h3"),l.textContent=s,r=E(),n=h("div"),c=h("label"),c.innerHTML=a,g=E(),f=h("input"),_=E(),u=h("label"),u.innerHTML=v,b=E(),x=h("div"),C=h("button"),C.textContent=B,D=E(),w=h("button"),P=h("span"),P.textContent=W,K=G(`\r
          Crear`),this.h()},l(N){e=m(N,"DIV",{class:!0});var A=y(e);t=m(A,"DIV",{class:!0});var q=y(t);l=m(q,"H3",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-yzigb6"&&(l.textContent=s),r=k(q),n=m(q,"DIV",{class:!0});var U=y(n);c=m(U,"LABEL",{class:!0,"data-svelte-h":!0}),M(c)!=="svelte-9wkehl"&&(c.innerHTML=a),g=k(U),f=m(U,"INPUT",{type:!0,placeholder:!0,class:!0}),_=k(U),u=m(U,"LABEL",{class:!0,"data-svelte-h":!0}),M(u)!=="svelte-11camim"&&(u.innerHTML=v),U.forEach(p),b=k(q),x=m(q,"DIV",{class:!0});var R=y(x);C=m(R,"BUTTON",{class:!0,"data-svelte-h":!0}),M(C)!=="svelte-fx9fms"&&(C.textContent=B),D=k(R),w=m(R,"BUTTON",{class:!0});var O=y(w);P=m(O,"SPAN",{class:!0,"data-svelte-h":!0}),M(P)!=="svelte-1to6107"&&(P.textContent=W),K=z(O,`\r
          Crear`),O.forEach(p),R.forEach(p),q.forEach(p),A.forEach(p),this.h()},h(){d(l,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),d(c,"class","label"),d(f,"type","text"),d(f,"placeholder","Ej: La Mina Perdida de Phandelver"),d(f,"class","input input-medieval w-full text-lg font-body"),d(u,"class","label"),d(n,"class","form-control w-full flex-1"),d(C,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-32"),d(P,"class","text-xl"),d(w,"class","btn btn-dnd w-32 disabled:opacity-50 disabled:cursor-not-allowed"),w.disabled=T=!i[3].name||!i[3].name.trim(),d(x,"class","mt-6 flex justify-center gap-4"),d(t,"class","card-parchment border-4 border-secondary corner-ornament w-[420px] max-w-full relative p-6 flex flex-col transition-all duration-200 transform scale-100"),d(e,"class","modal modal-open z-50 fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm")},m(N,A){L(N,e,A),o(e,t),o(t,l),o(t,r),o(t,n),o(n,c),o(n,g),o(n,f),ke(f,i[3].name),o(n,_),o(n,u),o(t,b),o(t,x),o(x,C),o(x,D),o(x,w),o(w,P),o(w,K),j||(Y=[le(f,"input",i[8]),le(C,"click",i[9]),le(w,"click",i[5])],j=!0)},p(N,A){A&8&&f.value!==N[3].name&&ke(f,N[3].name),A&8&&T!==(T=!N[3].name||!N[3].name.trim())&&(w.disabled=T)},d(N){N&&p(e),j=!1,Se(Y)}}}function Je(i){let e,t,l='<h1 class="text-4xl lg:text-5xl font-bold text-secondary title-ornament mx-4 mb-3 text-shadow">Mis Campa√±as</h1> <p class="text-base-content/70 font-body italic text-lg">&quot;Las aventuras aguardan a quienes se atreven a explorar...&quot;</p>',s,r,n,c,a=i[4]&&De(i);function g(v,b){return v[1]?ze:v[0].length===0?Oe:Ue}let f=g(i),_=f(i),u=i[2]&&Te(i);return{c(){e=h("div"),t=h("div"),t.innerHTML=l,s=E(),a&&a.c(),r=E(),_.c(),n=E(),u&&u.c(),c=xe(),this.h()},l(v){e=m(v,"DIV",{class:!0});var b=y(e);t=m(b,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-j8o7kj"&&(t.innerHTML=l),s=k(b),a&&a.l(b),r=k(b),_.l(b),b.forEach(p),n=k(v),u&&u.l(v),c=xe(),this.h()},h(){d(t,"class","mb-8 text-center"),d(e,"class","container mx-auto justify-center items-center flex flex-col p-6 lg:p-8")},m(v,b){L(v,e,b),o(e,t),o(e,s),a&&a.m(e,null),o(e,r),_.m(e,null),L(v,n,b),u&&u.m(v,b),L(v,c,b)},p(v,[b]){v[4]?a?a.p(v,b):(a=De(v),a.c(),a.m(e,r)):a&&(a.d(1),a=null),f===(f=g(v))&&_?_.p(v,b):(_.d(1),_=f(v),_&&(_.c(),_.m(e,null))),v[2]?u?u.p(v,b):(u=Te(v),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},i:ae,o:ae,d(v){v&&(p(e),p(n),p(c)),a&&a.d(),_.d(),u&&u.d(v)}}}function Fe(i,e,t){Be.set("üé≤ Grimorio de Aventuras");let l=[],s=[],r=!0,n=!1,c={name:""},a="";He(async()=>{await g()});async function g(){try{t(1,r=!0),t(4,a="");const x=await ue.getCampaigns();l=Array.isArray(x)?x:[];const C=await Promise.all(l.map(async B=>{try{const D=await ue.getCampaignMembers(B.id),w={dm:(D==null?void 0:D.dm)??null,players:Array.isArray(D==null?void 0:D.players)?D.players:[]};return{campaign:B,members:w}}catch{return{campaign:B,members:{dm:null,players:[]}}}}));t(0,s=C)}catch(x){t(4,a=(x==null?void 0:x.message)??String(x)),l=[],t(0,s=[])}finally{t(1,r=!1)}}async function f(){try{if(t(4,a=""),!c.name||!c.name.trim()){t(4,a="El nombre de la campa√±a no puede estar vac√≠o.");return}await ue.createCampaign({name:c.name.trim()}),t(2,n=!1),t(3,c={name:""}),await g()}catch(x){t(4,a=(x==null?void 0:x.message)??String(x))}}const _=()=>t(2,n=!0),u=x=>qe(`/campaigns/${x.id}`);function v(){c.name=this.value,t(3,c)}return[s,r,n,c,a,f,_,u,v,()=>{t(2,n=!1),t(3,c={name:""})}]}class Ye extends Le{constructor(e){super(),je(this,e,Fe,Je,Ae,{})}}export{Ye as component};
