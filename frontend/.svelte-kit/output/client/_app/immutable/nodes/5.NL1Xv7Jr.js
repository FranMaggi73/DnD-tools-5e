import{S as gt,i as xt,s as Ct,n as xe,d,a as re,m as o,b as Y,c as s,e as c,f as m,h as k,g as q,o as G,j as u,k as I,t as F,A as Ut,r as ie,x as ht,u as at,q as pt,Z as Yl,_ as $l,B as Xe,$ as cl,v as ye,a0 as en,U as Gt,D as Wt,E as Jt,F as jt,G as Ke,H as We,I as Zt,J as Qt,K as Lt,L as St,M as Bt,l as ul,p as tn,N as ln,O as Yt}from"../chunks/B11dj0TC.js";import{e as Re,o as _t,h as nn,a as Qe}from"../chunks/CmoHV78C.js";import"../chunks/IHki7fMi.js";import{p as sn}from"../chunks/I2x72rHv.js";import{u as rn}from"../chunks/DrPqR0bn.js";import{g as an,c as dl,q as fl,w as Kt,o as pl,a as on}from"../chunks/eN7n43qG.js";import{c as cn}from"../chunks/Bhgkhhu0.js";function hl(n,e,t){const l=n.slice();return l[10]=e[t],l}function vl(n){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=u("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1fc3yjt"&&(e.textContent=t),this.h()},h(){o(e,"class","absolute -top-3 -right-3 badge badge-ornate text-lg animate-bounce z-10")},m(l,a){Y(l,e,a)},d(l){l&&d(e)}}}function ml(n){let e,t='<span class="text-6xl">üíÄ</span>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-it6l4x"&&(e.innerHTML=t),this.h()},h(){o(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(l,a){Y(l,e,a)},d(l){l&&d(e)}}}function bl(n){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,i,r,f,p="üóëÔ∏è Eliminar",h,v;return{c(){e=u("div"),t=u("label"),t.innerHTML=l,a=I(),i=u("ul"),r=u("li"),f=u("a"),f.textContent=p,this.h()},l(x){e=c(x,"DIV",{class:!0});var b=m(e);t=c(b,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),G(t)!=="svelte-13tftyw"&&(t.innerHTML=l),a=k(b),i=c(b,"UL",{tabindex:!0,class:!0});var _=m(i);r=c(_,"LI",{});var y=m(r);f=c(y,"A",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-hji4ll"&&(f.textContent=p),y.forEach(d),_.forEach(d),b.forEach(d),this.h()},h(){o(t,"tabindex","0"),o(t,"class","btn btn-ghost btn-xs btn-circle"),o(f,"class","text-error"),o(i,"tabindex","0"),o(i,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-52 border-2 border-secondary"),o(e,"class","dropdown dropdown-end")},m(x,b){Y(x,e,b),s(e,t),s(e,a),s(e,i),s(i,r),s(r,f),h||(v=ie(f,"click",n[7]),h=!0)},p:xe,d(x){x&&d(e),h=!1,v()}}}function _l(n){let e,t=Re(n[0].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=gl(hl(n,t,a));return{c(){e=u("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=m(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(d),this.h()},h(){o(e,"class","flex flex-wrap gap-1 mt-2")},m(a,i){Y(a,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,i){if(i&1){t=Re(a[0].conditions);let r;for(r=0;r<t.length;r+=1){const f=hl(a,t,r);l[r]?l[r].p(f,i):(l[r]=gl(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&d(e),ht(l,a)}}}function gl(n){let e,t=n[10]+"",l;return{c(){e=u("div"),l=F(t),this.h()},l(a){e=c(a,"DIV",{class:!0});var i=m(e);l=q(i,t),i.forEach(d),this.h()},h(){o(e,"class","badge badge-sm badge-warning text-xs")},m(a,i){Y(a,e,i),s(e,l)},p(a,i){i&1&&t!==(t=a[10]+"")&&re(l,t)},d(a){a&&d(e)}}}function xl(n){let e,t,l="üíö HP",a,i,r="‚ö†Ô∏è Estado",f,p;return{c(){e=u("div"),t=u("button"),t.textContent=l,a=I(),i=u("button"),i.textContent=r,this.h()},l(h){e=c(h,"DIV",{class:!0});var v=m(e);t=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-13t9wqw"&&(t.textContent=l),a=k(v),i=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),G(i)!=="svelte-1e8bnzo"&&(i.textContent=r),v.forEach(d),this.h()},h(){o(t,"class","btn btn-xs btn-success flex-1"),o(i,"class","btn btn-xs btn-warning flex-1"),o(e,"class","flex gap-2 mt-3")},m(h,v){Y(h,e,v),s(e,t),s(e,a),s(e,i),f||(p=[ie(t,"click",n[5]),ie(i,"click",n[6])],f=!0)},p:xe,d(h){h&&d(e),f=!1,at(p)}}}function un(n){let e,t,l,a,i,r,f,p,h,v=n[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",x,b,_,y,E,g=n[0].name+"",T,C,D,L,N,H=n[0].initiative+"",V,A,S,B,P=n[0].armorClass+"",ee,w,R,j,U,M,W="Puntos de Vida",ce,J,O=n[0].currentHp+"",z,X,ue=n[0].maxHp+"",te,ne,ae,he,_e,me,ke,Q,de,$=n[1]&&vl(),K=n[3]&&ml(),le=n[2]&&bl(n),pe=n[0].conditions&&n[0].conditions.length>0&&_l(n),ge=n[2]&&xl(n);return{c(){e=u("div"),$&&$.c(),t=I(),K&&K.c(),l=I(),a=u("div"),i=u("div"),r=u("div"),f=u("div"),p=u("div"),h=u("span"),x=F(v),_=I(),y=u("div"),E=u("h3"),T=F(g),C=I(),D=u("div"),L=u("div"),N=F("üé≤ "),V=F(H),A=I(),S=u("div"),B=F("üõ°Ô∏è AC "),ee=F(P),w=I(),le&&le.c(),R=I(),j=u("div"),U=u("div"),M=u("span"),M.textContent=W,ce=I(),J=u("span"),z=F(O),X=F("/"),te=F(ue),ne=I(),ae=u("progress"),ke=I(),pe&&pe.c(),Q=I(),ge&&ge.c(),this.h()},l(Z){e=c(Z,"DIV",{class:!0});var fe=m(e);$&&$.l(fe),t=k(fe),K&&K.l(fe),l=k(fe),a=c(fe,"DIV",{class:!0});var Te=m(a);i=c(Te,"DIV",{class:!0});var Ie=m(i);r=c(Ie,"DIV",{class:!0});var Ze=m(r);f=c(Ze,"DIV",{class:!0});var Je=m(f);p=c(Je,"DIV",{class:!0});var Ce=m(p);h=c(Ce,"SPAN",{class:!0});var Se=m(h);x=q(Se,v),Se.forEach(d),Ce.forEach(d),Je.forEach(d),Ze.forEach(d),_=k(Ie),y=c(Ie,"DIV",{class:!0});var Ne=m(y);E=c(Ne,"H3",{class:!0});var Ye=m(E);T=q(Ye,g),Ye.forEach(d),C=k(Ne),D=c(Ne,"DIV",{class:!0});var Ve=m(D);L=c(Ve,"DIV",{class:!0});var Oe=m(L);N=q(Oe,"üé≤ "),V=q(Oe,H),Oe.forEach(d),A=k(Ve),S=c(Ve,"DIV",{class:!0});var Ee=m(S);B=q(Ee,"üõ°Ô∏è AC "),ee=q(Ee,P),Ee.forEach(d),Ve.forEach(d),Ne.forEach(d),w=k(Ie),le&&le.l(Ie),Ie.forEach(d),R=k(Te),j=c(Te,"DIV",{class:!0});var qe=m(j);U=c(qe,"DIV",{class:!0});var Pe=m(U);M=c(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),G(M)!=="svelte-1a9ef08"&&(M.textContent=W),ce=k(Pe),J=c(Pe,"SPAN",{class:!0});var we=m(J);z=q(we,O),X=q(we,"/"),te=q(we,ue),we.forEach(d),Pe.forEach(d),ne=k(qe),ae=c(qe,"PROGRESS",{class:!0,max:!0}),m(ae).forEach(d),qe.forEach(d),ke=k(Te),pe&&pe.l(Te),Q=k(Te),ge&&ge.l(Te),Te.forEach(d),fe.forEach(d),this.h()},h(){o(h,"class","text-2xl"),o(p,"class","bg-primary/20 flex items-center justify-center"),o(f,"class",b="w-16 h-16 rounded-full ring-2 "+(n[1]?"ring-secondary":"ring-primary/50")),o(r,"class","avatar"),o(E,"class","font-medieval text-lg text-neutral font-bold"),o(L,"class","badge badge-sm bg-primary/30 text-neutral border-primary/50"),o(S,"class","badge badge-sm bg-info/30 text-neutral border-info/50"),o(D,"class","flex gap-2 mt-1"),o(y,"class","flex-1"),o(i,"class","flex items-start gap-3"),o(M,"class","text-xs font-medieval text-neutral/70"),o(J,"class","font-bold text-neutral"),o(U,"class","flex justify-between items-center mb-1"),o(ae,"class",he="progress progress-"+n[4]+" w-full"),ae.value=_e=n[0].currentHp,o(ae,"max",me=n[0].maxHp),o(j,"class","mt-3"),o(a,"class","card-body p-4"),o(e,"class",de="card-parchment corner-ornament relative "+(n[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(n[3]?"opacity-50":""))},m(Z,fe){Y(Z,e,fe),$&&$.m(e,null),s(e,t),K&&K.m(e,null),s(e,l),s(e,a),s(a,i),s(i,r),s(r,f),s(f,p),s(p,h),s(h,x),s(i,_),s(i,y),s(y,E),s(E,T),s(y,C),s(y,D),s(D,L),s(L,N),s(L,V),s(D,A),s(D,S),s(S,B),s(S,ee),s(i,w),le&&le.m(i,null),s(a,R),s(a,j),s(j,U),s(U,M),s(U,ce),s(U,J),s(J,z),s(J,X),s(J,te),s(j,ne),s(j,ae),s(a,ke),pe&&pe.m(a,null),s(a,Q),ge&&ge.m(a,null)},p(Z,[fe]){Z[1]?$||($=vl(),$.c(),$.m(e,t)):$&&($.d(1),$=null),Z[3]?K||(K=ml(),K.c(),K.m(e,l)):K&&(K.d(1),K=null),fe&1&&v!==(v=Z[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(x,v),fe&2&&b!==(b="w-16 h-16 rounded-full ring-2 "+(Z[1]?"ring-secondary":"ring-primary/50"))&&o(f,"class",b),fe&1&&g!==(g=Z[0].name+"")&&re(T,g),fe&1&&H!==(H=Z[0].initiative+"")&&re(V,H),fe&1&&P!==(P=Z[0].armorClass+"")&&re(ee,P),Z[2]?le?le.p(Z,fe):(le=bl(Z),le.c(),le.m(i,null)):le&&(le.d(1),le=null),fe&1&&O!==(O=Z[0].currentHp+"")&&re(z,O),fe&1&&ue!==(ue=Z[0].maxHp+"")&&re(te,ue),fe&16&&he!==(he="progress progress-"+Z[4]+" w-full")&&o(ae,"class",he),fe&1&&_e!==(_e=Z[0].currentHp)&&(ae.value=_e),fe&1&&me!==(me=Z[0].maxHp)&&o(ae,"max",me),Z[0].conditions&&Z[0].conditions.length>0?pe?pe.p(Z,fe):(pe=_l(Z),pe.c(),pe.m(a,Q)):pe&&(pe.d(1),pe=null),Z[2]?ge?ge.p(Z,fe):(ge=xl(Z),ge.c(),ge.m(a,null)):ge&&(ge.d(1),ge=null),fe&10&&de!==(de="card-parchment corner-ornament relative "+(Z[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(Z[3]?"opacity-50":""))&&o(e,"class",de)},i:xe,o:xe,d(Z){Z&&d(e),$&&$.d(),K&&K.d(),le&&le.d(),pe&&pe.d(),ge&&ge.d()}}}function dn(n,e,t){let l,a,i,{combatant:r}=e,{isCurrentTurn:f=!1}=e,{isDM:p=!1}=e;const h=Ut();function v(){h("updateHP",r)}function x(){h("addCondition",r)}function b(){h("remove",r)}return n.$$set=_=>{"combatant"in _&&t(0,r=_.combatant),"isCurrentTurn"in _&&t(1,f=_.isCurrentTurn),"isDM"in _&&t(2,p=_.isDM)},n.$$.update=()=>{n.$$.dirty&1&&t(8,l=r.currentHp/r.maxHp*100),n.$$.dirty&256&&t(4,a=l>50?"success":l>25?"warning":"error"),n.$$.dirty&1&&t(3,i=r.currentHp<=0)},[r,f,p,i,a,v,x,b,l]}class fn extends gt{constructor(e){super(),xt(this,e,dn,un,Ct,{combatant:0,isCurrentTurn:1,isDM:2})}}var Nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function hn(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Jl=hn,vn=typeof Nt=="object"&&Nt&&Nt.Object===Object&&Nt,mn=vn,bn=mn,_n=typeof self=="object"&&self&&self.Object===Object&&self,gn=bn||_n||Function("return this")(),Ql=gn,xn=Ql,Cn=function(){return xn.Date.now()},yn=Cn,En=/\s/;function wn(n){for(var e=n.length;e--&&En.test(n.charAt(e)););return e}var kn=wn,In=kn,Tn=/^\s+/;function Dn(n){return n&&n.slice(0,In(n)+1).replace(Tn,"")}var Vn=Dn,Hn=Ql,On=Hn.Symbol,Kl=On,Cl=Kl,Xl=Object.prototype,Pn=Xl.hasOwnProperty,An=Xl.toString,bt=Cl?Cl.toStringTag:void 0;function Mn(n){var e=Pn.call(n,bt),t=n[bt];try{n[bt]=void 0;var l=!0}catch{}var a=An.call(n);return l&&(e?n[bt]=t:delete n[bt]),a}var Nn=Mn,jn=Object.prototype,Ln=jn.toString;function Sn(n){return Ln.call(n)}var Bn=Sn,yl=Kl,Un=Nn,zn=Bn,Rn="[object Null]",qn="[object Undefined]",El=yl?yl.toStringTag:void 0;function Fn(n){return n==null?n===void 0?qn:Rn:El&&El in Object(n)?Un(n):zn(n)}var Gn=Fn;function Wn(n){return n!=null&&typeof n=="object"}var Jn=Wn,Qn=Gn,Kn=Jn,Xn="[object Symbol]";function Zn(n){return typeof n=="symbol"||Kn(n)&&Qn(n)==Xn}var Yn=Zn,$n=Vn,wl=Jl,es=Yn,kl=NaN,ts=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,ns=/^0o[0-7]+$/i,ss=parseInt;function rs(n){if(typeof n=="number")return n;if(es(n))return kl;if(wl(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=wl(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=$n(n);var t=ls.test(n);return t||ns.test(n)?ss(n.slice(2),t?2:8):ts.test(n)?kl:+n}var as=rs,os=Jl,Xt=yn,Il=as,is="Expected a function",cs=Math.max,us=Math.min;function ds(n,e,t){var l,a,i,r,f,p,h=0,v=!1,x=!1,b=!0;if(typeof n!="function")throw new TypeError(is);e=Il(e)||0,os(t)&&(v=!!t.leading,x="maxWait"in t,i=x?cs(Il(t.maxWait)||0,e):i,b="trailing"in t?!!t.trailing:b);function _(H){var V=l,A=a;return l=a=void 0,h=H,r=n.apply(A,V),r}function y(H){return h=H,f=setTimeout(T,e),v?_(H):r}function E(H){var V=H-p,A=H-h,S=e-V;return x?us(S,i-A):S}function g(H){var V=H-p,A=H-h;return p===void 0||V>=e||V<0||x&&A>=i}function T(){var H=Xt();if(g(H))return C(H);f=setTimeout(T,E(H))}function C(H){return f=void 0,b&&l?_(H):(l=a=void 0,r)}function D(){f!==void 0&&clearTimeout(f),h=0,l=p=a=f=void 0}function L(){return f===void 0?r:C(Xt())}function N(){var H=Xt(),V=g(H);if(l=arguments,a=this,p=H,V){if(f===void 0)return y(p);if(x)return clearTimeout(f),f=setTimeout(T,e),_(p)}return f===void 0&&(f=setTimeout(T,e)),r}return N.cancel=D,N.flush=L,N}var fs=ds;const Zl=pn(fs);function Tl(n,e,t){const l=n.slice();return l[36]=e[t],l}function Dl(n,e,t){const l=n.slice();return l[33]=e[t],l}function Vl(n){let e,t,l,a,i="‚öîÔ∏è Agregar Combatiente",r,f,p,h,v,x,b,_,y,E,g,T="‚úï",C,D,L,N,H,V="Cancelar",A,S,B,P="‚öîÔ∏è",ee,w,R,j;function U(ce,J){return ce[3]==="player"?hs:ps}let M=U(n),W=M(n);return{c(){e=u("div"),t=u("div"),l=u("div"),a=u("h3"),a.textContent=i,r=I(),f=u("div"),p=u("button"),h=F("üßù Jugador"),x=I(),b=u("button"),_=F("üêâ Monstruo"),E=I(),g=u("button"),g.textContent=T,C=I(),D=u("div"),W.c(),L=I(),N=u("div"),H=u("button"),H.textContent=V,A=I(),S=u("button"),B=u("span"),B.textContent=P,ee=F(" Agregar al Combate"),this.h()},l(ce){e=c(ce,"DIV",{class:!0});var J=m(e);t=c(J,"DIV",{class:!0});var O=m(t);l=c(O,"DIV",{class:!0});var z=m(l);a=c(z,"H3",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-157e7j1"&&(a.textContent=i),r=k(z),f=c(z,"DIV",{class:!0});var X=m(f);p=c(X,"BUTTON",{class:!0});var ue=m(p);h=q(ue,"üßù Jugador"),ue.forEach(d),x=k(X),b=c(X,"BUTTON",{class:!0});var te=m(b);_=q(te,"üêâ Monstruo"),te.forEach(d),X.forEach(d),E=k(z),g=c(z,"BUTTON",{class:!0,"data-svelte-h":!0}),G(g)!=="svelte-1r1r6u3"&&(g.textContent=T),z.forEach(d),C=k(O),D=c(O,"DIV",{class:!0});var ne=m(D);W.l(ne),ne.forEach(d),L=k(O),N=c(O,"DIV",{class:!0});var ae=m(N);H=c(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),G(H)!=="svelte-toewbe"&&(H.textContent=V),A=k(ae),S=c(ae,"BUTTON",{class:!0});var he=m(S);B=c(he,"SPAN",{class:!0,"data-svelte-h":!0}),G(B)!=="svelte-v5ojki"&&(B.textContent=P),ee=q(he," Agregar al Combate"),he.forEach(d),ae.forEach(d),O.forEach(d),J.forEach(d),this.h()},h(){o(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),o(p,"class",v="btn btn-sm font-medieval "+(n[3]==="player"?"btn-primary":"btn-outline")),o(b,"class",y="btn btn-sm font-medieval "+(n[3]==="monster"?"btn-primary":"btn-outline")),o(f,"class","flex gap-2"),o(g,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),o(l,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),o(D,"class","flex-1 overflow-y-auto p-4 space-y-4"),o(H,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),o(B,"class","text-xl"),o(S,"class","btn btn-dnd w-full md:w-auto"),S.disabled=w=n[3]==="player"&&(!n[10]||n[4]<1)||n[3]==="monster"&&(!n[7]||!n[8]||!n[9]||n[4]<1),o(N,"class","flex justify-center gap-4 p-4 border-t-2 border-secondary flex-col md:flex-row"),o(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-[80vh] md:h-[70vh] relative flex flex-col"),o(e,"class","modal modal-open z-50")},m(ce,J){Y(ce,e,J),s(e,t),s(t,l),s(l,a),s(l,r),s(l,f),s(f,p),s(p,h),s(f,x),s(f,b),s(b,_),s(l,E),s(l,g),s(t,C),s(t,D),W.m(D,null),s(t,L),s(t,N),s(N,H),s(N,A),s(N,S),s(S,B),s(S,ee),R||(j=[ie(p,"click",n[16]),ie(b,"click",n[17]),ie(g,"click",n[15]),ie(H,"click",n[15]),ie(S,"click",function(){Yl(n[3]==="player"?n[11]:n[14])&&(n[3]==="player"?n[11]:n[14]).apply(this,arguments)})],R=!0)},p(ce,J){n=ce,J[0]&8&&v!==(v="btn btn-sm font-medieval "+(n[3]==="player"?"btn-primary":"btn-outline"))&&o(p,"class",v),J[0]&8&&y!==(y="btn btn-sm font-medieval "+(n[3]==="monster"?"btn-primary":"btn-outline"))&&o(b,"class",y),M===(M=U(n))&&W?W.p(n,J):(W.d(1),W=M(n),W&&(W.c(),W.m(D,null))),J[0]&1944&&w!==(w=n[3]==="player"&&(!n[10]||n[4]<1)||n[3]==="monster"&&(!n[7]||!n[8]||!n[9]||n[4]<1))&&(S.disabled=w)},d(ce){ce&&d(e),W.d(),R=!1,at(j)}}}function ps(n){let e,t,l,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',i,r,f,p,h,v,x,b='<span class="label-text font-medieval text-neutral">Nombre</span>',_,y,E,g,T,C,D='<span class="label-text font-medieval text-neutral">Iniciativa</span>',L,N,H,V,A,S='<span class="label-text font-medieval text-neutral">HP M√°ximo</span>',B,P,ee,w,R,j='<span class="label-text font-medieval text-neutral">AC</span>',U,M,W,ce,J=n[6].length>0&&Hl(n);return{c(){e=u("div"),t=u("div"),l=u("label"),l.innerHTML=a,i=I(),r=u("input"),f=I(),J&&J.c(),p=I(),h=u("div"),v=u("div"),x=u("label"),x.innerHTML=b,_=I(),y=u("input"),E=I(),g=u("div"),T=u("div"),C=u("label"),C.innerHTML=D,L=I(),N=u("input"),H=I(),V=u("div"),A=u("label"),A.innerHTML=S,B=I(),P=u("input"),ee=I(),w=u("div"),R=u("label"),R.innerHTML=j,U=I(),M=u("input"),this.h()},l(O){e=c(O,"DIV",{class:!0});var z=m(e);t=c(z,"DIV",{class:!0});var X=m(t);l=c(X,"LABEL",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1s7wqfp"&&(l.innerHTML=a),i=k(X),r=c(X,"INPUT",{type:!0,placeholder:!0,class:!0}),X.forEach(d),f=k(z),J&&J.l(z),p=k(z),h=c(z,"DIV",{class:!0});var ue=m(h);v=c(ue,"DIV",{class:!0});var te=m(v);x=c(te,"LABEL",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-n9vtz6"&&(x.innerHTML=b),_=k(te),y=c(te,"INPUT",{type:!0,class:!0}),te.forEach(d),E=k(ue),g=c(ue,"DIV",{class:!0});var ne=m(g);T=c(ne,"DIV",{class:!0});var ae=m(T);C=c(ae,"LABEL",{class:!0,"data-svelte-h":!0}),G(C)!=="svelte-loi7q8"&&(C.innerHTML=D),L=k(ae),N=c(ae,"INPUT",{type:!0,class:!0}),ae.forEach(d),H=k(ne),V=c(ne,"DIV",{class:!0});var he=m(V);A=c(he,"LABEL",{class:!0,"data-svelte-h":!0}),G(A)!=="svelte-r75dry"&&(A.innerHTML=S),B=k(he),P=c(he,"INPUT",{type:!0,class:!0}),he.forEach(d),ee=k(ne),w=c(ne,"DIV",{class:!0});var _e=m(w);R=c(_e,"LABEL",{class:!0,"data-svelte-h":!0}),G(R)!=="svelte-436dg3"&&(R.innerHTML=j),U=k(_e),M=c(_e,"INPUT",{type:!0,class:!0}),_e.forEach(d),ne.forEach(d),ue.forEach(d),z.forEach(d),this.h()},h(){o(l,"class","label"),o(r,"type","text"),o(r,"placeholder","Ej: goblin, dragon..."),o(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(t,"class","form-control mb-4"),o(x,"class","label"),o(y,"type","text"),o(y,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(v,"class","form-control"),o(C,"class","label"),o(N,"type","number"),o(N,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(T,"class","form-control"),o(A,"class","label"),o(P,"type","number"),o(P,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(V,"class","form-control"),o(R,"class","label"),o(M,"type","number"),o(M,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(w,"class","form-control"),o(g,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),o(h,"class","space-y-4"),o(e,"class","space-y-4")},m(O,z){Y(O,e,z),s(e,t),s(t,l),s(t,i),s(t,r),ye(r,n[5]),s(e,f),J&&J.m(e,null),s(e,p),s(e,h),s(h,v),s(v,x),s(v,_),s(v,y),ye(y,n[7]),s(h,E),s(h,g),s(g,T),s(T,C),s(T,L),s(T,N),ye(N,n[4]),s(g,H),s(g,V),s(V,A),s(V,B),s(V,P),ye(P,n[8]),s(g,ee),s(g,w),s(w,R),s(w,U),s(w,M),ye(M,n[9]),W||(ce=[ie(r,"input",n[20]),ie(r,"input",n[12]),ie(y,"input",n[22]),ie(N,"input",n[23]),ie(P,"input",n[24]),ie(M,"input",n[25])],W=!0)},p(O,z){z[0]&32&&r.value!==O[5]&&ye(r,O[5]),O[6].length>0?J?J.p(O,z):(J=Hl(O),J.c(),J.m(e,p)):J&&(J.d(1),J=null),z[0]&128&&y.value!==O[7]&&ye(y,O[7]),z[0]&16&&Xe(N.value)!==O[4]&&ye(N,O[4]),z[0]&256&&Xe(P.value)!==O[8]&&ye(P,O[8]),z[0]&512&&Xe(M.value)!==O[9]&&ye(M,O[9])},d(O){O&&d(e),J&&J.d(),W=!1,at(ce)}}}function hs(n){var W,ce,J;let e,t,l,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador</span>',i,r,f,p="-- Elegir jugador --",h,v,x,b='<span class="label-text font-medieval text-neutral">Iniciativa</span>',_,y,E,g,T,C,D,L=(((W=n[10])==null?void 0:W.name)||"Elegir jugador")+"",N,H,V,A,S=(((ce=n[10])==null?void 0:ce.maxHp)||0)+"",B,P,ee=(((J=n[10])==null?void 0:J.armorClass)||0)+"",w,R,j,U=Re(n[1]),M=[];for(let O=0;O<U.length;O+=1)M[O]=Pl(Dl(n,U,O));return{c(){e=u("div"),t=u("div"),l=u("label"),l.innerHTML=a,i=I(),r=u("select"),f=u("option"),f.textContent=p;for(let O=0;O<M.length;O+=1)M[O].c();h=I(),v=u("div"),x=u("label"),x.innerHTML=b,_=I(),y=u("input"),E=I(),g=u("div"),T=u("div"),C=u("div"),D=u("p"),N=F(L),H=I(),V=u("p"),A=F("HP: "),B=F(S),P=F(" | AC: "),w=F(ee),this.h()},l(O){e=c(O,"DIV",{class:!0});var z=m(e);t=c(z,"DIV",{class:!0});var X=m(t);l=c(X,"LABEL",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1lzlsw9"&&(l.innerHTML=a),i=k(X),r=c(X,"SELECT",{class:!0});var ue=m(r);f=c(ue,"OPTION",{"data-svelte-h":!0}),G(f)!=="svelte-ws9sqz"&&(f.textContent=p);for(let ke=0;ke<M.length;ke+=1)M[ke].l(ue);ue.forEach(d),X.forEach(d),h=k(z),v=c(z,"DIV",{class:!0});var te=m(v);x=c(te,"LABEL",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1wwr5wg"&&(x.innerHTML=b),_=k(te),y=c(te,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),te.forEach(d),E=k(z),g=c(z,"DIV",{class:!0});var ne=m(g);T=c(ne,"DIV",{class:!0});var ae=m(T);C=c(ae,"DIV",{});var he=m(C);D=c(he,"P",{class:!0});var _e=m(D);N=q(_e,L),_e.forEach(d),H=k(he),V=c(he,"P",{class:!0});var me=m(V);A=q(me,"HP: "),B=q(me,S),P=q(me," | AC: "),w=q(me,ee),me.forEach(d),he.forEach(d),ae.forEach(d),ne.forEach(d),z.forEach(d),this.h()},h(){o(l,"class","label"),f.__value="",ye(f,f.__value),f.disabled=!0,f.selected=!0,o(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),n[2]===void 0&&en(()=>n[18].call(r)),o(t,"class","form-control"),o(x,"class","label"),o(y,"type","number"),o(y,"min","1"),o(y,"max","100"),o(y,"step","1"),y.required=!0,o(y,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(v,"class","form-control"),o(D,"class","text-lg font-bold text-neutral"),o(V,"class","text-sm text-neutral/70"),o(T,"class","flex items-center gap-4"),o(g,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),o(e,"class","space-y-4")},m(O,z){Y(O,e,z),s(e,t),s(t,l),s(t,i),s(t,r),s(r,f);for(let X=0;X<M.length;X+=1)M[X]&&M[X].m(r,null);cl(r,n[2],!0),s(e,h),s(e,v),s(v,x),s(v,_),s(v,y),ye(y,n[4]),s(e,E),s(e,g),s(g,T),s(T,C),s(C,D),s(D,N),s(C,H),s(C,V),s(V,A),s(V,B),s(V,P),s(V,w),R||(j=[ie(r,"change",n[18]),ie(y,"input",n[19])],R=!0)},p(O,z){var X,ue,te;if(z[0]&2){U=Re(O[1]);let ne;for(ne=0;ne<U.length;ne+=1){const ae=Dl(O,U,ne);M[ne]?M[ne].p(ae,z):(M[ne]=Pl(ae),M[ne].c(),M[ne].m(r,null))}for(;ne<M.length;ne+=1)M[ne].d(1);M.length=U.length}z[0]&6&&cl(r,O[2]),z[0]&16&&Xe(y.value)!==O[4]&&ye(y,O[4]),z[0]&1024&&L!==(L=(((X=O[10])==null?void 0:X.name)||"Elegir jugador")+"")&&re(N,L),z[0]&1024&&S!==(S=(((ue=O[10])==null?void 0:ue.maxHp)||0)+"")&&re(B,S),z[0]&1024&&ee!==(ee=(((te=O[10])==null?void 0:te.armorClass)||0)+"")&&re(w,ee)},d(O){O&&d(e),ht(M,O),R=!1,at(j)}}}function Hl(n){let e,t=Re(n[6]),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ol(Tl(n,t,a));return{c(){e=u("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=m(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(d),this.h()},h(){o(e,"class","grid grid-cols-1 gap-2 mb-4 max-h-48 overflow-y-auto")},m(a,i){Y(a,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,i){if(i[0]&8256){t=Re(a[6]);let r;for(r=0;r<t.length;r+=1){const f=Tl(a,t,r);l[r]?l[r].p(f,i):(l[r]=Ol(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&d(e),ht(l,a)}}}function Ol(n){let e,t,l=n[36].name+"",a,i,r,f,p=n[36].challenge_rating+"",h,v,x,b;function _(){return n[21](n[36])}return{c(){e=u("button"),t=u("span"),a=F(l),i=I(),r=u("span"),f=F("CR "),h=F(p),v=I(),this.h()},l(y){e=c(y,"BUTTON",{class:!0});var E=m(e);t=c(E,"SPAN",{});var g=m(t);a=q(g,l),g.forEach(d),i=k(E),r=c(E,"SPAN",{class:!0});var T=m(r);f=q(T,"CR "),h=q(T,p),T.forEach(d),v=k(E),E.forEach(d),this.h()},h(){o(r,"class","text-xs text-neutral/60"),o(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full")},m(y,E){Y(y,e,E),s(e,t),s(t,a),s(e,i),s(e,r),s(r,f),s(r,h),s(e,v),x||(b=ie(e,"click",_),x=!0)},p(y,E){n=y,E[0]&64&&l!==(l=n[36].name+"")&&re(a,l),E[0]&64&&p!==(p=n[36].challenge_rating+"")&&re(h,p)},d(y){y&&d(e),x=!1,b()}}}function Pl(n){let e,t=n[33].name+"",l,a;return{c(){e=u("option"),l=F(t),this.h()},l(i){e=c(i,"OPTION",{});var r=m(e);l=q(r,t),r.forEach(d),this.h()},h(){e.__value=a=n[33].id,ye(e,e.__value)},m(i,r){Y(i,e,r),s(e,l)},p(i,r){r[0]&2&&t!==(t=i[33].name+"")&&re(l,t),r[0]&2&&a!==(a=i[33].id)&&(e.__value=a,ye(e,e.__value))},d(i){i&&d(e)}}}function vs(n){let e,t=n[0]&&Vl(n);return{c(){t&&t.c(),e=pt()},l(l){t&&t.l(l),e=pt()},m(l,a){t&&t.m(l,a),Y(l,e,a)},p(l,a){l[0]?t?t.p(l,a):(t=Vl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:xe,o:xe,d(l){l&&d(e),t&&t.d(l)}}}function ms(n,e,t){let l,{isOpen:a=!1}=e,{players:i=[]}=e;const r=Ut();let f="player",p=0,h="";function v(){l&&(r("add",{type:"character",characterId:l.id,name:l.name,maxHp:l.maxHp,armorClass:l.armorClass,initiative:p,isNpc:!1}),V())}let x="",b=[],_=null,y="",E=0,g=10,T="",C="",D="";const L=Zl(async()=>{if(!x.trim()){t(6,b=[]);return}try{const W=await _t.searchMonsters(x);t(6,b=W.results.slice(0,3))}catch(W){console.error(W),t(6,b=[])}finally{}},300);async function N(W){_=await _t.getMonster(W.slug),t(7,y=_.name),t(8,E=_.hit_points),t(9,g=_.armor_class),T=_.challenge_rating,_.type,C=_.size,D=_.alignment,t(6,b=[]),t(5,x="")}function H(){!y||!E||!g||(r("add",{type:"creature",name:y,initiative:p,maxHp:E,armorClass:g,cr:T,size:C,alignment:D,isNpc:!0}),V())}function V(){t(2,h=""),_=null,t(5,x=""),t(6,b=[]),t(7,y=""),t(4,p=0),t(8,E=0),t(9,g=10),T="",C="",D="",r("close")}const A=()=>t(3,f="player"),S=()=>t(3,f="monster");function B(){h=$l(this),t(2,h),t(1,i)}function P(){p=Xe(this.value),t(4,p)}function ee(){x=this.value,t(5,x)}const w=W=>N(W);function R(){y=this.value,t(7,y)}function j(){p=Xe(this.value),t(4,p)}function U(){E=Xe(this.value),t(8,E)}function M(){g=Xe(this.value),t(9,g)}return n.$$set=W=>{"isOpen"in W&&t(0,a=W.isOpen),"players"in W&&t(1,i=W.players)},n.$$.update=()=>{n.$$.dirty[0]&6&&t(10,l=i.find(W=>W.id===h))},[a,i,h,f,p,x,b,y,E,g,l,v,L,N,H,V,A,S,B,P,ee,w,R,j,U,M]}class bs extends gt{constructor(e){super(),xt(this,e,ms,vs,Ct,{isOpen:0,players:1},null,[-1,-1])}}function Al(n){let e,t,l,a="‚úï",i,r,f,p="üíö Gesti√≥n de HP",h,v,x,b,_,y,E=n[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",g,T,C,D,L=n[1].name+"",N,H,V,A,S,B,P,ee,w="HP ACTUAL",R,j,U,M=n[1].currentHp+"",W,ce,J,O,z=n[1].maxHp+"",X,ue,te,ne,ae,he,_e,me,ke=n[4].toFixed(0)+"",Q,de,$,K,le,pe="HP NUEVO",ge,Z,fe,Te,Ie,Ze,Je,Ce,Se,Ne,Ye,Ve,Oe=n[2].toFixed(0)+"",Ee,qe,Pe,we,se,ve,$e='<span class="label-text font-medieval text-neutral text-sm sm:text-base">üé≤ Cantidad de HP</span>',tt,je,Ae,ct,Fe,Me,Be,vt="üí•",lt,Le,ut="Da√±o",et,dt,De,Ue,mt="üíö",nt,ze,ot="Curar",it,zt,$t,He=n[1].isNpc&&Ml();function el(oe,be){return oe[7]!==0?gs:_s}let yt=el(n),Ge=yt(n);return{c(){e=u("div"),t=u("div"),l=u("button"),l.textContent=a,i=I(),r=u("div"),f=u("h3"),f.textContent=p,h=I(),v=u("div"),x=u("div"),b=u("div"),_=u("div"),y=u("span"),g=F(E),T=I(),C=u("div"),D=u("h4"),N=F(L),H=I(),V=u("div"),He&&He.c(),A=I(),S=u("div"),B=u("div"),P=u("div"),ee=u("p"),ee.textContent=w,R=I(),j=u("div"),U=u("p"),W=F(M),ce=I(),J=u("p"),O=F("de "),X=F(z),ue=I(),te=u("progress"),_e=I(),me=u("p"),Q=F(ke),de=F("%"),$=I(),K=u("div"),le=u("p"),le.textContent=pe,ge=I(),Z=u("div"),fe=u("p"),Te=F(n[3]),Ze=I(),Ge.c(),Je=I(),Ce=u("progress"),Ye=I(),Ve=u("p"),Ee=F(Oe),qe=F("%"),we=I(),se=u("div"),ve=u("label"),ve.innerHTML=$e,tt=I(),je=u("div"),Ae=u("input"),ct=I(),Fe=u("div"),Me=u("button"),Be=u("span"),Be.textContent=vt,lt=I(),Le=u("span"),Le.textContent=ut,dt=I(),De=u("button"),Ue=u("span"),Ue.textContent=mt,nt=I(),ze=u("span"),ze.textContent=ot,this.h()},l(oe){e=c(oe,"DIV",{class:!0});var be=m(e);t=c(be,"DIV",{class:!0});var ft=m(t);l=c(ft,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1jnmpfy"&&(l.textContent=a),i=k(ft),r=c(ft,"DIV",{class:!0});var Et=m(r);f=c(Et,"H3",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-sdtwsr"&&(f.textContent=p),h=k(Et),v=c(Et,"DIV",{class:!0});var wt=m(v);x=c(wt,"DIV",{class:!0});var tl=m(x);b=c(tl,"DIV",{class:!0});var ll=m(b);_=c(ll,"DIV",{class:!0});var nl=m(_);y=c(nl,"SPAN",{class:!0});var sl=m(y);g=q(sl,E),sl.forEach(d),nl.forEach(d),ll.forEach(d),tl.forEach(d),T=k(wt),C=c(wt,"DIV",{class:!0});var kt=m(C);D=c(kt,"H4",{class:!0});var rl=m(D);N=q(rl,L),rl.forEach(d),H=k(kt),V=c(kt,"DIV",{class:!0});var al=m(V);He&&He.l(al),al.forEach(d),kt.forEach(d),wt.forEach(d),Et.forEach(d),A=k(ft),S=c(ft,"DIV",{class:!0});var It=m(S);B=c(It,"DIV",{class:!0});var Tt=m(B);P=c(Tt,"DIV",{class:!0});var st=m(P);ee=c(st,"P",{class:!0,"data-svelte-h":!0}),G(ee)!=="svelte-15e8cb6"&&(ee.textContent=w),R=k(st),j=c(st,"DIV",{class:!0});var Dt=m(j);U=c(Dt,"P",{class:!0});var ol=m(U);W=q(ol,M),ol.forEach(d),ce=k(Dt),J=c(Dt,"P",{class:!0});var Rt=m(J);O=q(Rt,"de "),X=q(Rt,z),Rt.forEach(d),Dt.forEach(d),ue=k(st),te=c(st,"PROGRESS",{class:!0,max:!0}),m(te).forEach(d),_e=k(st),me=c(st,"P",{class:!0});var qt=m(me);Q=q(qt,ke),de=q(qt,"%"),qt.forEach(d),st.forEach(d),$=k(Tt),K=c(Tt,"DIV",{class:!0});var rt=m(K);le=c(rt,"P",{class:!0,"data-svelte-h":!0}),G(le)!=="svelte-ukgy9p"&&(le.textContent=pe),ge=k(rt),Z=c(rt,"DIV",{class:!0});var Vt=m(Z);fe=c(Vt,"P",{class:!0});var il=m(fe);Te=q(il,n[3]),il.forEach(d),Ze=k(Vt),Ge.l(Vt),Vt.forEach(d),Je=k(rt),Ce=c(rt,"PROGRESS",{class:!0,max:!0}),m(Ce).forEach(d),Ye=k(rt),Ve=c(rt,"P",{class:!0});var Ft=m(Ve);Ee=q(Ft,Oe),qe=q(Ft,"%"),Ft.forEach(d),rt.forEach(d),Tt.forEach(d),we=k(It),se=c(It,"DIV",{});var Ht=m(se);ve=c(Ht,"LABEL",{class:!0,"data-svelte-h":!0}),G(ve)!=="svelte-640liv"&&(ve.innerHTML=$e),tt=k(Ht),je=c(Ht,"DIV",{class:!0});var Ot=m(je);Ae=c(Ot,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ct=k(Ot),Fe=c(Ot,"DIV",{class:!0});var Pt=m(Fe);Me=c(Pt,"BUTTON",{class:!0});var At=m(Me);Be=c(At,"SPAN",{class:!0,"data-svelte-h":!0}),G(Be)!=="svelte-orvybg"&&(Be.textContent=vt),lt=k(At),Le=c(At,"SPAN",{class:!0,"data-svelte-h":!0}),G(Le)!=="svelte-117bemg"&&(Le.textContent=ut),At.forEach(d),dt=k(Pt),De=c(Pt,"BUTTON",{class:!0});var Mt=m(De);Ue=c(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),G(Ue)!=="svelte-rpoyvz"&&(Ue.textContent=mt),nt=k(Mt),ze=c(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),G(ze)!=="svelte-v46veg"&&(ze.textContent=ot),Mt.forEach(d),Pt.forEach(d),Ot.forEach(d),Ht.forEach(d),It.forEach(d),ft.forEach(d),be.forEach(d),this.h()},h(){o(l,"class","btn btn-xs sm:btn-sm btn-circle btn-ghost absolute right-2 sm:right-3 top-2 sm:top-3 z-10 hover:bg-error/20"),o(f,"class","font-bold text-xl sm:text-2xl font-medieval text-neutral text-center mb-2 sm:mb-3"),o(y,"class","text-lg sm:text-xl"),o(_,"class","bg-primary/20 flex items-center justify-center"),o(b,"class","w-10 h-10 sm:w-12 sm:h-12 rounded-full ring-2 ring-secondary"),o(x,"class","avatar"),o(D,"class","text-base sm:text-lg font-medieval text-neutral font-bold truncate"),o(V,"class","flex gap-2 mt-1"),o(C,"class","flex-1 min-w-0"),o(v,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-2 sm:p-3 rounded-lg border border-primary/30 flex items-center gap-2 sm:gap-3"),o(r,"class","p-3 sm:p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),o(ee,"class","text-xs font-medieval text-neutral/60 text-center"),o(U,"class","text-xl sm:text-2xl font-bold text-neutral"),o(J,"class","text-xs sm:text-sm text-neutral/60"),o(j,"class","text-center"),o(te,"class",ne="progress progress-"+n[8]+" w-full h-2 sm:h-3"),te.value=ae=n[1].currentHp,o(te,"max",he=n[1].maxHp),o(me,"class","text-xs text-center text-neutral/60"),o(P,"class","bg-neutral/10 flex flex-col gap-1 p-2 sm:p-3 rounded-lg border-2 border-primary/30"),o(le,"class","text-xs font-medieval text-neutral/60 text-center"),o(fe,"class",Ie="text-xl sm:text-2xl font-bold text-"+(n[7]!==0?n[7]>0?"success":"error":"neutral")),o(Z,"class","text-center"),o(Ce,"class",Se="progress progress-"+(n[7]!==0?n[6]:n[8])+" w-full h-2 sm:h-3"),Ce.value=n[3],o(Ce,"max",Ne=n[1].maxHp),o(Ve,"class","text-xs text-center text-neutral/60"),o(K,"class",Pe="bg-"+(n[7]!==0?n[7]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(n[7]!==0?n[7]>0?"success":"error":"primary")+"/30"),o(B,"class","grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4"),o(ve,"class","label"),o(Ae,"type","number"),o(Ae,"placeholder","Ej: 15"),o(Ae,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-lg sm:text-2xl font-bold"),o(Ae,"min","0"),o(Be,"class","text-base sm:text-xl"),o(Le,"class","font-medieval text-xs sm:text-sm"),o(Me,"class","btn btn-error btn-sm sm:btn-md flex-1"),Me.disabled=et=n[5]<=0,o(Ue,"class","text-base sm:text-xl"),o(ze,"class","font-medieval text-xs sm:text-sm"),o(De,"class","btn btn-success btn-sm sm:btn-md flex-1"),De.disabled=it=n[5]<=0,o(Fe,"class","grid grid-cols-2 sm:flex gap-2 flex-1"),o(je,"class","flex flex-col sm:flex-row gap-2"),o(S,"class","flex-1 p-3 sm:p-4 overflow-y-auto"),o(t,"class","card-parchment border-2 sm:border-4 border-secondary mx-2 sm:mx-4 relative w-[95vw] sm:w-[90vw] md:w-3/4 lg:w-1/2 max-h-[90vh] flex flex-col"),o(e,"class","modal modal-open z-50")},m(oe,be){Y(oe,e,be),s(e,t),s(t,l),s(t,i),s(t,r),s(r,f),s(r,h),s(r,v),s(v,x),s(x,b),s(b,_),s(_,y),s(y,g),s(v,T),s(v,C),s(C,D),s(D,N),s(C,H),s(C,V),He&&He.m(V,null),s(t,A),s(t,S),s(S,B),s(B,P),s(P,ee),s(P,R),s(P,j),s(j,U),s(U,W),s(j,ce),s(j,J),s(J,O),s(J,X),s(P,ue),s(P,te),s(P,_e),s(P,me),s(me,Q),s(me,de),s(B,$),s(B,K),s(K,le),s(K,ge),s(K,Z),s(Z,fe),s(fe,Te),s(Z,Ze),Ge.m(Z,null),s(K,Je),s(K,Ce),s(K,Ye),s(K,Ve),s(Ve,Ee),s(Ve,qe),s(S,we),s(S,se),s(se,ve),s(se,tt),s(se,je),s(je,Ae),ye(Ae,n[5]),s(je,ct),s(je,Fe),s(Fe,Me),s(Me,Be),s(Me,lt),s(Me,Le),s(Fe,dt),s(Fe,De),s(De,Ue),s(De,nt),s(De,ze),zt||($t=[ie(l,"click",n[11]),ie(Ae,"input",n[13]),ie(Me,"click",n[9]),ie(De,"click",n[10])],zt=!0)},p(oe,be){be&2&&E!==(E=oe[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(g,E),be&2&&L!==(L=oe[1].name+"")&&re(N,L),oe[1].isNpc?He||(He=Ml(),He.c(),He.m(V,null)):He&&(He.d(1),He=null),be&2&&M!==(M=oe[1].currentHp+"")&&re(W,M),be&2&&z!==(z=oe[1].maxHp+"")&&re(X,z),be&256&&ne!==(ne="progress progress-"+oe[8]+" w-full h-2 sm:h-3")&&o(te,"class",ne),be&2&&ae!==(ae=oe[1].currentHp)&&(te.value=ae),be&2&&he!==(he=oe[1].maxHp)&&o(te,"max",he),be&16&&ke!==(ke=oe[4].toFixed(0)+"")&&re(Q,ke),be&8&&re(Te,oe[3]),be&128&&Ie!==(Ie="text-xl sm:text-2xl font-bold text-"+(oe[7]!==0?oe[7]>0?"success":"error":"neutral"))&&o(fe,"class",Ie),yt===(yt=el(oe))&&Ge?Ge.p(oe,be):(Ge.d(1),Ge=yt(oe),Ge&&(Ge.c(),Ge.m(Z,null))),be&448&&Se!==(Se="progress progress-"+(oe[7]!==0?oe[6]:oe[8])+" w-full h-2 sm:h-3")&&o(Ce,"class",Se),be&8&&(Ce.value=oe[3]),be&2&&Ne!==(Ne=oe[1].maxHp)&&o(Ce,"max",Ne),be&4&&Oe!==(Oe=oe[2].toFixed(0)+"")&&re(Ee,Oe),be&128&&Pe!==(Pe="bg-"+(oe[7]!==0?oe[7]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(oe[7]!==0?oe[7]>0?"success":"error":"primary")+"/30")&&o(K,"class",Pe),be&32&&Xe(Ae.value)!==oe[5]&&ye(Ae,oe[5]),be&32&&et!==(et=oe[5]<=0)&&(Me.disabled=et),be&32&&it!==(it=oe[5]<=0)&&(De.disabled=it)},d(oe){oe&&d(e),He&&He.d(),Ge.d(),zt=!1,at($t)}}}function Ml(n){let e,t="NPC";return{c(){e=u("div"),e.textContent=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-31ycly"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-error")},m(l,a){Y(l,e,a)},d(l){l&&d(e)}}}function _s(n){let e,t="Sin cambios";return{c(){e=u("p"),e.textContent=t,this.h()},l(l){e=c(l,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-rbv1yy"&&(e.textContent=t),this.h()},h(){o(e,"class","text-xs sm:text-sm text-neutral/60")},m(l,a){Y(l,e,a)},p:xe,d(l){l&&d(e)}}}function gs(n){let e,t=n[7]>0?"+":"",l,a,i;return{c(){e=u("p"),l=F(t),a=F(n[7]),this.h()},l(r){e=c(r,"P",{class:!0});var f=m(e);l=q(f,t),a=q(f,n[7]),f.forEach(d),this.h()},h(){o(e,"class",i="text-base sm:text-lg font-bold text-"+(n[7]>0?"success":"error"))},m(r,f){Y(r,e,f),s(e,l),s(e,a)},p(r,f){f&128&&t!==(t=r[7]>0?"+":"")&&re(l,t),f&128&&re(a,r[7]),f&128&&i!==(i="text-base sm:text-lg font-bold text-"+(r[7]>0?"success":"error"))&&o(e,"class",i)},d(r){r&&d(e)}}}function xs(n){let e,t=n[0]&&n[1]&&Al(n);return{c(){t&&t.c(),e=pt()},l(l){t&&t.l(l),e=pt()},m(l,a){t&&t.m(l,a),Y(l,e,a)},p(l,[a]){l[0]&&l[1]?t?t.p(l,a):(t=Al(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:xe,o:xe,d(l){l&&d(e),t&&t.d(l)}}}function Cs(n,e,t){let l,a,i,r,f,p,{isOpen:h=!1}=e,{combatant:v=null}=e;const x=Ut();let b=0,_=0;function y(){if(v&&_>0){const C=-Math.abs(_);x("apply",C),t(5,_=0)}}function E(){if(v&&_>0){const C=Math.abs(_);x("apply",C),t(5,_=0)}}function g(){t(12,b=0),t(5,_=0),x("close")}function T(){_=Xe(this.value),t(5,_)}return n.$$set=C=>{"isOpen"in C&&t(0,h=C.isOpen),"combatant"in C&&t(1,v=C.combatant)},n.$$.update=()=>{n.$$.dirty&2&&t(4,l=v?v.currentHp/v.maxHp*100:0),n.$$.dirty&16&&t(8,a=l>50?"success":l>25?"warning":"error"),n.$$.dirty&4098&&t(3,i=v?Math.max(0,Math.min(v.maxHp,v.currentHp+b)):0),n.$$.dirty&10&&t(7,r=v?i-v.currentHp:0),n.$$.dirty&10&&t(2,f=v?i/v.maxHp*100:0),n.$$.dirty&4&&t(6,p=f>50?"success":f>25?"warning":"error")},[h,v,f,i,l,_,p,r,a,y,E,g,b,T]}class ys extends gt{constructor(e){super(),xt(this,e,Cs,xs,Ct,{isOpen:0,combatant:1})}}function Nl(n,e,t){const l=n.slice();l[15]=e[t];const a=Array.isArray(l[1].conditions)?l[1].conditions:[];l[16]=a;const i=l[16].includes(l[15].name);return l[17]=i,l}function jl(n,e,t){const l=n.slice();return l[20]=e[t],l}function Ll(n){let e,t,l,a="‚úï",i,r,f,p="‚ö†Ô∏è Estados de Combate",h,v,x,b,_,y,E=n[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",g,T,C,D,L=n[1].name+"",N,H,V,A,S,B=n[1].currentHp+"",P,ee,w=n[1].maxHp+"",R,j,U,M,W=n[1].armorClass+"",ce,J,O,z,X,ue,te,ne="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ae,he,_e=(n[1].conditions&&Array.isArray(n[1].conditions)?n[1].conditions.length:0)+"",me,ke,Q,de,$,K,le,pe,ge,Z,fe="üîç",Te,Ie,Ze="Base de datos oficial de D&D 5e",Je,Ce,Se,Ne,Ye;function Ve(se,ve){return ve&2&&(Q=null),Q==null&&(Q=!!(se[1].conditions&&Array.isArray(se[1].conditions)&&se[1].conditions.length>0)),Q?ws:Es}let Oe=Ve(n,-1),Ee=Oe(n);function qe(se,ve){return ve&4&&(Se=null),se[4]?Ds:se[3].length>0?Ts:(Se==null&&(Se=!!se[2].trim()),Se?Is:ks)}let Pe=qe(n,-1),we=Pe(n);return{c(){e=u("div"),t=u("div"),l=u("button"),l.textContent=a,i=I(),r=u("div"),f=u("h3"),f.textContent=p,h=I(),v=u("div"),x=u("div"),b=u("div"),_=u("div"),y=u("span"),g=F(E),T=I(),C=u("div"),D=u("h4"),N=F(L),H=I(),V=u("div"),A=u("div"),S=F("‚ù§Ô∏è "),P=F(B),ee=F("/"),R=F(w),j=I(),U=u("div"),M=F("üõ°Ô∏è "),ce=F(W),J=I(),O=u("div"),z=u("div"),X=u("div"),ue=u("div"),te=u("h5"),te.innerHTML=ne,ae=I(),he=u("span"),me=F(_e),ke=I(),Ee.c(),de=I(),$=u("div"),K=u("div"),le=u("div"),pe=u("input"),ge=I(),Z=u("div"),Z.textContent=fe,Te=I(),Ie=u("p"),Ie.textContent=Ze,Je=I(),Ce=u("div"),we.c(),this.h()},l(se){e=c(se,"DIV",{class:!0});var ve=m(e);t=c(ve,"DIV",{class:!0});var $e=m(t);l=c($e,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1vc2djp"&&(l.textContent=a),i=k($e),r=c($e,"DIV",{class:!0});var tt=m(r);f=c(tt,"H3",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-j0oh10"&&(f.textContent=p),h=k(tt),v=c(tt,"DIV",{class:!0});var je=m(v);x=c(je,"DIV",{class:!0});var Ae=m(x);b=c(Ae,"DIV",{class:!0});var ct=m(b);_=c(ct,"DIV",{class:!0});var Fe=m(_);y=c(Fe,"SPAN",{class:!0});var Me=m(y);g=q(Me,E),Me.forEach(d),Fe.forEach(d),ct.forEach(d),Ae.forEach(d),T=k(je),C=c(je,"DIV",{class:!0});var Be=m(C);D=c(Be,"H4",{class:!0});var vt=m(D);N=q(vt,L),vt.forEach(d),H=k(Be),V=c(Be,"DIV",{class:!0});var lt=m(V);A=c(lt,"DIV",{class:!0});var Le=m(A);S=q(Le,"‚ù§Ô∏è "),P=q(Le,B),ee=q(Le,"/"),R=q(Le,w),Le.forEach(d),j=k(lt),U=c(lt,"DIV",{class:!0});var ut=m(U);M=q(ut,"üõ°Ô∏è "),ce=q(ut,W),ut.forEach(d),lt.forEach(d),Be.forEach(d),je.forEach(d),tt.forEach(d),J=k($e),O=c($e,"DIV",{class:!0,style:!0});var et=m(O);z=c(et,"DIV",{class:!0,style:!0});var dt=m(z);X=c(dt,"DIV",{class:!0});var De=m(X);ue=c(De,"DIV",{class:!0});var Ue=m(ue);te=c(Ue,"H5",{class:!0,"data-svelte-h":!0}),G(te)!=="svelte-12hilzf"&&(te.innerHTML=ne),ae=k(Ue),he=c(Ue,"SPAN",{class:!0});var mt=m(he);me=q(mt,_e),mt.forEach(d),Ue.forEach(d),ke=k(De),Ee.l(De),De.forEach(d),dt.forEach(d),de=k(et),$=c(et,"DIV",{class:!0,style:!0});var nt=m($);K=c(nt,"DIV",{class:!0});var ze=m(K);le=c(ze,"DIV",{class:!0});var ot=m(le);pe=c(ot,"INPUT",{type:!0,placeholder:!0,class:!0}),ge=k(ot),Z=c(ot,"DIV",{class:!0,"data-svelte-h":!0}),G(Z)!=="svelte-1duc997"&&(Z.textContent=fe),ot.forEach(d),Te=k(ze),Ie=c(ze,"P",{class:!0,"data-svelte-h":!0}),G(Ie)!=="svelte-hqlo3f"&&(Ie.textContent=Ze),ze.forEach(d),Je=k(nt),Ce=c(nt,"DIV",{class:!0});var it=m(Ce);we.l(it),it.forEach(d),nt.forEach(d),et.forEach(d),$e.forEach(d),ve.forEach(d),this.h()},h(){o(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),o(f,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),o(y,"class","text-xl"),o(_,"class","bg-primary/20 flex items-center justify-center"),o(b,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),o(x,"class","avatar"),o(D,"class","text-lg font-medieval text-neutral font-bold truncate"),o(A,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),o(U,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),o(V,"class","flex gap-2 mt-1"),o(C,"class","flex-1 min-w-0"),o(v,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),o(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),o(te,"class","font-medieval text-neutral font-bold flex items-center gap-2"),o(he,"class","badge badge-warning badge-sm"),o(ue,"class","flex items-center justify-between mb-3"),o(X,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),o(z,"class","md:w-1/3 flex flex-col"),Gt(z,"min-height","300px"),o(pe,"type","text"),o(pe,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),o(pe,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),o(Z,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),o(le,"class","relative"),o(Ie,"class","text-xs text-neutral/50 mt-1 italic"),o(K,"class","mb-3"),o(Ce,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),o($,"class","md:w-2/3 flex flex-col"),Gt($,"min-height","300px"),o(O,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),Gt(O,"min-height","0"),o(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),o(e,"class","modal modal-open z-50")},m(se,ve){Y(se,e,ve),s(e,t),s(t,l),s(t,i),s(t,r),s(r,f),s(r,h),s(r,v),s(v,x),s(x,b),s(b,_),s(_,y),s(y,g),s(v,T),s(v,C),s(C,D),s(D,N),s(C,H),s(C,V),s(V,A),s(A,S),s(A,P),s(A,ee),s(A,R),s(V,j),s(V,U),s(U,M),s(U,ce),s(t,J),s(t,O),s(O,z),s(z,X),s(X,ue),s(ue,te),s(ue,ae),s(ue,he),s(he,me),s(X,ke),Ee.m(X,null),s(O,de),s(O,$),s($,K),s(K,le),s(le,pe),ye(pe,n[2]),s(le,ge),s(le,Z),s(K,Te),s(K,Ie),s($,Je),s($,Ce),we.m(Ce,null),Ne||(Ye=[ie(l,"click",n[8]),ie(pe,"input",n[11]),ie(pe,"input",n[5]),ie(e,"keydown",n[9])],Ne=!0)},p(se,ve){ve&2&&E!==(E=se[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&re(g,E),ve&2&&L!==(L=se[1].name+"")&&re(N,L),ve&2&&B!==(B=se[1].currentHp+"")&&re(P,B),ve&2&&w!==(w=se[1].maxHp+"")&&re(R,w),ve&2&&W!==(W=se[1].armorClass+"")&&re(ce,W),ve&2&&_e!==(_e=(se[1].conditions&&Array.isArray(se[1].conditions)?se[1].conditions.length:0)+"")&&re(me,_e),Oe===(Oe=Ve(se,ve))&&Ee?Ee.p(se,ve):(Ee.d(1),Ee=Oe(se),Ee&&(Ee.c(),Ee.m(X,null))),ve&4&&pe.value!==se[2]&&ye(pe,se[2]),Pe===(Pe=qe(se,ve))&&we?we.p(se,ve):(we.d(1),we=Pe(se),we&&(we.c(),we.m(Ce,null)))},d(se){se&&d(e),Ee.d(),we.d(),Ne=!1,at(Ye)}}}function Es(n){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(l,a){Y(l,e,a)},p:xe,d(l){l&&d(e)}}}function ws(n){let e,t=Re(n[1].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=Sl(jl(n,t,a));return{c(){e=u("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=m(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(d),this.h()},h(){o(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,i){Y(a,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,i){if(i&130){t=Re(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const f=jl(a,t,r);l[r]?l[r].p(f,i):(l[r]=Sl(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&d(e),ht(l,a)}}}function Sl(n){let e,t,l=n[20]+"",a,i,r,f="‚úï",p,h,v;function x(){return n[10](n[20])}return{c(){e=u("div"),t=u("span"),a=F(l),i=I(),r=u("button"),r.textContent=f,p=I(),this.h()},l(b){e=c(b,"DIV",{class:!0});var _=m(e);t=c(_,"SPAN",{class:!0});var y=m(t);a=q(y,l),y.forEach(d),i=k(_),r=c(_,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),G(r)!=="svelte-5t970f"&&(r.textContent=f),p=k(_),_.forEach(d),this.h()},h(){o(t,"class","font-medieval text-sm text-neutral flex-1"),o(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),o(r,"title","Eliminar"),o(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(b,_){Y(b,e,_),s(e,t),s(t,a),s(e,i),s(e,r),s(e,p),h||(v=ie(r,"click",x),h=!0)},p(b,_){n=b,_&2&&l!==(l=n[20]+"")&&re(a,l)},d(b){b&&d(e),h=!1,v()}}}function ks(n){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(l,a){Y(l,e,a)},p:xe,d(l){l&&d(e)}}}function Is(n){let e,t,l="üîç",a,i,r,f,p,h,v,x,b="‚ûï Agregar como personalizado",_,y;return{c(){e=u("div"),t=u("div"),t.textContent=l,a=I(),i=u("p"),r=F('No se encontr√≥ "'),f=u("span"),p=F(n[2]),h=F('"'),v=I(),x=u("button"),x.textContent=b,this.h()},l(E){e=c(E,"DIV",{class:!0});var g=m(e);t=c(g,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-sy51vw"&&(t.textContent=l),a=k(g),i=c(g,"P",{class:!0});var T=m(i);r=q(T,'No se encontr√≥ "'),f=c(T,"SPAN",{class:!0});var C=m(f);p=q(C,n[2]),C.forEach(d),h=q(T,'"'),T.forEach(d),v=k(g),x=c(g,"BUTTON",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1rs0apo"&&(x.textContent=b),g.forEach(d),this.h()},h(){o(t,"class","text-4xl mb-3"),o(f,"class","font-bold"),o(i,"class","text-neutral/70 font-body mb-3"),o(x,"class","btn btn-primary btn-sm"),o(e,"class","flex flex-col items-center justify-center h-full text-center")},m(E,g){Y(E,e,g),s(e,t),s(e,a),s(e,i),s(i,r),s(i,f),s(f,p),s(i,h),s(e,v),s(e,x),_||(y=ie(x,"click",n[13]),_=!0)},p(E,g){g&4&&re(p,E[2])},d(E){E&&d(e),_=!1,y()}}}function Ts(n){let e,t=Re(n[3]),l=[];for(let a=0;a<t.length;a+=1)l[a]=Ul(Nl(n,t,a));return{c(){e=u("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=m(e);for(let r=0;r<l.length;r+=1)l[r].l(i);i.forEach(d),this.h()},h(){o(e,"class","space-y-2")},m(a,i){Y(a,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,i){if(i&74){t=Re(a[3]);let r;for(r=0;r<t.length;r+=1){const f=Nl(a,t,r);l[r]?l[r].p(f,i):(l[r]=Ul(f),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&d(e),ht(l,a)}}}function Ds(n){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full")},m(l,a){Y(l,e,a)},p:xe,d(l){l&&d(e)}}}function Bl(n){let e,t="‚úì Activo";return{c(){e=u("span"),e.textContent=t,this.h()},l(l){e=c(l,"SPAN",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-success shrink-0")},m(l,a){Y(l,e,a)},d(l){l&&d(e)}}}function Ul(n){let e,t,l,a=n[15].name+"",i,r,f,p,h=_t.cleanDescription(n[15].desc,120)+"",v,x,b,_,y,E,g=n[17]&&Bl();function T(){return n[12](n[15])}return{c(){e=u("button"),t=u("div"),l=u("span"),i=F(a),r=I(),g&&g.c(),f=I(),p=u("p"),v=F(h),x=I(),this.h()},l(C){e=c(C,"BUTTON",{class:!0});var D=m(e);t=c(D,"DIV",{class:!0});var L=m(t);l=c(L,"SPAN",{class:!0});var N=m(l);i=q(N,a),N.forEach(d),r=k(L),g&&g.l(L),L.forEach(d),f=k(D),p=c(D,"P",{class:!0});var H=m(p);v=q(H,h),H.forEach(d),x=k(D),D.forEach(d),this.h()},h(){o(l,"class","font-medieval font-bold text-neutral"),o(t,"class","flex items-start justify-between gap-2 mb-1"),o(p,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=b=n[17],o(e,"class",_="w-full text-left p-3 rounded-lg border-2 transition-all "+(n[17]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(C,D){Y(C,e,D),s(e,t),s(t,l),s(l,i),s(t,r),g&&g.m(t,null),s(e,f),s(e,p),s(p,v),s(e,x),y||(E=ie(e,"click",T),y=!0)},p(C,D){n=C,D&8&&a!==(a=n[15].name+"")&&re(i,a),n[17]?g||(g=Bl(),g.c(),g.m(t,null)):g&&(g.d(1),g=null),D&8&&h!==(h=_t.cleanDescription(n[15].desc,120)+"")&&re(v,h),D&10&&b!==(b=n[17])&&(e.disabled=b),D&10&&_!==(_="w-full text-left p-3 rounded-lg border-2 transition-all "+(n[17]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&o(e,"class",_)},d(C){C&&d(e),g&&g.d(),y=!1,E()}}}function Vs(n){let e,t=n[0]&&n[1]&&Ll(n);return{c(){t&&t.c(),e=pt()},l(l){t&&t.l(l),e=pt()},m(l,a){t&&t.m(l,a),Y(l,e,a)},p(l,[a]){l[0]&&l[1]?t?t.p(l,a):(t=Ll(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:xe,o:xe,d(l){l&&d(e),t&&t.d(l)}}}function Hs(n,e,t){let{isOpen:l=!1}=e,{combatant:a=null}=e;const i=Ut();let r="",f=[],p=!1;const h=Zl(async()=>{if(!r.trim()){t(3,f=[]);return}t(4,p=!0);try{const C=await _t.searchConditions(r);t(3,f=C.results)}catch(C){console.error("Error searching conditions:",C),t(3,f=[])}finally{t(4,p=!1)}},300);function v(C){if(!a||!C.trim())return;if((Array.isArray(a.conditions)?a.conditions:[]).includes(C)){console.log("Condici√≥n ya existe:",C);return}console.log("Agregando condici√≥n:",C),i("add",C),t(2,r=""),t(3,f=[])}function x(C){a&&(console.log("Removiendo condici√≥n:",C),i("remove",C))}function b(){t(2,r=""),t(3,f=[]),i("close")}function _(C){C.key==="Escape"&&b()}const y=C=>x(C);function E(){r=this.value,t(2,r)}const g=C=>v(C.name),T=()=>v(r.trim());return n.$$set=C=>{"isOpen"in C&&t(0,l=C.isOpen),"combatant"in C&&t(1,a=C.combatant)},[l,a,r,f,p,h,v,x,b,_,y,E,g,T]}class Os extends gt{constructor(e){super(),xt(this,e,Hs,Vs,Ct,{isOpen:0,combatant:1})}}function zl(n,e,t){const l=n.slice();return l[45]=e[t],l[47]=t,l}function Rl(n){let e,t,l,a,i,r,f="‚úï",p,h;return{c(){e=u("div"),t=u("div"),l=u("span"),a=F(n[4]),i=I(),r=u("button"),r.textContent=f,this.h()},l(v){e=c(v,"DIV",{class:!0});var x=m(e);t=c(x,"DIV",{class:!0});var b=m(t);l=c(b,"SPAN",{});var _=m(l);a=q(_,n[4]),_.forEach(d),i=k(b),r=c(b,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-4tcifc"&&(r.textContent=f),b.forEach(d),x.forEach(d),this.h()},h(){o(r,"class","btn btn-sm"),o(t,"class","alert alert-error flex justify-between items-center"),o(e,"class","container mx-auto p-4")},m(v,x){Y(v,e,x),s(e,t),s(t,l),s(l,a),s(t,i),s(t,r),p||(h=ie(r,"click",n[26]),p=!0)},p(v,x){x[0]&16&&re(a,v[4])},d(v){v&&d(e),p=!1,h()}}}function Ps(n){let e,t,l,a,i,r=n[0].name+"",f,p,h,v,x,b=n[0].round+"",_,y,E,g,T=n[1].length+"",C,D,L,N,H,V,A,S,B=n[12]&&ql(n),P=n[11]&&Fl(n);const ee=[js,Ns],w=[];function R(j,U){return j[1].length===0?0:1}return V=R(n),A=w[V]=ee[V](n),{c(){e=u("div"),t=u("div"),l=u("div"),a=u("div"),i=u("h2"),f=F(r),p=I(),h=u("div"),v=u("div"),x=F("üîÑ Ronda "),_=F(b),y=I(),E=u("div"),g=F("üë• "),C=F(T),D=F(" Combatientes"),L=I(),B&&B.c(),N=I(),P&&P.c(),H=I(),A.c(),this.h()},l(j){e=c(j,"DIV",{class:!0});var U=m(e);t=c(U,"DIV",{class:!0});var M=m(t);l=c(M,"DIV",{class:!0});var W=m(l);a=c(W,"DIV",{class:!0});var ce=m(a);i=c(ce,"H2",{class:!0});var J=m(i);f=q(J,r),J.forEach(d),p=k(ce),h=c(ce,"DIV",{class:!0});var O=m(h);v=c(O,"DIV",{class:!0});var z=m(v);x=q(z,"üîÑ Ronda "),_=q(z,b),z.forEach(d),y=k(O),E=c(O,"DIV",{class:!0});var X=m(E);g=q(X,"üë• "),C=q(X,T),D=q(X," Combatientes"),X.forEach(d),O.forEach(d),ce.forEach(d),L=k(W),B&&B.l(W),W.forEach(d),N=k(M),P&&P.l(M),M.forEach(d),H=k(U),A.l(U),U.forEach(d),this.h()},h(){o(i,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),o(v,"class","badge badge-ornate badge-md"),o(E,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),o(h,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),o(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),o(l,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),o(t,"class","card-parchment mb-6 corner-ornament"),o(e,"class","p-4 max-w-5xl mx-auto")},m(j,U){Y(j,e,U),s(e,t),s(t,l),s(l,a),s(a,i),s(i,f),s(a,p),s(a,h),s(h,v),s(v,x),s(v,_),s(h,y),s(h,E),s(E,g),s(E,C),s(E,D),s(l,L),B&&B.m(l,null),s(t,N),P&&P.m(t,null),s(e,H),w[V].m(e,null),S=!0},p(j,U){(!S||U[0]&1)&&r!==(r=j[0].name+"")&&re(f,r),(!S||U[0]&1)&&b!==(b=j[0].round+"")&&re(_,b),(!S||U[0]&2)&&T!==(T=j[1].length+"")&&re(C,T),j[12]?B?B.p(j,U):(B=ql(j),B.c(),B.m(l,null)):B&&(B.d(1),B=null),j[11]?P?P.p(j,U):(P=Fl(j),P.c(),P.m(t,null)):P&&(P.d(1),P=null);let M=V;V=R(j),V===M?w[V].p(j,U):(Yt(),Ke(w[M],1,1,()=>{w[M]=null}),Zt(),A=w[V],A?A.p(j,U):(A=w[V]=ee[V](j),A.c()),We(A,1),A.m(e,null))},i(j){S||(We(A),S=!0)},o(j){Ke(A),S=!1},d(j){j&&d(e),B&&B.d(),P&&P.d(),w[V].d()}}}function As(n){let e,t,l,a="‚öîÔ∏è",i,r,f="No hay combate activo",p,h,v="El DM debe iniciar un encuentro para comenzar la batalla",x;function b(E,g){return E[12]?Ss:Ls}let _=b(n),y=_(n);return{c(){e=u("div"),t=u("div"),l=u("div"),l.textContent=a,i=I(),r=u("h2"),r.textContent=f,p=I(),h=u("p"),h.textContent=v,x=I(),y.c(),this.h()},l(E){e=c(E,"DIV",{class:!0});var g=m(e);t=c(g,"DIV",{class:!0});var T=m(t);l=c(T,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-19xxu84"&&(l.textContent=a),i=k(T),r=c(T,"H2",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-itogws"&&(r.textContent=f),p=k(T),h=c(T,"P",{class:!0,"data-svelte-h":!0}),G(h)!=="svelte-1smrxik"&&(h.textContent=v),x=k(T),y.l(T),T.forEach(d),g.forEach(d),this.h()},h(){o(l,"class","text-6xl mb-4"),o(r,"class","text-3xl font-medieval text-neutral mb-4"),o(h,"class","text-neutral/70 font-body mb-6"),o(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),o(e,"class","flex items-center justify-center h-full p-4")},m(E,g){Y(E,e,g),s(e,t),s(t,l),s(t,i),s(t,r),s(t,p),s(t,h),s(t,x),y.m(t,null)},p(E,g){_===(_=b(E))&&y?y.p(E,g):(y.d(1),y=_(E),y&&(y.c(),y.m(t,null)))},i:xe,o:xe,d(E){E&&d(e),y.d()}}}function Ms(n){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(l){e=c(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center justify-center h-full")},m(l,a){Y(l,e,a)},p:xe,i:xe,o:xe,d(l){l&&d(e)}}}function ql(n){let e,t,l='<span class="text-lg">‚ûï</span> Agregar',a,i,r,f="‚ñ∂Ô∏è",p,h,v,x,b="üèÅ Finalizar",_,y;return{c(){e=u("div"),t=u("button"),t.innerHTML=l,a=I(),i=u("button"),r=u("span"),r.textContent=f,p=F(" Siguiente Turno"),v=I(),x=u("button"),x.textContent=b,this.h()},l(E){e=c(E,"DIV",{class:!0});var g=m(e);t=c(g,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-sdwydq"&&(t.innerHTML=l),a=k(g),i=c(g,"BUTTON",{class:!0});var T=m(i);r=c(T,"SPAN",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-vhmvlx"&&(r.textContent=f),p=q(T," Siguiente Turno"),T.forEach(d),v=k(g),x=c(g,"BUTTON",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1oa32z5"&&(x.textContent=b),g.forEach(d),this.h()},h(){o(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),o(r,"class","text-lg"),o(i,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),i.disabled=h=n[1].length===0,o(x,"class","btn btn-error btn-sm flex-1 sm:flex-none"),o(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(E,g){Y(E,e,g),s(e,t),s(e,a),s(e,i),s(i,r),s(i,p),s(e,v),s(e,x),_||(y=[ie(t,"click",n[28]),ie(i,"click",n[22]),ie(x,"click",n[14])],_=!0)},p(E,g){g[0]&2&&h!==(h=E[1].length===0)&&(i.disabled=h)},d(E){E&&d(e),_=!1,at(y)}}}function Fl(n){let e,t,l="TURNO ACTUAL",a,i,r=n[11].name+"",f;return{c(){e=u("div"),t=u("p"),t.textContent=l,a=I(),i=u("p"),f=F(r),this.h()},l(p){e=c(p,"DIV",{class:!0});var h=m(e);t=c(h,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-j3qdhu"&&(t.textContent=l),a=k(h),i=c(h,"P",{class:!0});var v=m(i);f=q(v,r),v.forEach(d),h.forEach(d),this.h()},h(){o(t,"class","text-sm font-medieval text-neutral/70 mb-1"),o(i,"class","text-2xl font-bold font-medieval text-neutral"),o(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(p,h){Y(p,e,h),s(e,t),s(e,a),s(e,i),s(i,f)},p(p,h){h[0]&2048&&r!==(r=p[11].name+"")&&re(f,r)},d(p){p&&d(e)}}}function Ns(n){let e,t,l=Re(n[1]),a=[];for(let r=0;r<l.length;r+=1)a[r]=Gl(zl(n,l,r));const i=r=>Ke(a[r],1,1,()=>{a[r]=null});return{c(){e=u("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=c(r,"DIV",{class:!0});var f=m(e);for(let p=0;p<a.length;p+=1)a[p].l(f);f.forEach(d),this.h()},h(){o(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,f){Y(r,e,f);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);t=!0},p(r,f){if(f[0]&462851){l=Re(r[1]);let p;for(p=0;p<l.length;p+=1){const h=zl(r,l,p);a[p]?(a[p].p(h,f),We(a[p],1)):(a[p]=Gl(h),a[p].c(),We(a[p],1),a[p].m(e,null))}for(Yt(),p=l.length;p<a.length;p+=1)i(p);Zt()}},i(r){if(!t){for(let f=0;f<l.length;f+=1)We(a[f]);t=!0}},o(r){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)Ke(a[f]);t=!1},d(r){r&&d(e),ht(a,r)}}}function js(n){let e,t,l="üé≤",a,i,r="Sin combatientes",f,p,h=n[12]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",v;return{c(){e=u("div"),t=u("div"),t.textContent=l,a=I(),i=u("p"),i.textContent=r,f=I(),p=u("p"),v=F(h),this.h()},l(x){e=c(x,"DIV",{class:!0});var b=m(e);t=c(b,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-9xsxws"&&(t.textContent=l),a=k(b),i=c(b,"P",{class:!0,"data-svelte-h":!0}),G(i)!=="svelte-180lhql"&&(i.textContent=r),f=k(b),p=c(b,"P",{class:!0});var _=m(p);v=q(_,h),_.forEach(d),b.forEach(d),this.h()},h(){o(t,"class","text-4xl mb-3"),o(i,"class","text-xl font-medieval text-neutral mb-2"),o(p,"class","text-neutral/70 font-body"),o(e,"class","card-parchment p-12 text-center")},m(x,b){Y(x,e,b),s(e,t),s(e,a),s(e,i),s(e,f),s(e,p),s(p,v)},p(x,b){b[0]&4096&&h!==(h=x[12]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&re(v,h)},i:xe,o:xe,d(x){x&&d(e)}}}function Gl(n){let e,t;return e=new fn({props:{combatant:n[45],isCurrentTurn:n[47]===n[0].turnIndex%n[1].length,isDM:!!n[12]}}),e.$on("updateHP",n[17]),e.$on("addCondition",n[18]),e.$on("remove",n[16]),{c(){Bt(e.$$.fragment)},l(l){St(e.$$.fragment,l)},m(l,a){Lt(e,l,a),t=!0},p(l,a){const i={};a[0]&2&&(i.combatant=l[45]),a[0]&3&&(i.isCurrentTurn=l[47]===l[0].turnIndex%l[1].length),a[0]&4096&&(i.isDM=!!l[12]),e.$set(i)},i(l){t||(We(e.$$.fragment,l),t=!0)},o(l){Ke(e.$$.fragment,l),t=!1},d(l){jt(e,l)}}}function Ls(n){let e,t="Esperando que el DM inicie el combate...";return{c(){e=u("p"),e.textContent=t,this.h()},l(l){e=c(l,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){o(e,"class","text-sm text-neutral/50 italic")},m(l,a){Y(l,e,a)},p:xe,d(l){l&&d(e)}}}function Ss(n){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,l,a;return{c(){e=u("button"),e.innerHTML=t,this.h()},l(i){e=c(i,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){o(e,"class","btn btn-dnd btn-lg")},m(i,r){Y(i,e,r),l||(a=ie(e,"click",n[27]),l=!0)},p:xe,d(i){i&&d(e),l=!1,a()}}}function Wl(n){let e,t,l,a="‚öîÔ∏è Iniciar Encuentro",i,r,f,p='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro</span>',h,v,x,b,_,y="Cancelar",E,g,T,C="‚öîÔ∏è",D,L,N,H;return{c(){e=u("div"),t=u("div"),l=u("h3"),l.textContent=a,i=I(),r=u("div"),f=u("label"),f.innerHTML=p,h=I(),v=u("input"),x=I(),b=u("div"),_=u("button"),_.textContent=y,E=I(),g=u("button"),T=u("span"),T.textContent=C,D=F(`\r
          Iniciar Combate`),this.h()},l(V){e=c(V,"DIV",{class:!0});var A=m(e);t=c(A,"DIV",{class:!0});var S=m(t);l=c(S,"H3",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-jkbohq"&&(l.textContent=a),i=k(S),r=c(S,"DIV",{class:!0});var B=m(r);f=c(B,"LABEL",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-13njkxf"&&(f.innerHTML=p),h=k(B),v=c(B,"INPUT",{type:!0,placeholder:!0,class:!0}),B.forEach(d),x=k(S),b=c(S,"DIV",{class:!0});var P=m(b);_=c(P,"BUTTON",{class:!0,"data-svelte-h":!0}),G(_)!=="svelte-173ap95"&&(_.textContent=y),E=k(P),g=c(P,"BUTTON",{class:!0});var ee=m(g);T=c(ee,"SPAN",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-v5ojki"&&(T.textContent=C),D=q(ee,`\r
          Iniciar Combate`),ee.forEach(d),P.forEach(d),S.forEach(d),A.forEach(d),this.h()},h(){o(l,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),o(f,"class","label"),o(v,"type","text"),o(v,"placeholder","Ej: Emboscada de Orcos"),o(v,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 text-lg"),o(r,"class","form-control"),o(_,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),o(T,"class","text-xl"),o(g,"class","btn btn-dnd"),g.disabled=L=!n[7].trim(),o(b,"class","modal-action justify-center gap-4"),o(t,"class","modal-box card-parchment border-4 border-secondary"),o(e,"class","modal modal-open z-50")},m(V,A){Y(V,e,A),s(e,t),s(t,l),s(t,i),s(t,r),s(r,f),s(r,h),s(r,v),ye(v,n[7]),s(t,x),s(t,b),s(b,_),s(b,E),s(b,g),s(g,T),s(g,D),N||(H=[ie(v,"input",n[29]),ie(_,"click",n[30]),ie(g,"click",n[13])],N=!0)},p(V,A){A[0]&128&&v.value!==V[7]&&ye(v,V[7]),A[0]&128&&L!==(L=!V[7].trim())&&(g.disabled=L)},d(V){V&&d(e),N=!1,at(H)}}}function Bs(n){let e,t,l,a,i,r,f,p,h,v,x,b,_,y,E,g,T,C=n[4]&&Rl(n);const D=[Ms,As,Ps],L=[];function N(w,R){return w[3]?0:w[0]?2:1}i=N(n),r=L[i]=D[i](n);let H=n[6]&&Wl(n);function V(w){n[31](w)}let A={combatant:n[10]};n[8]!==void 0&&(A.isOpen=n[8]),h=new ys({props:A}),Wt.push(()=>Jt(h,"isOpen",V)),h.$on("apply",n[19]),h.$on("close",n[32]);function S(w){n[33](w)}let B={combatant:n[10]};n[9]!==void 0&&(B.isOpen=n[9]),b=new Os({props:B}),Wt.push(()=>Jt(b,"isOpen",S)),b.$on("add",n[20]),b.$on("remove",n[21]),b.$on("close",n[34]);function P(w){n[35](w)}let ee={players:n[2]};return n[5]!==void 0&&(ee.isOpen=n[5]),E=new bs({props:ee}),Wt.push(()=>Jt(E,"isOpen",P)),E.$on("add",n[15]),E.$on("close",n[36]),{c(){e=u("div"),C&&C.c(),t=I(),l=u("div"),a=u("div"),r.c(),f=I(),H&&H.c(),p=I(),Bt(h.$$.fragment),x=I(),Bt(b.$$.fragment),y=I(),Bt(E.$$.fragment),this.h()},l(w){e=c(w,"DIV",{class:!0});var R=m(e);C&&C.l(R),t=k(R),l=c(R,"DIV",{class:!0});var j=m(l);a=c(j,"DIV",{class:!0});var U=m(a);r.l(U),U.forEach(d),j.forEach(d),R.forEach(d),f=k(w),H&&H.l(w),p=k(w),St(h.$$.fragment,w),x=k(w),St(b.$$.fragment,w),y=k(w),St(E.$$.fragment,w),this.h()},h(){o(a,"class","flex-1"),o(l,"class","flex flex-1"),o(e,"class","min-h-screen flex flex-col")},m(w,R){Y(w,e,R),C&&C.m(e,null),s(e,t),s(e,l),s(l,a),L[i].m(a,null),Y(w,f,R),H&&H.m(w,R),Y(w,p,R),Lt(h,w,R),Y(w,x,R),Lt(b,w,R),Y(w,y,R),Lt(E,w,R),T=!0},p(w,R){w[4]?C?C.p(w,R):(C=Rl(w),C.c(),C.m(e,t)):C&&(C.d(1),C=null);let j=i;i=N(w),i===j?L[i].p(w,R):(Yt(),Ke(L[j],1,1,()=>{L[j]=null}),Zt(),r=L[i],r?r.p(w,R):(r=L[i]=D[i](w),r.c()),We(r,1),r.m(a,null)),w[6]?H?H.p(w,R):(H=Wl(w),H.c(),H.m(p.parentNode,p)):H&&(H.d(1),H=null);const U={};R[0]&1024&&(U.combatant=w[10]),!v&&R[0]&256&&(v=!0,U.isOpen=w[8],Qt(()=>v=!1)),h.$set(U);const M={};R[0]&1024&&(M.combatant=w[10]),!_&&R[0]&512&&(_=!0,M.isOpen=w[9],Qt(()=>_=!1)),b.$set(M);const W={};R[0]&4&&(W.players=w[2]),!g&&R[0]&32&&(g=!0,W.isOpen=w[5],Qt(()=>g=!1)),E.$set(W)},i(w){T||(We(r),We(h.$$.fragment,w),We(b.$$.fragment,w),We(E.$$.fragment,w),T=!0)},o(w){Ke(r),Ke(h.$$.fragment,w),Ke(b.$$.fragment,w),Ke(E.$$.fragment,w),T=!1},d(w){w&&(d(e),d(f),d(p),d(x),d(y)),C&&C.d(),L[i].d(),H&&H.d(w),jt(h,w),jt(b,w),jt(E,w)}}}function Us(n,e,t){let l,a,i,r,f;ul(n,rn,Q=>t(24,r=Q)),ul(n,sn,Q=>t(25,f=Q)),nn.set("Combate");let p=null,h=null,v=[],x=[],b=!0,_="",y=!1,E=!1,g="",T=!1,C=!1,D=null,L=null,N=null;const H=an(cn);tn(async()=>{await S(),await B(),await V()}),ln(()=>{L&&L(),N&&N()});async function V(){try{t(3,b=!0);const Q=dl(H,"encounters"),de=fl(Q,Kt("campaignId","==",l),Kt("isActive","==",!0));L=pl(de,$=>{if($.empty)t(0,h=null),t(1,v=[]),N&&(N(),N=null);else{const K=$.docs[0];t(0,h={id:K.id,...K.data()}),!N&&h&&A(h.id)}t(3,b=!1)},$=>{console.error("Error en listener de encuentro:",$),t(4,_=$.message),t(3,b=!1)})}catch(Q){t(4,_=Q.message),t(3,b=!1)}}function A(Q){const de=dl(H,"combatants"),$=fl(de,Kt("encounterId","==",Q),on("initiative","desc"));N=pl($,K=>{if(t(1,v=K.docs.map(le=>({id:le.id,...le.data()}))),D){const le=v.find(pe=>pe.id===D.id);le&&t(10,D=le)}},K=>{console.error("Error en listener de combatientes:",K)})}async function S(){try{t(23,p=await Qe.getCampaign(l))}catch(Q){t(4,_=Q.message)}}async function B(){try{t(2,x=await Qe.getCampaignCharacters(l))}catch(Q){console.error("Error loading characters:",Q)}}async function P(){if(g.trim())try{await Qe.createEncounter(l,g),t(6,E=!1),t(7,g="")}catch(Q){t(4,_=Q.message)}}async function ee(){if(!(!h||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Qe.endEncounter(h.id)}catch(Q){t(4,_=Q.message)}}async function w(Q){if(h)try{await Qe.addCombatant(h.id,Q.detail),t(5,y=!1)}catch(de){t(4,_=de.message)}}async function R(Q){const de=Q.detail;if(confirm(`¬øEliminar a ${de.name} del combate?`))try{await Qe.removeCombatant(de.id)}catch($){t(4,_=$.message)}}function j(Q){t(10,D=Q.detail),t(8,T=!0),t(9,C=!1)}function U(Q){t(10,D=Q.detail),t(9,C=!0),t(8,T=!1)}async function M(Q){if(D)try{const de=Q.detail,$=Math.max(0,Math.min(D.maxHp,D.currentHp+de));await Qe.updateCombatant(D.id,{currentHp:$}),t(8,T=!1),t(10,D=null)}catch(de){t(4,_=de.message)}}async function W(Q){if(D)try{const de=Q.detail,$=Array.isArray(D.conditions)?D.conditions:[];if($.includes(de)){console.log("Condici√≥n ya existe, ignorando");return}const K=[...$,de];await Qe.updateCombatant(D.id,{conditions:K})}catch(de){t(4,_=de.message)}}async function ce(Q){if(D)try{const de=Q.detail,K=(Array.isArray(D.conditions)?D.conditions:[]).filter(le=>le!==de);await Qe.updateCombatant(D.id,{conditions:K})}catch(de){t(4,_=de.message)}}async function J(){if(h)try{await Qe.nextTurn(h.id)}catch(Q){t(4,_=Q.message)}}const O=()=>t(4,_=""),z=()=>t(6,E=!0),X=()=>t(5,y=!0);function ue(){g=this.value,t(7,g)}const te=()=>{t(6,E=!1),t(7,g="")};function ne(Q){T=Q,t(8,T)}const ae=()=>{t(8,T=!1),t(10,D=null)};function he(Q){C=Q,t(9,C)}const _e=()=>{t(9,C=!1),t(10,D=null)};function me(Q){y=Q,t(5,y)}const ke=()=>t(5,y=!1);return n.$$.update=()=>{n.$$.dirty[0]&33554432&&(l=f.params.id||""),n.$$.dirty[0]&25165824&&t(12,a=p&&r&&p.dmId===r.uid),n.$$.dirty[0]&3&&t(11,i=h&&v.length>0?v[h.turnIndex%v.length]:null)},[h,v,x,b,_,y,E,g,T,C,D,i,a,P,ee,w,R,j,U,M,W,ce,J,p,r,f,O,z,X,ue,te,ne,ae,he,_e,me,ke]}class Qs extends gt{constructor(e){super(),xt(this,e,Us,Bs,Ct,{},null,[-1,-1])}}export{Qs as component};
