import{S as Re,i as Je,s as Ke,n as de,d as _,a as re,m as c,b as j,c as s,e as f,f as E,o as M,h as D,g as Q,j as m,k,t as W,A as ut,u as ft,r as me,x as mt,q as Ne,v as ke,B as Se,C as vt,D as pt,E as _t,F as Qe,G as ce,H as ee,I as Ue,J as bt,K as We,L as Xe,M as Ye,l as tt,p as gt,N as xt,O as ze}from"../chunks/D_G0BaV5.js";import{e as Be,h as Ct,a as Ae}from"../chunks/5Suz-1-0.js";import"../chunks/IHki7fMi.js";import{p as Et}from"../chunks/D0AE5CJh.js";import"../chunks/BGidcjIc.js";import{u as It}from"../chunks/BLMm51hs.js";import{g as wt,c as Dt,q as kt,w as yt,o as Ht}from"../chunks/eN7n43qG.js";import{c as Vt}from"../chunks/Bhgkhhu0.js";function lt(n,t,e){const l=n.slice();return l[8]=t[e],l}function at(n){let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',o,i,u,d,v="‚úèÔ∏è Editar",p,a,r,b="üóëÔ∏è Eliminar",h,w;return{c(){t=m("div"),e=m("label"),e.innerHTML=l,o=k(),i=m("ul"),u=m("li"),d=m("a"),d.textContent=v,p=k(),a=m("li"),r=m("a"),r.textContent=b,this.h()},l(g){t=f(g,"DIV",{class:!0});var C=E(t);e=f(C,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),M(e)!=="svelte-12y8g2b"&&(e.innerHTML=l),o=D(C),i=f(C,"UL",{tabindex:!0,class:!0});var H=E(i);u=f(H,"LI",{});var y=E(u);d=f(y,"A",{class:!0,"data-svelte-h":!0}),M(d)!=="svelte-wsazpu"&&(d.textContent=v),y.forEach(_),p=D(H),a=f(H,"LI",{});var A=E(a);r=f(A,"A",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-14pabf4"&&(r.textContent=b),A.forEach(_),H.forEach(_),C.forEach(_),this.h()},h(){c(e,"tabindex","0"),c(e,"class","btn btn-ghost btn-sm btn-circle"),c(d,"class","text-secondary"),c(r,"class","text-error"),c(i,"tabindex","0"),c(i,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-52 border-2 border-secondary"),c(t,"class","dropdown dropdown-end")},m(g,C){j(g,t,C),s(t,e),s(t,o),s(t,i),s(i,u),s(u,d),s(i,p),s(i,a),s(a,r),h||(w=[me(d,"click",n[4]),me(r,"click",n[5])],h=!0)},p:de,d(g){g&&_(t),h=!1,ft(w)}}}function st(n){let t,e,l="‚ö†Ô∏è CONDICIONES ACTIVAS",o,i,u=Be(n[0].conditions),d=[];for(let v=0;v<u.length;v+=1)d[v]=rt(lt(n,u,v));return{c(){t=m("div"),e=m("p"),e.textContent=l,o=k(),i=m("div");for(let v=0;v<d.length;v+=1)d[v].c();this.h()},l(v){t=f(v,"DIV",{class:!0});var p=E(t);e=f(p,"P",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-zymfnd"&&(e.textContent=l),o=D(p),i=f(p,"DIV",{class:!0});var a=E(i);for(let r=0;r<d.length;r+=1)d[r].l(a);a.forEach(_),p.forEach(_),this.h()},h(){c(e,"class","text-xs font-medieval text-neutral/60 mb-2"),c(i,"class","flex flex-wrap gap-1"),c(t,"class","bg-warning/10 p-3 rounded-lg border border-warning/30 mt-3")},m(v,p){j(v,t,p),s(t,e),s(t,o),s(t,i);for(let a=0;a<d.length;a+=1)d[a]&&d[a].m(i,null)},p(v,p){if(p&1){u=Be(v[0].conditions);let a;for(a=0;a<u.length;a+=1){const r=lt(v,u,a);d[a]?d[a].p(r,p):(d[a]=rt(r),d[a].c(),d[a].m(i,null))}for(;a<d.length;a+=1)d[a].d(1);d.length=u.length}},d(v){v&&_(t),mt(d,v)}}}function rt(n){let t,e=n[8]+"",l;return{c(){t=m("div"),l=W(e),this.h()},l(o){t=f(o,"DIV",{class:!0});var i=E(t);l=Q(i,e),i.forEach(_),this.h()},h(){c(t,"class","badge badge-warning badge-sm")},m(o,i){j(o,t,i),s(t,l)},p(o,i){i&1&&e!==(e=o[8]+"")&&re(l,e)},d(o){o&&_(t)}}}function Lt(n){let t,e,l,o,i='<div class="w-20 h-20 rounded-full ring-2 ring-secondary ring-offset-2 ring-offset-[#f4e4c1]"><div class="bg-gradient-to-br from-primary to-accent flex items-center justify-center"><span class="text-3xl">üßô‚Äç‚ôÇÔ∏è</span></div></div>',u,d,v,p=n[0].name+"",a,r,b,h=n[0].class+"",w,g,C,H,y="‚öîÔ∏è",A,N,S,x,L="CA",P,V,U=n[0].armorClass+"",$,z,X,I,F="INIT",ne,Y,J,te=n[0].initiative+"",ue,_e,le,Z,ae,Ce="PUNTOS DE VIDA",Ee,ie,T=n[0].currentHp+"",B,fe,be=n[0].maxHp+"",oe,ge,K,he,ve,pe,xe,Ie,we,qe,ye=new Date(n[0].createdAt).toLocaleDateString()+"",He,G=n[1]&&at(n),R=n[2]&&st(n);return{c(){t=m("div"),e=m("div"),l=m("div"),o=m("div"),o.innerHTML=i,u=k(),d=m("div"),v=m("h3"),a=W(p),r=k(),b=m("p"),w=W(h),g=k(),G&&G.c(),C=k(),H=m("div"),H.textContent=y,A=k(),N=m("div"),S=m("div"),x=m("p"),x.textContent=L,P=k(),V=m("p"),$=W(U),z=k(),X=m("div"),I=m("p"),I.textContent=F,ne=k(),Y=m("p"),J=W("+"),ue=W(te),_e=k(),le=m("div"),Z=m("div"),ae=m("span"),ae.textContent=Ce,Ee=k(),ie=m("span"),B=W(T),fe=W("/"),oe=W(be),ge=k(),K=m("progress"),xe=k(),R&&R.c(),Ie=k(),we=m("div"),qe=W("Creado "),He=W(ye),this.h()},l(O){t=f(O,"DIV",{class:!0});var q=E(t);e=f(q,"DIV",{class:!0});var se=E(e);l=f(se,"DIV",{class:!0});var De=E(l);o=f(De,"DIV",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-141w0gr"&&(o.innerHTML=i),u=D(De),d=f(De,"DIV",{class:!0});var Ve=E(d);v=f(Ve,"H3",{class:!0});var Ze=E(v);a=Q(Ze,p),Ze.forEach(_),r=D(Ve),b=f(Ve,"P",{class:!0});var $e=E(b);w=Q($e,h),$e.forEach(_),Ve.forEach(_),g=D(De),G&&G.l(De),De.forEach(_),C=D(se),H=f(se,"DIV",{class:!0,"data-svelte-h":!0}),M(H)!=="svelte-1y8ji1s"&&(H.textContent=y),A=D(se),N=f(se,"DIV",{class:!0});var Le=E(N);S=f(Le,"DIV",{class:!0});var Te=E(S);x=f(Te,"P",{class:!0,"data-svelte-h":!0}),M(x)!=="svelte-wol06o"&&(x.textContent=L),P=D(Te),V=f(Te,"P",{class:!0});var et=E(V);$=Q(et,U),et.forEach(_),Te.forEach(_),z=D(Le),X=f(Le,"DIV",{class:!0});var Me=E(X);I=f(Me,"P",{class:!0,"data-svelte-h":!0}),M(I)!=="svelte-kbusj2"&&(I.textContent=F),ne=D(Me),Y=f(Me,"P",{class:!0});var Fe=E(Y);J=Q(Fe,"+"),ue=Q(Fe,te),Fe.forEach(_),Me.forEach(_),Le.forEach(_),_e=D(se),le=f(se,"DIV",{class:!0});var Pe=E(le);Z=f(Pe,"DIV",{class:!0});var Oe=E(Z);ae=f(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),M(ae)!=="svelte-afios8"&&(ae.textContent=Ce),Ee=D(Oe),ie=f(Oe,"SPAN",{class:!0});var je=E(ie);B=Q(je,T),fe=Q(je,"/"),oe=Q(je,be),je.forEach(_),Oe.forEach(_),ge=D(Pe),K=f(Pe,"PROGRESS",{class:!0,max:!0}),E(K).forEach(_),Pe.forEach(_),xe=D(se),R&&R.l(se),Ie=D(se),we=f(se,"DIV",{class:!0});var Ge=E(we);qe=Q(Ge,"Creado "),He=Q(Ge,ye),Ge.forEach(_),se.forEach(_),q.forEach(_),this.h()},h(){c(o,"class","avatar"),c(v,"class","text-2xl font-medieval font-bold text-neutral mb-1"),c(b,"class","text-sm text-neutral/70 font-body"),c(d,"class","flex-1"),c(l,"class","flex items-start gap-4 mb-4"),c(H,"class","divider my-2"),c(x,"class","text-xs font-medieval text-neutral/60 mb-1"),c(V,"class","text-2xl font-bold text-neutral"),c(S,"class","bg-gradient-to-br from-info/20 to-success/20 p-3 rounded-lg border border-info/30 text-center"),c(I,"class","text-xs font-medieval text-neutral/60 mb-1"),c(Y,"class","text-2xl font-bold text-neutral"),c(X,"class","bg-gradient-to-br from-warning/20 to-error/20 p-3 rounded-lg border border-warning/30 text-center"),c(N,"class","grid grid-cols-2 gap-3 mb-4"),c(ae,"class","text-xs font-medieval text-neutral/70"),c(ie,"class","font-bold text-neutral text-lg"),c(Z,"class","flex justify-between items-center mb-2"),c(K,"class",he="progress progress-"+n[3]+" w-full h-3"),K.value=ve=n[0].currentHp,c(K,"max",pe=n[0].maxHp),c(le,"class","bg-gradient-to-r from-success/10 to-error/10 p-3 rounded-lg border border-success/30"),c(we,"class","text-xs text-neutral/50 text-center mt-3 italic font-body"),c(e,"class","card-body p-5"),c(t,"class","card-parchment card-hover corner-ornament")},m(O,q){j(O,t,q),s(t,e),s(e,l),s(l,o),s(l,u),s(l,d),s(d,v),s(v,a),s(d,r),s(d,b),s(b,w),s(l,g),G&&G.m(l,null),s(e,C),s(e,H),s(e,A),s(e,N),s(N,S),s(S,x),s(S,P),s(S,V),s(V,$),s(N,z),s(N,X),s(X,I),s(X,ne),s(X,Y),s(Y,J),s(Y,ue),s(e,_e),s(e,le),s(le,Z),s(Z,ae),s(Z,Ee),s(Z,ie),s(ie,B),s(ie,fe),s(ie,oe),s(le,ge),s(le,K),s(e,xe),R&&R.m(e,null),s(e,Ie),s(e,we),s(we,qe),s(we,He)},p(O,[q]){q&1&&p!==(p=O[0].name+"")&&re(a,p),q&1&&h!==(h=O[0].class+"")&&re(w,h),O[1]?G?G.p(O,q):(G=at(O),G.c(),G.m(l,null)):G&&(G.d(1),G=null),q&1&&U!==(U=O[0].armorClass+"")&&re($,U),q&1&&te!==(te=O[0].initiative+"")&&re(ue,te),q&1&&T!==(T=O[0].currentHp+"")&&re(B,T),q&1&&be!==(be=O[0].maxHp+"")&&re(oe,be),q&8&&he!==(he="progress progress-"+O[3]+" w-full h-3")&&c(K,"class",he),q&1&&ve!==(ve=O[0].currentHp)&&(K.value=ve),q&1&&pe!==(pe=O[0].maxHp)&&c(K,"max",pe),O[2]?R?R.p(O,q):(R=st(O),R.c(),R.m(e,Ie)):R&&(R.d(1),R=null),q&1&&ye!==(ye=new Date(O[0].createdAt).toLocaleDateString()+"")&&re(He,ye)},i:de,o:de,d(O){O&&_(t),G&&G.d(),R&&R.d()}}}function Tt(n,t,e){let l,o,i,{character:u}=t,{isOwner:d=!1}=t;const v=ut();function p(){v("edit",u)}function a(){v("delete",u)}return n.$$set=r=>{"character"in r&&e(0,u=r.character),"isOwner"in r&&e(1,d=r.isOwner)},n.$$.update=()=>{n.$$.dirty&1&&e(6,l=u.currentHp/u.maxHp*100),n.$$.dirty&64&&e(3,o=l>50?"success":l>25?"warning":"error"),n.$$.dirty&1&&e(2,i=Array.isArray(u.conditions)&&u.conditions.length>0)},[u,d,i,o,p,a,l]}class ht extends Re{constructor(t){super(),Je(this,t,Tt,Lt,Ke,{character:0,isOwner:1})}}function nt(n){let t,e,l,o="‚úï",i,u,d=n[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje",v,p,a,r,b,h='<span class="label-text font-medieval text-neutral text-lg">Nombre *</span>',w,g,C,H,y,A,N='<span class="label-text font-medieval text-neutral text-lg">HP M√°ximo *</span>',S,x,L,P,V,U='<span class="label-text font-medieval text-neutral text-lg">Clase de Armadura (CA) *</span>',$,z,X,I,F,ne="Cancelar",Y,J,te,ue=n[2]?"üíæ":"‚ú®",_e,le,Z=n[2]?"Guardar Cambios":"Crear Personaje",ae,Ce,Ee,ie;return{c(){t=m("div"),e=m("div"),l=m("button"),l.textContent=o,i=k(),u=m("h3"),v=W(d),p=k(),a=m("form"),r=m("div"),b=m("label"),b.innerHTML=h,w=k(),g=m("input"),C=k(),H=m("div"),y=m("div"),A=m("label"),A.innerHTML=N,S=k(),x=m("input"),L=k(),P=m("div"),V=m("label"),V.innerHTML=U,$=k(),z=m("input"),X=k(),I=m("div"),F=m("button"),F.textContent=ne,Y=k(),J=m("button"),te=m("span"),_e=W(ue),le=k(),ae=W(Z),this.h()},l(T){t=f(T,"DIV",{class:!0});var B=E(t);e=f(B,"DIV",{class:!0});var fe=E(e);l=f(fe,"BUTTON",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-1t0z3ws"&&(l.textContent=o),i=D(fe),u=f(fe,"H3",{class:!0});var be=E(u);v=Q(be,d),be.forEach(_),p=D(fe),a=f(fe,"FORM",{});var oe=E(a);r=f(oe,"DIV",{class:!0});var ge=E(r);b=f(ge,"LABEL",{class:!0,"data-svelte-h":!0}),M(b)!=="svelte-xi5qbv"&&(b.innerHTML=h),w=D(ge),g=f(ge,"INPUT",{type:!0,placeholder:!0,class:!0}),ge.forEach(_),C=D(oe),H=f(oe,"DIV",{class:!0});var K=E(H);y=f(K,"DIV",{class:!0});var he=E(y);A=f(he,"LABEL",{class:!0,"data-svelte-h":!0}),M(A)!=="svelte-1n2l9vr"&&(A.innerHTML=N),S=D(he),x=f(he,"INPUT",{type:!0,min:!0,class:!0}),he.forEach(_),L=D(K),P=f(K,"DIV",{class:!0});var ve=E(P);V=f(ve,"LABEL",{class:!0,"data-svelte-h":!0}),M(V)!=="svelte-kzmvgp"&&(V.innerHTML=U),$=D(ve),z=f(ve,"INPUT",{type:!0,min:!0,class:!0}),ve.forEach(_),K.forEach(_),X=D(oe),I=f(oe,"DIV",{class:!0});var pe=E(I);F=f(pe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),M(F)!=="svelte-qbe6z4"&&(F.textContent=ne),Y=D(pe),J=f(pe,"BUTTON",{type:!0,class:!0});var xe=E(J);te=f(xe,"SPAN",{class:!0});var Ie=E(te);_e=Q(Ie,ue),Ie.forEach(_),le=D(xe),ae=Q(xe,Z),xe.forEach(_),pe.forEach(_),oe.forEach(_),fe.forEach(_),B.forEach(_),this.h()},h(){c(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),c(u,"class","font-bold text-3xl font-medieval text-neutral mb-6 text-center"),c(b,"class","label"),c(g,"type","text"),c(g,"placeholder","Ej: Gandalf el Gris"),g.required=!0,c(g,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50"),c(r,"class","form-control mb-4"),c(A,"class","label"),c(x,"type","number"),c(x,"min","1"),x.required=!0,c(x,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50"),c(y,"class","form-control"),c(V,"class","label"),c(z,"type","number"),c(z,"min","1"),z.required=!0,c(z,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50"),c(P,"class","form-control"),c(H,"class","grid grid-cols-2 gap-4 mb-4"),c(F,"type","button"),c(F,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),c(te,"class","text-xl"),c(J,"type","submit"),c(J,"class","btn btn-dnd"),J.disabled=Ce=!n[0].name||!n[0].maxHp,c(I,"class","modal-action justify-center gap-4 mt-4"),c(e,"class","bg-[#2d241c] text-base-content border-4 border-secondary corner-ornament card-parchment w-full max-w-2xl p-6 relative"),c(t,"class","modal modal-open z-50")},m(T,B){j(T,t,B),s(t,e),s(e,l),s(e,i),s(e,u),s(u,v),s(e,p),s(e,a),s(a,r),s(r,b),s(r,w),s(r,g),ke(g,n[0].name),s(a,C),s(a,H),s(H,y),s(y,A),s(y,S),s(y,x),ke(x,n[0].maxHp),s(H,L),s(H,P),s(P,V),s(P,$),s(P,z),ke(z,n[0].armorClass),s(a,X),s(a,I),s(I,F),s(I,Y),s(I,J),s(J,te),s(te,_e),s(J,le),s(J,ae),Ee||(ie=[me(l,"click",n[4]),me(g,"input",n[5]),me(x,"input",n[6]),me(z,"input",n[7]),me(F,"click",n[4]),me(a,"submit",vt(n[3]))],Ee=!0)},p(T,B){B&4&&d!==(d=T[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje")&&re(v,d),B&1&&g.value!==T[0].name&&ke(g,T[0].name),B&1&&Se(x.value)!==T[0].maxHp&&ke(x,T[0].maxHp),B&1&&Se(z.value)!==T[0].armorClass&&ke(z,T[0].armorClass),B&4&&ue!==(ue=T[2]?"üíæ":"‚ú®")&&re(_e,ue),B&4&&Z!==(Z=T[2]?"Guardar Cambios":"Crear Personaje")&&re(ae,Z),B&1&&Ce!==(Ce=!T[0].name||!T[0].maxHp)&&(J.disabled=Ce)},d(T){T&&_(t),Ee=!1,ft(ie)}}}function Mt(n){let t,e=n[1]&&nt(n);return{c(){e&&e.c(),t=Ne()},l(l){e&&e.l(l),t=Ne()},m(l,o){e&&e.m(l,o),j(l,t,o)},p(l,[o]){l[1]?e?e.p(l,o):(e=nt(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:de,o:de,d(l){l&&_(t),e&&e.d(l)}}}function Pt(n,t,e){let{isOpen:l=!1}=t,{isEdit:o=!1}=t,{form:i={name:"",maxHp:10,armorClass:10}}=t;const u=ut();function d(){u("submit",i)}function v(){u("close")}function p(){i.name=this.value,e(0,i)}function a(){i.maxHp=Se(this.value),e(0,i)}function r(){i.armorClass=Se(this.value),e(0,i)}return n.$$set=b=>{"isOpen"in b&&e(1,l=b.isOpen),"isEdit"in b&&e(2,o=b.isEdit),"form"in b&&e(0,i=b.form)},[i,l,o,d,v,p,a,r]}class Ot extends Re{constructor(t){super(),Je(this,t,Pt,Mt,Ke,{isOpen:1,isEdit:2,form:0})}}function it(n,t,e){const l=n.slice();return l[28]=t[e],l}function ot(n){let t,e,l,o,i,u="‚úï",d,v;return{c(){t=m("div"),e=m("span"),l=W(n[2]),o=k(),i=m("button"),i.textContent=u,this.h()},l(p){t=f(p,"DIV",{class:!0});var a=E(t);e=f(a,"SPAN",{});var r=E(e);l=Q(r,n[2]),r.forEach(_),o=D(a),i=f(a,"BUTTON",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-4tcifc"&&(i.textContent=u),a.forEach(_),this.h()},h(){c(i,"class","btn btn-sm"),c(t,"class","alert alert-error mb-6")},m(p,a){j(p,t,a),s(t,e),s(e,l),s(t,o),s(t,i),d||(v=me(i,"click",n[15]),d=!0)},p(p,a){a&4&&re(l,p[2])},d(p){p&&_(t),d=!1,v()}}}function jt(n){let t,e,l,o,i,u;const d=[St,Nt],v=[];function p(r,b){return r[0]?0:1}e=p(n),l=v[e]=d[e](n);let a=n[6].length>0&&ct(n);return{c(){t=m("div"),l.c(),o=k(),a&&a.c(),i=Ne(),this.h()},l(r){t=f(r,"DIV",{class:!0});var b=E(t);l.l(b),b.forEach(_),o=D(r),a&&a.l(r),i=Ne(),this.h()},h(){c(t,"class","mb-10")},m(r,b){j(r,t,b),v[e].m(t,null),j(r,o,b),a&&a.m(r,b),j(r,i,b),u=!0},p(r,b){let h=e;e=p(r),e===h?v[e].p(r,b):(ze(),ce(v[h],1,1,()=>{v[h]=null}),Ue(),l=v[e],l?l.p(r,b):(l=v[e]=d[e](r),l.c()),ee(l,1),l.m(t,null)),r[6].length>0?a?(a.p(r,b),b&64&&ee(a,1)):(a=ct(r),a.c(),ee(a,1),a.m(i.parentNode,i)):a&&(ze(),ce(a,1,1,()=>{a=null}),Ue())},i(r){u||(ee(l),ee(a),u=!0)},o(r){ce(l),ce(a),u=!1},d(r){r&&(_(t),_(o),_(i)),v[e].d(),a&&a.d(r)}}}function At(n){let t,e='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){t=m("div"),t.innerHTML=e,this.h()},l(l){t=f(l,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1f8qah6"&&(t.innerHTML=e),this.h()},h(){c(t,"class","flex justify-center py-20")},m(l,o){j(l,t,o)},p:de,i:de,o:de,d(l){l&&_(t)}}}function Nt(n){let t,e,l,o="üßô‚Äç‚ôÇÔ∏è",i,u,d="No tienes personaje",v,p,a="Crea tu personaje para unirte a las aventuras de esta campa√±a",r,b,h=`<span class="text-2xl">‚ú®</span>
                  Crear Mi Personaje`,w,g;return{c(){t=m("div"),e=m("div"),l=m("div"),l.textContent=o,i=k(),u=m("h3"),u.textContent=d,v=k(),p=m("p"),p.textContent=a,r=k(),b=m("button"),b.innerHTML=h,this.h()},l(C){t=f(C,"DIV",{class:!0});var H=E(t);e=f(H,"DIV",{class:!0});var y=E(e);l=f(y,"DIV",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-199900m"&&(l.textContent=o),i=D(y),u=f(y,"H3",{class:!0,"data-svelte-h":!0}),M(u)!=="svelte-1gfgn0e"&&(u.textContent=d),v=D(y),p=f(y,"P",{class:!0,"data-svelte-h":!0}),M(p)!=="svelte-1134wa4"&&(p.textContent=a),r=D(y),b=f(y,"BUTTON",{class:!0,"data-svelte-h":!0}),M(b)!=="svelte-1akc889"&&(b.innerHTML=h),y.forEach(_),H.forEach(_),this.h()},h(){c(l,"class","text-6xl mb-4"),c(u,"class","text-2xl font-medieval text-neutral mb-3"),c(p,"class","text-neutral/70 font-body mb-6"),c(b,"class","btn btn-dnd btn-lg"),c(e,"class","card-parchment p-8 text-center max-w-2xl justify-center items-center corner-ornament"),c(t,"class","flex justify-center")},m(C,H){j(C,t,H),s(t,e),s(e,l),s(e,i),s(e,u),s(e,v),s(e,p),s(e,r),s(e,b),w||(g=me(b,"click",n[7]),w=!0)},p:de,i:de,o:de,d(C){C&&_(t),w=!1,g()}}}function St(n){let t,e,l,o;return l=new ht({props:{character:n[0],isOwner:!0}}),l.$on("edit",n[16]),l.$on("delete",n[17]),{c(){t=m("div"),e=m("div"),Ye(l.$$.fragment),this.h()},l(i){t=f(i,"DIV",{class:!0});var u=E(t);e=f(u,"DIV",{class:!0});var d=E(e);Xe(l.$$.fragment,d),d.forEach(_),u.forEach(_),this.h()},h(){c(e,"class","max-w-md"),c(t,"class","flex justify-center")},m(i,u){j(i,t,u),s(t,e),We(l,e,null),o=!0},p(i,u){const d={};u&1&&(d.character=i[0]),l.$set(d)},i(i){o||(ee(l.$$.fragment,i),o=!0)},o(i){ce(l.$$.fragment,i),o=!1},d(i){i&&_(t),Qe(l)}}}function ct(n){let t,e="‚öîÔ∏è",l,o,i='<h2 class="text-3xl font-medieval text-center text-secondary mb-2">Compa√±eros de Aventura</h2> <p class="text-primary text-center font-body italic">Los dem√°s h√©roes de esta campa√±a</p>',u,d,v,p,a=Be(n[6]),r=[];for(let h=0;h<a.length;h+=1)r[h]=dt(it(n,a,h));const b=h=>ce(r[h],1,1,()=>{r[h]=null});return{c(){t=m("div"),t.textContent=e,l=k(),o=m("div"),o.innerHTML=i,u=k(),d=m("div"),v=m("div");for(let h=0;h<r.length;h+=1)r[h].c();this.h()},l(h){t=f(h,"DIV",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-erxn0r"&&(t.textContent=e),l=D(h),o=f(h,"DIV",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-1azjunw"&&(o.innerHTML=i),u=D(h),d=f(h,"DIV",{class:!0});var w=E(d);v=f(w,"DIV",{class:!0});var g=E(v);for(let C=0;C<r.length;C+=1)r[C].l(g);g.forEach(_),w.forEach(_),this.h()},h(){c(t,"class","divider text-neutral/50 my-8"),c(o,"class","mb-6"),c(v,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"),c(d,"class","w-3/4 mx-auto")},m(h,w){j(h,t,w),j(h,l,w),j(h,o,w),j(h,u,w),j(h,d,w),s(d,v);for(let g=0;g<r.length;g+=1)r[g]&&r[g].m(v,null);p=!0},p(h,w){if(w&64){a=Be(h[6]);let g;for(g=0;g<a.length;g+=1){const C=it(h,a,g);r[g]?(r[g].p(C,w),ee(r[g],1)):(r[g]=dt(C),r[g].c(),ee(r[g],1),r[g].m(v,null))}for(ze(),g=a.length;g<r.length;g+=1)b(g);Ue()}},i(h){if(!p){for(let w=0;w<a.length;w+=1)ee(r[w]);p=!0}},o(h){r=r.filter(Boolean);for(let w=0;w<r.length;w+=1)ce(r[w]);p=!1},d(h){h&&(_(t),_(l),_(o),_(u),_(d)),mt(r,h)}}}function dt(n){let t,e;return t=new ht({props:{character:n[28],isOwner:!1}}),{c(){Ye(t.$$.fragment)},l(l){Xe(t.$$.fragment,l)},m(l,o){We(t,l,o),e=!0},p(l,o){const i={};o&64&&(i.character=l[28]),t.$set(i)},i(l){e||(ee(t.$$.fragment,l),e=!0)},o(l){ce(t.$$.fragment,l),e=!1},d(l){Qe(t,l)}}}function Ut(n){let t,e,l,o,i,u='<h1 class="text-4xl lg:text-5xl font-bold text-secondary title-ornament mb-3 text-shadow">Personajes</h1> <p class="text-base-content/70 font-body italic text-lg mb-2">&quot;Cada h√©roe tiene su historia...&quot;</p> <div class="badge bg-success/30 border-success/50 text-neutral badge-lg" title="Los cambios se sincronizan en tiempo real">üîÑ Sincronizaci√≥n en tiempo real activa</div>',d,v,p,a,r,b,h,w,g,C=n[2]&&ot(n);const H=[At,jt],y=[];function A(x,L){return x[1]?0:1}p=A(n),a=y[p]=H[p](n);function N(x){n[18](x)}let S={isEdit:n[4],form:n[5]};return n[3]!==void 0&&(S.isOpen=n[3]),h=new Ot({props:S}),pt.push(()=>_t(h,"isOpen",N)),h.$on("submit",n[9]),h.$on("close",n[11]),{c(){t=m("div"),e=m("div"),l=m("div"),o=m("div"),i=m("div"),i.innerHTML=u,d=k(),C&&C.c(),v=k(),a.c(),r=k(),b=m("div"),Ye(h.$$.fragment),this.h()},l(x){t=f(x,"DIV",{class:!0});var L=E(t);e=f(L,"DIV",{class:!0});var P=E(e);l=f(P,"DIV",{class:!0});var V=E(l);o=f(V,"DIV",{class:!0});var U=E(o);i=f(U,"DIV",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1rwvit0"&&(i.innerHTML=u),d=D(U),C&&C.l(U),v=D(U),a.l(U),U.forEach(_),V.forEach(_),P.forEach(_),L.forEach(_),r=D(x),b=f(x,"DIV",{class:!0});var $=E(b);Xe(h.$$.fragment,$),$.forEach(_),this.h()},h(){c(i,"class","mb-8 text-center"),c(o,"class","container mx-auto max-w-7xl"),c(l,"class","flex-1 p-6"),c(e,"class","flex flex-1"),c(t,"class","min-h-screen flex flex-col"),c(b,"class","justify-center items-center")},m(x,L){j(x,t,L),s(t,e),s(e,l),s(l,o),s(o,i),s(o,d),C&&C.m(o,null),s(o,v),y[p].m(o,null),j(x,r,L),j(x,b,L),We(h,b,null),g=!0},p(x,[L]){x[2]?C?C.p(x,L):(C=ot(x),C.c(),C.m(o,v)):C&&(C.d(1),C=null);let P=p;p=A(x),p===P?y[p].p(x,L):(ze(),ce(y[P],1,1,()=>{y[P]=null}),Ue(),a=y[p],a?a.p(x,L):(a=y[p]=H[p](x),a.c()),ee(a,1),a.m(o,null));const V={};L&16&&(V.isEdit=x[4]),L&32&&(V.form=x[5]),!w&&L&8&&(w=!0,V.isOpen=x[3],bt(()=>w=!1)),h.$set(V)},i(x){g||(ee(a),ee(h.$$.fragment,x),g=!0)},o(x){ce(a),ce(h.$$.fragment,x),g=!1},d(x){x&&(_(t),_(r),_(b)),C&&C.d(),y[p].d(),Qe(h)}}}function zt(n,t,e){let l,o,i,u,d;tt(n,It,I=>e(13,u=I)),tt(n,Et,I=>e(14,d=I)),Ct.set("Personajes");let v=null,p=[],a=!0,r="",b=!1,h=null,w=!1,g={name:"",maxHp:10,armorClass:10,imageUrl:""},C=null;const H=wt(Vt);gt(async()=>{await A(),y()}),xt(()=>{C&&C()});function y(){try{e(1,a=!0);const I=Dt(H,"characters"),F=kt(I,yt("campaignId","==",l));C=Ht(F,ne=>{e(12,p=ne.docs.map(Y=>({id:Y.id,...Y.data()}))),e(1,a=!1)},ne=>{console.error("Error en listener de personajes:",ne),e(2,r=ne.message),e(1,a=!1)})}catch(I){e(2,r=I.message),e(1,a=!1)}}async function A(){try{v=await Ae.getCampaign(l)}catch(I){e(2,r=I.message)}}function N(){e(5,g={name:"",maxHp:10,armorClass:10,imageUrl:""})}function S(){h=null,e(4,w=!1),N(),e(3,b=!0)}function x(I){h=I,e(4,w=!0),e(5,g={name:I.name,maxHp:I.maxHp,armorClass:I.armorClass,imageUrl:I.imageUrl}),e(3,b=!0)}async function L(){try{w&&h?await Ae.updateCharacter(h.id,{...g,class:h.class,level:h.level,initiative:h.initiative}):await Ae.createCharacter(l,{...g,class:"Aventurero",level:1,initiative:0}),e(3,b=!1),N()}catch(I){e(2,r=I.message)}}async function P(I){if(confirm(`¬øEliminar a ${I.name}?`))try{await Ae.deleteCharacter(I.id)}catch(F){e(2,r=F.message)}}function V(){e(3,b=!1),N()}const U=()=>e(2,r=""),$=I=>x(I.detail),z=I=>P(I.detail);function X(I){b=I,e(3,b)}return n.$$.update=()=>{n.$$.dirty&16384&&(l=d.params.id||""),n.$$.dirty&12288&&e(0,o=p.find(I=>I.userId===(u==null?void 0:u.uid))),n.$$.dirty&12288&&e(6,i=p.filter(I=>I.userId!==(u==null?void 0:u.uid))),n.$$.dirty&1},[o,a,r,b,w,g,i,S,x,L,P,V,p,u,d,U,$,z,X]}class Wt extends Re{constructor(t){super(),Je(this,t,zt,Ut,Ke,{})}}export{Wt as component};
