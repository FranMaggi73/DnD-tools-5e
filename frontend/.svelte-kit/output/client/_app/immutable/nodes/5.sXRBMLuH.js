import{S as Re,i as Fe,s as Ge,n as ge,d as f,o as ie,c as i,a as F,b as n,e as u,f as _,g as M,p as j,j as d,k as P,t as U,V as it,h as G,l as re,y as Se,r as Ne,u as Be,R as je,W as Hl,F as Dl,X as Me,B as wt,w as ye,D as wl,T as ut,Y as dt,N as nt,G as Oe,H as Ae,J as bt,Z as ft,P as rt,Q as at,O as ot,m as It,q as Il,v as Tl,I as mt}from"../chunks/CQqHTK8U.js";import{e as Ee,o as qe,h as Vl,a as Ve}from"../chunks/BjXTUeIZ.js";import"../chunks/IHki7fMi.js";import{p as Ml}from"../chunks/CSRxS88f.js";import{u as Pl}from"../chunks/8E2ohCEn.js";import{d as kl}from"../chunks/B0l-HeGw.js";import{e as pt,f as Tt,g as Vt,h as Mt,i as Pt}from"../chunks/Dpq2-5VD.js";import{g as Ll,c as Lt,q as At,w as ht,o as Nt,b as Al}from"../chunks/kMfomZo-.js";import{a as Nl}from"../chunks/SB3GKwJC.js";function Ot(s,e,t){const l=s.slice();return l[11]=e[t],l}function St(s){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-tne6n3"&&(e.textContent=t),this.h()},h(){i(e,"class","absolute -top-3 -right-3 badge badge-ornate text-sm sm:text-lg animate-bounce z-10")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Bt(s){let e,t='<span class="text-4xl sm:text-6xl">üíÄ</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1m5cl71"&&(e.innerHTML=t),this.h()},h(){i(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function jt(s){let e,t,l=s[0].armorClass+"",a;return{c(){e=d("div"),t=U("üõ°Ô∏è AC "),a=U(l),this.h()},l(o){e=u(o,"DIV",{class:!0});var r=_(e);t=j(r,"üõ°Ô∏è AC "),a=j(r,l),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm bg-info/30 text-neutral border-info/50")},m(o,r){F(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&l!==(l=o[0].armorClass+"")&&ie(a,l)},d(o){o&&f(e)}}}function Ut(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,o,r,c,p="üóëÔ∏è Eliminar",m,h;return{c(){e=d("div"),t=d("label"),t.innerHTML=l,a=P(),o=d("ul"),r=d("li"),c=d("a"),c.textContent=p,this.h()},l(b){e=u(b,"DIV",{class:!0});var k=_(e);t=u(k,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),G(t)!=="svelte-13tftyw"&&(t.innerHTML=l),a=M(k),o=u(k,"UL",{tabindex:!0,class:!0});var y=_(o);r=u(y,"LI",{});var v=_(r);c=u(v,"A",{class:!0,"data-svelte-h":!0}),G(c)!=="svelte-hji4ll"&&(c.textContent=p),v.forEach(f),y.forEach(f),k.forEach(f),this.h()},h(){i(t,"tabindex","0"),i(t,"class","btn btn-ghost btn-xs btn-circle"),i(c,"class","text-error"),i(o,"tabindex","0"),i(o,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary text-sm"),i(e,"class","dropdown dropdown-end flex-shrink-0")},m(b,k){F(b,e,k),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),m||(h=re(c,"click",s[9]),m=!0)},p:ge,d(b){b&&f(e),m=!1,h()}}}function Ol(s){let e,t,l,a="Estado",o,r,c,p=s[4].icon+"",m,h,b,k=s[4].label+"",y,v,E,x,D,C,H,L,N,w=s[0].temporaryHp>0&&zt(s),g=s[0].temporaryHp>0&&qt();return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,o=P(),r=d("div"),c=d("span"),m=U(p),h=P(),b=d("span"),y=U(k),E=P(),w&&w.c(),x=P(),D=d("div"),C=d("div"),L=P(),g&&g.c(),this.h()},l(T){e=u(T,"DIV",{class:!0});var A=_(e);t=u(A,"DIV",{class:!0});var V=_(t);l=u(V,"SPAN",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1lnb92u"&&(l.textContent=a),o=M(V),r=u(V,"DIV",{class:!0});var S=_(r);c=u(S,"SPAN",{class:!0});var O=_(c);m=j(O,p),O.forEach(f),h=M(S),b=u(S,"SPAN",{class:!0});var I=_(b);y=j(I,k),I.forEach(f),E=M(S),w&&w.l(S),S.forEach(f),V.forEach(f),x=M(A),D=u(A,"DIV",{class:!0});var B=_(D);C=u(B,"DIV",{class:!0,style:!0}),_(C).forEach(f),B.forEach(f),L=M(A),g&&g.l(A),A.forEach(f),this.h()},h(){i(l,"class","text-xs font-medieval text-neutral/70"),i(c,"class","text-lg sm:text-xl"),i(b,"class",v="font-medieval text-xs sm:text-sm "+s[4].color+" font-bold"),i(r,"class","flex items-center gap-1"),i(t,"class","flex items-center justify-between gap-2"),i(C,"class",H="bg-"+s[6]+" h-full rounded-full transition-all duration-300"),je(C,"width",s[3]+"%"),i(D,"class","w-full bg-neutral/20 rounded-full h-1.5 sm:h-2 mt-1"),i(e,"class",N="bg-"+s[6]+"/10 p-2 rounded-lg border border-"+s[6]+"/30")},m(T,A){F(T,e,A),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(c,m),n(r,h),n(r,b),n(b,y),n(r,E),w&&w.m(r,null),n(e,x),n(e,D),n(D,C),n(e,L),g&&g.m(e,null)},p(T,A){A&16&&p!==(p=T[4].icon+"")&&ie(m,p),A&16&&k!==(k=T[4].label+"")&&ie(y,k),A&16&&v!==(v="font-medieval text-xs sm:text-sm "+T[4].color+" font-bold")&&i(b,"class",v),T[0].temporaryHp>0?w?w.p(T,A):(w=zt(T),w.c(),w.m(r,null)):w&&(w.d(1),w=null),A&64&&H!==(H="bg-"+T[6]+" h-full rounded-full transition-all duration-300")&&i(C,"class",H),A&8&&je(C,"width",T[3]+"%"),T[0].temporaryHp>0?g||(g=qt(),g.c(),g.m(e,null)):g&&(g.d(1),g=null),A&64&&N!==(N="bg-"+T[6]+"/10 p-2 rounded-lg border border-"+T[6]+"/30")&&i(e,"class",N)},d(T){T&&f(e),w&&w.d(),g&&g.d()}}}function Sl(s){let e,t,l="Puntos de Vida",a,o,r,c,p=s[0].currentHp+"",m,h,b=s[0].maxHp+"",k,y,v,E,x,D,C,H,L=s[0].temporaryHp>0&&Rt(s),N=s[0].temporaryHp>0&&Ft(s);return{c(){e=d("div"),t=d("span"),t.textContent=l,a=P(),o=d("div"),L&&L.c(),r=P(),c=d("span"),m=U(p),h=U("/"),k=U(b),y=P(),v=d("progress"),C=P(),N&&N.c(),H=Be(),this.h()},l(w){e=u(w,"DIV",{class:!0});var g=_(e);t=u(g,"SPAN",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1a9ef08"&&(t.textContent=l),a=M(g),o=u(g,"DIV",{class:!0});var T=_(o);L&&L.l(T),r=M(T),c=u(T,"SPAN",{class:!0});var A=_(c);m=j(A,p),h=j(A,"/"),k=j(A,b),A.forEach(f),T.forEach(f),g.forEach(f),y=M(w),v=u(w,"PROGRESS",{class:!0,max:!0}),_(v).forEach(f),C=M(w),N&&N.l(w),H=Be(),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70"),i(c,"class","font-bold text-neutral text-sm sm:text-base"),i(o,"class","flex items-center gap-1"),i(e,"class","flex justify-between items-center mb-1"),i(v,"class",E="progress progress-"+s[6]+" w-full h-2 sm:h-3"),v.value=x=s[0].currentHp,i(v,"max",D=s[0].maxHp)},m(w,g){F(w,e,g),n(e,t),n(e,a),n(e,o),L&&L.m(o,null),n(o,r),n(o,c),n(c,m),n(c,h),n(c,k),F(w,y,g),F(w,v,g),F(w,C,g),N&&N.m(w,g),F(w,H,g)},p(w,g){w[0].temporaryHp>0?L?L.p(w,g):(L=Rt(w),L.c(),L.m(o,r)):L&&(L.d(1),L=null),g&1&&p!==(p=w[0].currentHp+"")&&ie(m,p),g&1&&b!==(b=w[0].maxHp+"")&&ie(k,b),g&64&&E!==(E="progress progress-"+w[6]+" w-full h-2 sm:h-3")&&i(v,"class",E),g&1&&x!==(x=w[0].currentHp)&&(v.value=x),g&1&&D!==(D=w[0].maxHp)&&i(v,"max",D),w[0].temporaryHp>0?N?N.p(w,g):(N=Ft(w),N.c(),N.m(H.parentNode,H)):N&&(N.d(1),N=null)},d(w){w&&(f(e),f(y),f(v),f(C),f(H)),L&&L.d(),N&&N.d(w)}}}function zt(s){let e,t,l=s[0].temporaryHp+"",a,o;return{c(){e=d("span"),t=U("+"),a=U(l),o=U(" üõ°Ô∏è"),this.h()},l(r){e=u(r,"SPAN",{class:!0});var c=_(e);t=j(c,"+"),a=j(c,l),o=j(c," üõ°Ô∏è"),c.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info ml-1")},m(r,c){F(r,e,c),n(e,t),n(e,a),n(e,o)},p(r,c){c&1&&l!==(l=r[0].temporaryHp+"")&&ie(a,l)},d(r){r&&f(e)}}}function qt(s){let e,t='<div class="bg-info h-full rounded-full w-1/3"></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-wxu9s9"&&(e.innerHTML=t),this.h()},h(){i(e,"class","w-full bg-info/20 rounded-full h-1 mt-1")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Rt(s){let e,t,l=s[0].temporaryHp+"",a;return{c(){e=d("span"),t=U("üõ°Ô∏è +"),a=U(l),this.h()},l(o){e=u(o,"SPAN",{class:!0});var r=_(e);t=j(r,"üõ°Ô∏è +"),a=j(r,l),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info")},m(o,r){F(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&l!==(l=o[0].temporaryHp+"")&&ie(a,l)},d(o){o&&f(e)}}}function Ft(s){let e,t,l;return{c(){e=d("div"),t=d("div"),l=d("div"),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);t=u(o,"DIV",{class:!0});var r=_(t);l=u(r,"DIV",{class:!0,style:!0}),_(l).forEach(f),r.forEach(f),o.forEach(f),this.h()},h(){i(l,"class","bg-info h-full rounded-full"),je(l,"width",Math.min(100,s[0].temporaryHp/s[0].maxHp*100)+"%"),i(t,"class","w-full bg-info/20 rounded-full h-1.5"),i(e,"class","mt-1")},m(a,o){F(a,e,o),n(e,t),n(t,l)},p(a,o){o&1&&je(l,"width",Math.min(100,a[0].temporaryHp/a[0].maxHp*100)+"%")},d(a){a&&f(e)}}}function Gt(s){let e,t,l="Condiciones:",a,o,r=Ee(s[0].conditions),c=[];for(let p=0;p<r.length;p+=1)c[p]=Qt(Ot(s,r,p));return{c(){e=d("div"),t=d("span"),t.textContent=l,a=P(),o=d("div");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){e=u(p,"DIV",{class:!0});var m=_(e);t=u(m,"SPAN",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-maxnwi"&&(t.textContent=l),a=M(m),o=u(m,"DIV",{class:!0});var h=_(o);for(let b=0;b<c.length;b+=1)c[b].l(h);h.forEach(f),m.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 block mb-1"),i(o,"class","flex flex-wrap gap-1"),i(e,"class","mt-2")},m(p,m){F(p,e,m),n(e,t),n(e,a),n(e,o);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null)},p(p,m){if(m&1){r=Ee(p[0].conditions);let h;for(h=0;h<r.length;h+=1){const b=Ot(p,r,h);c[h]?c[h].p(b,m):(c[h]=Qt(b),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=r.length}},d(p){p&&f(e),Se(c,p)}}}function Qt(s){let e,t=s[11]+"",l;return{c(){e=d("div"),l=U(t),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);l=j(o,t),o.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm badge-warning")},m(a,o){F(a,e,o),n(e,l)},p(a,o){o&1&&t!==(t=a[11]+"")&&ie(l,t)},d(a){a&&f(e)}}}function Jt(s){let e,t,l="üíö HP",a,o,r="‚ö†Ô∏è Estado",c,p;return{c(){e=d("div"),t=d("button"),t.textContent=l,a=P(),o=d("button"),o.textContent=r,this.h()},l(m){e=u(m,"DIV",{class:!0});var h=_(e);t=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1u8cl5l"&&(t.textContent=l),a=M(h),o=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-1lc9vql"&&(o.textContent=r),h.forEach(f),this.h()},h(){i(t,"class","btn btn-xs sm:btn-sm btn-success flex-1"),i(o,"class","btn btn-xs sm:btn-sm btn-warning flex-1"),i(e,"class","flex gap-2 mt-3")},m(m,h){F(m,e,h),n(e,t),n(e,a),n(e,o),c||(p=[re(t,"click",s[7]),re(o,"click",s[8])],c=!0)},p:ge,d(m){m&&f(e),c=!1,Ne(p)}}}function Bl(s){let e,t,l,a,o,r,c,p,m,h=s[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",b,k,y,v,E,x=s[0].name+"",D,C,H,L,N,w=s[0].initiative+"",g,T,A,V,S,O,I,B,z=s[1]&&St(),q=s[5]&&Bt(),$=s[2]&&jt(s),ee=s[2]&&Ut(s);function ce(X,ae){return X[2]?Sl:Ol}let Q=ce(s),K=Q(s),J=s[0].conditions&&s[0].conditions.length>0&&Gt(s),le=s[2]&&Jt(s);return{c(){e=d("div"),z&&z.c(),t=P(),q&&q.c(),l=P(),a=d("div"),o=d("div"),r=d("div"),c=d("div"),p=d("div"),m=d("span"),b=U(h),y=P(),v=d("div"),E=d("h3"),D=U(x),C=P(),H=d("div"),L=d("div"),N=U("üé≤ "),g=U(w),T=P(),$&&$.c(),A=P(),ee&&ee.c(),V=P(),S=d("div"),K.c(),O=P(),J&&J.c(),I=P(),le&&le.c(),this.h()},l(X){e=u(X,"DIV",{class:!0});var ae=_(e);z&&z.l(ae),t=M(ae),q&&q.l(ae),l=M(ae),a=u(ae,"DIV",{class:!0});var se=_(a);o=u(se,"DIV",{class:!0});var ue=_(o);r=u(ue,"DIV",{class:!0});var W=_(r);c=u(W,"DIV",{class:!0});var de=_(c);p=u(de,"DIV",{class:!0});var oe=_(p);m=u(oe,"SPAN",{class:!0});var fe=_(m);b=j(fe,h),fe.forEach(f),oe.forEach(f),de.forEach(f),W.forEach(f),y=M(ue),v=u(ue,"DIV",{class:!0});var R=_(v);E=u(R,"H3",{class:!0});var ne=_(E);D=j(ne,x),ne.forEach(f),C=M(R),H=u(R,"DIV",{class:!0});var pe=_(H);L=u(pe,"DIV",{class:!0});var he=_(L);N=j(he,"üé≤ "),g=j(he,w),he.forEach(f),T=M(pe),$&&$.l(pe),pe.forEach(f),R.forEach(f),A=M(ue),ee&&ee.l(ue),ue.forEach(f),V=M(se),S=u(se,"DIV",{class:!0});var me=_(S);K.l(me),me.forEach(f),O=M(se),J&&J.l(se),I=M(se),le&&le.l(se),se.forEach(f),ae.forEach(f),this.h()},h(){i(m,"class","text-xl sm:text-2xl"),i(p,"class","bg-primary/20 flex items-center justify-center"),i(c,"class",k="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(s[1]?"ring-secondary":"ring-primary/50")),i(r,"class","avatar flex-shrink-0"),i(E,"class","font-medieval text-base sm:text-lg text-neutral font-bold truncate"),i(L,"class","badge badge-xs sm:badge-sm bg-primary/30 text-neutral border-primary/50"),i(H,"class","flex flex-wrap gap-1 sm:gap-2 mt-1"),i(v,"class","flex-1 min-w-0"),i(o,"class","flex items-start gap-2 sm:gap-3"),i(S,"class","mt-2 sm:mt-3"),i(a,"class","card-body p-3 sm:p-4"),i(e,"class",B="card-parchment corner-ornament relative "+(s[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(s[5]?"opacity-50":""))},m(X,ae){F(X,e,ae),z&&z.m(e,null),n(e,t),q&&q.m(e,null),n(e,l),n(e,a),n(a,o),n(o,r),n(r,c),n(c,p),n(p,m),n(m,b),n(o,y),n(o,v),n(v,E),n(E,D),n(v,C),n(v,H),n(H,L),n(L,N),n(L,g),n(H,T),$&&$.m(H,null),n(o,A),ee&&ee.m(o,null),n(a,V),n(a,S),K.m(S,null),n(a,O),J&&J.m(a,null),n(a,I),le&&le.m(a,null)},p(X,[ae]){X[1]?z||(z=St(),z.c(),z.m(e,t)):z&&(z.d(1),z=null),X[5]?q||(q=Bt(),q.c(),q.m(e,l)):q&&(q.d(1),q=null),ae&1&&h!==(h=X[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ie(b,h),ae&2&&k!==(k="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(X[1]?"ring-secondary":"ring-primary/50"))&&i(c,"class",k),ae&1&&x!==(x=X[0].name+"")&&ie(D,x),ae&1&&w!==(w=X[0].initiative+"")&&ie(g,w),X[2]?$?$.p(X,ae):($=jt(X),$.c(),$.m(H,null)):$&&($.d(1),$=null),X[2]?ee?ee.p(X,ae):(ee=Ut(X),ee.c(),ee.m(o,null)):ee&&(ee.d(1),ee=null),Q===(Q=ce(X))&&K?K.p(X,ae):(K.d(1),K=Q(X),K&&(K.c(),K.m(S,null))),X[0].conditions&&X[0].conditions.length>0?J?J.p(X,ae):(J=Gt(X),J.c(),J.m(a,I)):J&&(J.d(1),J=null),X[2]?le?le.p(X,ae):(le=Jt(X),le.c(),le.m(a,null)):le&&(le.d(1),le=null),ae&34&&B!==(B="card-parchment corner-ornament relative "+(X[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(X[5]?"opacity-50":""))&&i(e,"class",B)},i:ge,o:ge,d(X){X&&f(e),z&&z.d(),q&&q.d(),$&&$.d(),ee&&ee.d(),K.d(),J&&J.d(),le&&le.d()}}}function jl(s){return s<=0?{label:"Ca√≠do",icon:"üíÄ",color:"text-error"}:s<25?{label:"Gravemente herido",icon:"ü©∏",color:"text-error"}:s<50?{label:"Herido",icon:"ü§ï",color:"text-warning"}:s<75?{label:"Lastimado",icon:"üò£",color:"text-warning"}:s<100?{label:"Ligeramente herido",icon:"üòê",color:"text-success"}:{label:"Ileso",icon:"üí™",color:"text-success"}}function Ul(s,e,t){let l,a,o,r,{combatant:c}=e,{isCurrentTurn:p=!1}=e,{isDM:m=!1}=e;const h=it();function b(){h("updateHP",c)}function k(){h("addCondition",c)}function y(){h("remove",c)}return s.$$set=v=>{"combatant"in v&&t(0,c=v.combatant),"isCurrentTurn"in v&&t(1,p=v.isCurrentTurn),"isDM"in v&&t(2,m=v.isDM)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=c.currentHp/c.maxHp*100),s.$$.dirty&8&&t(6,a=l>50?"success":l>25?"warning":"error"),s.$$.dirty&1&&t(5,o=c.currentHp<=0),s.$$.dirty&8&&t(4,r=jl(l))},[c,p,m,l,r,o,a,b,k,y]}class zl extends Re{constructor(e){super(),Fe(this,e,Ul,Bl,Ge,{combatant:0,isCurrentTurn:1,isDM:2})}}function Kt(s,e,t){const l=s.slice();return l[49]=e[t],l}function Wt(s,e,t){const l=s.slice();return l[46]=e[t],l}function Xt(s){let e,t,l,a,o="‚öîÔ∏è Agregar Combatiente",r,c,p,m,h,b,k,y,v,E,x,D,C,H="‚úï",L,N,w,g,T,A="Cancelar",V,S,O,I="‚öîÔ∏è",B,z,q,$;function ee(K,J){return K[2]==="player"?Rl:ql}let ce=ee(s),Q=ce(s);return{c(){e=d("div"),t=d("div"),l=d("div"),a=d("h3"),a.textContent=o,r=P(),c=d("div"),p=d("button"),m=U("üßù Jugador"),k=P(),y=d("button"),v=U("üêâ Monstruo"),D=P(),C=d("button"),C.textContent=H,L=P(),N=d("div"),Q.c(),w=P(),g=d("div"),T=d("button"),T.textContent=A,V=P(),S=d("button"),O=d("span"),O.textContent=I,B=U(" Agregar al Combate"),this.h()},l(K){e=u(K,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var J=_(e);t=u(J,"DIV",{class:!0});var le=_(t);l=u(le,"DIV",{class:!0});var X=_(l);a=u(X,"H3",{id:!0,class:!0,"data-svelte-h":!0}),G(a)!=="svelte-cw4yad"&&(a.textContent=o),r=M(X),c=u(X,"DIV",{class:!0,role:!0,"aria-label":!0});var ae=_(c);p=u(ae,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var se=_(p);m=j(se,"üßù Jugador"),se.forEach(f),k=M(ae),y=u(ae,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var ue=_(y);v=j(ue,"üêâ Monstruo"),ue.forEach(f),ae.forEach(f),D=M(X),C=u(X,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),G(C)!=="svelte-1j9u8d0"&&(C.textContent=H),X.forEach(f),L=M(le),N=u(le,"DIV",{class:!0});var W=_(N);Q.l(W),W.forEach(f),w=M(le),g=u(le,"DIV",{class:!0});var de=_(g);T=u(de,"BUTTON",{class:!0,"data-svelte-h":!0}),G(T)!=="svelte-toewbe"&&(T.textContent=A),V=M(de),S=u(de,"BUTTON",{class:!0});var oe=_(S);O=u(oe,"SPAN",{class:!0,"data-svelte-h":!0}),G(O)!=="svelte-v5ojki"&&(O.textContent=I),B=j(oe," Agregar al Combate"),oe.forEach(f),de.forEach(f),le.forEach(f),J.forEach(f),this.h()},h(){i(a,"id","modal-title"),i(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),i(p,"role","tab"),i(p,"aria-selected",h=s[2]==="player"),i(p,"aria-controls","player-panel"),i(p,"class",b="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline")),i(y,"role","tab"),i(y,"aria-selected",E=s[2]==="monster"),i(y,"aria-controls","monster-panel"),i(y,"class",x="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline")),i(c,"class","flex gap-2"),i(c,"role","tablist"),i(c,"aria-label","Tipo de combatiente"),i(C,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),i(C,"aria-label","Cerrar modal"),i(l,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),i(N,"class","flex-1 overflow-y-auto p-4 space-y-4"),i(T,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),i(O,"class","text-xl"),i(S,"class","btn btn-dnd w-full md:w-auto"),S.disabled=z=s[2]==="player"?!s[16]:!s[15],i(g,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),i(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","modal-title")},m(K,J){F(K,e,J),n(e,t),n(t,l),n(l,a),n(l,r),n(l,c),n(c,p),n(p,m),n(c,k),n(c,y),n(y,v),n(l,D),n(l,C),n(t,L),n(t,N),Q.m(N,null),n(t,w),n(t,g),n(g,T),n(g,V),n(g,S),n(S,O),n(S,B),q||($=[re(p,"click",s[23]),re(y,"click",s[24]),re(C,"click",s[22]),re(T,"click",s[22]),re(S,"click",function(){Hl(s[2]==="player"?s[18]:s[21])&&(s[2]==="player"?s[18]:s[21]).apply(this,arguments)}),re(e,"keydown",s[38])],q=!0)},p(K,J){s=K,J[0]&4&&h!==(h=s[2]==="player")&&i(p,"aria-selected",h),J[0]&4&&b!==(b="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline"))&&i(p,"class",b),J[0]&4&&E!==(E=s[2]==="monster")&&i(y,"aria-selected",E),J[0]&4&&x!==(x="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline"))&&i(y,"class",x),ce===(ce=ee(s))&&Q?Q.p(s,J):(Q.d(1),Q=ce(s),Q&&(Q.c(),Q.m(N,null))),J[0]&98308&&z!==(z=s[2]==="player"?!s[16]:!s[15])&&(S.disabled=z)},d(K){K&&f(e),Q.d(),q=!1,Ne($)}}}function ql(s){let e,t,l,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',o,r,c,p,m='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',h,b,k,y,v,E,x,D='<span class="label-text font-medieval text-neutral">Nombre <span class="text-error">*</span></span>',C,H,L,N,w,g,T,A,V='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',S,O,I,B,z,q,$,ee='<span class="label-text font-medieval text-neutral">HP M√°ximo <span class="text-error">*</span></span>',ce,Q,K,J,le,X,ae,se='<span class="label-text font-medieval text-neutral">AC <span class="text-error">*</span></span>',ue,W,de,oe,fe,R,ne=s[13]&&Yt(),pe=s[14]&&!s[13]&&Zt(),he=s[12].length>0&&!s[13]&&$t(s),me=s[8].name&&s[9].name&&tl(s),ve=s[8].initiative&&s[9].initiative&&ll(s),Y=s[8].maxHp&&s[9].maxHp&&sl(s),te=s[8].armorClass&&s[9].armorClass&&nl(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=a,o=P(),r=d("input"),c=P(),p=d("label"),p.innerHTML=m,h=P(),ne&&ne.c(),b=P(),pe&&pe.c(),k=P(),he&&he.c(),y=P(),v=d("div"),E=d("div"),x=d("label"),x.innerHTML=D,C=P(),H=d("input"),N=P(),me&&me.c(),w=P(),g=d("div"),T=d("div"),A=d("label"),A.innerHTML=V,S=P(),O=d("input"),B=P(),ve&&ve.c(),z=P(),q=d("div"),$=d("label"),$.innerHTML=ee,ce=P(),Q=d("input"),J=P(),Y&&Y.c(),le=P(),X=d("div"),ae=d("label"),ae.innerHTML=se,ue=P(),W=d("input"),oe=P(),te&&te.c(),this.h()},l(Z){e=u(Z,"DIV",{class:!0});var be=_(e);t=u(be,"DIV",{class:!0});var Ce=_(t);l=u(Ce,"LABEL",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1s7wqfp"&&(l.innerHTML=a),o=M(Ce),r=u(Ce,"INPUT",{type:!0,placeholder:!0,class:!0}),c=M(Ce),p=u(Ce,"LABEL",{class:!0,"data-svelte-h":!0}),G(p)!=="svelte-1b81k6w"&&(p.innerHTML=m),Ce.forEach(f),h=M(be),ne&&ne.l(be),b=M(be),pe&&pe.l(be),k=M(be),he&&he.l(be),y=M(be),v=u(be,"DIV",{class:!0});var Ie=_(v);E=u(Ie,"DIV",{class:!0});var ke=_(E);x=u(ke,"LABEL",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1i5ppw8"&&(x.innerHTML=D),C=M(ke),H=u(ke,"INPUT",{type:!0,placeholder:!0,class:!0}),N=M(ke),me&&me.l(ke),ke.forEach(f),w=M(Ie),g=u(Ie,"DIV",{class:!0});var He=_(g);T=u(He,"DIV",{class:!0});var De=_(T);A=u(De,"LABEL",{class:!0,"data-svelte-h":!0}),G(A)!=="svelte-wfd6ji"&&(A.innerHTML=V),S=M(De),O=u(De,"INPUT",{type:!0,min:!0,max:!0,class:!0}),B=M(De),ve&&ve.l(De),De.forEach(f),z=M(He),q=u(He,"DIV",{class:!0});var we=_(q);$=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),G($)!=="svelte-1ah5i3w"&&($.innerHTML=ee),ce=M(we),Q=u(we,"INPUT",{type:!0,min:!0,max:!0,class:!0}),J=M(we),Y&&Y.l(we),we.forEach(f),le=M(He),X=u(He,"DIV",{class:!0});var Te=_(X);ae=u(Te,"LABEL",{class:!0,"data-svelte-h":!0}),G(ae)!=="svelte-1yx9bl7"&&(ae.innerHTML=se),ue=M(Te),W=u(Te,"INPUT",{type:!0,min:!0,max:!0,class:!0}),oe=M(Te),te&&te.l(Te),Te.forEach(f),He.forEach(f),Ie.forEach(f),be.forEach(f),this.h()},h(){i(l,"class","label"),i(r,"type","text"),i(r,"placeholder","Ej: kobold, goblin, dragon..."),i(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),i(p,"class","label"),i(t,"class","form-control mb-4"),i(x,"class","label"),i(H,"type","text"),i(H,"placeholder","Nombre de la criatura"),i(H,"class",L="input input-bordered bg-[#2d241c] text-base-content "+(s[8].name&&s[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(E,"class","form-control"),i(A,"class","label"),i(O,"type","number"),i(O,"min","1"),i(O,"max","100"),i(O,"class",I="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(T,"class","form-control"),i($,"class","label"),i(Q,"type","number"),i(Q,"min","1"),i(Q,"max","999"),i(Q,"class",K="input input-bordered bg-[#2d241c] text-base-content "+(s[8].maxHp&&s[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(q,"class","form-control"),i(ae,"class","label"),i(W,"type","number"),i(W,"min","1"),i(W,"max","30"),i(W,"class",de="input input-bordered bg-[#2d241c] text-base-content "+(s[8].armorClass&&s[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(X,"class","form-control"),i(g,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),i(v,"class","space-y-4"),i(e,"class","space-y-4")},m(Z,be){F(Z,e,be),n(e,t),n(t,l),n(t,o),n(t,r),ye(r,s[11]),n(t,c),n(t,p),n(e,h),ne&&ne.m(e,null),n(e,b),pe&&pe.m(e,null),n(e,k),he&&he.m(e,null),n(e,y),n(e,v),n(v,E),n(E,x),n(E,C),n(E,H),ye(H,s[5]),n(E,N),me&&me.m(E,null),n(v,w),n(v,g),n(g,T),n(T,A),n(T,S),n(T,O),ye(O,s[3]),n(T,B),ve&&ve.m(T,null),n(g,z),n(g,q),n(q,$),n(q,ce),n(q,Q),ye(Q,s[6]),n(q,J),Y&&Y.m(q,null),n(g,le),n(g,X),n(X,ae),n(X,ue),n(X,W),ye(W,s[7]),n(X,oe),te&&te.m(X,null),fe||(R=[re(r,"input",s[28]),re(r,"input",s[19]),re(H,"input",s[30]),re(H,"blur",s[31]),re(O,"input",s[32]),re(O,"blur",s[33]),re(Q,"input",s[34]),re(Q,"blur",s[35]),re(W,"input",s[36]),re(W,"blur",s[37])],fe=!0)},p(Z,be){be[0]&2048&&r.value!==Z[11]&&ye(r,Z[11]),Z[13]?ne||(ne=Yt(),ne.c(),ne.m(e,b)):ne&&(ne.d(1),ne=null),Z[14]&&!Z[13]?pe||(pe=Zt(),pe.c(),pe.m(e,k)):pe&&(pe.d(1),pe=null),Z[12].length>0&&!Z[13]?he?he.p(Z,be):(he=$t(Z),he.c(),he.m(e,y)):he&&(he.d(1),he=null),be[0]&768&&L!==(L="input input-bordered bg-[#2d241c] text-base-content "+(Z[8].name&&Z[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(H,"class",L),be[0]&32&&H.value!==Z[5]&&ye(H,Z[5]),Z[8].name&&Z[9].name?me?me.p(Z,be):(me=tl(Z),me.c(),me.m(E,null)):me&&(me.d(1),me=null),be[0]&768&&I!==(I="input input-bordered bg-[#2d241c] text-base-content "+(Z[8].initiative&&Z[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(O,"class",I),be[0]&8&&Me(O.value)!==Z[3]&&ye(O,Z[3]),Z[8].initiative&&Z[9].initiative?ve?ve.p(Z,be):(ve=ll(Z),ve.c(),ve.m(T,null)):ve&&(ve.d(1),ve=null),be[0]&768&&K!==(K="input input-bordered bg-[#2d241c] text-base-content "+(Z[8].maxHp&&Z[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(Q,"class",K),be[0]&64&&Me(Q.value)!==Z[6]&&ye(Q,Z[6]),Z[8].maxHp&&Z[9].maxHp?Y?Y.p(Z,be):(Y=sl(Z),Y.c(),Y.m(q,null)):Y&&(Y.d(1),Y=null),be[0]&768&&de!==(de="input input-bordered bg-[#2d241c] text-base-content "+(Z[8].armorClass&&Z[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(W,"class",de),be[0]&128&&Me(W.value)!==Z[7]&&ye(W,Z[7]),Z[8].armorClass&&Z[9].armorClass?te?te.p(Z,be):(te=nl(Z),te.c(),te.m(X,null)):te&&(te.d(1),te=null)},d(Z){Z&&f(e),ne&&ne.d(),pe&&pe.d(),he&&he.d(),me&&me.d(),ve&&ve.d(),Y&&Y.d(),te&&te.d(),fe=!1,Ne(R)}}}function Rl(s){var le,X,ae;let e,t,l,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador <span class="text-error">*</span></span>',o,r,c,p="-- Elegir jugador --",m,h,b,k='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',y,v,E,x,D,C,H,L,N,w=(((le=s[10])==null?void 0:le.name)||"Elegir jugador")+"",g,T,A,V,S=(((X=s[10])==null?void 0:X.maxHp)||0)+"",O,I,B=(((ae=s[10])==null?void 0:ae.armorClass)||0)+"",z,q,$,ee=Ee(s[1]),ce=[];for(let se=0;se<ee.length;se+=1)ce[se]=rl(Wt(s,ee,se));function Q(se,ue){return se[8].initiative&&se[9].initiative?Gl:Fl}let K=Q(s),J=K(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=a,o=P(),r=d("select"),c=d("option"),c.textContent=p;for(let se=0;se<ce.length;se+=1)ce[se].c();m=P(),h=d("div"),b=d("label"),b.innerHTML=k,y=P(),v=d("input"),x=P(),J.c(),D=P(),C=d("div"),H=d("div"),L=d("div"),N=d("p"),g=U(w),T=P(),A=d("p"),V=U("HP: "),O=U(S),I=U(" | AC: "),z=U(B),this.h()},l(se){e=u(se,"DIV",{class:!0});var ue=_(e);t=u(ue,"DIV",{class:!0});var W=_(t);l=u(W,"LABEL",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-aatn1l"&&(l.innerHTML=a),o=M(W),r=u(W,"SELECT",{class:!0});var de=_(r);c=u(de,"OPTION",{"data-svelte-h":!0}),G(c)!=="svelte-ws9sqz"&&(c.textContent=p);for(let me=0;me<ce.length;me+=1)ce[me].l(de);de.forEach(f),W.forEach(f),m=M(ue),h=u(ue,"DIV",{class:!0});var oe=_(h);b=u(oe,"LABEL",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1kjkdwe"&&(b.innerHTML=k),y=M(oe),v=u(oe,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),x=M(oe),J.l(oe),oe.forEach(f),D=M(ue),C=u(ue,"DIV",{class:!0});var fe=_(C);H=u(fe,"DIV",{class:!0});var R=_(H);L=u(R,"DIV",{});var ne=_(L);N=u(ne,"P",{class:!0});var pe=_(N);g=j(pe,w),pe.forEach(f),T=M(ne),A=u(ne,"P",{class:!0});var he=_(A);V=j(he,"HP: "),O=j(he,S),I=j(he," | AC: "),z=j(he,B),he.forEach(f),ne.forEach(f),R.forEach(f),fe.forEach(f),ue.forEach(f),this.h()},h(){i(l,"class","label"),c.__value="",ye(c,c.__value),c.disabled=!0,c.selected=!0,i(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),s[4]===void 0&&wl(()=>s[25].call(r)),i(t,"class","form-control"),i(b,"class","label"),i(v,"type","number"),i(v,"min","1"),i(v,"max","100"),i(v,"step","1"),v.required=!0,i(v,"class",E="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(h,"class","form-control"),i(N,"class","text-lg font-bold text-neutral"),i(A,"class","text-sm text-neutral/70"),i(H,"class","flex items-center gap-4"),i(C,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),i(e,"class","space-y-4")},m(se,ue){F(se,e,ue),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c);for(let W=0;W<ce.length;W+=1)ce[W]&&ce[W].m(r,null);wt(r,s[4],!0),n(e,m),n(e,h),n(h,b),n(h,y),n(h,v),ye(v,s[3]),n(h,x),J.m(h,null),n(e,D),n(e,C),n(C,H),n(H,L),n(L,N),n(N,g),n(L,T),n(L,A),n(A,V),n(A,O),n(A,I),n(A,z),q||($=[re(r,"change",s[25]),re(v,"input",s[26]),re(v,"blur",s[27])],q=!0)},p(se,ue){var W,de,oe;if(ue[0]&2){ee=Ee(se[1]);let fe;for(fe=0;fe<ee.length;fe+=1){const R=Wt(se,ee,fe);ce[fe]?ce[fe].p(R,ue):(ce[fe]=rl(R),ce[fe].c(),ce[fe].m(r,null))}for(;fe<ce.length;fe+=1)ce[fe].d(1);ce.length=ee.length}ue[0]&18&&wt(r,se[4]),ue[0]&768&&E!==(E="input input-bordered bg-[#2d241c] text-base-content "+(se[8].initiative&&se[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(v,"class",E),ue[0]&8&&Me(v.value)!==se[3]&&ye(v,se[3]),K===(K=Q(se))&&J?J.p(se,ue):(J.d(1),J=K(se),J&&(J.c(),J.m(h,null))),ue[0]&1024&&w!==(w=(((W=se[10])==null?void 0:W.name)||"Elegir jugador")+"")&&ie(g,w),ue[0]&1024&&S!==(S=(((de=se[10])==null?void 0:de.maxHp)||0)+"")&&ie(O,S),ue[0]&1024&&B!==(B=(((oe=se[10])==null?void 0:oe.armorClass)||0)+"")&&ie(z,B)},d(se){se&&f(e),Se(ce,se),J.d(),q=!1,Ne($)}}}function Yt(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex justify-center items-center py-4")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Zt(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert bg-warning/20 border-warning/40")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function $t(s){let e,t,l,a=s[12].length+"",o,r,c=s[12].length!==1?"s":"",p,m,h=s[12].length!==1?"s":"",b,k,y,v=Ee(s[12]),E=[];for(let x=0;x<v.length;x+=1)E[x]=el(Kt(s,v,x));return{c(){e=d("div"),t=d("p"),l=U("üìñ "),o=U(a),r=U(" criatura"),p=U(c),m=U(" encontrada"),b=U(h),k=P(),y=d("div");for(let x=0;x<E.length;x+=1)E[x].c();this.h()},l(x){e=u(x,"DIV",{class:!0});var D=_(e);t=u(D,"P",{class:!0});var C=_(t);l=j(C,"üìñ "),o=j(C,a),r=j(C," criatura"),p=j(C,c),m=j(C," encontrada"),b=j(C,h),C.forEach(f),k=M(D),y=u(D,"DIV",{class:!0});var H=_(y);for(let L=0;L<E.length;L+=1)E[L].l(H);H.forEach(f),D.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 mb-2"),i(y,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),i(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(x,D){F(x,e,D),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,m),n(t,b),n(e,k),n(e,y);for(let C=0;C<E.length;C+=1)E[C]&&E[C].m(y,null)},p(x,D){if(D[0]&4096&&a!==(a=x[12].length+"")&&ie(o,a),D[0]&4096&&c!==(c=x[12].length!==1?"s":"")&&ie(p,c),D[0]&4096&&h!==(h=x[12].length!==1?"s":"")&&ie(b,h),D[0]&1052672){v=Ee(x[12]);let C;for(C=0;C<v.length;C+=1){const H=Kt(x,v,C);E[C]?E[C].p(H,D):(E[C]=el(H),E[C].c(),E[C].m(y,null))}for(;C<E.length;C+=1)E[C].d(1);E.length=v.length}},d(x){x&&f(e),Se(E,x)}}}function el(s){let e,t,l,a=s[49].name+"",o,r,c,p=s[49].type+"",m,h,b=s[49].challenge_rating+"",k,y,v,E="Seleccionar",x,D,C;function H(){return s[29](s[49])}return{c(){e=d("button"),t=d("div"),l=d("span"),o=U(a),r=P(),c=d("span"),m=U(p),h=U(" | CR "),k=U(b),y=P(),v=d("span"),v.textContent=E,x=P(),this.h()},l(L){e=u(L,"BUTTON",{class:!0});var N=_(e);t=u(N,"DIV",{class:!0});var w=_(t);l=u(w,"SPAN",{class:!0});var g=_(l);o=j(g,a),g.forEach(f),r=M(w),c=u(w,"SPAN",{class:!0});var T=_(c);m=j(T,p),h=j(T," | CR "),k=j(T,b),T.forEach(f),w.forEach(f),y=M(N),v=u(N,"SPAN",{class:!0,"data-svelte-h":!0}),G(v)!=="svelte-15711il"&&(v.textContent=E),x=M(N),N.forEach(f),this.h()},h(){i(l,"class","font-bold text-neutral block"),i(c,"class","text-xs text-neutral/60"),i(t,"class","flex-1"),i(v,"class","text-xs badge badge-sm badge-primary"),i(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(L,N){F(L,e,N),n(e,t),n(t,l),n(l,o),n(t,r),n(t,c),n(c,m),n(c,h),n(c,k),n(e,y),n(e,v),n(e,x),D||(C=re(e,"click",H),D=!0)},p(L,N){s=L,N[0]&4096&&a!==(a=s[49].name+"")&&ie(o,a),N[0]&4096&&p!==(p=s[49].type+"")&&ie(m,p),N[0]&4096&&b!==(b=s[49].challenge_rating+"")&&ie(k,b)},d(L){L&&f(e),D=!1,C()}}}function tl(s){let e,t,l,a=s[8].name+"",o;return{c(){e=d("label"),t=d("span"),l=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);l=j(p,"‚ö†Ô∏è "),o=j(p,a),p.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){F(r,e,c),n(e,t),n(t,l),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].name+"")&&ie(o,a)},d(r){r&&f(e)}}}function ll(s){let e,t,l=s[8].initiative+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].initiative+"")&&ie(a,l)},d(o){o&&f(e)}}}function sl(s){let e,t,l=s[8].maxHp+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].maxHp+"")&&ie(a,l)},d(o){o&&f(e)}}}function nl(s){let e,t,l=s[8].armorClass+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].armorClass+"")&&ie(a,l)},d(o){o&&f(e)}}}function rl(s){let e,t=s[46].name+"",l,a;return{c(){e=d("option"),l=U(t),this.h()},l(o){e=u(o,"OPTION",{});var r=_(e);l=j(r,t),r.forEach(f),this.h()},h(){e.__value=a=s[46].id,ye(e,e.__value)},m(o,r){F(o,e,r),n(e,l)},p(o,r){r[0]&2&&t!==(t=o[46].name+"")&&ie(l,t),r[0]&2&&a!==(a=o[46].id)&&(e.__value=a,ye(e,e.__value))},d(o){o&&f(e)}}}function Fl(s){let e,t='<span class="label-text-alt text-neutral/60 italic text-xs">Valor de iniciativa tirado (1-100)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-18jw2s3"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function Gl(s){let e,t,l,a=s[8].initiative+"",o;return{c(){e=d("label"),t=d("span"),l=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);l=j(p,"‚ö†Ô∏è "),o=j(p,a),p.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){F(r,e,c),n(e,t),n(t,l),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].initiative+"")&&ie(o,a)},d(r){r&&f(e)}}}function Ql(s){let e,t=s[0]&&Xt(s);return{c(){t&&t.c(),e=Be()},l(l){t&&t.l(l),e=Be()},m(l,a){t&&t.m(l,a),F(l,e,a)},p(l,a){l[0]?t?t.p(l,a):(t=Xt(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ge,o:ge,d(l){l&&f(e),t&&t.d(l)}}}function Jl(s,e,t){let l,a,o,{isOpen:r=!1}=e,{players:c=[]}=e;const p=it();let m="player",h=0,b="",k="",y=[],v=null,E=!1,x=!1,D="",C=0,H=10,L="",N="",w="",g={name:"",initiative:"",maxHp:"",armorClass:""},T={name:!1,initiative:!1,maxHp:!1,armorClass:!1};function A(R){t(9,T[R]=!0,T)}function V(){if(m==="player"){t(9,T.initiative=!0,T);const R=pt(h);return t(8,g.initiative=R.error||"",g),R.valid&&l!==void 0}else{Object.keys(T).forEach(me=>{t(9,T[me]=!0,T)});const R=Mt(D),ne=pt(h),pe=Tt(C),he=Vt(H);return t(8,g.name=R.error||"",g),t(8,g.initiative=ne.error||"",g),t(8,g.maxHp=pe.error||"",g),t(8,g.armorClass=he.error||"",g),R.valid&&ne.valid&&pe.valid&&he.valid}}function S(){V()&&l&&(p("add",{type:"character",characterId:l.id,name:l.name,maxHp:l.maxHp,armorClass:l.armorClass,initiative:h,isNpc:!1}),z())}const O=kl(async()=>{const R=k.trim();if(!R){t(12,y=[]),t(14,x=!1);return}t(13,E=!0),t(14,x=!1);try{const ne=await qe.searchMonsters(R);t(12,y=ne.results||[]),t(14,x=y.length===0)}catch(ne){console.error("Error buscando monstruos:",ne),t(12,y=[]),t(14,x=!0)}finally{t(13,E=!1)}},500);async function I(R){v=await qe.getMonster(R.slug),t(5,D=v.name),t(6,C=v.hit_points),t(7,H=v.armor_class),L=v.challenge_rating,v.type,N=v.size,w=v.alignment,t(12,y=[]),t(11,k=""),t(9,T.name=!0,T),t(9,T.maxHp=!0,T),t(9,T.armorClass=!0,T)}function B(){V()&&(p("add",{type:"creature",name:D,initiative:h,maxHp:C,armorClass:H,cr:L,size:N,alignment:w,isNpc:!0}),z())}function z(){t(4,b=""),v=null,t(11,k=""),t(12,y=[]),t(14,x=!1),t(5,D=""),t(3,h=0),t(6,C=0),t(7,H=10),L="",N="",w="",t(13,E=!1),Object.keys(T).forEach(R=>{t(9,T[R]=!1,T)}),Object.keys(g).forEach(R=>{t(8,g[R]="",g)}),p("close")}const q=()=>t(2,m="player"),$=()=>t(2,m="monster");function ee(){b=Dl(this),t(4,b),t(1,c)}function ce(){h=Me(this.value),t(3,h)}const Q=()=>A("initiative");function K(){k=this.value,t(11,k)}const J=R=>I(R);function le(){D=this.value,t(5,D)}const X=()=>A("name");function ae(){h=Me(this.value),t(3,h)}const se=()=>A("initiative");function ue(){C=Me(this.value),t(6,C)}const W=()=>A("maxHp");function de(){H=Me(this.value),t(7,H)}const oe=()=>A("armorClass"),fe=R=>R.key==="Escape"&&z();return s.$$set=R=>{"isOpen"in R&&t(0,r=R.isOpen),"players"in R&&t(1,c=R.players)},s.$$.update=()=>{if(s.$$.dirty[0]&18&&t(10,l=c.find(R=>R.id===b)),s.$$.dirty[0]&548&&T.name&&m==="monster"&&D){const R=Mt(D);t(8,g.name=R.valid?"":R.error||"",g)}if(s.$$.dirty[0]&520&&T.initiative&&h!==null){const R=pt(h);t(8,g.initiative=R.valid?"":R.error||"",g)}if(s.$$.dirty[0]&576&&T.maxHp&&C!==null){const R=Tt(C);t(8,g.maxHp=R.valid?"":R.error||"",g)}if(s.$$.dirty[0]&640&&T.armorClass&&H!==null){const R=Vt(H);t(8,g.armorClass=R.valid?"":R.error||"",g)}s.$$.dirty[0]&1288&&t(16,a=l&&h>=1&&!g.initiative),s.$$.dirty[0]&488&&t(15,o=!g.name&&!g.initiative&&!g.maxHp&&!g.armorClass&&D.trim()&&C>0&&H>0&&h>=1)},[r,c,m,h,b,D,C,H,g,T,l,k,y,E,x,o,a,A,S,O,I,B,z,q,$,ee,ce,Q,K,J,le,X,ae,se,ue,W,de,oe,fe]}class Kl extends Re{constructor(e){super(),Fe(this,e,Jl,Ql,Ge,{isOpen:0,players:1},null,[-1,-1])}}function al(s,e,t){const l=s.slice();return l[35]=e[t],l}function ol(s,e,t){const l=s.slice();return l[35]=e[t],l}function Wl(s){let e,t,l,a="üö´",o,r,c="Acceso Denegado",p,m,h="Solo el Dungeon Master puede gestionar los puntos de vida.",b,k,y="Entendido",v,E;return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=a,o=P(),r=d("h3"),r.textContent=c,p=P(),m=d("p"),m.textContent=h,b=P(),k=d("button"),k.textContent=y,this.h()},l(x){e=u(x,"DIV",{class:!0});var D=_(e);t=u(D,"DIV",{class:!0});var C=_(t);l=u(C,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-13ghcez"&&(l.textContent=a),o=M(C),r=u(C,"H3",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-13fk1x3"&&(r.textContent=c),p=M(C),m=u(C,"P",{class:!0,"data-svelte-h":!0}),G(m)!=="svelte-1myopqh"&&(m.textContent=h),b=M(C),k=u(C,"BUTTON",{class:!0,"data-svelte-h":!0}),G(k)!=="svelte-1bzkva0"&&(k.textContent=y),C.forEach(f),D.forEach(f),this.h()},h(){i(l,"class","text-6xl mb-4"),i(r,"class","text-2xl font-medieval text-neutral mb-3"),i(m,"class","text-neutral/70 font-body mb-6"),i(k,"class","btn btn-dnd"),i(t,"class","card-parchment border-4 border-error w-11/12 max-w-md text-center p-8"),i(e,"class","modal modal-open z-50")},m(x,D){F(x,e,D),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,m),n(t,b),n(t,k),v||(E=re(k,"click",s[17]),v=!0)},p:ge,d(x){x&&f(e),v=!1,E()}}}function Xl(s){let e,t,l,a="‚úï",o,r,c,p="üíö Gesti√≥n de Vida",m,h,b,k,y,v,E=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",x,D,C,H,L=s[1].name+"",N,w,g,T,A,V,S,O,I,B,z,q,$,ee,ce,Q,K,J,le,X,ae;function se(R,ne){if(R[9])return Zl;if(R[1].temporaryHp>0)return Yl}let ue=se(s),W=ue&&ue(s);function de(R,ne){if(R[4]==="hp")return ts;if(R[4]==="temp")return es;if(R[4]==="death")return $l}let oe=de(s),fe=oe&&oe(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=P(),r=d("div"),c=d("h3"),c.textContent=p,m=P(),h=d("div"),b=d("div"),k=d("div"),y=d("div"),v=d("span"),x=U(E),D=P(),C=d("div"),H=d("h4"),N=U(L),w=P(),g=d("div"),W&&W.c(),T=P(),A=d("div"),V=d("button"),S=U("üíö HP Normal"),I=P(),B=d("button"),z=U("üõ°Ô∏è HP Temporal"),$=P(),ee=d("button"),ce=U("üíÄ Death Saves"),J=P(),le=d("div"),fe&&fe.c(),this.h()},l(R){e=u(R,"DIV",{class:!0,role:!0,"aria-modal":!0});var ne=_(e);t=u(ne,"DIV",{class:!0});var pe=_(t);l=u(pe,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),G(l)!=="svelte-kahe5o"&&(l.textContent=a),o=M(pe),r=u(pe,"DIV",{class:!0});var he=_(r);c=u(he,"H3",{class:!0,"data-svelte-h":!0}),G(c)!=="svelte-f3fslb"&&(c.textContent=p),m=M(he),h=u(he,"DIV",{class:!0});var me=_(h);b=u(me,"DIV",{class:!0});var ve=_(b);k=u(ve,"DIV",{class:!0});var Y=_(k);y=u(Y,"DIV",{class:!0});var te=_(y);v=u(te,"SPAN",{class:!0});var Z=_(v);x=j(Z,E),Z.forEach(f),te.forEach(f),Y.forEach(f),ve.forEach(f),D=M(me),C=u(me,"DIV",{class:!0});var be=_(C);H=u(be,"H4",{class:!0});var Ce=_(H);N=j(Ce,L),Ce.forEach(f),w=M(be),g=u(be,"DIV",{class:!0});var Ie=_(g);W&&W.l(Ie),Ie.forEach(f),be.forEach(f),me.forEach(f),he.forEach(f),T=M(pe),A=u(pe,"DIV",{class:!0});var ke=_(A);V=u(ke,"BUTTON",{class:!0});var He=_(V);S=j(He,"üíö HP Normal"),He.forEach(f),I=M(ke),B=u(ke,"BUTTON",{class:!0});var De=_(B);z=j(De,"üõ°Ô∏è HP Temporal"),De.forEach(f),$=M(ke),ee=u(ke,"BUTTON",{class:!0});var we=_(ee);ce=j(we,"üíÄ Death Saves"),we.forEach(f),ke.forEach(f),J=M(pe),le=u(pe,"DIV",{class:!0});var Te=_(le);fe&&fe.l(Te),Te.forEach(f),pe.forEach(f),ne.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(l,"aria-label","Cerrar modal"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(v,"class","text-xl"),i(y,"class","bg-primary/20 flex items-center justify-center"),i(k,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(b,"class","avatar"),i(H,"class","text-lg font-medieval text-neutral font-bold"),i(g,"class","flex gap-2 mt-1"),i(C,"class","flex-1"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 border-b-2 border-secondary"),i(V,"class",O="tab flex-1 "+(s[4]==="hp"?"tab-active":"")),i(B,"class",q="tab flex-1 "+(s[4]==="temp"?"tab-active":"")),i(ee,"class",Q="tab flex-1 "+(s[4]==="death"?"tab-active":"")),ee.disabled=K=!s[9],i(A,"class","tabs tabs-boxed bg-neutral/20 p-2 flex-shrink-0"),i(le,"class","flex-1 overflow-y-auto p-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-2xl relative max-h-[90vh] flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(R,ne){F(R,e,ne),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,m),n(r,h),n(h,b),n(b,k),n(k,y),n(y,v),n(v,x),n(h,D),n(h,C),n(C,H),n(H,N),n(C,w),n(C,g),W&&W.m(g,null),n(t,T),n(t,A),n(A,V),n(V,S),n(A,I),n(A,B),n(B,z),n(A,$),n(A,ee),n(ee,ce),n(t,J),n(t,le),fe&&fe.m(le,null),X||(ae=[re(l,"click",s[17]),re(V,"click",s[24]),re(B,"click",s[25]),re(ee,"click",s[26]),re(e,"keydown",s[31])],X=!0)},p(R,ne){ne[0]&2&&E!==(E=R[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ie(x,E),ne[0]&2&&L!==(L=R[1].name+"")&&ie(N,L),ue===(ue=se(R))&&W?W.p(R,ne):(W&&W.d(1),W=ue&&ue(R),W&&(W.c(),W.m(g,null))),ne[0]&16&&O!==(O="tab flex-1 "+(R[4]==="hp"?"tab-active":""))&&i(V,"class",O),ne[0]&16&&q!==(q="tab flex-1 "+(R[4]==="temp"?"tab-active":""))&&i(B,"class",q),ne[0]&16&&Q!==(Q="tab flex-1 "+(R[4]==="death"?"tab-active":""))&&i(ee,"class",Q),ne[0]&512&&K!==(K=!R[9])&&(ee.disabled=K),oe===(oe=de(R))&&fe?fe.p(R,ne):(fe&&fe.d(1),fe=oe&&oe(R),fe&&(fe.c(),fe.m(le,null)))},d(R){R&&f(e),W&&W.d(),fe&&fe.d(),X=!1,Ne(ae)}}}function Yl(s){let e,t,l=s[1].temporaryHp+"",a,o;return{c(){e=d("div"),t=U("üõ°Ô∏è +"),a=U(l),o=U(" temp"),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);t=j(c,"üõ°Ô∏è +"),a=j(c,l),o=j(c," temp"),c.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info")},m(r,c){F(r,e,c),n(e,t),n(e,a),n(e,o)},p(r,c){c[0]&2&&l!==(l=r[1].temporaryHp+"")&&ie(a,l)},d(r){r&&f(e)}}}function Zl(s){let e,t="üíÄ Ca√≠do";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1i75sp6"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-error")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function $l(s){let e,t,l,a,o=`<span class="text-xl">‚úÖ</span>
              √âxitos de Salvaci√≥n`,r,c,p,m,h,b=`<span class="text-xl">‚ùå</span>
              Fallos de Salvaci√≥n`,k,y,v,E,x="üîÑ Resetear Death Saves",D,C;function H(V,S){if(V[7])return ss;if(V[8])return ls}let L=H(s),N=L&&L(s),w=Ee([0,1,2]),g=[];for(let V=0;V<3;V+=1)g[V]=il(ol(s,w,V));let T=Ee([0,1,2]),A=[];for(let V=0;V<3;V+=1)A[V]=cl(al(s,T,V));return{c(){e=d("div"),N&&N.c(),t=P(),l=d("div"),a=d("p"),a.innerHTML=o,r=P(),c=d("div");for(let V=0;V<3;V+=1)g[V].c();p=P(),m=d("div"),h=d("p"),h.innerHTML=b,k=P(),y=d("div");for(let V=0;V<3;V+=1)A[V].c();v=P(),E=d("button"),E.textContent=x,this.h()},l(V){e=u(V,"DIV",{class:!0});var S=_(e);N&&N.l(S),t=M(S),l=u(S,"DIV",{class:!0});var O=_(l);a=u(O,"P",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-zmz0xw"&&(a.innerHTML=o),r=M(O),c=u(O,"DIV",{class:!0});var I=_(c);for(let q=0;q<3;q+=1)g[q].l(I);I.forEach(f),O.forEach(f),p=M(S),m=u(S,"DIV",{class:!0});var B=_(m);h=u(B,"P",{class:!0,"data-svelte-h":!0}),G(h)!=="svelte-7gszam"&&(h.innerHTML=b),k=M(B),y=u(B,"DIV",{class:!0});var z=_(y);for(let q=0;q<3;q+=1)A[q].l(z);z.forEach(f),B.forEach(f),v=M(S),E=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),G(E)!=="svelte-19stx8c"&&(E.textContent=x),S.forEach(f),this.h()},h(){i(a,"class","font-medieval text-neutral mb-3 flex items-center gap-2"),i(c,"class","flex gap-3 justify-center"),i(l,"class","bg-success/10 p-4 rounded-lg border-2 border-success/30"),i(h,"class","font-medieval text-neutral mb-3 flex items-center gap-2"),i(y,"class","flex gap-3 justify-center"),i(m,"class","bg-error/10 p-4 rounded-lg border-2 border-error/30"),i(E,"class","btn btn-dnd border-2 border-neutral w-full px-4"),i(e,"class","space-y-4")},m(V,S){F(V,e,S),N&&N.m(e,null),n(e,t),n(e,l),n(l,a),n(l,r),n(l,c);for(let O=0;O<3;O+=1)g[O]&&g[O].m(c,null);n(e,p),n(e,m),n(m,h),n(m,k),n(m,y);for(let O=0;O<3;O+=1)A[O]&&A[O].m(y,null);n(e,v),n(e,E),D||(C=re(E,"click",s[16]),D=!0)},p(V,S){if(L!==(L=H(V))&&(N&&N.d(1),N=L&&L(V),N&&(N.c(),N.m(e,t))),S[0]&32776){w=Ee([0,1,2]);let O;for(O=0;O<3;O+=1){const I=ol(V,w,O);g[O]?g[O].p(I,S):(g[O]=il(I),g[O].c(),g[O].m(c,null))}for(;O<3;O+=1)g[O].d(1)}if(S[0]&32776){T=Ee([0,1,2]);let O;for(O=0;O<3;O+=1){const I=al(V,T,O);A[O]?A[O].p(I,S):(A[O]=cl(I),A[O].c(),A[O].m(y,null))}for(;O<3;O+=1)A[O].d(1)}},d(V){V&&f(e),N&&N.d(),Se(g,V),Se(A,V),D=!1,C()}}}function es(s){let e,t,l,a,o='<span class="label-text font-medieval text-neutral">üõ°Ô∏è Nuevo HP Temporal</span>',r,c,p,m,h,b,k="‚ú®",y,v,E,x,D,C,H;function L(V,S){return V[1].temporaryHp>0?cs:is}let N=L(s),w=N(s);function g(V,S){return V[6]>0?ds:us}let T=g(s),A=T(s);return{c(){e=d("div"),w.c(),t=P(),l=d("div"),a=d("label"),a.innerHTML=o,r=P(),c=d("div"),p=d("input"),m=P(),h=d("button"),b=d("span"),b.textContent=k,y=U(`\r
      Aplicar`),E=P(),x=d("label"),D=d("span"),A.c(),this.h()},l(V){e=u(V,"DIV",{class:!0});var S=_(e);w.l(S),t=M(S),l=u(S,"DIV",{});var O=_(l);a=u(O,"LABEL",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-lglt23"&&(a.innerHTML=o),r=M(O),c=u(O,"DIV",{class:!0});var I=_(c);p=u(I,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0,step:!0}),m=M(I),h=u(I,"BUTTON",{class:!0});var B=_(h);b=u(B,"SPAN",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1to6107"&&(b.textContent=k),y=j(B,`\r
      Aplicar`),B.forEach(f),I.forEach(f),E=M(O),x=u(O,"LABEL",{class:!0});var z=_(x);D=u(z,"SPAN",{class:!0});var q=_(D);A.l(q),q.forEach(f),z.forEach(f),O.forEach(f),S.forEach(f),this.h()},h(){var V;i(a,"class","label"),i(p,"type","number"),i(p,"placeholder","Ej: 10"),i(p,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-2xl font-bold"),i(p,"min","0"),i(p,"step","1"),i(b,"class","text-xl"),i(h,"class","btn btn-info"),h.disabled=v=s[6]<=0||s[6]===((V=s[1])==null?void 0:V.temporaryHp),i(c,"class","flex gap-2"),i(D,"class","label-text-alt text-neutral/60 italic"),i(x,"class","label"),i(e,"class","space-y-4")},m(V,S){F(V,e,S),w.m(e,null),n(e,t),n(e,l),n(l,a),n(l,r),n(l,c),n(c,p),ye(p,s[6]),n(c,m),n(c,h),n(h,b),n(h,y),n(l,E),n(l,x),n(x,D),A.m(D,null),C||(H=[re(p,"input",s[28]),re(h,"click",s[13])],C=!0)},p(V,S){var O;N===(N=L(V))&&w?w.p(V,S):(w.d(1),w=N(V),w&&(w.c(),w.m(e,t))),S[0]&64&&Me(p.value)!==V[6]&&ye(p,V[6]),S[0]&66&&v!==(v=V[6]<=0||V[6]===((O=V[1])==null?void 0:O.temporaryHp))&&(h.disabled=v),T===(T=g(V))&&A?A.p(V,S):(A.d(1),A=T(V),A&&(A.c(),A.m(D,null)))},d(V){V&&f(e),w.d(),A.d(),C=!1,Ne(H)}}}function ts(s){let e,t,l,a,o="HP ACTUAL",r,c,p,m=s[1].currentHp+"",h,b,k,y,v=s[1].maxHp+"",E,x,D,C,H,L,N,w,g,T='<span class="label-text font-medieval text-neutral">üé≤ Cantidad de HP</span>',A,V,S,O,I,B,z,q="üí•",$,ee,ce,Q,K,J="üíö",le,X,ae,se,ue,W=s[1].temporaryHp>0&&ul(s);return{c(){e=d("div"),t=d("div"),l=d("div"),a=d("p"),a.textContent=o,r=P(),c=d("div"),p=d("p"),h=U(m),b=P(),k=d("p"),y=U("de "),E=U(v),x=P(),D=d("progress"),N=P(),w=d("div"),g=d("label"),g.innerHTML=T,A=P(),V=d("div"),S=d("input"),O=P(),I=d("div"),B=d("button"),z=d("span"),z.textContent=q,$=U(`\r
                    Da√±o`),ce=P(),Q=d("button"),K=d("span"),K.textContent=J,le=U(`\r
                    Curar`),ae=P(),W&&W.c(),this.h()},l(de){e=u(de,"DIV",{class:!0});var oe=_(e);t=u(oe,"DIV",{class:!0});var fe=_(t);l=u(fe,"DIV",{class:!0});var R=_(l);a=u(R,"P",{class:!0,"data-svelte-h":!0}),G(a)!=="svelte-15e8cb6"&&(a.textContent=o),r=M(R),c=u(R,"DIV",{class:!0});var ne=_(c);p=u(ne,"P",{class:!0});var pe=_(p);h=j(pe,m),pe.forEach(f),b=M(ne),k=u(ne,"P",{class:!0});var he=_(k);y=j(he,"de "),E=j(he,v),he.forEach(f),ne.forEach(f),x=M(R),D=u(R,"PROGRESS",{class:!0,max:!0}),_(D).forEach(f),R.forEach(f),fe.forEach(f),N=M(oe),w=u(oe,"DIV",{});var me=_(w);g=u(me,"LABEL",{class:!0,"data-svelte-h":!0}),G(g)!=="svelte-1b89huq"&&(g.innerHTML=T),A=M(me),V=u(me,"DIV",{class:!0});var ve=_(V);S=u(ve,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),O=M(ve),I=u(ve,"DIV",{class:!0});var Y=_(I);B=u(Y,"BUTTON",{class:!0});var te=_(B);z=u(te,"SPAN",{class:!0,"data-svelte-h":!0}),G(z)!=="svelte-qwnz9x"&&(z.textContent=q),$=j(te,`\r
                    Da√±o`),te.forEach(f),ce=M(Y),Q=u(Y,"BUTTON",{class:!0});var Z=_(Q);K=u(Z,"SPAN",{class:!0,"data-svelte-h":!0}),G(K)!=="svelte-cy0xo0"&&(K.textContent=J),le=j(Z,`\r
                    Curar`),Z.forEach(f),Y.forEach(f),ve.forEach(f),me.forEach(f),ae=M(oe),W&&W.l(oe),oe.forEach(f),this.h()},h(){i(a,"class","text-xs font-medieval text-neutral/60 text-center"),i(p,"class","text-2xl font-bold text-neutral"),i(k,"class","text-sm text-neutral/60"),i(c,"class","text-center"),i(D,"class",C="progress progress-"+s[10]+" w-full h-3"),D.value=H=s[1].currentHp,i(D,"max",L=s[1].maxHp),i(l,"class","bg-neutral/10 p-3 rounded-lg border-2 border-primary/30"),i(t,"class","gap-3"),i(g,"class","label"),i(S,"type","number"),i(S,"placeholder","Ej: 15"),i(S,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-2xl font-bold"),i(S,"min","0"),i(z,"class","text-xl"),i(B,"class","btn btn-error"),B.disabled=ee=s[5]<=0,i(K,"class","text-xl"),i(Q,"class","btn btn-success"),Q.disabled=X=s[5]<=0,i(I,"class","flex gap-2"),i(V,"class","flex gap-2"),i(e,"class","space-y-4")},m(de,oe){F(de,e,oe),n(e,t),n(t,l),n(l,a),n(l,r),n(l,c),n(c,p),n(p,h),n(c,b),n(c,k),n(k,y),n(k,E),n(l,x),n(l,D),n(e,N),n(e,w),n(w,g),n(w,A),n(w,V),n(V,S),ye(S,s[5]),n(V,O),n(V,I),n(I,B),n(B,z),n(B,$),n(I,ce),n(I,Q),n(Q,K),n(Q,le),n(e,ae),W&&W.m(e,null),se||(ue=[re(S,"input",s[27]),re(B,"click",s[11]),re(Q,"click",s[12])],se=!0)},p(de,oe){oe[0]&2&&m!==(m=de[1].currentHp+"")&&ie(h,m),oe[0]&2&&v!==(v=de[1].maxHp+"")&&ie(E,v),oe[0]&1024&&C!==(C="progress progress-"+de[10]+" w-full h-3")&&i(D,"class",C),oe[0]&2&&H!==(H=de[1].currentHp)&&(D.value=H),oe[0]&2&&L!==(L=de[1].maxHp)&&i(D,"max",L),oe[0]&32&&Me(S.value)!==de[5]&&ye(S,de[5]),oe[0]&32&&ee!==(ee=de[5]<=0)&&(B.disabled=ee),oe[0]&32&&X!==(X=de[5]<=0)&&(Q.disabled=X),de[1].temporaryHp>0?W?W.p(de,oe):(W=ul(de),W.c(),W.m(e,null)):W&&(W.d(1),W=null)},d(de){de&&f(e),W&&W.d(),se=!1,Ne(ue)}}}function ls(s){let e,t='<span class="text-lg">‚ú® El personaje est√° estabilizado</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-azbxug"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert alert-success")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function ss(s){let e,t='<span class="text-lg">üíÄ El personaje ha muerto permanentemente</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-fu2lox"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert alert-error")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function ns(s){let e;return{c(){e=U("‚óã")},l(t){e=j(t,"‚óã")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function rs(s){let e;return{c(){e=U("‚úì")},l(t){e=j(t,"‚úì")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function il(s){let e,t,l,a,o;function r(h,b){return h[3].successes>h[35]?rs:ns}let c=r(s),p=c(s);function m(){return s[29](s[35])}return{c(){e=d("button"),p.c(),t=P(),this.h()},l(h){e=u(h,"BUTTON",{class:!0});var b=_(e);p.l(b),t=M(b),b.forEach(f),this.h()},h(){i(e,"class",l="btn btn-circle btn-lg "+(s[3].successes>s[35]?"btn-success":"btn-ghost border-2 border-success/30"))},m(h,b){F(h,e,b),p.m(e,null),n(e,t),a||(o=re(e,"click",m),a=!0)},p(h,b){s=h,c!==(c=r(s))&&(p.d(1),p=c(s),p&&(p.c(),p.m(e,t))),b[0]&8&&l!==(l="btn btn-circle btn-lg "+(s[3].successes>s[35]?"btn-success":"btn-ghost border-2 border-success/30"))&&i(e,"class",l)},d(h){h&&f(e),p.d(),a=!1,o()}}}function as(s){let e;return{c(){e=U("‚óã")},l(t){e=j(t,"‚óã")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function os(s){let e;return{c(){e=U("‚úó")},l(t){e=j(t,"‚úó")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function cl(s){let e,t,l,a,o;function r(h,b){return h[3].failures>h[35]?os:as}let c=r(s),p=c(s);function m(){return s[30](s[35])}return{c(){e=d("button"),p.c(),t=P(),this.h()},l(h){e=u(h,"BUTTON",{class:!0});var b=_(e);p.l(b),t=M(b),b.forEach(f),this.h()},h(){i(e,"class",l="btn btn-circle btn-lg "+(s[3].failures>s[35]?"btn-error":"btn-ghost border-2 border-error/30"))},m(h,b){F(h,e,b),p.m(e,null),n(e,t),a||(o=re(e,"click",m),a=!0)},p(h,b){s=h,c!==(c=r(s))&&(p.d(1),p=c(s),p&&(p.c(),p.m(e,t))),b[0]&8&&l!==(l="btn btn-circle btn-lg "+(s[3].failures>s[35]?"btn-error":"btn-ghost border-2 border-error/30"))&&i(e,"class",l)},d(h){h&&f(e),p.d(),a=!1,o()}}}function is(s){let e,t='<div class="text-4xl mb-2">üõ°Ô∏è</div> <p class="text-neutral/70 font-body">Sin HP temporal activo</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1yzstpc"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function cs(s){let e,t,l="HP TEMPORAL ACTUAL",a,o,r,c,p=s[1].temporaryHp+"",m,h,b,k="puntos de protecci√≥n",y,v,E="üóëÔ∏è Remover",x,D;return{c(){e=d("div"),t=d("p"),t.textContent=l,a=P(),o=d("div"),r=d("div"),c=d("p"),m=U(p),h=P(),b=d("p"),b.textContent=k,y=P(),v=d("button"),v.textContent=E,this.h()},l(C){e=u(C,"DIV",{class:!0});var H=_(e);t=u(H,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1j9s9nd"&&(t.textContent=l),a=M(H),o=u(H,"DIV",{class:!0});var L=_(o);r=u(L,"DIV",{});var N=_(r);c=u(N,"P",{class:!0});var w=_(c);m=j(w,p),w.forEach(f),h=M(N),b=u(N,"P",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-8qspga"&&(b.textContent=k),N.forEach(f),y=M(L),v=u(L,"BUTTON",{class:!0,"data-svelte-h":!0}),G(v)!=="svelte-jo9tjw"&&(v.textContent=E),L.forEach(f),H.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/60 mb-2"),i(c,"class","text-3xl font-bold text-info"),i(b,"class","text-sm text-neutral/70"),i(v,"class","btn btn-error btn-sm"),i(o,"class","flex justify-between items-center"),i(e,"class","bg-info/20 p-4 rounded-lg border-2 border-info/40")},m(C,H){F(C,e,H),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),n(c,m),n(r,h),n(r,b),n(o,y),n(o,v),x||(D=re(v,"click",s[14]),x=!0)},p(C,H){H[0]&2&&p!==(p=C[1].temporaryHp+"")&&ie(m,p)},d(C){C&&f(e),x=!1,D()}}}function us(s){let e;return{c(){e=U("Los HP temporales protegen contra el da√±o pero no se acumulan")},l(t){e=j(t,"Los HP temporales protegen contra el da√±o pero no se acumulan")},m(t,l){F(t,e,l)},p:ge,d(t){t&&f(e)}}}function ds(s){var c;let e,t=(c=s[1])!=null&&c.temporaryHp?"reemplazar√°":"agregar√°",l,a,o,r;return{c(){e=U("üí° Esto "),l=U(t),a=P(),o=U(s[6]),r=U(" HP temporal")},l(p){e=j(p,"üí° Esto "),l=j(p,t),a=M(p),o=j(p,s[6]),r=j(p," HP temporal")},m(p,m){F(p,e,m),F(p,l,m),F(p,a,m),F(p,o,m),F(p,r,m)},p(p,m){var h;m[0]&2&&t!==(t=(h=p[1])!=null&&h.temporaryHp?"reemplazar√°":"agregar√°")&&ie(l,t),m[0]&64&&ie(o,p[6])},d(p){p&&(f(e),f(l),f(a),f(o),f(r))}}}function ul(s){let e,t,l,a="HP TEMPORAL ACTIVO",o,r,c,p=s[1].temporaryHp+"",m,h,b,k="üí° El da√±o reducir√° primero los HP temporales";return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,o=P(),r=d("span"),c=U("üõ°Ô∏è "),m=U(p),h=P(),b=d("p"),b.textContent=k,this.h()},l(y){e=u(y,"DIV",{class:!0});var v=_(e);t=u(v,"DIV",{class:!0});var E=_(t);l=u(E,"SPAN",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-tzs62y"&&(l.textContent=a),o=M(E),r=u(E,"SPAN",{class:!0});var x=_(r);c=j(x,"üõ°Ô∏è "),m=j(x,p),x.forEach(f),E.forEach(f),h=M(v),b=u(v,"P",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1a6d5wt"&&(b.textContent=k),v.forEach(f),this.h()},h(){i(l,"class","text-xs font-medieval text-neutral/70"),i(r,"class","badge badge-info"),i(t,"class","flex items-center justify-between mb-2"),i(b,"class","text-xs text-neutral/60 italic"),i(e,"class","bg-info/10 p-3 rounded-lg border border-info/30 mt-4")},m(y,v){F(y,e,v),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,m),n(e,h),n(e,b)},p(y,v){v[0]&2&&p!==(p=y[1].temporaryHp+"")&&ie(m,p)},d(y){y&&f(e)}}}function fs(s){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return Xl;if(o[0]&&o[1]&&!o[2])return Wl}let l=t(s),a=l&&l(s);return{c(){a&&a.c(),e=Be()},l(o){a&&a.l(o),e=Be()},m(o,r){a&&a.m(o,r),F(o,e,r)},p(o,r){l===(l=t(o))&&a?a.p(o,r):(a&&a.d(1),a=l&&l(o),a&&(a.c(),a.m(e.parentNode,e)))},i:ge,o:ge,d(o){o&&f(e),a&&a.d(o)}}}function ps(s,e,t){let l,a,o,r,c,p,m,{isOpen:h=!1}=e,{combatant:b=null}=e,{isDM:k=!1}=e;const y=it();let v="hp",E=0,x=0,D=0,C={successes:0,failures:0},H=!1,L="";function N(){if(b&&x>0){const Q=Math.abs(x),K=b.temporaryHp||0;if(K>0)if(Q<=K){const J=K-Q;y("updateTemp",J),y("apply",0)}else{const J=Q-K;y("updateTemp",0),y("apply",-J)}else y("apply",-Q);t(5,x=0)}}function w(){if(b&&x>0){const Q=Math.abs(x);y("apply",Q),t(5,x=0)}}function g(){b&&D>=0&&y("updateTemp",D)}function T(){b&&(t(6,D=0),y("updateTemp",0))}function A(Q,K){if(!b)return;const J={...C};Q==="success"?J.successes=J.successes===K+1?K:K+1:J.failures=J.failures===K+1?K:K+1,t(3,C=J),y("updateDeathSaves",J)}function V(){b&&(t(3,C={successes:0,failures:0}),y("updateDeathSaves",{successes:0,failures:0}))}function S(){t(18,E=0),t(5,x=0),t(4,v="hp"),t(19,H=!1),t(20,L=""),y("close")}const O=()=>t(4,v="hp"),I=()=>t(4,v="temp"),B=()=>t(4,v="death");function z(){x=Me(this.value),t(5,x)}function q(){D=Me(this.value),t(6,D),t(0,h),t(1,b),t(19,H),t(20,L)}const $=Q=>A("success",Q),ee=Q=>A("failure",Q),ce=Q=>Q.key==="Escape"&&S();return s.$$set=Q=>{"isOpen"in Q&&t(0,h=Q.isOpen),"combatant"in Q&&t(1,b=Q.combatant),"isDM"in Q&&t(2,k=Q.isDM)},s.$$.update=()=>{if(s.$$.dirty[0]&1572867&&(h&&b?((!H||L!==b.id)&&(t(6,D=b.temporaryHp||0),t(3,C=b.deathSaves||{successes:0,failures:0}),t(20,L=b.id)),t(19,H=!0)):h||t(19,H=!1)),s.$$.dirty[0]&262146)if(b&&E!==0)if(E<0){const Q=Math.abs(E),K=b.temporaryHp||0;if(K>0)if(Q<=K)t(22,o=b.currentHp);else{const J=Q-K;t(22,o=Math.max(0,b.currentHp-J))}else t(22,o=Math.max(0,b.currentHp+E))}else t(22,o=Math.max(0,Math.min(b.maxHp,b.currentHp+E)));else b&&t(22,o=b.currentHp);s.$$.dirty[0]&2&&t(23,l=b?b.currentHp/b.maxHp*100:0),s.$$.dirty[0]&8388608&&t(10,a=l>50?"success":l>25?"warning":"error"),s.$$.dirty[0]&262146&&t(22,o=b?Math.max(0,Math.min(b.maxHp,b.currentHp+E)):0),s.$$.dirty[0]&4194306&&b&&o-b.currentHp,s.$$.dirty[0]&4194306&&t(21,r=b?o/b.maxHp*100:0),s.$$.dirty[0]&2097152,s.$$.dirty[0]&2&&t(9,c=b&&b.currentHp<=0),s.$$.dirty[0]&8&&t(8,p=C.successes>=3),s.$$.dirty[0]&8&&t(7,m=C.failures>=3)},[h,b,k,C,v,x,D,m,p,c,a,N,w,g,T,A,V,S,E,H,L,r,o,l,O,I,B,z,q,$,ee,ce]}class hs extends Re{constructor(e){super(),Fe(this,e,ps,fs,Ge,{isOpen:0,combatant:1,isDM:2},null,[-1,-1])}}function dl(s,e,t){const l=s.slice();return l[21]=e[t],l}function fl(s,e,t){const l=s.slice();l[16]=e[t];const a=Array.isArray(l[1].conditions)?l[1].conditions:[];l[17]=a;const o=l[17].includes(l[16].name);return l[18]=o,l}function pl(s,e,t){const l=s.slice();return l[21]=e[t],l}function bs(s){let e,t,l,a="‚úï",o,r,c,p=s[1].name+"",m,h,b,k,y,v="Solo el DM puede modificar estados",E,x,D="Cerrar",C,H;function L(g,T){return T&2&&(b=null),b==null&&(b=!!(g[1].conditions&&Array.isArray(g[1].conditions)&&g[1].conditions.length>0)),b?_s:vs}let N=L(s,-1),w=N(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=P(),r=d("h3"),c=U("‚ö†Ô∏è Estados de "),m=U(p),h=P(),w.c(),k=P(),y=d("p"),y.textContent=v,E=P(),x=d("button"),x.textContent=D,this.h()},l(g){e=u(g,"DIV",{class:!0});var T=_(e);t=u(T,"DIV",{class:!0});var A=_(t);l=u(A,"BUTTON",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-1t0z3ws"&&(l.textContent=a),o=M(A),r=u(A,"H3",{class:!0});var V=_(r);c=j(V,"‚ö†Ô∏è Estados de "),m=j(V,p),V.forEach(f),h=M(A),w.l(A),k=M(A),y=u(A,"P",{class:!0,"data-svelte-h":!0}),G(y)!=="svelte-1mg2e4g"&&(y.textContent=v),E=M(A),x=u(A,"BUTTON",{class:!0,"data-svelte-h":!0}),G(x)!=="svelte-1vgxpha"&&(x.textContent=D),A.forEach(f),T.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),i(r,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),i(y,"class","text-xs text-center text-neutral/60 italic mt-4"),i(x,"class","btn btn-dnd w-full mt-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-md relative p-6"),i(e,"class","modal modal-open z-50")},m(g,T){F(g,e,T),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,m),n(t,h),w.m(t,null),n(t,k),n(t,y),n(t,E),n(t,x),C||(H=[re(l,"click",s[9]),re(x,"click",s[9]),re(e,"keydown",s[10])],C=!0)},p(g,T){T&2&&p!==(p=g[1].name+"")&&ie(m,p),N===(N=L(g,T))&&w?w.p(g,T):(w.d(1),w=N(g),w&&(w.c(),w.m(t,k)))},d(g){g&&f(e),w.d(),C=!1,Ne(H)}}}function ms(s){let e,t,l,a="‚úï",o,r,c,p="‚ö†Ô∏è Estados de Combate",m,h,b,k,y,v,E=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",x,D,C,H,L=s[1].name+"",N,w,g,T,A,V=s[1].currentHp+"",S,O,I=s[1].maxHp+"",B,z,q,$,ee=s[1].armorClass+"",ce,Q,K,J,le,X,ae,se="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ue,W,de=(s[1].conditions&&Array.isArray(s[1].conditions)?s[1].conditions.length:0)+"",oe,fe,R,ne,pe,he,me,ve,Y,te,Z="üîç",be,Ce,Ie="Base de datos oficial de D&D 5e",ke,He,De,we,Te;function vt(_e,xe){return xe&2&&(R=null),R==null&&(R=!!(_e[1].conditions&&Array.isArray(_e[1].conditions)&&_e[1].conditions.length>0)),R?Cs:gs}let Qe=vt(s,-1),Pe=Qe(s);function _t(_e,xe){return xe&8&&(De=null),_e[5]?ks:_e[4].length>0?Es:(De==null&&(De=!!_e[3].trim()),De?xs:ys)}let Je=_t(s,-1),Le=Je(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=P(),r=d("div"),c=d("h3"),c.textContent=p,m=P(),h=d("div"),b=d("div"),k=d("div"),y=d("div"),v=d("span"),x=U(E),D=P(),C=d("div"),H=d("h4"),N=U(L),w=P(),g=d("div"),T=d("div"),A=U("‚ù§Ô∏è "),S=U(V),O=U("/"),B=U(I),z=P(),q=d("div"),$=U("üõ°Ô∏è "),ce=U(ee),Q=P(),K=d("div"),J=d("div"),le=d("div"),X=d("div"),ae=d("h5"),ae.innerHTML=se,ue=P(),W=d("span"),oe=U(de),fe=P(),Pe.c(),ne=P(),pe=d("div"),he=d("div"),me=d("div"),ve=d("input"),Y=P(),te=d("div"),te.textContent=Z,be=P(),Ce=d("p"),Ce.textContent=Ie,ke=P(),He=d("div"),Le.c(),this.h()},l(_e){e=u(_e,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var xe=_(e);t=u(xe,"DIV",{class:!0});var Ue=_(t);l=u(Ue,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),G(l)!=="svelte-hn98im"&&(l.textContent=a),o=M(Ue),r=u(Ue,"DIV",{class:!0});var Ke=_(r);c=u(Ke,"H3",{id:!0,class:!0,"data-svelte-h":!0}),G(c)!=="svelte-1wgccba"&&(c.textContent=p),m=M(Ke),h=u(Ke,"DIV",{class:!0});var We=_(h);b=u(We,"DIV",{class:!0});var gt=_(b);k=u(gt,"DIV",{class:!0});var Ct=_(k);y=u(Ct,"DIV",{class:!0});var yt=_(y);v=u(yt,"SPAN",{class:!0});var xt=_(v);x=j(xt,E),xt.forEach(f),yt.forEach(f),Ct.forEach(f),gt.forEach(f),D=M(We),C=u(We,"DIV",{class:!0});var Xe=_(C);H=u(Xe,"H4",{class:!0});var Et=_(H);N=j(Et,L),Et.forEach(f),w=M(Xe),g=u(Xe,"DIV",{class:!0});var Ye=_(g);T=u(Ye,"DIV",{class:!0});var ze=_(T);A=j(ze,"‚ù§Ô∏è "),S=j(ze,V),O=j(ze,"/"),B=j(ze,I),ze.forEach(f),z=M(Ye),q=u(Ye,"DIV",{class:!0});var ct=_(q);$=j(ct,"üõ°Ô∏è "),ce=j(ct,ee),ct.forEach(f),Ye.forEach(f),Xe.forEach(f),We.forEach(f),Ke.forEach(f),Q=M(Ue),K=u(Ue,"DIV",{class:!0,style:!0});var Ze=_(K);J=u(Ze,"DIV",{class:!0,style:!0});var kt=_(J);le=u(kt,"DIV",{class:!0});var $e=_(le);X=u($e,"DIV",{class:!0});var et=_(X);ae=u(et,"H5",{class:!0,"data-svelte-h":!0}),G(ae)!=="svelte-12hilzf"&&(ae.innerHTML=se),ue=M(et),W=u(et,"SPAN",{class:!0});var Ht=_(W);oe=j(Ht,de),Ht.forEach(f),et.forEach(f),fe=M($e),Pe.l($e),$e.forEach(f),kt.forEach(f),ne=M(Ze),pe=u(Ze,"DIV",{class:!0,style:!0});var tt=_(pe);he=u(tt,"DIV",{class:!0});var lt=_(he);me=u(lt,"DIV",{class:!0});var st=_(me);ve=u(st,"INPUT",{type:!0,placeholder:!0,class:!0}),Y=M(st),te=u(st,"DIV",{class:!0,"data-svelte-h":!0}),G(te)!=="svelte-1duc997"&&(te.textContent=Z),st.forEach(f),be=M(lt),Ce=u(lt,"P",{class:!0,"data-svelte-h":!0}),G(Ce)!=="svelte-hqlo3f"&&(Ce.textContent=Ie),lt.forEach(f),ke=M(tt),He=u(tt,"DIV",{class:!0});var Dt=_(He);Le.l(Dt),Dt.forEach(f),tt.forEach(f),Ze.forEach(f),Ue.forEach(f),xe.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(l,"aria-label","Cerrar modal"),i(c,"id","condition-modal-title"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(v,"class","text-xl"),i(y,"class","bg-primary/20 flex items-center justify-center"),i(k,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(b,"class","avatar"),i(H,"class","text-lg font-medieval text-neutral font-bold truncate"),i(T,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),i(q,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),i(g,"class","flex gap-2 mt-1"),i(C,"class","flex-1 min-w-0"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),i(ae,"class","font-medieval text-neutral font-bold flex items-center gap-2"),i(W,"class","badge badge-warning badge-sm"),i(X,"class","flex items-center justify-between mb-3"),i(le,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),i(J,"class","md:w-1/3 flex flex-col"),je(J,"min-height","300px"),i(ve,"type","text"),i(ve,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),i(ve,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),i(te,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),i(me,"class","relative"),i(Ce,"class","text-xs text-neutral/50 mt-1 italic"),i(he,"class","mb-3"),i(He,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),i(pe,"class","md:w-2/3 flex flex-col"),je(pe,"min-height","300px"),i(K,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),je(K,"min-height","0"),i(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","condition-modal-title")},m(_e,xe){F(_e,e,xe),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,m),n(r,h),n(h,b),n(b,k),n(k,y),n(y,v),n(v,x),n(h,D),n(h,C),n(C,H),n(H,N),n(C,w),n(C,g),n(g,T),n(T,A),n(T,S),n(T,O),n(T,B),n(g,z),n(g,q),n(q,$),n(q,ce),n(t,Q),n(t,K),n(K,J),n(J,le),n(le,X),n(X,ae),n(X,ue),n(X,W),n(W,oe),n(le,fe),Pe.m(le,null),n(K,ne),n(K,pe),n(pe,he),n(he,me),n(me,ve),ye(ve,s[3]),n(me,Y),n(me,te),n(he,be),n(he,Ce),n(pe,ke),n(pe,He),Le.m(He,null),we||(Te=[re(l,"click",s[9]),re(ve,"input",s[12]),re(ve,"input",s[6]),re(e,"keydown",s[10])],we=!0)},p(_e,xe){xe&2&&E!==(E=_e[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ie(x,E),xe&2&&L!==(L=_e[1].name+"")&&ie(N,L),xe&2&&V!==(V=_e[1].currentHp+"")&&ie(S,V),xe&2&&I!==(I=_e[1].maxHp+"")&&ie(B,I),xe&2&&ee!==(ee=_e[1].armorClass+"")&&ie(ce,ee),xe&2&&de!==(de=(_e[1].conditions&&Array.isArray(_e[1].conditions)?_e[1].conditions.length:0)+"")&&ie(oe,de),Qe===(Qe=vt(_e,xe))&&Pe?Pe.p(_e,xe):(Pe.d(1),Pe=Qe(_e),Pe&&(Pe.c(),Pe.m(le,null))),xe&8&&ve.value!==_e[3]&&ye(ve,_e[3]),Je===(Je=_t(_e,xe))&&Le?Le.p(_e,xe):(Le.d(1),Le=Je(_e),Le&&(Le.c(),Le.m(He,null)))},d(_e){_e&&f(e),Pe.d(),Le.d(),we=!1,Ne(Te)}}}function vs(s){let e,t='<div class="text-4xl mb-2">üòå</div> <p class="text-neutral/70 font-body">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-18t8x0o"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function _s(s){let e,t=Ee(s[1].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=hl(dl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&2){t=Ee(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=dl(a,t,r);l[r]?l[r].p(c,o):(l[r]=hl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),Se(l,a)}}}function hl(s){let e,t,l=s[21]+"",a,o;return{c(){e=d("div"),t=d("span"),a=U(l),o=P(),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);a=j(p,l),p.forEach(f),o=M(c),c.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40")},m(r,c){F(r,e,c),n(e,t),n(t,a),n(e,o)},p(r,c){c&2&&l!==(l=r[21]+"")&&ie(a,l)},d(r){r&&f(e)}}}function gs(s){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function Cs(s){let e,t=Ee(s[1].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=bl(pl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&258){t=Ee(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=pl(a,t,r);l[r]?l[r].p(c,o):(l[r]=bl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),Se(l,a)}}}function bl(s){let e,t,l=s[21]+"",a,o,r,c="‚úï",p,m,h;function b(){return s[11](s[21])}return{c(){e=d("div"),t=d("span"),a=U(l),o=P(),r=d("button"),r.textContent=c,p=P(),this.h()},l(k){e=u(k,"DIV",{class:!0});var y=_(e);t=u(y,"SPAN",{class:!0});var v=_(t);a=j(v,l),v.forEach(f),o=M(y),r=u(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),G(r)!=="svelte-5t970f"&&(r.textContent=c),p=M(y),y.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral flex-1"),i(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),i(r,"title","Eliminar"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(k,y){F(k,e,y),n(e,t),n(t,a),n(e,o),n(e,r),n(e,p),m||(h=re(r,"click",b),m=!0)},p(k,y){s=k,y&2&&l!==(l=s[21]+"")&&ie(a,l)},d(k){k&&f(e),m=!1,h()}}}function ys(s){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function xs(s){let e,t,l="üîç",a,o,r,c,p,m,h,b,k="‚ûï Agregar como personalizado",y,v;return{c(){e=d("div"),t=d("div"),t.textContent=l,a=P(),o=d("p"),r=U('No se encontr√≥ "'),c=d("span"),p=U(s[3]),m=U('"'),h=P(),b=d("button"),b.textContent=k,this.h()},l(E){e=u(E,"DIV",{class:!0});var x=_(e);t=u(x,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-sy51vw"&&(t.textContent=l),a=M(x),o=u(x,"P",{class:!0});var D=_(o);r=j(D,'No se encontr√≥ "'),c=u(D,"SPAN",{class:!0});var C=_(c);p=j(C,s[3]),C.forEach(f),m=j(D,'"'),D.forEach(f),h=M(x),b=u(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1rs0apo"&&(b.textContent=k),x.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(c,"class","font-bold"),i(o,"class","text-neutral/70 font-body mb-3"),i(b,"class","btn btn-primary btn-sm"),i(e,"class","flex flex-col items-center justify-center h-full text-center")},m(E,x){F(E,e,x),n(e,t),n(e,a),n(e,o),n(o,r),n(o,c),n(c,p),n(o,m),n(e,h),n(e,b),y||(v=re(b,"click",s[14]),y=!0)},p(E,x){x&8&&ie(p,E[3])},d(E){E&&f(e),y=!1,v()}}}function Es(s){let e,t=Ee(s[4]),l=[];for(let a=0;a<t.length;a+=1)l[a]=vl(fl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&146){t=Ee(a[4]);let r;for(r=0;r<t.length;r+=1){const c=fl(a,t,r);l[r]?l[r].p(c,o):(l[r]=vl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),Se(l,a)}}}function ks(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function ml(s){let e,t="‚úì Activo";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-success shrink-0")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function vl(s){let e,t,l,a=s[16].name+"",o,r,c,p,m=qe.cleanDescription(s[16].desc,120)+"",h,b,k,y,v,E,x=s[18]&&ml();function D(){return s[13](s[16])}return{c(){e=d("button"),t=d("div"),l=d("span"),o=U(a),r=P(),x&&x.c(),c=P(),p=d("p"),h=U(m),b=P(),this.h()},l(C){e=u(C,"BUTTON",{class:!0});var H=_(e);t=u(H,"DIV",{class:!0});var L=_(t);l=u(L,"SPAN",{class:!0});var N=_(l);o=j(N,a),N.forEach(f),r=M(L),x&&x.l(L),L.forEach(f),c=M(H),p=u(H,"P",{class:!0});var w=_(p);h=j(w,m),w.forEach(f),b=M(H),H.forEach(f),this.h()},h(){i(l,"class","font-medieval font-bold text-neutral"),i(t,"class","flex items-start justify-between gap-2 mb-1"),i(p,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=k=s[18],i(e,"class",y="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(C,H){F(C,e,H),n(e,t),n(t,l),n(l,o),n(t,r),x&&x.m(t,null),n(e,c),n(e,p),n(p,h),n(e,b),v||(E=re(e,"click",D),v=!0)},p(C,H){s=C,H&16&&a!==(a=s[16].name+"")&&ie(o,a),s[18]?x||(x=ml(),x.c(),x.m(t,null)):x&&(x.d(1),x=null),H&16&&m!==(m=qe.cleanDescription(s[16].desc,120)+"")&&ie(h,m),H&18&&k!==(k=s[18])&&(e.disabled=k),H&18&&y!==(y="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&i(e,"class",y)},d(C){C&&f(e),x&&x.d(),v=!1,E()}}}function Hs(s){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return ms;if(o[0]&&o[1]&&!o[2])return bs}let l=t(s),a=l&&l(s);return{c(){a&&a.c(),e=Be()},l(o){a&&a.l(o),e=Be()},m(o,r){a&&a.m(o,r),F(o,e,r)},p(o,[r]){l===(l=t(o))&&a?a.p(o,r):(a&&a.d(1),a=l&&l(o),a&&(a.c(),a.m(e.parentNode,e)))},i:ge,o:ge,d(o){o&&f(e),a&&a.d(o)}}}function Ds(s,e,t){let{isOpen:l=!1}=e,{combatant:a=null}=e,{isDM:o=!1}=e;const r=it();let c="",p=[],m=!1;const h=kl(async()=>{if(!c.trim()){t(4,p=[]);return}t(5,m=!0);try{const H=await qe.searchConditions(c);t(4,p=H.results)}catch(H){console.error("Error searching conditions:",H),t(4,p=[])}finally{t(5,m=!1)}},300);function b(H){!a||!H.trim()||!o||(Array.isArray(a.conditions)?a.conditions:[]).includes(H)||(r("add",H),t(3,c=""),t(4,p=[]))}function k(H){!a||!o||r("remove",H)}function y(){t(3,c=""),t(4,p=[]),r("close")}function v(H){H.key==="Escape"&&y()}const E=H=>k(H);function x(){c=this.value,t(3,c)}const D=H=>b(H.name),C=()=>b(c.trim());return s.$$set=H=>{"isOpen"in H&&t(0,l=H.isOpen),"combatant"in H&&t(1,a=H.combatant),"isDM"in H&&t(2,o=H.isDM)},[l,a,o,c,p,m,h,b,k,y,v,E,x,D,C]}class ws extends Re{constructor(e){super(),Fe(this,e,Ds,Hs,Ge,{isOpen:0,combatant:1,isDM:2})}}function _l(s,e,t){const l=s.slice();return l[51]=e[t],l[53]=t,l}function gl(s){let e,t,l,a,o,r,c="‚úï",p,m;return{c(){e=d("div"),t=d("div"),l=d("span"),a=U(s[7]),o=P(),r=d("button"),r.textContent=c,this.h()},l(h){e=u(h,"DIV",{class:!0});var b=_(e);t=u(b,"DIV",{class:!0});var k=_(t);l=u(k,"SPAN",{});var y=_(l);a=j(y,s[7]),y.forEach(f),o=M(k),r=u(k,"BUTTON",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-4tcifc"&&(r.textContent=c),k.forEach(f),b.forEach(f),this.h()},h(){i(r,"class","btn btn-sm"),i(t,"class","alert alert-error flex justify-between items-center"),i(e,"class","container mx-auto p-4")},m(h,b){F(h,e,b),n(e,t),n(t,l),n(l,a),n(t,o),n(t,r),p||(m=re(r,"click",s[33]),p=!0)},p(h,b){b[0]&128&&ie(a,h[7])},d(h){h&&f(e),p=!1,m()}}}function Is(s){let e,t,l,a,o,r=s[2].name+"",c,p,m,h,b,k=s[2].round+"",y,v,E,x,D=s[3].length+"",C,H,L,N,w,g,T,A,V=s[14]&&Cl(s),S=s[13]&&yl(s);const O=[Ps,Ms],I=[];function B(z,q){return z[3].length===0?0:1}return g=B(s),T=I[g]=O[g](s),{c(){e=d("div"),t=d("div"),l=d("div"),a=d("div"),o=d("h2"),c=U(r),p=P(),m=d("div"),h=d("div"),b=U("üîÑ Ronda "),y=U(k),v=P(),E=d("div"),x=U("üë• "),C=U(D),H=U(" Combatientes"),L=P(),V&&V.c(),N=P(),S&&S.c(),w=P(),T.c(),this.h()},l(z){e=u(z,"DIV",{class:!0});var q=_(e);t=u(q,"DIV",{class:!0});var $=_(t);l=u($,"DIV",{class:!0});var ee=_(l);a=u(ee,"DIV",{class:!0});var ce=_(a);o=u(ce,"H2",{class:!0});var Q=_(o);c=j(Q,r),Q.forEach(f),p=M(ce),m=u(ce,"DIV",{class:!0});var K=_(m);h=u(K,"DIV",{class:!0});var J=_(h);b=j(J,"üîÑ Ronda "),y=j(J,k),J.forEach(f),v=M(K),E=u(K,"DIV",{class:!0});var le=_(E);x=j(le,"üë• "),C=j(le,D),H=j(le," Combatientes"),le.forEach(f),K.forEach(f),ce.forEach(f),L=M(ee),V&&V.l(ee),ee.forEach(f),N=M($),S&&S.l($),$.forEach(f),w=M(q),T.l(q),q.forEach(f),this.h()},h(){i(o,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),i(h,"class","badge badge-ornate badge-md"),i(E,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),i(m,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),i(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),i(l,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),i(t,"class","card-parchment mb-6 corner-ornament"),i(e,"class","p-4 max-w-5xl mx-auto")},m(z,q){F(z,e,q),n(e,t),n(t,l),n(l,a),n(a,o),n(o,c),n(a,p),n(a,m),n(m,h),n(h,b),n(h,y),n(m,v),n(m,E),n(E,x),n(E,C),n(E,H),n(l,L),V&&V.m(l,null),n(t,N),S&&S.m(t,null),n(e,w),I[g].m(e,null),A=!0},p(z,q){(!A||q[0]&4)&&r!==(r=z[2].name+"")&&ie(c,r),(!A||q[0]&4)&&k!==(k=z[2].round+"")&&ie(y,k),(!A||q[0]&8)&&D!==(D=z[3].length+"")&&ie(C,D),z[14]?V?V.p(z,q):(V=Cl(z),V.c(),V.m(l,null)):V&&(V.d(1),V=null),z[13]?S?S.p(z,q):(S=yl(z),S.c(),S.m(t,null)):S&&(S.d(1),S=null);let $=g;g=B(z),g===$?I[g].p(z,q):(mt(),Oe(I[$],1,1,()=>{I[$]=null}),bt(),T=I[g],T?T.p(z,q):(T=I[g]=O[g](z),T.c()),Ae(T,1),T.m(e,null))},i(z){A||(Ae(T),A=!0)},o(z){Oe(T),A=!1},d(z){z&&f(e),V&&V.d(),S&&S.d(),I[g].d()}}}function Ts(s){let e,t,l,a="‚öîÔ∏è",o,r,c="No hay combate activo",p,m,h="El DM debe iniciar un encuentro para comenzar la batalla",b;function k(E,x){return E[14]?As:Ls}let y=k(s),v=y(s);return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=a,o=P(),r=d("h2"),r.textContent=c,p=P(),m=d("p"),m.textContent=h,b=P(),v.c(),this.h()},l(E){e=u(E,"DIV",{class:!0});var x=_(e);t=u(x,"DIV",{class:!0});var D=_(t);l=u(D,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-19xxu84"&&(l.textContent=a),o=M(D),r=u(D,"H2",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-itogws"&&(r.textContent=c),p=M(D),m=u(D,"P",{class:!0,"data-svelte-h":!0}),G(m)!=="svelte-1smrxik"&&(m.textContent=h),b=M(D),v.l(D),D.forEach(f),x.forEach(f),this.h()},h(){i(l,"class","text-6xl mb-4"),i(r,"class","text-3xl font-medieval text-neutral mb-4"),i(m,"class","text-neutral/70 font-body mb-6"),i(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),i(e,"class","flex items-center justify-center h-full p-4")},m(E,x){F(E,e,x),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,m),n(t,b),v.m(t,null)},p(E,x){y===(y=k(E))&&v?v.p(E,x):(v.d(1),v=y(E),v&&(v.c(),v.m(t,null)))},i:ge,o:ge,d(E){E&&f(e),v.d()}}}function Vs(s){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center justify-center h-full")},m(l,a){F(l,e,a)},p:ge,i:ge,o:ge,d(l){l&&f(e)}}}function Cl(s){let e,t,l='<span class="text-lg">‚ûï</span> Agregar',a,o,r,c="‚ñ∂Ô∏è",p,m,h,b,k="üèÅ Finalizar",y,v;return{c(){e=d("div"),t=d("button"),t.innerHTML=l,a=P(),o=d("button"),r=d("span"),r.textContent=c,p=U(" Siguiente Turno"),h=P(),b=d("button"),b.textContent=k,this.h()},l(E){e=u(E,"DIV",{class:!0});var x=_(e);t=u(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-sdwydq"&&(t.innerHTML=l),a=M(x),o=u(x,"BUTTON",{class:!0});var D=_(o);r=u(D,"SPAN",{class:!0,"data-svelte-h":!0}),G(r)!=="svelte-vhmvlx"&&(r.textContent=c),p=j(D," Siguiente Turno"),D.forEach(f),h=M(x),b=u(x,"BUTTON",{class:!0,"data-svelte-h":!0}),G(b)!=="svelte-1oa32z5"&&(b.textContent=k),x.forEach(f),this.h()},h(){i(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),i(r,"class","text-lg"),i(o,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),o.disabled=m=s[3].length===0,i(b,"class","btn btn-error btn-sm flex-1 sm:flex-none"),i(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(E,x){F(E,e,x),n(e,t),n(e,a),n(e,o),n(o,r),n(o,p),n(e,h),n(e,b),y||(v=[re(t,"click",s[35]),re(o,"click",s[29]),re(b,"click",s[18])],y=!0)},p(E,x){x[0]&8&&m!==(m=E[3].length===0)&&(o.disabled=m)},d(E){E&&f(e),y=!1,Ne(v)}}}function yl(s){let e,t,l="TURNO ACTUAL",a,o,r=s[13].name+"",c;return{c(){e=d("div"),t=d("p"),t.textContent=l,a=P(),o=d("p"),c=U(r),this.h()},l(p){e=u(p,"DIV",{class:!0});var m=_(e);t=u(m,"P",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-j3qdhu"&&(t.textContent=l),a=M(m),o=u(m,"P",{class:!0});var h=_(o);c=j(h,r),h.forEach(f),m.forEach(f),this.h()},h(){i(t,"class","text-sm font-medieval text-neutral/70 mb-1"),i(o,"class","text-2xl font-bold font-medieval text-neutral"),i(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(p,m){F(p,e,m),n(e,t),n(e,a),n(e,o),n(o,c)},p(p,m){m[0]&8192&&r!==(r=p[13].name+"")&&ie(c,r)},d(p){p&&f(e)}}}function Ms(s){let e,t,l=Ee(s[3]),a=[];for(let r=0;r<l.length;r+=1)a[r]=xl(_l(s,l,r));const o=r=>Oe(a[r],1,1,()=>{a[r]=null});return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);for(let p=0;p<a.length;p+=1)a[p].l(c);c.forEach(f),this.h()},h(){i(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,c){F(r,e,c);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);t=!0},p(r,c){if(c[0]&7356428){l=Ee(r[3]);let p;for(p=0;p<l.length;p+=1){const m=_l(r,l,p);a[p]?(a[p].p(m,c),Ae(a[p],1)):(a[p]=xl(m),a[p].c(),Ae(a[p],1),a[p].m(e,null))}for(mt(),p=l.length;p<a.length;p+=1)o(p);bt()}},i(r){if(!t){for(let c=0;c<l.length;c+=1)Ae(a[c]);t=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Oe(a[c]);t=!1},d(r){r&&f(e),Se(a,r)}}}function Ps(s){let e,t,l="üé≤",a,o,r="Sin combatientes",c,p,m=s[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",h;return{c(){e=d("div"),t=d("div"),t.textContent=l,a=P(),o=d("p"),o.textContent=r,c=P(),p=d("p"),h=U(m),this.h()},l(b){e=u(b,"DIV",{class:!0});var k=_(e);t=u(k,"DIV",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-9xsxws"&&(t.textContent=l),a=M(k),o=u(k,"P",{class:!0,"data-svelte-h":!0}),G(o)!=="svelte-180lhql"&&(o.textContent=r),c=M(k),p=u(k,"P",{class:!0});var y=_(p);h=j(y,m),y.forEach(f),k.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(o,"class","text-xl font-medieval text-neutral mb-2"),i(p,"class","text-neutral/70 font-body"),i(e,"class","card-parchment p-12 text-center")},m(b,k){F(b,e,k),n(e,t),n(e,a),n(e,o),n(e,c),n(e,p),n(p,h)},p(b,k){k[0]&16384&&m!==(m=b[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&ie(h,m)},i:ge,o:ge,d(b){b&&f(e)}}}function xl(s){let e,t;return e=new zl({props:{combatant:s[51],isCurrentTurn:s[53]===s[2].turnIndex%s[3].length,isDM:!!s[14]}}),e.$on("updateHP",s[21]),e.$on("addCondition",s[22]),e.$on("remove",s[20]),{c(){ot(e.$$.fragment)},l(l){at(e.$$.fragment,l)},m(l,a){rt(e,l,a),t=!0},p(l,a){const o={};a[0]&8&&(o.combatant=l[51]),a[0]&12&&(o.isCurrentTurn=l[53]===l[2].turnIndex%l[3].length),a[0]&16384&&(o.isDM=!!l[14]),e.$set(o)},i(l){t||(Ae(e.$$.fragment,l),t=!0)},o(l){Oe(e.$$.fragment,l),t=!1},d(l){nt(e,l)}}}function Ls(s){let e,t="Esperando que el DM inicie el combate...";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){i(e,"class","text-sm text-neutral/50 italic")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function As(s){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,l,a;return{c(){e=d("button"),e.innerHTML=t,this.h()},l(o){e=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-dnd btn-lg")},m(o,r){F(o,e,r),l||(a=re(e,"click",s[34]),l=!0)},p:ge,d(o){o&&f(e),l=!1,a()}}}function El(s){let e,t,l,a="‚öîÔ∏è Iniciar Encuentro",o,r,c,p='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro <span class="text-error">*</span></span>',m,h,b,k,y,v,E,x="Cancelar",D,C,H,L="‚öîÔ∏è",N,w,g,T;function A(O,I){return O[0]&&O[1]?Os:Ns}let V=A(s),S=V(s);return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=a,o=P(),r=d("div"),c=d("label"),c.innerHTML=p,m=P(),h=d("input"),k=P(),S.c(),y=P(),v=d("div"),E=d("button"),E.textContent=x,D=P(),C=d("button"),H=d("span"),H.textContent=L,N=U(`\r
          Iniciar Combate`),this.h()},l(O){e=u(O,"DIV",{class:!0});var I=_(e);t=u(I,"DIV",{class:!0});var B=_(t);l=u(B,"H3",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-jkbohq"&&(l.textContent=a),o=M(B),r=u(B,"DIV",{class:!0});var z=_(r);c=u(z,"LABEL",{class:!0,"data-svelte-h":!0}),G(c)!=="svelte-18eazf9"&&(c.innerHTML=p),m=M(z),h=u(z,"INPUT",{type:!0,placeholder:!0,class:!0}),k=M(z),S.l(z),z.forEach(f),y=M(B),v=u(B,"DIV",{class:!0});var q=_(v);E=u(q,"BUTTON",{class:!0,"data-svelte-h":!0}),G(E)!=="svelte-1rt1icx"&&(E.textContent=x),D=M(q),C=u(q,"BUTTON",{class:!0});var $=_(C);H=u($,"SPAN",{class:!0,"data-svelte-h":!0}),G(H)!=="svelte-v5ojki"&&(H.textContent=L),N=j($,`\r
          Iniciar Combate`),$.forEach(f),q.forEach(f),B.forEach(f),I.forEach(f),this.h()},h(){i(l,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),i(c,"class","label"),i(h,"type","text"),i(h,"placeholder","Ej: Emboscada de Orcos"),i(h,"class",b="input input-bordered bg-[#2d241c] text-base-content "+(s[0]&&s[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(r,"class","form-control"),i(E,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),i(H,"class","text-xl"),i(C,"class","btn btn-dnd"),C.disabled=w=!s[15],i(v,"class","modal-action justify-center gap-4"),i(t,"class","modal-box card-parchment border-4 border-secondary"),i(e,"class","modal modal-open z-50")},m(O,I){F(O,e,I),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,m),n(r,h),ye(h,s[4]),n(r,k),S.m(r,null),n(t,y),n(t,v),n(v,E),n(v,D),n(v,C),n(C,H),n(C,N),g||(T=[re(h,"input",s[36]),re(h,"input",s[16]),re(E,"click",s[23]),re(C,"click",s[17])],g=!0)},p(O,I){I[0]&3&&b!==(b="input input-bordered bg-[#2d241c] text-base-content "+(O[0]&&O[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(h,"class",b),I[0]&16&&h.value!==O[4]&&ye(h,O[4]),V===(V=A(O))&&S?S.p(O,I):(S.d(1),S=V(O),S&&(S.c(),S.m(r,null))),I[0]&32768&&w!==(w=!O[15])&&(C.disabled=w)},d(O){O&&f(e),S.d(),g=!1,Ne(T)}}}function Ns(s){let e,t='<span class="label-text-alt text-neutral/60 italic">Nombre del encuentro (3-100 caracteres)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-61x4np"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(l,a){F(l,e,a)},p:ge,d(l){l&&f(e)}}}function Os(s){let e,t,l,a="‚ö†Ô∏è",o,r;return{c(){e=d("label"),t=d("span"),l=d("span"),l.textContent=a,o=P(),r=U(s[0]),this.h()},l(c){e=u(c,"LABEL",{class:!0});var p=_(e);t=u(p,"SPAN",{class:!0});var m=_(t);l=u(m,"SPAN",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-15g1o1n"&&(l.textContent=a),o=M(m),r=j(m,s[0]),m.forEach(f),p.forEach(f),this.h()},h(){i(l,"class","text-lg"),i(t,"class","label-text-alt text-error"),i(e,"class","label")},m(c,p){F(c,e,p),n(e,t),n(t,l),n(t,o),n(t,r)},p(c,p){p[0]&1&&ie(r,c[0])},d(c){c&&f(e)}}}function Ss(s){let e,t,l,a,o,r,c,p,m,h,b,k,y,v,E,x,D,C=s[7]&&gl(s);const H=[Vs,Ts,Is],L=[];function N(I,B){return I[6]?0:I[2]?2:1}o=N(s),r=L[o]=H[o](s);let w=s[9]&&El(s);function g(I){s[37](I)}let T={combatant:s[12],isDM:!!s[14]};s[10]!==void 0&&(T.isOpen=s[10]),m=new hs({props:T}),ut.push(()=>dt(m,"isOpen",g)),m.$on("apply",s[24]),m.$on("updateTemp",s[25]),m.$on("updateDeathSaves",s[26]),m.$on("close",s[38]);function A(I){s[39](I)}let V={combatant:s[12],isDM:!!s[14]};s[11]!==void 0&&(V.isOpen=s[11]),k=new ws({props:V}),ut.push(()=>dt(k,"isOpen",A)),k.$on("add",s[27]),k.$on("remove",s[28]),k.$on("close",s[40]);function S(I){s[41](I)}let O={players:s[5]};return s[8]!==void 0&&(O.isOpen=s[8]),E=new Kl({props:O}),ut.push(()=>dt(E,"isOpen",S)),E.$on("add",s[19]),E.$on("close",s[42]),{c(){e=d("div"),C&&C.c(),t=P(),l=d("div"),a=d("div"),r.c(),c=P(),w&&w.c(),p=P(),ot(m.$$.fragment),b=P(),ot(k.$$.fragment),v=P(),ot(E.$$.fragment),this.h()},l(I){e=u(I,"DIV",{class:!0});var B=_(e);C&&C.l(B),t=M(B),l=u(B,"DIV",{class:!0});var z=_(l);a=u(z,"DIV",{class:!0});var q=_(a);r.l(q),q.forEach(f),z.forEach(f),B.forEach(f),c=M(I),w&&w.l(I),p=M(I),at(m.$$.fragment,I),b=M(I),at(k.$$.fragment,I),v=M(I),at(E.$$.fragment,I),this.h()},h(){i(a,"class","flex-1"),i(l,"class","flex flex-1"),i(e,"class","min-h-screen flex flex-col")},m(I,B){F(I,e,B),C&&C.m(e,null),n(e,t),n(e,l),n(l,a),L[o].m(a,null),F(I,c,B),w&&w.m(I,B),F(I,p,B),rt(m,I,B),F(I,b,B),rt(k,I,B),F(I,v,B),rt(E,I,B),D=!0},p(I,B){I[7]?C?C.p(I,B):(C=gl(I),C.c(),C.m(e,t)):C&&(C.d(1),C=null);let z=o;o=N(I),o===z?L[o].p(I,B):(mt(),Oe(L[z],1,1,()=>{L[z]=null}),bt(),r=L[o],r?r.p(I,B):(r=L[o]=H[o](I),r.c()),Ae(r,1),r.m(a,null)),I[9]?w?w.p(I,B):(w=El(I),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null);const q={};B[0]&4096&&(q.combatant=I[12]),B[0]&16384&&(q.isDM=!!I[14]),!h&&B[0]&1024&&(h=!0,q.isOpen=I[10],ft(()=>h=!1)),m.$set(q);const $={};B[0]&4096&&($.combatant=I[12]),B[0]&16384&&($.isDM=!!I[14]),!y&&B[0]&2048&&(y=!0,$.isOpen=I[11],ft(()=>y=!1)),k.$set($);const ee={};B[0]&32&&(ee.players=I[5]),!x&&B[0]&256&&(x=!0,ee.isOpen=I[8],ft(()=>x=!1)),E.$set(ee)},i(I){D||(Ae(r),Ae(m.$$.fragment,I),Ae(k.$$.fragment,I),Ae(E.$$.fragment,I),D=!0)},o(I){Oe(r),Oe(m.$$.fragment,I),Oe(k.$$.fragment,I),Oe(E.$$.fragment,I),D=!1},d(I){I&&(f(e),f(c),f(p),f(b),f(v)),C&&C.d(),L[o].d(),w&&w.d(I),nt(m,I),nt(k,I),nt(E,I)}}}function Bs(s,e,t){let l,a,o,r,c,p;It(s,Pl,Y=>t(31,c=Y)),It(s,Ml,Y=>t(32,p=Y)),Vl.set("Combate");let m="",h=!1;function b(){t(1,h=!0)}let k=null,y=null,v=[],E=[],x=!0,D="",C=!1,H=!1,L="",N=!1,w=!1,g=null,T=null,A=null;const V=Ll(Nl);Il(async()=>{await I(),await B(),await S()}),Tl(()=>{T&&T(),A&&A()});async function S(){try{t(6,x=!0);const Y=Lt(V,"encounters"),te=At(Y,ht("campaignId","==",a),ht("isActive","==",!0));T=Nt(te,Z=>{if(Z.empty)t(2,y=null),t(3,v=[]),A&&(A(),A=null);else{const be=Z.docs[0];t(2,y={id:be.id,...be.data()}),!A&&y&&O(y.id)}t(6,x=!1)},Z=>{console.error("Error en listener de encuentro:",Z),t(7,D=Z.message),t(6,x=!1)})}catch(Y){t(7,D=Y.message),t(6,x=!1)}}function O(Y){const te=Lt(V,"combatants"),Z=At(te,ht("encounterId","==",Y),Al("initiative","desc"));A=Nt(Z,be=>{if(t(3,v=be.docs.map(Ce=>({id:Ce.id,...Ce.data()}))),g){const Ce=v.find(Ie=>Ie.id===g.id);Ce&&t(12,g=Ce)}},be=>{console.error("Error en listener de combatientes:",be)})}async function I(){try{t(30,k=await Ve.getCampaign(a))}catch(Y){t(7,D=Y.message)}}async function B(){try{t(5,E=await Ve.getCampaignCharacters(a))}catch(Y){console.error("Error loading characters:",Y)}}async function z(){t(1,h=!0);const Y=Pt(L);if(!Y.valid){t(0,m=Y.error||"");return}try{await Ve.createEncounter(a,L),t(9,H=!1),t(4,L=""),t(1,h=!1),t(0,m="")}catch(te){t(7,D=te.message)}}async function q(){if(!(!y||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Ve.endEncounter(y.id)}catch(Y){t(7,D=Y.message)}}async function $(Y){if(y)try{await Ve.addCombatant(y.id,Y.detail),t(8,C=!1)}catch(te){t(7,D=te.message)}}async function ee(Y){const te=Y.detail;if(confirm(`¬øEliminar a ${te.name} del combate?`))try{await Ve.removeCombatant(te.id)}catch(Z){t(7,D=Z.message)}}function ce(Y){t(12,g=Y.detail),t(10,N=!0),t(11,w=!1)}function Q(Y){t(12,g=Y.detail),t(11,w=!0),t(10,N=!1)}function K(){t(9,H=!1),t(4,L=""),t(1,h=!1),t(0,m="")}async function J(Y){if(g)try{const te=Y.detail,Z=Math.max(0,Math.min(g.maxHp,g.currentHp+te));await Ve.updateCombatant(g.id,{currentHp:Z}),t(10,N=!1),t(12,g=null)}catch(te){t(7,D=te.message)}}async function le(Y){if(g)try{const te=Y.detail;await Ve.updateCombatant(g.id,{temporaryHp:te})}catch(te){t(7,D=te.message)}}async function X(Y){if(g)try{const te=Y.detail;await Ve.updateCombatant(g.id,{deathSaves:te})}catch(te){t(7,D=te.message)}}async function ae(Y){if(g)try{const te=Y.detail,Z=Array.isArray(g.conditions)?g.conditions:[];if(Z.includes(te))return;const be=[...Z,te];await Ve.updateCombatant(g.id,{conditions:be})}catch(te){t(7,D=te.message)}}async function se(Y){if(g)try{const te=Y.detail,be=(Array.isArray(g.conditions)?g.conditions:[]).filter(Ce=>Ce!==te);await Ve.updateCombatant(g.id,{conditions:be})}catch(te){t(7,D=te.message)}}async function ue(){if(y)try{await Ve.nextTurn(y.id)}catch(Y){t(7,D=Y.message)}}const W=()=>t(7,D=""),de=()=>t(9,H=!0),oe=()=>t(8,C=!0);function fe(){L=this.value,t(4,L)}function R(Y){N=Y,t(10,N)}const ne=()=>{t(10,N=!1),t(12,g=null)};function pe(Y){w=Y,t(11,w)}const he=()=>{t(11,w=!1),t(12,g=null)};function me(Y){C=Y,t(8,C)}const ve=()=>t(8,C=!1);return s.$$.update=()=>{if(s.$$.dirty[0]&18&&h&&L){const Y=Pt(L);t(0,m=Y.valid?"":Y.error||"")}s.$$.dirty[0]&17&&t(15,l=!m&&L.trim()),s.$$.dirty[1]&2&&(a=p.params.id||""),s.$$.dirty[0]&1073741824|s.$$.dirty[1]&1&&t(14,o=k&&c&&k.dmId===c.uid),s.$$.dirty[0]&12&&t(13,r=y&&v.length>0?v[y.turnIndex%v.length]:null)},[m,h,y,v,L,E,x,D,C,H,N,w,g,r,o,l,b,z,q,$,ee,ce,Q,K,J,le,X,ae,se,ue,k,c,p,W,de,oe,fe,R,ne,pe,he,me,ve]}class Ks extends Re{constructor(e){super(),Fe(this,e,Bs,Ss,Ge,{},null,[-1,-1])}}export{Ks as component};
