import{S as gt,i as xt,s as Ct,n as Ce,d as f,a as oe,m as o,b as ne,c as s,e as c,f as _,h as T,g as j,o as z,j as u,k as D,t as S,A as Ut,r as fe,x as ht,u as at,q as pt,Z as en,_ as tn,B as Xe,$ as cl,v as Ee,a0 as ln,U as Gt,D as Wt,E as Jt,F as Lt,G as Ke,H as We,I as Zt,J as Qt,K as jt,L as St,M as Bt,l as ul,p as nn,N as sn,O as Yt}from"../chunks/B11dj0TC.js";import{e as Re,o as _t,h as rn,a as Qe}from"../chunks/BFUIfuOa.js";import"../chunks/IHki7fMi.js";import{p as an}from"../chunks/CSm4Wu21.js";import{u as on}from"../chunks/Bhbx1GBa.js";import{g as cn,c as dl,q as fl,w as Kt,o as pl,a as un}from"../chunks/eN7n43qG.js";import{c as dn}from"../chunks/Bhgkhhu0.js";function hl(l,e,t){const n=l.slice();return n[10]=e[t],n}function vl(l){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=u("div"),e.textContent=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1fc3yjt"&&(e.textContent=t),this.h()},h(){o(e,"class","absolute -top-3 -right-3 badge badge-ornate text-lg animate-bounce z-10")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function ml(l){let e,t='<span class="text-6xl">üíÄ</span>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-it6l4x"&&(e.innerHTML=t),this.h()},h(){o(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function bl(l){let e,t,n='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,i,r,d,p="üóëÔ∏è Eliminar",b,h;return{c(){e=u("div"),t=u("label"),t.innerHTML=n,a=D(),i=u("ul"),r=u("li"),d=u("a"),d.textContent=p,this.h()},l(C){e=c(C,"DIV",{class:!0});var x=_(e);t=c(x,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-13tftyw"&&(t.innerHTML=n),a=T(x),i=c(x,"UL",{tabindex:!0,class:!0});var g=_(i);r=c(g,"LI",{});var E=_(r);d=c(E,"A",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-hji4ll"&&(d.textContent=p),E.forEach(f),g.forEach(f),x.forEach(f),this.h()},h(){o(t,"tabindex","0"),o(t,"class","btn btn-ghost btn-xs btn-circle"),o(d,"class","text-error"),o(i,"tabindex","0"),o(i,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-52 border-2 border-secondary"),o(e,"class","dropdown dropdown-end")},m(C,x){ne(C,e,x),s(e,t),s(e,a),s(e,i),s(i,r),s(r,d),b||(h=fe(d,"click",l[7]),b=!0)},p:Ce,d(C){C&&f(e),b=!1,h()}}}function _l(l){let e,t=Re(l[0].conditions),n=[];for(let a=0;a<t.length;a+=1)n[a]=gl(hl(l,t,a));return{c(){e=u("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=_(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(f),this.h()},h(){o(e,"class","flex flex-wrap gap-1 mt-2")},m(a,i){ne(a,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(a,i){if(i&1){t=Re(a[0].conditions);let r;for(r=0;r<t.length;r+=1){const d=hl(a,t,r);n[r]?n[r].p(d,i):(n[r]=gl(d),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(a){a&&f(e),ht(n,a)}}}function gl(l){let e,t=l[10]+"",n;return{c(){e=u("div"),n=S(t),this.h()},l(a){e=c(a,"DIV",{class:!0});var i=_(e);n=j(i,t),i.forEach(f),this.h()},h(){o(e,"class","badge badge-sm badge-warning text-xs")},m(a,i){ne(a,e,i),s(e,n)},p(a,i){i&1&&t!==(t=a[10]+"")&&oe(n,t)},d(a){a&&f(e)}}}function xl(l){let e,t,n="üíö HP",a,i,r="‚ö†Ô∏è Estado",d,p;return{c(){e=u("div"),t=u("button"),t.textContent=n,a=D(),i=u("button"),i.textContent=r,this.h()},l(b){e=c(b,"DIV",{class:!0});var h=_(e);t=c(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-13t9wqw"&&(t.textContent=n),a=T(h),i=c(h,"BUTTON",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-1e8bnzo"&&(i.textContent=r),h.forEach(f),this.h()},h(){o(t,"class","btn btn-xs btn-success flex-1"),o(i,"class","btn btn-xs btn-warning flex-1"),o(e,"class","flex gap-2 mt-3")},m(b,h){ne(b,e,h),s(e,t),s(e,a),s(e,i),d||(p=[fe(t,"click",l[5]),fe(i,"click",l[6])],d=!0)},p:Ce,d(b){b&&f(e),d=!1,at(p)}}}function fn(l){let e,t,n,a,i,r,d,p,b,h=l[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",C,x,g,E,y,v=l[0].name+"",k,m,w,P,O,V=l[0].initiative+"",H,A,L,M,R=l[0].armorClass+"",$,I,W,B,N,q,Z="Puntos de Vida",ae,J,U=l[0].currentHp+"",G,se,he=l[0].maxHp+"",K,te,ee,X,ce,me,ge,F,ie,Y=l[1]&&vl(),Q=l[3]&&ml(),re=l[2]&&bl(l),ve=l[0].conditions&&l[0].conditions.length>0&&_l(l),xe=l[2]&&xl(l);return{c(){e=u("div"),Y&&Y.c(),t=D(),Q&&Q.c(),n=D(),a=u("div"),i=u("div"),r=u("div"),d=u("div"),p=u("div"),b=u("span"),C=S(h),g=D(),E=u("div"),y=u("h3"),k=S(v),m=D(),w=u("div"),P=u("div"),O=S("üé≤ "),H=S(V),A=D(),L=u("div"),M=S("üõ°Ô∏è AC "),$=S(R),I=D(),re&&re.c(),W=D(),B=u("div"),N=u("div"),q=u("span"),q.textContent=Z,ae=D(),J=u("span"),G=S(U),se=S("/"),K=S(he),te=D(),ee=u("progress"),ge=D(),ve&&ve.c(),F=D(),xe&&xe.c(),this.h()},l(le){e=c(le,"DIV",{class:!0});var pe=_(e);Y&&Y.l(pe),t=T(pe),Q&&Q.l(pe),n=T(pe),a=c(pe,"DIV",{class:!0});var Te=_(a);i=c(Te,"DIV",{class:!0});var Ie=_(i);r=c(Ie,"DIV",{class:!0});var Ze=_(r);d=c(Ze,"DIV",{class:!0});var Je=_(d);p=c(Je,"DIV",{class:!0});var ye=_(p);b=c(ye,"SPAN",{class:!0});var Se=_(b);C=j(Se,h),Se.forEach(f),ye.forEach(f),Je.forEach(f),Ze.forEach(f),g=T(Ie),E=c(Ie,"DIV",{class:!0});var Ae=_(E);y=c(Ae,"H3",{class:!0});var Ye=_(y);k=j(Ye,v),Ye.forEach(f),m=T(Ae),w=c(Ae,"DIV",{class:!0});var Ve=_(w);P=c(Ve,"DIV",{class:!0});var Oe=_(P);O=j(Oe,"üé≤ "),H=j(Oe,V),Oe.forEach(f),A=T(Ve),L=c(Ve,"DIV",{class:!0});var we=_(L);M=j(we,"üõ°Ô∏è AC "),$=j(we,R),we.forEach(f),Ve.forEach(f),Ae.forEach(f),I=T(Ie),re&&re.l(Ie),Ie.forEach(f),W=T(Te),B=c(Te,"DIV",{class:!0});var qe=_(B);N=c(qe,"DIV",{class:!0});var Pe=_(N);q=c(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),z(q)!=="svelte-1a9ef08"&&(q.textContent=Z),ae=T(Pe),J=c(Pe,"SPAN",{class:!0});var ke=_(J);G=j(ke,U),se=j(ke,"/"),K=j(ke,he),ke.forEach(f),Pe.forEach(f),te=T(qe),ee=c(qe,"PROGRESS",{class:!0,max:!0}),_(ee).forEach(f),qe.forEach(f),ge=T(Te),ve&&ve.l(Te),F=T(Te),xe&&xe.l(Te),Te.forEach(f),pe.forEach(f),this.h()},h(){o(b,"class","text-2xl"),o(p,"class","bg-primary/20 flex items-center justify-center"),o(d,"class",x="w-16 h-16 rounded-full ring-2 "+(l[1]?"ring-secondary":"ring-primary/50")),o(r,"class","avatar"),o(y,"class","font-medieval text-lg text-neutral font-bold"),o(P,"class","badge badge-sm bg-primary/30 text-neutral border-primary/50"),o(L,"class","badge badge-sm bg-info/30 text-neutral border-info/50"),o(w,"class","flex gap-2 mt-1"),o(E,"class","flex-1"),o(i,"class","flex items-start gap-3"),o(q,"class","text-xs font-medieval text-neutral/70"),o(J,"class","font-bold text-neutral"),o(N,"class","flex justify-between items-center mb-1"),o(ee,"class",X="progress progress-"+l[4]+" w-full"),ee.value=ce=l[0].currentHp,o(ee,"max",me=l[0].maxHp),o(B,"class","mt-3"),o(a,"class","card-body p-4"),o(e,"class",ie="card-parchment corner-ornament relative "+(l[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(l[3]?"opacity-50":""))},m(le,pe){ne(le,e,pe),Y&&Y.m(e,null),s(e,t),Q&&Q.m(e,null),s(e,n),s(e,a),s(a,i),s(i,r),s(r,d),s(d,p),s(p,b),s(b,C),s(i,g),s(i,E),s(E,y),s(y,k),s(E,m),s(E,w),s(w,P),s(P,O),s(P,H),s(w,A),s(w,L),s(L,M),s(L,$),s(i,I),re&&re.m(i,null),s(a,W),s(a,B),s(B,N),s(N,q),s(N,ae),s(N,J),s(J,G),s(J,se),s(J,K),s(B,te),s(B,ee),s(a,ge),ve&&ve.m(a,null),s(a,F),xe&&xe.m(a,null)},p(le,[pe]){le[1]?Y||(Y=vl(),Y.c(),Y.m(e,t)):Y&&(Y.d(1),Y=null),le[3]?Q||(Q=ml(),Q.c(),Q.m(e,n)):Q&&(Q.d(1),Q=null),pe&1&&h!==(h=le[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&oe(C,h),pe&2&&x!==(x="w-16 h-16 rounded-full ring-2 "+(le[1]?"ring-secondary":"ring-primary/50"))&&o(d,"class",x),pe&1&&v!==(v=le[0].name+"")&&oe(k,v),pe&1&&V!==(V=le[0].initiative+"")&&oe(H,V),pe&1&&R!==(R=le[0].armorClass+"")&&oe($,R),le[2]?re?re.p(le,pe):(re=bl(le),re.c(),re.m(i,null)):re&&(re.d(1),re=null),pe&1&&U!==(U=le[0].currentHp+"")&&oe(G,U),pe&1&&he!==(he=le[0].maxHp+"")&&oe(K,he),pe&16&&X!==(X="progress progress-"+le[4]+" w-full")&&o(ee,"class",X),pe&1&&ce!==(ce=le[0].currentHp)&&(ee.value=ce),pe&1&&me!==(me=le[0].maxHp)&&o(ee,"max",me),le[0].conditions&&le[0].conditions.length>0?ve?ve.p(le,pe):(ve=_l(le),ve.c(),ve.m(a,F)):ve&&(ve.d(1),ve=null),le[2]?xe?xe.p(le,pe):(xe=xl(le),xe.c(),xe.m(a,null)):xe&&(xe.d(1),xe=null),pe&10&&ie!==(ie="card-parchment corner-ornament relative "+(le[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(le[3]?"opacity-50":""))&&o(e,"class",ie)},i:Ce,o:Ce,d(le){le&&f(e),Y&&Y.d(),Q&&Q.d(),re&&re.d(),ve&&ve.d(),xe&&xe.d()}}}function pn(l,e,t){let n,a,i,{combatant:r}=e,{isCurrentTurn:d=!1}=e,{isDM:p=!1}=e;const b=Ut();function h(){b("updateHP",r)}function C(){b("addCondition",r)}function x(){b("remove",r)}return l.$$set=g=>{"combatant"in g&&t(0,r=g.combatant),"isCurrentTurn"in g&&t(1,d=g.isCurrentTurn),"isDM"in g&&t(2,p=g.isDM)},l.$$.update=()=>{l.$$.dirty&1&&t(8,n=r.currentHp/r.maxHp*100),l.$$.dirty&256&&t(4,a=n>50?"success":n>25?"warning":"error"),l.$$.dirty&1&&t(3,i=r.currentHp<=0)},[r,d,p,i,a,h,C,x,n]}class hn extends gt{constructor(e){super(),xt(this,e,pn,fn,Ct,{combatant:0,isCurrentTurn:1,isDM:2})}}var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function mn(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var Kl=mn,bn=typeof At=="object"&&At&&At.Object===Object&&At,_n=bn,gn=_n,xn=typeof self=="object"&&self&&self.Object===Object&&self,Cn=gn||xn||Function("return this")(),Xl=Cn,yn=Xl,En=function(){return yn.Date.now()},wn=En,kn=/\s/;function In(l){for(var e=l.length;e--&&kn.test(l.charAt(e)););return e}var Tn=In,Dn=Tn,Vn=/^\s+/;function Hn(l){return l&&l.slice(0,Dn(l)+1).replace(Vn,"")}var On=Hn,Pn=Xl,Mn=Pn.Symbol,Zl=Mn,Cl=Zl,Yl=Object.prototype,Nn=Yl.hasOwnProperty,An=Yl.toString,bt=Cl?Cl.toStringTag:void 0;function Ln(l){var e=Nn.call(l,bt),t=l[bt];try{l[bt]=void 0;var n=!0}catch{}var a=An.call(l);return n&&(e?l[bt]=t:delete l[bt]),a}var jn=Ln,Sn=Object.prototype,Bn=Sn.toString;function Un(l){return Bn.call(l)}var zn=Un,yl=Zl,Rn=jn,qn=zn,Fn="[object Null]",Gn="[object Undefined]",El=yl?yl.toStringTag:void 0;function Wn(l){return l==null?l===void 0?Gn:Fn:El&&El in Object(l)?Rn(l):qn(l)}var Jn=Wn;function Qn(l){return l!=null&&typeof l=="object"}var Kn=Qn,Xn=Jn,Zn=Kn,Yn="[object Symbol]";function $n(l){return typeof l=="symbol"||Zn(l)&&Xn(l)==Yn}var es=$n,ts=On,wl=Kl,ls=es,kl=NaN,ns=/^[-+]0x[0-9a-f]+$/i,ss=/^0b[01]+$/i,rs=/^0o[0-7]+$/i,as=parseInt;function os(l){if(typeof l=="number")return l;if(ls(l))return kl;if(wl(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=wl(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=ts(l);var t=ss.test(l);return t||rs.test(l)?as(l.slice(2),t?2:8):ns.test(l)?kl:+l}var is=os,cs=Kl,Xt=wn,Il=is,us="Expected a function",ds=Math.max,fs=Math.min;function ps(l,e,t){var n,a,i,r,d,p,b=0,h=!1,C=!1,x=!0;if(typeof l!="function")throw new TypeError(us);e=Il(e)||0,cs(t)&&(h=!!t.leading,C="maxWait"in t,i=C?ds(Il(t.maxWait)||0,e):i,x="trailing"in t?!!t.trailing:x);function g(V){var H=n,A=a;return n=a=void 0,b=V,r=l.apply(A,H),r}function E(V){return b=V,d=setTimeout(k,e),h?g(V):r}function y(V){var H=V-p,A=V-b,L=e-H;return C?fs(L,i-A):L}function v(V){var H=V-p,A=V-b;return p===void 0||H>=e||H<0||C&&A>=i}function k(){var V=Xt();if(v(V))return m(V);d=setTimeout(k,y(V))}function m(V){return d=void 0,x&&n?g(V):(n=a=void 0,r)}function w(){d!==void 0&&clearTimeout(d),b=0,n=p=a=d=void 0}function P(){return d===void 0?r:m(Xt())}function O(){var V=Xt(),H=v(V);if(n=arguments,a=this,p=V,H){if(d===void 0)return E(p);if(C)return clearTimeout(d),d=setTimeout(k,e),g(p)}return d===void 0&&(d=setTimeout(k,e)),r}return O.cancel=w,O.flush=P,O}var hs=ps;const $l=vn(hs);function Tl(l,e,t){const n=l.slice();return n[37]=e[t],n}function Dl(l,e,t){const n=l.slice();return n[34]=e[t],n}function Vl(l){let e,t,n,a,i="‚öîÔ∏è Agregar Combatiente",r,d,p,b,h,C,x,g,E,y,v,k="‚úï",m,w,P,O,V,H="Cancelar",A,L,M,R="‚öîÔ∏è",$,I,W,B;function N(ae,J){return ae[3]==="player"?ms:vs}let q=N(l),Z=q(l);return{c(){e=u("div"),t=u("div"),n=u("div"),a=u("h3"),a.textContent=i,r=D(),d=u("div"),p=u("button"),b=S("üßù Jugador"),C=D(),x=u("button"),g=S("üêâ Monstruo"),y=D(),v=u("button"),v.textContent=k,m=D(),w=u("div"),Z.c(),P=D(),O=u("div"),V=u("button"),V.textContent=H,A=D(),L=u("button"),M=u("span"),M.textContent=R,$=S(" Agregar al Combate"),this.h()},l(ae){e=c(ae,"DIV",{class:!0});var J=_(e);t=c(J,"DIV",{class:!0});var U=_(t);n=c(U,"DIV",{class:!0});var G=_(n);a=c(G,"H3",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-157e7j1"&&(a.textContent=i),r=T(G),d=c(G,"DIV",{class:!0});var se=_(d);p=c(se,"BUTTON",{class:!0});var he=_(p);b=j(he,"üßù Jugador"),he.forEach(f),C=T(se),x=c(se,"BUTTON",{class:!0});var K=_(x);g=j(K,"üêâ Monstruo"),K.forEach(f),se.forEach(f),y=T(G),v=c(G,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1r1r6u3"&&(v.textContent=k),G.forEach(f),m=T(U),w=c(U,"DIV",{class:!0});var te=_(w);Z.l(te),te.forEach(f),P=T(U),O=c(U,"DIV",{class:!0});var ee=_(O);V=c(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),z(V)!=="svelte-toewbe"&&(V.textContent=H),A=T(ee),L=c(ee,"BUTTON",{class:!0});var X=_(L);M=c(X,"SPAN",{class:!0,"data-svelte-h":!0}),z(M)!=="svelte-v5ojki"&&(M.textContent=R),$=j(X," Agregar al Combate"),X.forEach(f),ee.forEach(f),U.forEach(f),J.forEach(f),this.h()},h(){o(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),o(p,"class",h="btn btn-sm font-medieval "+(l[3]==="player"?"btn-primary":"btn-outline")),o(x,"class",E="btn btn-sm font-medieval "+(l[3]==="monster"?"btn-primary":"btn-outline")),o(d,"class","flex gap-2"),o(v,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),o(n,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),o(w,"class","flex-1 overflow-y-auto p-4 space-y-4"),o(V,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),o(M,"class","text-xl"),o(L,"class","btn btn-dnd w-full md:w-auto"),L.disabled=I=l[3]==="player"&&(!l[12]||l[4]<1)||l[3]==="monster"&&(!l[9]||!l[10]||!l[11]||l[4]<1),o(O,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),o(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),o(e,"class","modal modal-open z-50")},m(ae,J){ne(ae,e,J),s(e,t),s(t,n),s(n,a),s(n,r),s(n,d),s(d,p),s(p,b),s(d,C),s(d,x),s(x,g),s(n,y),s(n,v),s(t,m),s(t,w),Z.m(w,null),s(t,P),s(t,O),s(O,V),s(O,A),s(O,L),s(L,M),s(L,$),W||(B=[fe(p,"click",l[18]),fe(x,"click",l[19]),fe(v,"click",l[17]),fe(V,"click",l[17]),fe(L,"click",function(){en(l[3]==="player"?l[13]:l[16])&&(l[3]==="player"?l[13]:l[16]).apply(this,arguments)})],W=!0)},p(ae,J){l=ae,J[0]&8&&h!==(h="btn btn-sm font-medieval "+(l[3]==="player"?"btn-primary":"btn-outline"))&&o(p,"class",h),J[0]&8&&E!==(E="btn btn-sm font-medieval "+(l[3]==="monster"?"btn-primary":"btn-outline"))&&o(x,"class",E),q===(q=N(l))&&Z?Z.p(l,J):(Z.d(1),Z=q(l),Z&&(Z.c(),Z.m(w,null))),J[0]&7704&&I!==(I=l[3]==="player"&&(!l[12]||l[4]<1)||l[3]==="monster"&&(!l[9]||!l[10]||!l[11]||l[4]<1))&&(L.disabled=I)},d(ae){ae&&f(e),Z.d(),W=!1,at(B)}}}function vs(l){let e,t,n,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',i,r,d,p,b='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',h,C,x,g,E,y,v,k='<span class="label-text font-medieval text-neutral">Nombre</span>',m,w,P,O,V,H,A='<span class="label-text font-medieval text-neutral">Iniciativa</span>',L,M,R,$,I,W='<span class="label-text font-medieval text-neutral">HP M√°ximo</span>',B,N,q,Z,ae,J='<span class="label-text font-medieval text-neutral">AC</span>',U,G,se,he,K=l[7]&&Hl(),te=l[8]&&!l[7]&&Ol(),ee=l[6].length>0&&!l[7]&&Pl(l);return{c(){e=u("div"),t=u("div"),n=u("label"),n.innerHTML=a,i=D(),r=u("input"),d=D(),p=u("label"),p.innerHTML=b,h=D(),K&&K.c(),C=D(),te&&te.c(),x=D(),ee&&ee.c(),g=D(),E=u("div"),y=u("div"),v=u("label"),v.innerHTML=k,m=D(),w=u("input"),P=D(),O=u("div"),V=u("div"),H=u("label"),H.innerHTML=A,L=D(),M=u("input"),R=D(),$=u("div"),I=u("label"),I.innerHTML=W,B=D(),N=u("input"),q=D(),Z=u("div"),ae=u("label"),ae.innerHTML=J,U=D(),G=u("input"),this.h()},l(X){e=c(X,"DIV",{class:!0});var ce=_(e);t=c(ce,"DIV",{class:!0});var me=_(t);n=c(me,"LABEL",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1s7wqfp"&&(n.innerHTML=a),i=T(me),r=c(me,"INPUT",{type:!0,placeholder:!0,class:!0}),d=T(me),p=c(me,"LABEL",{class:!0,"data-svelte-h":!0}),z(p)!=="svelte-1b81k6w"&&(p.innerHTML=b),me.forEach(f),h=T(ce),K&&K.l(ce),C=T(ce),te&&te.l(ce),x=T(ce),ee&&ee.l(ce),g=T(ce),E=c(ce,"DIV",{class:!0});var ge=_(E);y=c(ge,"DIV",{class:!0});var F=_(y);v=c(F,"LABEL",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-n9vtz6"&&(v.innerHTML=k),m=T(F),w=c(F,"INPUT",{type:!0,placeholder:!0,class:!0}),F.forEach(f),P=T(ge),O=c(ge,"DIV",{class:!0});var ie=_(O);V=c(ie,"DIV",{class:!0});var Y=_(V);H=c(Y,"LABEL",{class:!0,"data-svelte-h":!0}),z(H)!=="svelte-loi7q8"&&(H.innerHTML=A),L=T(Y),M=c(Y,"INPUT",{type:!0,class:!0}),Y.forEach(f),R=T(ie),$=c(ie,"DIV",{class:!0});var Q=_($);I=c(Q,"LABEL",{class:!0,"data-svelte-h":!0}),z(I)!=="svelte-r75dry"&&(I.innerHTML=W),B=T(Q),N=c(Q,"INPUT",{type:!0,class:!0}),Q.forEach(f),q=T(ie),Z=c(ie,"DIV",{class:!0});var re=_(Z);ae=c(re,"LABEL",{class:!0,"data-svelte-h":!0}),z(ae)!=="svelte-436dg3"&&(ae.innerHTML=J),U=T(re),G=c(re,"INPUT",{type:!0,class:!0}),re.forEach(f),ie.forEach(f),ge.forEach(f),ce.forEach(f),this.h()},h(){o(n,"class","label"),o(r,"type","text"),o(r,"placeholder","Ej: kobold, goblin, dragon..."),o(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(p,"class","label"),o(t,"class","form-control mb-4"),o(v,"class","label"),o(w,"type","text"),o(w,"placeholder","Nombre de la criatura"),o(w,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(y,"class","form-control"),o(H,"class","label"),o(M,"type","number"),o(M,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(V,"class","form-control"),o(I,"class","label"),o(N,"type","number"),o(N,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o($,"class","form-control"),o(ae,"class","label"),o(G,"type","number"),o(G,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(Z,"class","form-control"),o(O,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),o(E,"class","space-y-4"),o(e,"class","space-y-4")},m(X,ce){ne(X,e,ce),s(e,t),s(t,n),s(t,i),s(t,r),Ee(r,l[5]),s(t,d),s(t,p),s(e,h),K&&K.m(e,null),s(e,C),te&&te.m(e,null),s(e,x),ee&&ee.m(e,null),s(e,g),s(e,E),s(E,y),s(y,v),s(y,m),s(y,w),Ee(w,l[9]),s(E,P),s(E,O),s(O,V),s(V,H),s(V,L),s(V,M),Ee(M,l[4]),s(O,R),s(O,$),s($,I),s($,B),s($,N),Ee(N,l[10]),s(O,q),s(O,Z),s(Z,ae),s(Z,U),s(Z,G),Ee(G,l[11]),se||(he=[fe(r,"input",l[22]),fe(r,"input",l[14]),fe(w,"input",l[24]),fe(M,"input",l[25]),fe(N,"input",l[26]),fe(G,"input",l[27])],se=!0)},p(X,ce){ce[0]&32&&r.value!==X[5]&&Ee(r,X[5]),X[7]?K||(K=Hl(),K.c(),K.m(e,C)):K&&(K.d(1),K=null),X[8]&&!X[7]?te||(te=Ol(),te.c(),te.m(e,x)):te&&(te.d(1),te=null),X[6].length>0&&!X[7]?ee?ee.p(X,ce):(ee=Pl(X),ee.c(),ee.m(e,g)):ee&&(ee.d(1),ee=null),ce[0]&512&&w.value!==X[9]&&Ee(w,X[9]),ce[0]&16&&Xe(M.value)!==X[4]&&Ee(M,X[4]),ce[0]&1024&&Xe(N.value)!==X[10]&&Ee(N,X[10]),ce[0]&2048&&Xe(G.value)!==X[11]&&Ee(G,X[11])},d(X){X&&f(e),K&&K.d(),te&&te.d(),ee&&ee.d(),se=!1,at(he)}}}function ms(l){var Z,ae,J;let e,t,n,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador</span>',i,r,d,p="-- Elegir jugador --",b,h,C,x='<span class="label-text font-medieval text-neutral">Iniciativa</span>',g,E,y,v,k,m,w,P=(((Z=l[12])==null?void 0:Z.name)||"Elegir jugador")+"",O,V,H,A,L=(((ae=l[12])==null?void 0:ae.maxHp)||0)+"",M,R,$=(((J=l[12])==null?void 0:J.armorClass)||0)+"",I,W,B,N=Re(l[1]),q=[];for(let U=0;U<N.length;U+=1)q[U]=Nl(Dl(l,N,U));return{c(){e=u("div"),t=u("div"),n=u("label"),n.innerHTML=a,i=D(),r=u("select"),d=u("option"),d.textContent=p;for(let U=0;U<q.length;U+=1)q[U].c();b=D(),h=u("div"),C=u("label"),C.innerHTML=x,g=D(),E=u("input"),y=D(),v=u("div"),k=u("div"),m=u("div"),w=u("p"),O=S(P),V=D(),H=u("p"),A=S("HP: "),M=S(L),R=S(" | AC: "),I=S($),this.h()},l(U){e=c(U,"DIV",{class:!0});var G=_(e);t=c(G,"DIV",{class:!0});var se=_(t);n=c(se,"LABEL",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1lzlsw9"&&(n.innerHTML=a),i=T(se),r=c(se,"SELECT",{class:!0});var he=_(r);d=c(he,"OPTION",{"data-svelte-h":!0}),z(d)!=="svelte-ws9sqz"&&(d.textContent=p);for(let ge=0;ge<q.length;ge+=1)q[ge].l(he);he.forEach(f),se.forEach(f),b=T(G),h=c(G,"DIV",{class:!0});var K=_(h);C=c(K,"LABEL",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1wwr5wg"&&(C.innerHTML=x),g=T(K),E=c(K,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),K.forEach(f),y=T(G),v=c(G,"DIV",{class:!0});var te=_(v);k=c(te,"DIV",{class:!0});var ee=_(k);m=c(ee,"DIV",{});var X=_(m);w=c(X,"P",{class:!0});var ce=_(w);O=j(ce,P),ce.forEach(f),V=T(X),H=c(X,"P",{class:!0});var me=_(H);A=j(me,"HP: "),M=j(me,L),R=j(me," | AC: "),I=j(me,$),me.forEach(f),X.forEach(f),ee.forEach(f),te.forEach(f),G.forEach(f),this.h()},h(){o(n,"class","label"),d.__value="",Ee(d,d.__value),d.disabled=!0,d.selected=!0,o(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),l[2]===void 0&&ln(()=>l[20].call(r)),o(t,"class","form-control"),o(C,"class","label"),o(E,"type","number"),o(E,"min","1"),o(E,"max","100"),o(E,"step","1"),E.required=!0,o(E,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(h,"class","form-control"),o(w,"class","text-lg font-bold text-neutral"),o(H,"class","text-sm text-neutral/70"),o(k,"class","flex items-center gap-4"),o(v,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),o(e,"class","space-y-4")},m(U,G){ne(U,e,G),s(e,t),s(t,n),s(t,i),s(t,r),s(r,d);for(let se=0;se<q.length;se+=1)q[se]&&q[se].m(r,null);cl(r,l[2],!0),s(e,b),s(e,h),s(h,C),s(h,g),s(h,E),Ee(E,l[4]),s(e,y),s(e,v),s(v,k),s(k,m),s(m,w),s(w,O),s(m,V),s(m,H),s(H,A),s(H,M),s(H,R),s(H,I),W||(B=[fe(r,"change",l[20]),fe(E,"input",l[21])],W=!0)},p(U,G){var se,he,K;if(G[0]&2){N=Re(U[1]);let te;for(te=0;te<N.length;te+=1){const ee=Dl(U,N,te);q[te]?q[te].p(ee,G):(q[te]=Nl(ee),q[te].c(),q[te].m(r,null))}for(;te<q.length;te+=1)q[te].d(1);q.length=N.length}G[0]&6&&cl(r,U[2]),G[0]&16&&Xe(E.value)!==U[4]&&Ee(E,U[4]),G[0]&4096&&P!==(P=(((se=U[12])==null?void 0:se.name)||"Elegir jugador")+"")&&oe(O,P),G[0]&4096&&L!==(L=(((he=U[12])==null?void 0:he.maxHp)||0)+"")&&oe(M,L),G[0]&4096&&$!==($=(((K=U[12])==null?void 0:K.armorClass)||0)+"")&&oe(I,$)},d(U){U&&f(e),ht(q,U),W=!1,at(B)}}}function Hl(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex justify-center items-center py-4")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function Ol(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){o(e,"class","alert bg-warning/20 border-warning/40")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function Pl(l){let e,t,n,a=l[6].length+"",i,r,d=l[6].length!==1?"s":"",p,b,h=l[6].length!==1?"s":"",C,x,g,E=Re(l[6]),y=[];for(let v=0;v<E.length;v+=1)y[v]=Ml(Tl(l,E,v));return{c(){e=u("div"),t=u("p"),n=S("üìñ "),i=S(a),r=S(" criatura"),p=S(d),b=S(" encontrada"),C=S(h),x=D(),g=u("div");for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){e=c(v,"DIV",{class:!0});var k=_(e);t=c(k,"P",{class:!0});var m=_(t);n=j(m,"üìñ "),i=j(m,a),r=j(m," criatura"),p=j(m,d),b=j(m," encontrada"),C=j(m,h),m.forEach(f),x=T(k),g=c(k,"DIV",{class:!0});var w=_(g);for(let P=0;P<y.length;P+=1)y[P].l(w);w.forEach(f),k.forEach(f),this.h()},h(){o(t,"class","text-xs font-medieval text-neutral/70 mb-2"),o(g,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),o(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(v,k){ne(v,e,k),s(e,t),s(t,n),s(t,i),s(t,r),s(t,p),s(t,b),s(t,C),s(e,x),s(e,g);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(g,null)},p(v,k){if(k[0]&64&&a!==(a=v[6].length+"")&&oe(i,a),k[0]&64&&d!==(d=v[6].length!==1?"s":"")&&oe(p,d),k[0]&64&&h!==(h=v[6].length!==1?"s":"")&&oe(C,h),k[0]&32832){E=Re(v[6]);let m;for(m=0;m<E.length;m+=1){const w=Tl(v,E,m);y[m]?y[m].p(w,k):(y[m]=Ml(w),y[m].c(),y[m].m(g,null))}for(;m<y.length;m+=1)y[m].d(1);y.length=E.length}},d(v){v&&f(e),ht(y,v)}}}function Ml(l){let e,t,n,a=l[37].name+"",i,r,d,p=l[37].type+"",b,h,C=l[37].challenge_rating+"",x,g,E,y="Seleccionar",v,k,m;function w(){return l[23](l[37])}return{c(){e=u("button"),t=u("div"),n=u("span"),i=S(a),r=D(),d=u("span"),b=S(p),h=S(" | CR "),x=S(C),g=D(),E=u("span"),E.textContent=y,v=D(),this.h()},l(P){e=c(P,"BUTTON",{class:!0});var O=_(e);t=c(O,"DIV",{class:!0});var V=_(t);n=c(V,"SPAN",{class:!0});var H=_(n);i=j(H,a),H.forEach(f),r=T(V),d=c(V,"SPAN",{class:!0});var A=_(d);b=j(A,p),h=j(A," | CR "),x=j(A,C),A.forEach(f),V.forEach(f),g=T(O),E=c(O,"SPAN",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-15711il"&&(E.textContent=y),v=T(O),O.forEach(f),this.h()},h(){o(n,"class","font-bold text-neutral block"),o(d,"class","text-xs text-neutral/60"),o(t,"class","flex-1"),o(E,"class","text-xs badge badge-sm badge-primary"),o(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(P,O){ne(P,e,O),s(e,t),s(t,n),s(n,i),s(t,r),s(t,d),s(d,b),s(d,h),s(d,x),s(e,g),s(e,E),s(e,v),k||(m=fe(e,"click",w),k=!0)},p(P,O){l=P,O[0]&64&&a!==(a=l[37].name+"")&&oe(i,a),O[0]&64&&p!==(p=l[37].type+"")&&oe(b,p),O[0]&64&&C!==(C=l[37].challenge_rating+"")&&oe(x,C)},d(P){P&&f(e),k=!1,m()}}}function Nl(l){let e,t=l[34].name+"",n,a;return{c(){e=u("option"),n=S(t),this.h()},l(i){e=c(i,"OPTION",{});var r=_(e);n=j(r,t),r.forEach(f),this.h()},h(){e.__value=a=l[34].id,Ee(e,e.__value)},m(i,r){ne(i,e,r),s(e,n)},p(i,r){r[0]&2&&t!==(t=i[34].name+"")&&oe(n,t),r[0]&2&&a!==(a=i[34].id)&&(e.__value=a,Ee(e,e.__value))},d(i){i&&f(e)}}}function bs(l){let e,t=l[0]&&Vl(l);return{c(){t&&t.c(),e=pt()},l(n){t&&t.l(n),e=pt()},m(n,a){t&&t.m(n,a),ne(n,e,a)},p(n,a){n[0]?t?t.p(n,a):(t=Vl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(n){n&&f(e),t&&t.d(n)}}}function _s(l,e,t){let n,{isOpen:a=!1}=e,{players:i=[]}=e;const r=Ut();let d="player",p=0,b="";function h(){n&&(r("add",{type:"character",characterId:n.id,name:n.name,maxHp:n.maxHp,armorClass:n.armorClass,initiative:p,isNpc:!1}),L())}let C="",x=[],g=null,E=!1,y=!1,v="",k=0,m=10,w="",P="",O="";const V=$l(async()=>{const J=C.trim();if(!J){t(6,x=[]),t(8,y=!1);return}t(7,E=!0),t(8,y=!1);try{const U=await _t.searchMonsters(J);t(6,x=U.results||[]),t(8,y=x.length===0)}catch(U){console.error("Error buscando monstruos:",U),t(6,x=[]),t(8,y=!0)}finally{t(7,E=!1)}},500);async function H(J){g=await _t.getMonster(J.slug),t(9,v=g.name),t(10,k=g.hit_points),t(11,m=g.armor_class),w=g.challenge_rating,g.type,P=g.size,O=g.alignment,t(6,x=[]),t(5,C="")}function A(){!v||!k||!m||(r("add",{type:"creature",name:v,initiative:p,maxHp:k,armorClass:m,cr:w,size:P,alignment:O,isNpc:!0}),L())}function L(){t(2,b=""),g=null,t(5,C=""),t(6,x=[]),t(8,y=!1),t(9,v=""),t(4,p=0),t(10,k=0),t(11,m=10),w="",P="",O="",t(7,E=!1),r("close")}const M=()=>t(3,d="player"),R=()=>t(3,d="monster");function $(){b=tn(this),t(2,b),t(1,i)}function I(){p=Xe(this.value),t(4,p)}function W(){C=this.value,t(5,C)}const B=J=>H(J);function N(){v=this.value,t(9,v)}function q(){p=Xe(this.value),t(4,p)}function Z(){k=Xe(this.value),t(10,k)}function ae(){m=Xe(this.value),t(11,m)}return l.$$set=J=>{"isOpen"in J&&t(0,a=J.isOpen),"players"in J&&t(1,i=J.players)},l.$$.update=()=>{l.$$.dirty[0]&6&&t(12,n=i.find(J=>J.id===b))},[a,i,b,d,p,C,x,E,y,v,k,m,n,h,V,H,A,L,M,R,$,I,W,B,N,q,Z,ae]}class gs extends gt{constructor(e){super(),xt(this,e,_s,bs,Ct,{isOpen:0,players:1},null,[-1,-1])}}function Al(l){let e,t,n,a="‚úï",i,r,d,p="üíö Gesti√≥n de HP",b,h,C,x,g,E,y=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,k,m,w,P=l[1].name+"",O,V,H,A,L,M,R,$,I="HP ACTUAL",W,B,N,q=l[1].currentHp+"",Z,ae,J,U,G=l[1].maxHp+"",se,he,K,te,ee,X,ce,me,ge=l[4].toFixed(0)+"",F,ie,Y,Q,re,ve="HP NUEVO",xe,le,pe,Te,Ie,Ze,Je,ye,Se,Ae,Ye,Ve,Oe=l[2].toFixed(0)+"",we,qe,Pe,ke,ue,be,$e='<span class="label-text font-medieval text-neutral text-sm sm:text-base">üé≤ Cantidad de HP</span>',tt,Le,Me,ct,Fe,Ne,Be,vt="üí•",lt,je,ut="Da√±o",et,dt,De,Ue,mt="üíö",nt,ze,ot="Curar",it,zt,$t,He=l[1].isNpc&&Ll();function el(de,_e){return de[7]!==0?Cs:xs}let yt=el(l),Ge=yt(l);return{c(){e=u("div"),t=u("div"),n=u("button"),n.textContent=a,i=D(),r=u("div"),d=u("h3"),d.textContent=p,b=D(),h=u("div"),C=u("div"),x=u("div"),g=u("div"),E=u("span"),v=S(y),k=D(),m=u("div"),w=u("h4"),O=S(P),V=D(),H=u("div"),He&&He.c(),A=D(),L=u("div"),M=u("div"),R=u("div"),$=u("p"),$.textContent=I,W=D(),B=u("div"),N=u("p"),Z=S(q),ae=D(),J=u("p"),U=S("de "),se=S(G),he=D(),K=u("progress"),ce=D(),me=u("p"),F=S(ge),ie=S("%"),Y=D(),Q=u("div"),re=u("p"),re.textContent=ve,xe=D(),le=u("div"),pe=u("p"),Te=S(l[3]),Ze=D(),Ge.c(),Je=D(),ye=u("progress"),Ye=D(),Ve=u("p"),we=S(Oe),qe=S("%"),ke=D(),ue=u("div"),be=u("label"),be.innerHTML=$e,tt=D(),Le=u("div"),Me=u("input"),ct=D(),Fe=u("div"),Ne=u("button"),Be=u("span"),Be.textContent=vt,lt=D(),je=u("span"),je.textContent=ut,dt=D(),De=u("button"),Ue=u("span"),Ue.textContent=mt,nt=D(),ze=u("span"),ze.textContent=ot,this.h()},l(de){e=c(de,"DIV",{class:!0});var _e=_(e);t=c(_e,"DIV",{class:!0});var ft=_(t);n=c(ft,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1jnmpfy"&&(n.textContent=a),i=T(ft),r=c(ft,"DIV",{class:!0});var Et=_(r);d=c(Et,"H3",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-sdtwsr"&&(d.textContent=p),b=T(Et),h=c(Et,"DIV",{class:!0});var wt=_(h);C=c(wt,"DIV",{class:!0});var tl=_(C);x=c(tl,"DIV",{class:!0});var ll=_(x);g=c(ll,"DIV",{class:!0});var nl=_(g);E=c(nl,"SPAN",{class:!0});var sl=_(E);v=j(sl,y),sl.forEach(f),nl.forEach(f),ll.forEach(f),tl.forEach(f),k=T(wt),m=c(wt,"DIV",{class:!0});var kt=_(m);w=c(kt,"H4",{class:!0});var rl=_(w);O=j(rl,P),rl.forEach(f),V=T(kt),H=c(kt,"DIV",{class:!0});var al=_(H);He&&He.l(al),al.forEach(f),kt.forEach(f),wt.forEach(f),Et.forEach(f),A=T(ft),L=c(ft,"DIV",{class:!0});var It=_(L);M=c(It,"DIV",{class:!0});var Tt=_(M);R=c(Tt,"DIV",{class:!0});var st=_(R);$=c(st,"P",{class:!0,"data-svelte-h":!0}),z($)!=="svelte-15e8cb6"&&($.textContent=I),W=T(st),B=c(st,"DIV",{class:!0});var Dt=_(B);N=c(Dt,"P",{class:!0});var ol=_(N);Z=j(ol,q),ol.forEach(f),ae=T(Dt),J=c(Dt,"P",{class:!0});var Rt=_(J);U=j(Rt,"de "),se=j(Rt,G),Rt.forEach(f),Dt.forEach(f),he=T(st),K=c(st,"PROGRESS",{class:!0,max:!0}),_(K).forEach(f),ce=T(st),me=c(st,"P",{class:!0});var qt=_(me);F=j(qt,ge),ie=j(qt,"%"),qt.forEach(f),st.forEach(f),Y=T(Tt),Q=c(Tt,"DIV",{class:!0});var rt=_(Q);re=c(rt,"P",{class:!0,"data-svelte-h":!0}),z(re)!=="svelte-ukgy9p"&&(re.textContent=ve),xe=T(rt),le=c(rt,"DIV",{class:!0});var Vt=_(le);pe=c(Vt,"P",{class:!0});var il=_(pe);Te=j(il,l[3]),il.forEach(f),Ze=T(Vt),Ge.l(Vt),Vt.forEach(f),Je=T(rt),ye=c(rt,"PROGRESS",{class:!0,max:!0}),_(ye).forEach(f),Ye=T(rt),Ve=c(rt,"P",{class:!0});var Ft=_(Ve);we=j(Ft,Oe),qe=j(Ft,"%"),Ft.forEach(f),rt.forEach(f),Tt.forEach(f),ke=T(It),ue=c(It,"DIV",{});var Ht=_(ue);be=c(Ht,"LABEL",{class:!0,"data-svelte-h":!0}),z(be)!=="svelte-640liv"&&(be.innerHTML=$e),tt=T(Ht),Le=c(Ht,"DIV",{class:!0});var Ot=_(Le);Me=c(Ot,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ct=T(Ot),Fe=c(Ot,"DIV",{class:!0});var Pt=_(Fe);Ne=c(Pt,"BUTTON",{class:!0});var Mt=_(Ne);Be=c(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Be)!=="svelte-orvybg"&&(Be.textContent=vt),lt=T(Mt),je=c(Mt,"SPAN",{class:!0,"data-svelte-h":!0}),z(je)!=="svelte-117bemg"&&(je.textContent=ut),Mt.forEach(f),dt=T(Pt),De=c(Pt,"BUTTON",{class:!0});var Nt=_(De);Ue=c(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ue)!=="svelte-rpoyvz"&&(Ue.textContent=mt),nt=T(Nt),ze=c(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),z(ze)!=="svelte-v46veg"&&(ze.textContent=ot),Nt.forEach(f),Pt.forEach(f),Ot.forEach(f),Ht.forEach(f),It.forEach(f),ft.forEach(f),_e.forEach(f),this.h()},h(){o(n,"class","btn btn-xs sm:btn-sm btn-circle btn-ghost absolute right-2 sm:right-3 top-2 sm:top-3 z-10 hover:bg-error/20"),o(d,"class","font-bold text-xl sm:text-2xl font-medieval text-neutral text-center mb-2 sm:mb-3"),o(E,"class","text-lg sm:text-xl"),o(g,"class","bg-primary/20 flex items-center justify-center"),o(x,"class","w-10 h-10 sm:w-12 sm:h-12 rounded-full ring-2 ring-secondary"),o(C,"class","avatar"),o(w,"class","text-base sm:text-lg font-medieval text-neutral font-bold truncate"),o(H,"class","flex gap-2 mt-1"),o(m,"class","flex-1 min-w-0"),o(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-2 sm:p-3 rounded-lg border border-primary/30 flex items-center gap-2 sm:gap-3"),o(r,"class","p-3 sm:p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),o($,"class","text-xs font-medieval text-neutral/60 text-center"),o(N,"class","text-xl sm:text-2xl font-bold text-neutral"),o(J,"class","text-xs sm:text-sm text-neutral/60"),o(B,"class","text-center"),o(K,"class",te="progress progress-"+l[8]+" w-full h-2 sm:h-3"),K.value=ee=l[1].currentHp,o(K,"max",X=l[1].maxHp),o(me,"class","text-xs text-center text-neutral/60"),o(R,"class","bg-neutral/10 flex flex-col gap-1 p-2 sm:p-3 rounded-lg border-2 border-primary/30"),o(re,"class","text-xs font-medieval text-neutral/60 text-center"),o(pe,"class",Ie="text-xl sm:text-2xl font-bold text-"+(l[7]!==0?l[7]>0?"success":"error":"neutral")),o(le,"class","text-center"),o(ye,"class",Se="progress progress-"+(l[7]!==0?l[6]:l[8])+" w-full h-2 sm:h-3"),ye.value=l[3],o(ye,"max",Ae=l[1].maxHp),o(Ve,"class","text-xs text-center text-neutral/60"),o(Q,"class",Pe="bg-"+(l[7]!==0?l[7]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(l[7]!==0?l[7]>0?"success":"error":"primary")+"/30"),o(M,"class","grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4"),o(be,"class","label"),o(Me,"type","number"),o(Me,"placeholder","Ej: 15"),o(Me,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-lg sm:text-2xl font-bold"),o(Me,"min","0"),o(Be,"class","text-base sm:text-xl"),o(je,"class","font-medieval text-xs sm:text-sm"),o(Ne,"class","btn btn-error btn-sm sm:btn-md flex-1"),Ne.disabled=et=l[5]<=0,o(Ue,"class","text-base sm:text-xl"),o(ze,"class","font-medieval text-xs sm:text-sm"),o(De,"class","btn btn-success btn-sm sm:btn-md flex-1"),De.disabled=it=l[5]<=0,o(Fe,"class","grid grid-cols-2 sm:flex gap-2 flex-1"),o(Le,"class","flex flex-col sm:flex-row gap-2"),o(L,"class","flex-1 p-3 sm:p-4 overflow-y-auto"),o(t,"class","card-parchment border-2 sm:border-4 border-secondary mx-2 sm:mx-4 relative w-[95vw] sm:w-[90vw] md:w-3/4 lg:w-1/2 max-h-[90vh] flex flex-col"),o(e,"class","modal modal-open z-50")},m(de,_e){ne(de,e,_e),s(e,t),s(t,n),s(t,i),s(t,r),s(r,d),s(r,b),s(r,h),s(h,C),s(C,x),s(x,g),s(g,E),s(E,v),s(h,k),s(h,m),s(m,w),s(w,O),s(m,V),s(m,H),He&&He.m(H,null),s(t,A),s(t,L),s(L,M),s(M,R),s(R,$),s(R,W),s(R,B),s(B,N),s(N,Z),s(B,ae),s(B,J),s(J,U),s(J,se),s(R,he),s(R,K),s(R,ce),s(R,me),s(me,F),s(me,ie),s(M,Y),s(M,Q),s(Q,re),s(Q,xe),s(Q,le),s(le,pe),s(pe,Te),s(le,Ze),Ge.m(le,null),s(Q,Je),s(Q,ye),s(Q,Ye),s(Q,Ve),s(Ve,we),s(Ve,qe),s(L,ke),s(L,ue),s(ue,be),s(ue,tt),s(ue,Le),s(Le,Me),Ee(Me,l[5]),s(Le,ct),s(Le,Fe),s(Fe,Ne),s(Ne,Be),s(Ne,lt),s(Ne,je),s(Fe,dt),s(Fe,De),s(De,Ue),s(De,nt),s(De,ze),zt||($t=[fe(n,"click",l[11]),fe(Me,"input",l[13]),fe(Ne,"click",l[9]),fe(De,"click",l[10])],zt=!0)},p(de,_e){_e&2&&y!==(y=de[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&oe(v,y),_e&2&&P!==(P=de[1].name+"")&&oe(O,P),de[1].isNpc?He||(He=Ll(),He.c(),He.m(H,null)):He&&(He.d(1),He=null),_e&2&&q!==(q=de[1].currentHp+"")&&oe(Z,q),_e&2&&G!==(G=de[1].maxHp+"")&&oe(se,G),_e&256&&te!==(te="progress progress-"+de[8]+" w-full h-2 sm:h-3")&&o(K,"class",te),_e&2&&ee!==(ee=de[1].currentHp)&&(K.value=ee),_e&2&&X!==(X=de[1].maxHp)&&o(K,"max",X),_e&16&&ge!==(ge=de[4].toFixed(0)+"")&&oe(F,ge),_e&8&&oe(Te,de[3]),_e&128&&Ie!==(Ie="text-xl sm:text-2xl font-bold text-"+(de[7]!==0?de[7]>0?"success":"error":"neutral"))&&o(pe,"class",Ie),yt===(yt=el(de))&&Ge?Ge.p(de,_e):(Ge.d(1),Ge=yt(de),Ge&&(Ge.c(),Ge.m(le,null))),_e&448&&Se!==(Se="progress progress-"+(de[7]!==0?de[6]:de[8])+" w-full h-2 sm:h-3")&&o(ye,"class",Se),_e&8&&(ye.value=de[3]),_e&2&&Ae!==(Ae=de[1].maxHp)&&o(ye,"max",Ae),_e&4&&Oe!==(Oe=de[2].toFixed(0)+"")&&oe(we,Oe),_e&128&&Pe!==(Pe="bg-"+(de[7]!==0?de[7]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(de[7]!==0?de[7]>0?"success":"error":"primary")+"/30")&&o(Q,"class",Pe),_e&32&&Xe(Me.value)!==de[5]&&Ee(Me,de[5]),_e&32&&et!==(et=de[5]<=0)&&(Ne.disabled=et),_e&32&&it!==(it=de[5]<=0)&&(De.disabled=it)},d(de){de&&f(e),He&&He.d(),Ge.d(),zt=!1,at($t)}}}function Ll(l){let e,t="NPC";return{c(){e=u("div"),e.textContent=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-31ycly"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-error")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function xs(l){let e,t="Sin cambios";return{c(){e=u("p"),e.textContent=t,this.h()},l(n){e=c(n,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-rbv1yy"&&(e.textContent=t),this.h()},h(){o(e,"class","text-xs sm:text-sm text-neutral/60")},m(n,a){ne(n,e,a)},p:Ce,d(n){n&&f(e)}}}function Cs(l){let e,t=l[7]>0?"+":"",n,a,i;return{c(){e=u("p"),n=S(t),a=S(l[7]),this.h()},l(r){e=c(r,"P",{class:!0});var d=_(e);n=j(d,t),a=j(d,l[7]),d.forEach(f),this.h()},h(){o(e,"class",i="text-base sm:text-lg font-bold text-"+(l[7]>0?"success":"error"))},m(r,d){ne(r,e,d),s(e,n),s(e,a)},p(r,d){d&128&&t!==(t=r[7]>0?"+":"")&&oe(n,t),d&128&&oe(a,r[7]),d&128&&i!==(i="text-base sm:text-lg font-bold text-"+(r[7]>0?"success":"error"))&&o(e,"class",i)},d(r){r&&f(e)}}}function ys(l){let e,t=l[0]&&l[1]&&Al(l);return{c(){t&&t.c(),e=pt()},l(n){t&&t.l(n),e=pt()},m(n,a){t&&t.m(n,a),ne(n,e,a)},p(n,[a]){n[0]&&n[1]?t?t.p(n,a):(t=Al(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(n){n&&f(e),t&&t.d(n)}}}function Es(l,e,t){let n,a,i,r,d,p,{isOpen:b=!1}=e,{combatant:h=null}=e;const C=Ut();let x=0,g=0;function E(){if(h&&g>0){const m=-Math.abs(g);C("apply",m),t(5,g=0)}}function y(){if(h&&g>0){const m=Math.abs(g);C("apply",m),t(5,g=0)}}function v(){t(12,x=0),t(5,g=0),C("close")}function k(){g=Xe(this.value),t(5,g)}return l.$$set=m=>{"isOpen"in m&&t(0,b=m.isOpen),"combatant"in m&&t(1,h=m.combatant)},l.$$.update=()=>{l.$$.dirty&2&&t(4,n=h?h.currentHp/h.maxHp*100:0),l.$$.dirty&16&&t(8,a=n>50?"success":n>25?"warning":"error"),l.$$.dirty&4098&&t(3,i=h?Math.max(0,Math.min(h.maxHp,h.currentHp+x)):0),l.$$.dirty&10&&t(7,r=h?i-h.currentHp:0),l.$$.dirty&10&&t(2,d=h?i/h.maxHp*100:0),l.$$.dirty&4&&t(6,p=d>50?"success":d>25?"warning":"error")},[b,h,d,i,n,g,p,r,a,E,y,v,x,k]}class ws extends gt{constructor(e){super(),xt(this,e,Es,ys,Ct,{isOpen:0,combatant:1})}}function jl(l,e,t){const n=l.slice();n[15]=e[t];const a=Array.isArray(n[1].conditions)?n[1].conditions:[];n[16]=a;const i=n[16].includes(n[15].name);return n[17]=i,n}function Sl(l,e,t){const n=l.slice();return n[20]=e[t],n}function Bl(l){let e,t,n,a="‚úï",i,r,d,p="‚ö†Ô∏è Estados de Combate",b,h,C,x,g,E,y=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,k,m,w,P=l[1].name+"",O,V,H,A,L,M=l[1].currentHp+"",R,$,I=l[1].maxHp+"",W,B,N,q,Z=l[1].armorClass+"",ae,J,U,G,se,he,K,te="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ee,X,ce=(l[1].conditions&&Array.isArray(l[1].conditions)?l[1].conditions.length:0)+"",me,ge,F,ie,Y,Q,re,ve,xe,le,pe="üîç",Te,Ie,Ze="Base de datos oficial de D&D 5e",Je,ye,Se,Ae,Ye;function Ve(ue,be){return be&2&&(F=null),F==null&&(F=!!(ue[1].conditions&&Array.isArray(ue[1].conditions)&&ue[1].conditions.length>0)),F?Is:ks}let Oe=Ve(l,-1),we=Oe(l);function qe(ue,be){return be&4&&(Se=null),ue[4]?Hs:ue[3].length>0?Vs:(Se==null&&(Se=!!ue[2].trim()),Se?Ds:Ts)}let Pe=qe(l,-1),ke=Pe(l);return{c(){e=u("div"),t=u("div"),n=u("button"),n.textContent=a,i=D(),r=u("div"),d=u("h3"),d.textContent=p,b=D(),h=u("div"),C=u("div"),x=u("div"),g=u("div"),E=u("span"),v=S(y),k=D(),m=u("div"),w=u("h4"),O=S(P),V=D(),H=u("div"),A=u("div"),L=S("‚ù§Ô∏è "),R=S(M),$=S("/"),W=S(I),B=D(),N=u("div"),q=S("üõ°Ô∏è "),ae=S(Z),J=D(),U=u("div"),G=u("div"),se=u("div"),he=u("div"),K=u("h5"),K.innerHTML=te,ee=D(),X=u("span"),me=S(ce),ge=D(),we.c(),ie=D(),Y=u("div"),Q=u("div"),re=u("div"),ve=u("input"),xe=D(),le=u("div"),le.textContent=pe,Te=D(),Ie=u("p"),Ie.textContent=Ze,Je=D(),ye=u("div"),ke.c(),this.h()},l(ue){e=c(ue,"DIV",{class:!0});var be=_(e);t=c(be,"DIV",{class:!0});var $e=_(t);n=c($e,"BUTTON",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-1vc2djp"&&(n.textContent=a),i=T($e),r=c($e,"DIV",{class:!0});var tt=_(r);d=c(tt,"H3",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-j0oh10"&&(d.textContent=p),b=T(tt),h=c(tt,"DIV",{class:!0});var Le=_(h);C=c(Le,"DIV",{class:!0});var Me=_(C);x=c(Me,"DIV",{class:!0});var ct=_(x);g=c(ct,"DIV",{class:!0});var Fe=_(g);E=c(Fe,"SPAN",{class:!0});var Ne=_(E);v=j(Ne,y),Ne.forEach(f),Fe.forEach(f),ct.forEach(f),Me.forEach(f),k=T(Le),m=c(Le,"DIV",{class:!0});var Be=_(m);w=c(Be,"H4",{class:!0});var vt=_(w);O=j(vt,P),vt.forEach(f),V=T(Be),H=c(Be,"DIV",{class:!0});var lt=_(H);A=c(lt,"DIV",{class:!0});var je=_(A);L=j(je,"‚ù§Ô∏è "),R=j(je,M),$=j(je,"/"),W=j(je,I),je.forEach(f),B=T(lt),N=c(lt,"DIV",{class:!0});var ut=_(N);q=j(ut,"üõ°Ô∏è "),ae=j(ut,Z),ut.forEach(f),lt.forEach(f),Be.forEach(f),Le.forEach(f),tt.forEach(f),J=T($e),U=c($e,"DIV",{class:!0,style:!0});var et=_(U);G=c(et,"DIV",{class:!0,style:!0});var dt=_(G);se=c(dt,"DIV",{class:!0});var De=_(se);he=c(De,"DIV",{class:!0});var Ue=_(he);K=c(Ue,"H5",{class:!0,"data-svelte-h":!0}),z(K)!=="svelte-12hilzf"&&(K.innerHTML=te),ee=T(Ue),X=c(Ue,"SPAN",{class:!0});var mt=_(X);me=j(mt,ce),mt.forEach(f),Ue.forEach(f),ge=T(De),we.l(De),De.forEach(f),dt.forEach(f),ie=T(et),Y=c(et,"DIV",{class:!0,style:!0});var nt=_(Y);Q=c(nt,"DIV",{class:!0});var ze=_(Q);re=c(ze,"DIV",{class:!0});var ot=_(re);ve=c(ot,"INPUT",{type:!0,placeholder:!0,class:!0}),xe=T(ot),le=c(ot,"DIV",{class:!0,"data-svelte-h":!0}),z(le)!=="svelte-1duc997"&&(le.textContent=pe),ot.forEach(f),Te=T(ze),Ie=c(ze,"P",{class:!0,"data-svelte-h":!0}),z(Ie)!=="svelte-hqlo3f"&&(Ie.textContent=Ze),ze.forEach(f),Je=T(nt),ye=c(nt,"DIV",{class:!0});var it=_(ye);ke.l(it),it.forEach(f),nt.forEach(f),et.forEach(f),$e.forEach(f),be.forEach(f),this.h()},h(){o(n,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),o(d,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),o(E,"class","text-xl"),o(g,"class","bg-primary/20 flex items-center justify-center"),o(x,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),o(C,"class","avatar"),o(w,"class","text-lg font-medieval text-neutral font-bold truncate"),o(A,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),o(N,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),o(H,"class","flex gap-2 mt-1"),o(m,"class","flex-1 min-w-0"),o(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),o(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),o(K,"class","font-medieval text-neutral font-bold flex items-center gap-2"),o(X,"class","badge badge-warning badge-sm"),o(he,"class","flex items-center justify-between mb-3"),o(se,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),o(G,"class","md:w-1/3 flex flex-col"),Gt(G,"min-height","300px"),o(ve,"type","text"),o(ve,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),o(ve,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),o(le,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),o(re,"class","relative"),o(Ie,"class","text-xs text-neutral/50 mt-1 italic"),o(Q,"class","mb-3"),o(ye,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),o(Y,"class","md:w-2/3 flex flex-col"),Gt(Y,"min-height","300px"),o(U,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),Gt(U,"min-height","0"),o(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),o(e,"class","modal modal-open z-50")},m(ue,be){ne(ue,e,be),s(e,t),s(t,n),s(t,i),s(t,r),s(r,d),s(r,b),s(r,h),s(h,C),s(C,x),s(x,g),s(g,E),s(E,v),s(h,k),s(h,m),s(m,w),s(w,O),s(m,V),s(m,H),s(H,A),s(A,L),s(A,R),s(A,$),s(A,W),s(H,B),s(H,N),s(N,q),s(N,ae),s(t,J),s(t,U),s(U,G),s(G,se),s(se,he),s(he,K),s(he,ee),s(he,X),s(X,me),s(se,ge),we.m(se,null),s(U,ie),s(U,Y),s(Y,Q),s(Q,re),s(re,ve),Ee(ve,l[2]),s(re,xe),s(re,le),s(Q,Te),s(Q,Ie),s(Y,Je),s(Y,ye),ke.m(ye,null),Ae||(Ye=[fe(n,"click",l[8]),fe(ve,"input",l[11]),fe(ve,"input",l[5]),fe(e,"keydown",l[9])],Ae=!0)},p(ue,be){be&2&&y!==(y=ue[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&oe(v,y),be&2&&P!==(P=ue[1].name+"")&&oe(O,P),be&2&&M!==(M=ue[1].currentHp+"")&&oe(R,M),be&2&&I!==(I=ue[1].maxHp+"")&&oe(W,I),be&2&&Z!==(Z=ue[1].armorClass+"")&&oe(ae,Z),be&2&&ce!==(ce=(ue[1].conditions&&Array.isArray(ue[1].conditions)?ue[1].conditions.length:0)+"")&&oe(me,ce),Oe===(Oe=Ve(ue,be))&&we?we.p(ue,be):(we.d(1),we=Oe(ue),we&&(we.c(),we.m(se,null))),be&4&&ve.value!==ue[2]&&Ee(ve,ue[2]),Pe===(Pe=qe(ue,be))&&ke?ke.p(ue,be):(ke.d(1),ke=Pe(ue),ke&&(ke.c(),ke.m(ye,null)))},d(ue){ue&&f(e),we.d(),ke.d(),Ae=!1,at(Ye)}}}function ks(l){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(n,a){ne(n,e,a)},p:Ce,d(n){n&&f(e)}}}function Is(l){let e,t=Re(l[1].conditions),n=[];for(let a=0;a<t.length;a+=1)n[a]=Ul(Sl(l,t,a));return{c(){e=u("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=_(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(f),this.h()},h(){o(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,i){ne(a,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(a,i){if(i&130){t=Re(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const d=Sl(a,t,r);n[r]?n[r].p(d,i):(n[r]=Ul(d),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(a){a&&f(e),ht(n,a)}}}function Ul(l){let e,t,n=l[20]+"",a,i,r,d="‚úï",p,b,h;function C(){return l[10](l[20])}return{c(){e=u("div"),t=u("span"),a=S(n),i=D(),r=u("button"),r.textContent=d,p=D(),this.h()},l(x){e=c(x,"DIV",{class:!0});var g=_(e);t=c(g,"SPAN",{class:!0});var E=_(t);a=j(E,n),E.forEach(f),i=T(g),r=c(g,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(r)!=="svelte-5t970f"&&(r.textContent=d),p=T(g),g.forEach(f),this.h()},h(){o(t,"class","font-medieval text-sm text-neutral flex-1"),o(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),o(r,"title","Eliminar"),o(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(x,g){ne(x,e,g),s(e,t),s(t,a),s(e,i),s(e,r),s(e,p),b||(h=fe(r,"click",C),b=!0)},p(x,g){l=x,g&2&&n!==(n=l[20]+"")&&oe(a,n)},d(x){x&&f(e),b=!1,h()}}}function Ts(l){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(n,a){ne(n,e,a)},p:Ce,d(n){n&&f(e)}}}function Ds(l){let e,t,n="üîç",a,i,r,d,p,b,h,C,x="‚ûï Agregar como personalizado",g,E;return{c(){e=u("div"),t=u("div"),t.textContent=n,a=D(),i=u("p"),r=S('No se encontr√≥ "'),d=u("span"),p=S(l[2]),b=S('"'),h=D(),C=u("button"),C.textContent=x,this.h()},l(y){e=c(y,"DIV",{class:!0});var v=_(e);t=c(v,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sy51vw"&&(t.textContent=n),a=T(v),i=c(v,"P",{class:!0});var k=_(i);r=j(k,'No se encontr√≥ "'),d=c(k,"SPAN",{class:!0});var m=_(d);p=j(m,l[2]),m.forEach(f),b=j(k,'"'),k.forEach(f),h=T(v),C=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1rs0apo"&&(C.textContent=x),v.forEach(f),this.h()},h(){o(t,"class","text-4xl mb-3"),o(d,"class","font-bold"),o(i,"class","text-neutral/70 font-body mb-3"),o(C,"class","btn btn-primary btn-sm"),o(e,"class","flex flex-col items-center justify-center h-full text-center")},m(y,v){ne(y,e,v),s(e,t),s(e,a),s(e,i),s(i,r),s(i,d),s(d,p),s(i,b),s(e,h),s(e,C),g||(E=fe(C,"click",l[13]),g=!0)},p(y,v){v&4&&oe(p,y[2])},d(y){y&&f(e),g=!1,E()}}}function Vs(l){let e,t=Re(l[3]),n=[];for(let a=0;a<t.length;a+=1)n[a]=Rl(jl(l,t,a));return{c(){e=u("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=c(a,"DIV",{class:!0});var i=_(e);for(let r=0;r<n.length;r+=1)n[r].l(i);i.forEach(f),this.h()},h(){o(e,"class","space-y-2")},m(a,i){ne(a,e,i);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null)},p(a,i){if(i&74){t=Re(a[3]);let r;for(r=0;r<t.length;r+=1){const d=jl(a,t,r);n[r]?n[r].p(d,i):(n[r]=Rl(d),n[r].c(),n[r].m(e,null))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(a){a&&f(e),ht(n,a)}}}function Hs(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full")},m(n,a){ne(n,e,a)},p:Ce,d(n){n&&f(e)}}}function zl(l){let e,t="‚úì Activo";return{c(){e=u("span"),e.textContent=t,this.h()},l(n){e=c(n,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-success shrink-0")},m(n,a){ne(n,e,a)},d(n){n&&f(e)}}}function Rl(l){let e,t,n,a=l[15].name+"",i,r,d,p,b=_t.cleanDescription(l[15].desc,120)+"",h,C,x,g,E,y,v=l[17]&&zl();function k(){return l[12](l[15])}return{c(){e=u("button"),t=u("div"),n=u("span"),i=S(a),r=D(),v&&v.c(),d=D(),p=u("p"),h=S(b),C=D(),this.h()},l(m){e=c(m,"BUTTON",{class:!0});var w=_(e);t=c(w,"DIV",{class:!0});var P=_(t);n=c(P,"SPAN",{class:!0});var O=_(n);i=j(O,a),O.forEach(f),r=T(P),v&&v.l(P),P.forEach(f),d=T(w),p=c(w,"P",{class:!0});var V=_(p);h=j(V,b),V.forEach(f),C=T(w),w.forEach(f),this.h()},h(){o(n,"class","font-medieval font-bold text-neutral"),o(t,"class","flex items-start justify-between gap-2 mb-1"),o(p,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=x=l[17],o(e,"class",g="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[17]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(m,w){ne(m,e,w),s(e,t),s(t,n),s(n,i),s(t,r),v&&v.m(t,null),s(e,d),s(e,p),s(p,h),s(e,C),E||(y=fe(e,"click",k),E=!0)},p(m,w){l=m,w&8&&a!==(a=l[15].name+"")&&oe(i,a),l[17]?v||(v=zl(),v.c(),v.m(t,null)):v&&(v.d(1),v=null),w&8&&b!==(b=_t.cleanDescription(l[15].desc,120)+"")&&oe(h,b),w&10&&x!==(x=l[17])&&(e.disabled=x),w&10&&g!==(g="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[17]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&o(e,"class",g)},d(m){m&&f(e),v&&v.d(),E=!1,y()}}}function Os(l){let e,t=l[0]&&l[1]&&Bl(l);return{c(){t&&t.c(),e=pt()},l(n){t&&t.l(n),e=pt()},m(n,a){t&&t.m(n,a),ne(n,e,a)},p(n,[a]){n[0]&&n[1]?t?t.p(n,a):(t=Bl(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(n){n&&f(e),t&&t.d(n)}}}function Ps(l,e,t){let{isOpen:n=!1}=e,{combatant:a=null}=e;const i=Ut();let r="",d=[],p=!1;const b=$l(async()=>{if(!r.trim()){t(3,d=[]);return}t(4,p=!0);try{const m=await _t.searchConditions(r);t(3,d=m.results)}catch(m){console.error("Error searching conditions:",m),t(3,d=[])}finally{t(4,p=!1)}},300);function h(m){if(!a||!m.trim())return;if((Array.isArray(a.conditions)?a.conditions:[]).includes(m)){console.log("Condici√≥n ya existe:",m);return}console.log("Agregando condici√≥n:",m),i("add",m),t(2,r=""),t(3,d=[])}function C(m){a&&(console.log("Removiendo condici√≥n:",m),i("remove",m))}function x(){t(2,r=""),t(3,d=[]),i("close")}function g(m){m.key==="Escape"&&x()}const E=m=>C(m);function y(){r=this.value,t(2,r)}const v=m=>h(m.name),k=()=>h(r.trim());return l.$$set=m=>{"isOpen"in m&&t(0,n=m.isOpen),"combatant"in m&&t(1,a=m.combatant)},[n,a,r,d,p,b,h,C,x,g,E,y,v,k]}class Ms extends gt{constructor(e){super(),xt(this,e,Ps,Os,Ct,{isOpen:0,combatant:1})}}function ql(l,e,t){const n=l.slice();return n[45]=e[t],n[47]=t,n}function Fl(l){let e,t,n,a,i,r,d="‚úï",p,b;return{c(){e=u("div"),t=u("div"),n=u("span"),a=S(l[4]),i=D(),r=u("button"),r.textContent=d,this.h()},l(h){e=c(h,"DIV",{class:!0});var C=_(e);t=c(C,"DIV",{class:!0});var x=_(t);n=c(x,"SPAN",{});var g=_(n);a=j(g,l[4]),g.forEach(f),i=T(x),r=c(x,"BUTTON",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-4tcifc"&&(r.textContent=d),x.forEach(f),C.forEach(f),this.h()},h(){o(r,"class","btn btn-sm"),o(t,"class","alert alert-error flex justify-between items-center"),o(e,"class","container mx-auto p-4")},m(h,C){ne(h,e,C),s(e,t),s(t,n),s(n,a),s(t,i),s(t,r),p||(b=fe(r,"click",l[26]),p=!0)},p(h,C){C[0]&16&&oe(a,h[4])},d(h){h&&f(e),p=!1,b()}}}function Ns(l){let e,t,n,a,i,r=l[0].name+"",d,p,b,h,C,x=l[0].round+"",g,E,y,v,k=l[1].length+"",m,w,P,O,V,H,A,L,M=l[12]&&Gl(l),R=l[11]&&Wl(l);const $=[Ss,js],I=[];function W(B,N){return B[1].length===0?0:1}return H=W(l),A=I[H]=$[H](l),{c(){e=u("div"),t=u("div"),n=u("div"),a=u("div"),i=u("h2"),d=S(r),p=D(),b=u("div"),h=u("div"),C=S("üîÑ Ronda "),g=S(x),E=D(),y=u("div"),v=S("üë• "),m=S(k),w=S(" Combatientes"),P=D(),M&&M.c(),O=D(),R&&R.c(),V=D(),A.c(),this.h()},l(B){e=c(B,"DIV",{class:!0});var N=_(e);t=c(N,"DIV",{class:!0});var q=_(t);n=c(q,"DIV",{class:!0});var Z=_(n);a=c(Z,"DIV",{class:!0});var ae=_(a);i=c(ae,"H2",{class:!0});var J=_(i);d=j(J,r),J.forEach(f),p=T(ae),b=c(ae,"DIV",{class:!0});var U=_(b);h=c(U,"DIV",{class:!0});var G=_(h);C=j(G,"üîÑ Ronda "),g=j(G,x),G.forEach(f),E=T(U),y=c(U,"DIV",{class:!0});var se=_(y);v=j(se,"üë• "),m=j(se,k),w=j(se," Combatientes"),se.forEach(f),U.forEach(f),ae.forEach(f),P=T(Z),M&&M.l(Z),Z.forEach(f),O=T(q),R&&R.l(q),q.forEach(f),V=T(N),A.l(N),N.forEach(f),this.h()},h(){o(i,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),o(h,"class","badge badge-ornate badge-md"),o(y,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),o(b,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),o(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),o(n,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),o(t,"class","card-parchment mb-6 corner-ornament"),o(e,"class","p-4 max-w-5xl mx-auto")},m(B,N){ne(B,e,N),s(e,t),s(t,n),s(n,a),s(a,i),s(i,d),s(a,p),s(a,b),s(b,h),s(h,C),s(h,g),s(b,E),s(b,y),s(y,v),s(y,m),s(y,w),s(n,P),M&&M.m(n,null),s(t,O),R&&R.m(t,null),s(e,V),I[H].m(e,null),L=!0},p(B,N){(!L||N[0]&1)&&r!==(r=B[0].name+"")&&oe(d,r),(!L||N[0]&1)&&x!==(x=B[0].round+"")&&oe(g,x),(!L||N[0]&2)&&k!==(k=B[1].length+"")&&oe(m,k),B[12]?M?M.p(B,N):(M=Gl(B),M.c(),M.m(n,null)):M&&(M.d(1),M=null),B[11]?R?R.p(B,N):(R=Wl(B),R.c(),R.m(t,null)):R&&(R.d(1),R=null);let q=H;H=W(B),H===q?I[H].p(B,N):(Yt(),Ke(I[q],1,1,()=>{I[q]=null}),Zt(),A=I[H],A?A.p(B,N):(A=I[H]=$[H](B),A.c()),We(A,1),A.m(e,null))},i(B){L||(We(A),L=!0)},o(B){Ke(A),L=!1},d(B){B&&f(e),M&&M.d(),R&&R.d(),I[H].d()}}}function As(l){let e,t,n,a="‚öîÔ∏è",i,r,d="No hay combate activo",p,b,h="El DM debe iniciar un encuentro para comenzar la batalla",C;function x(y,v){return y[12]?Us:Bs}let g=x(l),E=g(l);return{c(){e=u("div"),t=u("div"),n=u("div"),n.textContent=a,i=D(),r=u("h2"),r.textContent=d,p=D(),b=u("p"),b.textContent=h,C=D(),E.c(),this.h()},l(y){e=c(y,"DIV",{class:!0});var v=_(e);t=c(v,"DIV",{class:!0});var k=_(t);n=c(k,"DIV",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-19xxu84"&&(n.textContent=a),i=T(k),r=c(k,"H2",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-itogws"&&(r.textContent=d),p=T(k),b=c(k,"P",{class:!0,"data-svelte-h":!0}),z(b)!=="svelte-1smrxik"&&(b.textContent=h),C=T(k),E.l(k),k.forEach(f),v.forEach(f),this.h()},h(){o(n,"class","text-6xl mb-4"),o(r,"class","text-3xl font-medieval text-neutral mb-4"),o(b,"class","text-neutral/70 font-body mb-6"),o(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),o(e,"class","flex items-center justify-center h-full p-4")},m(y,v){ne(y,e,v),s(e,t),s(t,n),s(t,i),s(t,r),s(t,p),s(t,b),s(t,C),E.m(t,null)},p(y,v){g===(g=x(y))&&E?E.p(y,v):(E.d(1),E=g(y),E&&(E.c(),E.m(t,null)))},i:Ce,o:Ce,d(y){y&&f(e),E.d()}}}function Ls(l){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=u("div"),e.innerHTML=t,this.h()},l(n){e=c(n,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center justify-center h-full")},m(n,a){ne(n,e,a)},p:Ce,i:Ce,o:Ce,d(n){n&&f(e)}}}function Gl(l){let e,t,n='<span class="text-lg">‚ûï</span> Agregar',a,i,r,d="‚ñ∂Ô∏è",p,b,h,C,x="üèÅ Finalizar",g,E;return{c(){e=u("div"),t=u("button"),t.innerHTML=n,a=D(),i=u("button"),r=u("span"),r.textContent=d,p=S(" Siguiente Turno"),h=D(),C=u("button"),C.textContent=x,this.h()},l(y){e=c(y,"DIV",{class:!0});var v=_(e);t=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sdwydq"&&(t.innerHTML=n),a=T(v),i=c(v,"BUTTON",{class:!0});var k=_(i);r=c(k,"SPAN",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-vhmvlx"&&(r.textContent=d),p=j(k," Siguiente Turno"),k.forEach(f),h=T(v),C=c(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1oa32z5"&&(C.textContent=x),v.forEach(f),this.h()},h(){o(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),o(r,"class","text-lg"),o(i,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),i.disabled=b=l[1].length===0,o(C,"class","btn btn-error btn-sm flex-1 sm:flex-none"),o(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(y,v){ne(y,e,v),s(e,t),s(e,a),s(e,i),s(i,r),s(i,p),s(e,h),s(e,C),g||(E=[fe(t,"click",l[28]),fe(i,"click",l[22]),fe(C,"click",l[14])],g=!0)},p(y,v){v[0]&2&&b!==(b=y[1].length===0)&&(i.disabled=b)},d(y){y&&f(e),g=!1,at(E)}}}function Wl(l){let e,t,n="TURNO ACTUAL",a,i,r=l[11].name+"",d;return{c(){e=u("div"),t=u("p"),t.textContent=n,a=D(),i=u("p"),d=S(r),this.h()},l(p){e=c(p,"DIV",{class:!0});var b=_(e);t=c(b,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-j3qdhu"&&(t.textContent=n),a=T(b),i=c(b,"P",{class:!0});var h=_(i);d=j(h,r),h.forEach(f),b.forEach(f),this.h()},h(){o(t,"class","text-sm font-medieval text-neutral/70 mb-1"),o(i,"class","text-2xl font-bold font-medieval text-neutral"),o(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(p,b){ne(p,e,b),s(e,t),s(e,a),s(e,i),s(i,d)},p(p,b){b[0]&2048&&r!==(r=p[11].name+"")&&oe(d,r)},d(p){p&&f(e)}}}function js(l){let e,t,n=Re(l[1]),a=[];for(let r=0;r<n.length;r+=1)a[r]=Jl(ql(l,n,r));const i=r=>Ke(a[r],1,1,()=>{a[r]=null});return{c(){e=u("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=c(r,"DIV",{class:!0});var d=_(e);for(let p=0;p<a.length;p+=1)a[p].l(d);d.forEach(f),this.h()},h(){o(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,d){ne(r,e,d);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);t=!0},p(r,d){if(d[0]&462851){n=Re(r[1]);let p;for(p=0;p<n.length;p+=1){const b=ql(r,n,p);a[p]?(a[p].p(b,d),We(a[p],1)):(a[p]=Jl(b),a[p].c(),We(a[p],1),a[p].m(e,null))}for(Yt(),p=n.length;p<a.length;p+=1)i(p);Zt()}},i(r){if(!t){for(let d=0;d<n.length;d+=1)We(a[d]);t=!0}},o(r){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)Ke(a[d]);t=!1},d(r){r&&f(e),ht(a,r)}}}function Ss(l){let e,t,n="üé≤",a,i,r="Sin combatientes",d,p,b=l[12]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",h;return{c(){e=u("div"),t=u("div"),t.textContent=n,a=D(),i=u("p"),i.textContent=r,d=D(),p=u("p"),h=S(b),this.h()},l(C){e=c(C,"DIV",{class:!0});var x=_(e);t=c(x,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-9xsxws"&&(t.textContent=n),a=T(x),i=c(x,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-180lhql"&&(i.textContent=r),d=T(x),p=c(x,"P",{class:!0});var g=_(p);h=j(g,b),g.forEach(f),x.forEach(f),this.h()},h(){o(t,"class","text-4xl mb-3"),o(i,"class","text-xl font-medieval text-neutral mb-2"),o(p,"class","text-neutral/70 font-body"),o(e,"class","card-parchment p-12 text-center")},m(C,x){ne(C,e,x),s(e,t),s(e,a),s(e,i),s(e,d),s(e,p),s(p,h)},p(C,x){x[0]&4096&&b!==(b=C[12]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&oe(h,b)},i:Ce,o:Ce,d(C){C&&f(e)}}}function Jl(l){let e,t;return e=new hn({props:{combatant:l[45],isCurrentTurn:l[47]===l[0].turnIndex%l[1].length,isDM:!!l[12]}}),e.$on("updateHP",l[17]),e.$on("addCondition",l[18]),e.$on("remove",l[16]),{c(){Bt(e.$$.fragment)},l(n){St(e.$$.fragment,n)},m(n,a){jt(e,n,a),t=!0},p(n,a){const i={};a[0]&2&&(i.combatant=n[45]),a[0]&3&&(i.isCurrentTurn=n[47]===n[0].turnIndex%n[1].length),a[0]&4096&&(i.isDM=!!n[12]),e.$set(i)},i(n){t||(We(e.$$.fragment,n),t=!0)},o(n){Ke(e.$$.fragment,n),t=!1},d(n){Lt(e,n)}}}function Bs(l){let e,t="Esperando que el DM inicie el combate...";return{c(){e=u("p"),e.textContent=t,this.h()},l(n){e=c(n,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){o(e,"class","text-sm text-neutral/50 italic")},m(n,a){ne(n,e,a)},p:Ce,d(n){n&&f(e)}}}function Us(l){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,n,a;return{c(){e=u("button"),e.innerHTML=t,this.h()},l(i){e=c(i,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){o(e,"class","btn btn-dnd btn-lg")},m(i,r){ne(i,e,r),n||(a=fe(e,"click",l[27]),n=!0)},p:Ce,d(i){i&&f(e),n=!1,a()}}}function Ql(l){let e,t,n,a="‚öîÔ∏è Iniciar Encuentro",i,r,d,p='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro</span>',b,h,C,x,g,E="Cancelar",y,v,k,m="‚öîÔ∏è",w,P,O,V;return{c(){e=u("div"),t=u("div"),n=u("h3"),n.textContent=a,i=D(),r=u("div"),d=u("label"),d.innerHTML=p,b=D(),h=u("input"),C=D(),x=u("div"),g=u("button"),g.textContent=E,y=D(),v=u("button"),k=u("span"),k.textContent=m,w=S(`\r
          Iniciar Combate`),this.h()},l(H){e=c(H,"DIV",{class:!0});var A=_(e);t=c(A,"DIV",{class:!0});var L=_(t);n=c(L,"H3",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-jkbohq"&&(n.textContent=a),i=T(L),r=c(L,"DIV",{class:!0});var M=_(r);d=c(M,"LABEL",{class:!0,"data-svelte-h":!0}),z(d)!=="svelte-13njkxf"&&(d.innerHTML=p),b=T(M),h=c(M,"INPUT",{type:!0,placeholder:!0,class:!0}),M.forEach(f),C=T(L),x=c(L,"DIV",{class:!0});var R=_(x);g=c(R,"BUTTON",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-173ap95"&&(g.textContent=E),y=T(R),v=c(R,"BUTTON",{class:!0});var $=_(v);k=c($,"SPAN",{class:!0,"data-svelte-h":!0}),z(k)!=="svelte-v5ojki"&&(k.textContent=m),w=j($,`\r
          Iniciar Combate`),$.forEach(f),R.forEach(f),L.forEach(f),A.forEach(f),this.h()},h(){o(n,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),o(d,"class","label"),o(h,"type","text"),o(h,"placeholder","Ej: Emboscada de Orcos"),o(h,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 text-lg"),o(r,"class","form-control"),o(g,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),o(k,"class","text-xl"),o(v,"class","btn btn-dnd"),v.disabled=P=!l[7].trim(),o(x,"class","modal-action justify-center gap-4"),o(t,"class","modal-box card-parchment border-4 border-secondary"),o(e,"class","modal modal-open z-50")},m(H,A){ne(H,e,A),s(e,t),s(t,n),s(t,i),s(t,r),s(r,d),s(r,b),s(r,h),Ee(h,l[7]),s(t,C),s(t,x),s(x,g),s(x,y),s(x,v),s(v,k),s(v,w),O||(V=[fe(h,"input",l[29]),fe(g,"click",l[30]),fe(v,"click",l[13])],O=!0)},p(H,A){A[0]&128&&h.value!==H[7]&&Ee(h,H[7]),A[0]&128&&P!==(P=!H[7].trim())&&(v.disabled=P)},d(H){H&&f(e),O=!1,at(V)}}}function zs(l){let e,t,n,a,i,r,d,p,b,h,C,x,g,E,y,v,k,m=l[4]&&Fl(l);const w=[Ls,As,Ns],P=[];function O(I,W){return I[3]?0:I[0]?2:1}i=O(l),r=P[i]=w[i](l);let V=l[6]&&Ql(l);function H(I){l[31](I)}let A={combatant:l[10]};l[8]!==void 0&&(A.isOpen=l[8]),b=new ws({props:A}),Wt.push(()=>Jt(b,"isOpen",H)),b.$on("apply",l[19]),b.$on("close",l[32]);function L(I){l[33](I)}let M={combatant:l[10]};l[9]!==void 0&&(M.isOpen=l[9]),x=new Ms({props:M}),Wt.push(()=>Jt(x,"isOpen",L)),x.$on("add",l[20]),x.$on("remove",l[21]),x.$on("close",l[34]);function R(I){l[35](I)}let $={players:l[2]};return l[5]!==void 0&&($.isOpen=l[5]),y=new gs({props:$}),Wt.push(()=>Jt(y,"isOpen",R)),y.$on("add",l[15]),y.$on("close",l[36]),{c(){e=u("div"),m&&m.c(),t=D(),n=u("div"),a=u("div"),r.c(),d=D(),V&&V.c(),p=D(),Bt(b.$$.fragment),C=D(),Bt(x.$$.fragment),E=D(),Bt(y.$$.fragment),this.h()},l(I){e=c(I,"DIV",{class:!0});var W=_(e);m&&m.l(W),t=T(W),n=c(W,"DIV",{class:!0});var B=_(n);a=c(B,"DIV",{class:!0});var N=_(a);r.l(N),N.forEach(f),B.forEach(f),W.forEach(f),d=T(I),V&&V.l(I),p=T(I),St(b.$$.fragment,I),C=T(I),St(x.$$.fragment,I),E=T(I),St(y.$$.fragment,I),this.h()},h(){o(a,"class","flex-1"),o(n,"class","flex flex-1"),o(e,"class","min-h-screen flex flex-col")},m(I,W){ne(I,e,W),m&&m.m(e,null),s(e,t),s(e,n),s(n,a),P[i].m(a,null),ne(I,d,W),V&&V.m(I,W),ne(I,p,W),jt(b,I,W),ne(I,C,W),jt(x,I,W),ne(I,E,W),jt(y,I,W),k=!0},p(I,W){I[4]?m?m.p(I,W):(m=Fl(I),m.c(),m.m(e,t)):m&&(m.d(1),m=null);let B=i;i=O(I),i===B?P[i].p(I,W):(Yt(),Ke(P[B],1,1,()=>{P[B]=null}),Zt(),r=P[i],r?r.p(I,W):(r=P[i]=w[i](I),r.c()),We(r,1),r.m(a,null)),I[6]?V?V.p(I,W):(V=Ql(I),V.c(),V.m(p.parentNode,p)):V&&(V.d(1),V=null);const N={};W[0]&1024&&(N.combatant=I[10]),!h&&W[0]&256&&(h=!0,N.isOpen=I[8],Qt(()=>h=!1)),b.$set(N);const q={};W[0]&1024&&(q.combatant=I[10]),!g&&W[0]&512&&(g=!0,q.isOpen=I[9],Qt(()=>g=!1)),x.$set(q);const Z={};W[0]&4&&(Z.players=I[2]),!v&&W[0]&32&&(v=!0,Z.isOpen=I[5],Qt(()=>v=!1)),y.$set(Z)},i(I){k||(We(r),We(b.$$.fragment,I),We(x.$$.fragment,I),We(y.$$.fragment,I),k=!0)},o(I){Ke(r),Ke(b.$$.fragment,I),Ke(x.$$.fragment,I),Ke(y.$$.fragment,I),k=!1},d(I){I&&(f(e),f(d),f(p),f(C),f(E)),m&&m.d(),P[i].d(),V&&V.d(I),Lt(b,I),Lt(x,I),Lt(y,I)}}}function Rs(l,e,t){let n,a,i,r,d;ul(l,on,F=>t(24,r=F)),ul(l,an,F=>t(25,d=F)),rn.set("Combate");let p=null,b=null,h=[],C=[],x=!0,g="",E=!1,y=!1,v="",k=!1,m=!1,w=null,P=null,O=null;const V=cn(dn);nn(async()=>{await L(),await M(),await H()}),sn(()=>{P&&P(),O&&O()});async function H(){try{t(3,x=!0);const F=dl(V,"encounters"),ie=fl(F,Kt("campaignId","==",n),Kt("isActive","==",!0));P=pl(ie,Y=>{if(Y.empty)t(0,b=null),t(1,h=[]),O&&(O(),O=null);else{const Q=Y.docs[0];t(0,b={id:Q.id,...Q.data()}),!O&&b&&A(b.id)}t(3,x=!1)},Y=>{console.error("Error en listener de encuentro:",Y),t(4,g=Y.message),t(3,x=!1)})}catch(F){t(4,g=F.message),t(3,x=!1)}}function A(F){const ie=dl(V,"combatants"),Y=fl(ie,Kt("encounterId","==",F),un("initiative","desc"));O=pl(Y,Q=>{if(t(1,h=Q.docs.map(re=>({id:re.id,...re.data()}))),w){const re=h.find(ve=>ve.id===w.id);re&&t(10,w=re)}},Q=>{console.error("Error en listener de combatientes:",Q)})}async function L(){try{t(23,p=await Qe.getCampaign(n))}catch(F){t(4,g=F.message)}}async function M(){try{t(2,C=await Qe.getCampaignCharacters(n))}catch(F){console.error("Error loading characters:",F)}}async function R(){if(v.trim())try{await Qe.createEncounter(n,v),t(6,y=!1),t(7,v="")}catch(F){t(4,g=F.message)}}async function $(){if(!(!b||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Qe.endEncounter(b.id)}catch(F){t(4,g=F.message)}}async function I(F){if(b)try{await Qe.addCombatant(b.id,F.detail),t(5,E=!1)}catch(ie){t(4,g=ie.message)}}async function W(F){const ie=F.detail;if(confirm(`¬øEliminar a ${ie.name} del combate?`))try{await Qe.removeCombatant(ie.id)}catch(Y){t(4,g=Y.message)}}function B(F){t(10,w=F.detail),t(8,k=!0),t(9,m=!1)}function N(F){t(10,w=F.detail),t(9,m=!0),t(8,k=!1)}async function q(F){if(w)try{const ie=F.detail,Y=Math.max(0,Math.min(w.maxHp,w.currentHp+ie));await Qe.updateCombatant(w.id,{currentHp:Y}),t(8,k=!1),t(10,w=null)}catch(ie){t(4,g=ie.message)}}async function Z(F){if(w)try{const ie=F.detail,Y=Array.isArray(w.conditions)?w.conditions:[];if(Y.includes(ie)){console.log("Condici√≥n ya existe, ignorando");return}const Q=[...Y,ie];await Qe.updateCombatant(w.id,{conditions:Q})}catch(ie){t(4,g=ie.message)}}async function ae(F){if(w)try{const ie=F.detail,Q=(Array.isArray(w.conditions)?w.conditions:[]).filter(re=>re!==ie);await Qe.updateCombatant(w.id,{conditions:Q})}catch(ie){t(4,g=ie.message)}}async function J(){if(b)try{await Qe.nextTurn(b.id)}catch(F){t(4,g=F.message)}}const U=()=>t(4,g=""),G=()=>t(6,y=!0),se=()=>t(5,E=!0);function he(){v=this.value,t(7,v)}const K=()=>{t(6,y=!1),t(7,v="")};function te(F){k=F,t(8,k)}const ee=()=>{t(8,k=!1),t(10,w=null)};function X(F){m=F,t(9,m)}const ce=()=>{t(9,m=!1),t(10,w=null)};function me(F){E=F,t(5,E)}const ge=()=>t(5,E=!1);return l.$$.update=()=>{l.$$.dirty[0]&33554432&&(n=d.params.id||""),l.$$.dirty[0]&25165824&&t(12,a=p&&r&&p.dmId===r.uid),l.$$.dirty[0]&3&&t(11,i=b&&h.length>0?h[b.turnIndex%h.length]:null)},[b,h,C,x,g,E,y,v,k,m,w,i,a,R,$,I,W,B,N,q,Z,ae,J,p,r,d,U,G,se,he,K,te,ee,X,ce,me,ge]}class Xs extends gt{constructor(e){super(),xt(this,e,Rs,zs,Ct,{},null,[-1,-1])}}export{Xs as component};
