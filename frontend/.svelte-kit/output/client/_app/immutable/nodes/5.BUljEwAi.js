import{S as gt,i as xt,s as Ct,n as Ce,d as f,o as ae,c as o,a as K,b as n,e as u,f as b,g as I,p as B,j as d,k as V,t as j,V as jt,h as z,l as oe,x as it,r as et,T as vt,u as pt,W as Yl,F as Zl,X as Xe,B as ol,v as ke,D as $l,U as Ft,Y as Gt,O as Nt,H as We,I as Ge,K as Wt,Z as Qt,Q as Ot,R as St,P as Bt,m as il,q as es,A as ts,J as Xt}from"../chunks/b1l4neni.js";import{e as Ne,o as _t,h as ls,a as Ke}from"../chunks/C6zySN1F.js";import"../chunks/IHki7fMi.js";import{p as ss}from"../chunks/CAHGdLhf.js";import{u as ns}from"../chunks/CG6d4oC4.js";import{d as Xl}from"../chunks/B0l-HeGw.js";import{e as Jt,f as cl,g as ul,h as dl,i as fl}from"../chunks/Dpq2-5VD.js";import{g as as,c as hl,q as pl,w as Kt,o as ml,a as rs}from"../chunks/eN7n43qG.js";import{c as os}from"../chunks/Bhgkhhu0.js";function bl(s,e,t){const l=s.slice();return l[11]=e[t],l}function vl(s){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-tne6n3"&&(e.textContent=t),this.h()},h(){o(e,"class","absolute -top-3 -right-3 badge badge-ornate text-sm sm:text-lg animate-bounce z-10")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function _l(s){let e,t='<span class="text-4xl sm:text-6xl">üíÄ</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1m5cl71"&&(e.innerHTML=t),this.h()},h(){o(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function gl(s){let e,t,l=s[0].armorClass+"",r;return{c(){e=d("div"),t=j("üõ°Ô∏è AC "),r=j(l),this.h()},l(i){e=u(i,"DIV",{class:!0});var a=b(e);t=B(a,"üõ°Ô∏è AC "),r=B(a,l),a.forEach(f),this.h()},h(){o(e,"class","badge badge-xs sm:badge-sm bg-info/30 text-neutral border-info/50")},m(i,a){K(i,e,a),n(e,t),n(e,r)},p(i,a){a&1&&l!==(l=i[0].armorClass+"")&&ae(r,l)},d(i){i&&f(e)}}}function xl(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',r,i,a,c,h="üóëÔ∏è Eliminar",m,p;return{c(){e=d("div"),t=d("label"),t.innerHTML=l,r=V(),i=d("ul"),a=d("li"),c=d("a"),c.textContent=h,this.h()},l(C){e=u(C,"DIV",{class:!0});var g=b(e);t=u(g,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),z(t)!=="svelte-13tftyw"&&(t.innerHTML=l),r=I(g),i=u(g,"UL",{tabindex:!0,class:!0});var y=b(i);a=u(y,"LI",{});var _=b(a);c=u(_,"A",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-hji4ll"&&(c.textContent=h),_.forEach(f),y.forEach(f),g.forEach(f),this.h()},h(){o(t,"tabindex","0"),o(t,"class","btn btn-ghost btn-xs btn-circle"),o(c,"class","text-error"),o(i,"tabindex","0"),o(i,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary text-sm"),o(e,"class","dropdown dropdown-end flex-shrink-0")},m(C,g){K(C,e,g),n(e,t),n(e,r),n(e,i),n(i,a),n(a,c),m||(p=oe(c,"click",s[9]),m=!0)},p:Ce,d(C){C&&f(e),m=!1,p()}}}function is(s){let e,t,l,r="Estado",i,a,c,h=s[4].icon+"",m,p,C,g=s[4].label+"",y,_,E,v,w,x,D;return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=r,i=V(),a=d("div"),c=d("span"),m=j(h),p=V(),C=d("span"),y=j(g),E=V(),v=d("div"),w=d("div"),this.h()},l(H){e=u(H,"DIV",{class:!0});var M=b(e);t=u(M,"DIV",{class:!0});var P=b(t);l=u(P,"SPAN",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1lnb92u"&&(l.textContent=r),i=I(P),a=u(P,"DIV",{class:!0});var k=b(a);c=u(k,"SPAN",{class:!0});var A=b(c);m=B(A,h),A.forEach(f),p=I(k),C=u(k,"SPAN",{class:!0});var U=b(C);y=B(U,g),U.forEach(f),k.forEach(f),P.forEach(f),E=I(M),v=u(M,"DIV",{class:!0});var G=b(v);w=u(G,"DIV",{class:!0,style:!0}),b(w).forEach(f),G.forEach(f),M.forEach(f),this.h()},h(){o(l,"class","text-xs font-medieval text-neutral/70"),o(c,"class","text-lg sm:text-xl"),o(C,"class",_="font-medieval text-xs sm:text-sm "+s[4].color+" font-bold"),o(a,"class","flex items-center gap-1"),o(t,"class","flex items-center justify-between gap-2"),o(w,"class",x="bg-"+s[6]+" h-full rounded-full transition-all duration-300"),vt(w,"width",s[3]+"%"),o(v,"class","w-full bg-neutral/20 rounded-full h-1.5 sm:h-2 mt-1"),o(e,"class",D="bg-"+s[6]+"/10 p-2 rounded-lg border border-"+s[6]+"/30")},m(H,M){K(H,e,M),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c),n(c,m),n(a,p),n(a,C),n(C,y),n(e,E),n(e,v),n(v,w)},p(H,M){M&16&&h!==(h=H[4].icon+"")&&ae(m,h),M&16&&g!==(g=H[4].label+"")&&ae(y,g),M&16&&_!==(_="font-medieval text-xs sm:text-sm "+H[4].color+" font-bold")&&o(C,"class",_),M&64&&x!==(x="bg-"+H[6]+" h-full rounded-full transition-all duration-300")&&o(w,"class",x),M&8&&vt(w,"width",H[3]+"%"),M&64&&D!==(D="bg-"+H[6]+"/10 p-2 rounded-lg border border-"+H[6]+"/30")&&o(e,"class",D)},d(H){H&&f(e)}}}function cs(s){let e,t,l="Puntos de Vida",r,i,a=s[0].currentHp+"",c,h,m=s[0].maxHp+"",p,C,g,y,_,E;return{c(){e=d("div"),t=d("span"),t.textContent=l,r=V(),i=d("span"),c=j(a),h=j("/"),p=j(m),C=V(),g=d("progress"),this.h()},l(v){e=u(v,"DIV",{class:!0});var w=b(e);t=u(w,"SPAN",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1a9ef08"&&(t.textContent=l),r=I(w),i=u(w,"SPAN",{class:!0});var x=b(i);c=B(x,a),h=B(x,"/"),p=B(x,m),x.forEach(f),w.forEach(f),C=I(v),g=u(v,"PROGRESS",{class:!0,max:!0}),b(g).forEach(f),this.h()},h(){o(t,"class","text-xs font-medieval text-neutral/70"),o(i,"class","font-bold text-neutral text-sm sm:text-base"),o(e,"class","flex justify-between items-center mb-1"),o(g,"class",y="progress progress-"+s[6]+" w-full h-2 sm:h-3"),g.value=_=s[0].currentHp,o(g,"max",E=s[0].maxHp)},m(v,w){K(v,e,w),n(e,t),n(e,r),n(e,i),n(i,c),n(i,h),n(i,p),K(v,C,w),K(v,g,w)},p(v,w){w&1&&a!==(a=v[0].currentHp+"")&&ae(c,a),w&1&&m!==(m=v[0].maxHp+"")&&ae(p,m),w&64&&y!==(y="progress progress-"+v[6]+" w-full h-2 sm:h-3")&&o(g,"class",y),w&1&&_!==(_=v[0].currentHp)&&(g.value=_),w&1&&E!==(E=v[0].maxHp)&&o(g,"max",E)},d(v){v&&(f(e),f(C),f(g))}}}function Cl(s){let e,t,l="Condiciones:",r,i,a=Ne(s[0].conditions),c=[];for(let h=0;h<a.length;h+=1)c[h]=yl(bl(s,a,h));return{c(){e=d("div"),t=d("span"),t.textContent=l,r=V(),i=d("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=u(h,"DIV",{class:!0});var m=b(e);t=u(m,"SPAN",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-maxnwi"&&(t.textContent=l),r=I(m),i=u(m,"DIV",{class:!0});var p=b(i);for(let C=0;C<c.length;C+=1)c[C].l(p);p.forEach(f),m.forEach(f),this.h()},h(){o(t,"class","text-xs font-medieval text-neutral/70 block mb-1"),o(i,"class","flex flex-wrap gap-1"),o(e,"class","mt-2")},m(h,m){K(h,e,m),n(e,t),n(e,r),n(e,i);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(i,null)},p(h,m){if(m&1){a=Ne(h[0].conditions);let p;for(p=0;p<a.length;p+=1){const C=bl(h,a,p);c[p]?c[p].p(C,m):(c[p]=yl(C),c[p].c(),c[p].m(i,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=a.length}},d(h){h&&f(e),it(c,h)}}}function yl(s){let e,t=s[11]+"",l;return{c(){e=d("div"),l=j(t),this.h()},l(r){e=u(r,"DIV",{class:!0});var i=b(e);l=B(i,t),i.forEach(f),this.h()},h(){o(e,"class","badge badge-xs sm:badge-sm badge-warning")},m(r,i){K(r,e,i),n(e,l)},p(r,i){i&1&&t!==(t=r[11]+"")&&ae(l,t)},d(r){r&&f(e)}}}function El(s){let e,t,l="üíö HP",r,i,a="‚ö†Ô∏è Estado",c,h;return{c(){e=d("div"),t=d("button"),t.textContent=l,r=V(),i=d("button"),i.textContent=a,this.h()},l(m){e=u(m,"DIV",{class:!0});var p=b(e);t=u(p,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-1u8cl5l"&&(t.textContent=l),r=I(p),i=u(p,"BUTTON",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-1lc9vql"&&(i.textContent=a),p.forEach(f),this.h()},h(){o(t,"class","btn btn-xs sm:btn-sm btn-success flex-1"),o(i,"class","btn btn-xs sm:btn-sm btn-warning flex-1"),o(e,"class","flex gap-2 mt-3")},m(m,p){K(m,e,p),n(e,t),n(e,r),n(e,i),c||(h=[oe(t,"click",s[7]),oe(i,"click",s[8])],c=!0)},p:Ce,d(m){m&&f(e),c=!1,et(h)}}}function us(s){let e,t,l,r,i,a,c,h,m,p=s[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",C,g,y,_,E,v=s[0].name+"",w,x,D,H,M,P=s[0].initiative+"",k,A,U,G,S,R,T,F,L=s[1]&&vl(),O=s[5]&&_l(),X=s[2]&&gl(s),se=s[2]&&xl(s);function ie(q,Y){return q[2]?cs:is}let ne=ie(s),ee=ne(s),Q=s[0].conditions&&s[0].conditions.length>0&&Cl(s),te=s[2]&&El(s);return{c(){e=d("div"),L&&L.c(),t=V(),O&&O.c(),l=V(),r=d("div"),i=d("div"),a=d("div"),c=d("div"),h=d("div"),m=d("span"),C=j(p),y=V(),_=d("div"),E=d("h3"),w=j(v),x=V(),D=d("div"),H=d("div"),M=j("üé≤ "),k=j(P),A=V(),X&&X.c(),U=V(),se&&se.c(),G=V(),S=d("div"),ee.c(),R=V(),Q&&Q.c(),T=V(),te&&te.c(),this.h()},l(q){e=u(q,"DIV",{class:!0});var Y=b(e);L&&L.l(Y),t=I(Y),O&&O.l(Y),l=I(Y),r=u(Y,"DIV",{class:!0});var Z=b(r);i=u(Z,"DIV",{class:!0});var ce=b(i);a=u(ce,"DIV",{class:!0});var re=b(a);c=u(re,"DIV",{class:!0});var ge=b(c);h=u(ge,"DIV",{class:!0});var be=b(h);m=u(be,"SPAN",{class:!0});var _e=b(m);C=B(_e,p),_e.forEach(f),be.forEach(f),ge.forEach(f),re.forEach(f),y=I(ce),_=u(ce,"DIV",{class:!0});var W=b(_);E=u(W,"H3",{class:!0});var fe=b(E);w=B(fe,v),fe.forEach(f),x=I(W),D=u(W,"DIV",{class:!0});var de=b(D);H=u(de,"DIV",{class:!0});var le=b(H);M=B(le,"üé≤ "),k=B(le,P),le.forEach(f),A=I(de),X&&X.l(de),de.forEach(f),W.forEach(f),U=I(ce),se&&se.l(ce),ce.forEach(f),G=I(Z),S=u(Z,"DIV",{class:!0});var N=b(S);ee.l(N),N.forEach(f),R=I(Z),Q&&Q.l(Z),T=I(Z),te&&te.l(Z),Z.forEach(f),Y.forEach(f),this.h()},h(){o(m,"class","text-xl sm:text-2xl"),o(h,"class","bg-primary/20 flex items-center justify-center"),o(c,"class",g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(s[1]?"ring-secondary":"ring-primary/50")),o(a,"class","avatar flex-shrink-0"),o(E,"class","font-medieval text-base sm:text-lg text-neutral font-bold truncate"),o(H,"class","badge badge-xs sm:badge-sm bg-primary/30 text-neutral border-primary/50"),o(D,"class","flex flex-wrap gap-1 sm:gap-2 mt-1"),o(_,"class","flex-1 min-w-0"),o(i,"class","flex items-start gap-2 sm:gap-3"),o(S,"class","mt-2 sm:mt-3"),o(r,"class","card-body p-3 sm:p-4"),o(e,"class",F="card-parchment corner-ornament relative "+(s[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(s[5]?"opacity-50":""))},m(q,Y){K(q,e,Y),L&&L.m(e,null),n(e,t),O&&O.m(e,null),n(e,l),n(e,r),n(r,i),n(i,a),n(a,c),n(c,h),n(h,m),n(m,C),n(i,y),n(i,_),n(_,E),n(E,w),n(_,x),n(_,D),n(D,H),n(H,M),n(H,k),n(D,A),X&&X.m(D,null),n(i,U),se&&se.m(i,null),n(r,G),n(r,S),ee.m(S,null),n(r,R),Q&&Q.m(r,null),n(r,T),te&&te.m(r,null)},p(q,[Y]){q[1]?L||(L=vl(),L.c(),L.m(e,t)):L&&(L.d(1),L=null),q[5]?O||(O=_l(),O.c(),O.m(e,l)):O&&(O.d(1),O=null),Y&1&&p!==(p=q[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(C,p),Y&2&&g!==(g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(q[1]?"ring-secondary":"ring-primary/50"))&&o(c,"class",g),Y&1&&v!==(v=q[0].name+"")&&ae(w,v),Y&1&&P!==(P=q[0].initiative+"")&&ae(k,P),q[2]?X?X.p(q,Y):(X=gl(q),X.c(),X.m(D,null)):X&&(X.d(1),X=null),q[2]?se?se.p(q,Y):(se=xl(q),se.c(),se.m(i,null)):se&&(se.d(1),se=null),ne===(ne=ie(q))&&ee?ee.p(q,Y):(ee.d(1),ee=ne(q),ee&&(ee.c(),ee.m(S,null))),q[0].conditions&&q[0].conditions.length>0?Q?Q.p(q,Y):(Q=Cl(q),Q.c(),Q.m(r,T)):Q&&(Q.d(1),Q=null),q[2]?te?te.p(q,Y):(te=El(q),te.c(),te.m(r,null)):te&&(te.d(1),te=null),Y&34&&F!==(F="card-parchment corner-ornament relative "+(q[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(q[5]?"opacity-50":""))&&o(e,"class",F)},i:Ce,o:Ce,d(q){q&&f(e),L&&L.d(),O&&O.d(),X&&X.d(),se&&se.d(),ee.d(),Q&&Q.d(),te&&te.d()}}}function ds(s){return s<=0?{label:"Ca√≠do",icon:"üíÄ",color:"text-error"}:s<25?{label:"Gravemente herido",icon:"ü©∏",color:"text-error"}:s<50?{label:"Herido",icon:"ü§ï",color:"text-warning"}:s<75?{label:"Lastimado",icon:"üò£",color:"text-warning"}:s<100?{label:"Ligeramente herido",icon:"üòê",color:"text-success"}:{label:"Ileso",icon:"üí™",color:"text-success"}}function fs(s,e,t){let l,r,i,a,{combatant:c}=e,{isCurrentTurn:h=!1}=e,{isDM:m=!1}=e;const p=jt();function C(){p("updateHP",c)}function g(){p("addCondition",c)}function y(){p("remove",c)}return s.$$set=_=>{"combatant"in _&&t(0,c=_.combatant),"isCurrentTurn"in _&&t(1,h=_.isCurrentTurn),"isDM"in _&&t(2,m=_.isDM)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=c.currentHp/c.maxHp*100),s.$$.dirty&8&&t(6,r=l>50?"success":l>25?"warning":"error"),s.$$.dirty&1&&t(5,i=c.currentHp<=0),s.$$.dirty&8&&t(4,a=ds(l))},[c,h,m,l,a,i,r,C,g,y]}class hs extends gt{constructor(e){super(),xt(this,e,fs,us,Ct,{combatant:0,isCurrentTurn:1,isDM:2})}}function kl(s,e,t){const l=s.slice();return l[49]=e[t],l}function wl(s,e,t){const l=s.slice();return l[46]=e[t],l}function Dl(s){let e,t,l,r,i="‚öîÔ∏è Agregar Combatiente",a,c,h,m,p,C,g,y,_,E,v,w,x,D="‚úï",H,M,P,k,A,U="Cancelar",G,S,R,T="‚öîÔ∏è",F,L,O,X;function se(ee,Q){return ee[2]==="player"?ms:ps}let ie=se(s),ne=ie(s);return{c(){e=d("div"),t=d("div"),l=d("div"),r=d("h3"),r.textContent=i,a=V(),c=d("div"),h=d("button"),m=j("üßù Jugador"),g=V(),y=d("button"),_=j("üêâ Monstruo"),w=V(),x=d("button"),x.textContent=D,H=V(),M=d("div"),ne.c(),P=V(),k=d("div"),A=d("button"),A.textContent=U,G=V(),S=d("button"),R=d("span"),R.textContent=T,F=j(" Agregar al Combate"),this.h()},l(ee){e=u(ee,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var Q=b(e);t=u(Q,"DIV",{class:!0});var te=b(t);l=u(te,"DIV",{class:!0});var q=b(l);r=u(q,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(r)!=="svelte-cw4yad"&&(r.textContent=i),a=I(q),c=u(q,"DIV",{class:!0,role:!0,"aria-label":!0});var Y=b(c);h=u(Y,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var Z=b(h);m=B(Z,"üßù Jugador"),Z.forEach(f),g=I(Y),y=u(Y,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var ce=b(y);_=B(ce,"üêâ Monstruo"),ce.forEach(f),Y.forEach(f),w=I(q),x=u(q,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(x)!=="svelte-1j9u8d0"&&(x.textContent=D),q.forEach(f),H=I(te),M=u(te,"DIV",{class:!0});var re=b(M);ne.l(re),re.forEach(f),P=I(te),k=u(te,"DIV",{class:!0});var ge=b(k);A=u(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),z(A)!=="svelte-toewbe"&&(A.textContent=U),G=I(ge),S=u(ge,"BUTTON",{class:!0});var be=b(S);R=u(be,"SPAN",{class:!0,"data-svelte-h":!0}),z(R)!=="svelte-v5ojki"&&(R.textContent=T),F=B(be," Agregar al Combate"),be.forEach(f),ge.forEach(f),te.forEach(f),Q.forEach(f),this.h()},h(){o(r,"id","modal-title"),o(r,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),o(h,"role","tab"),o(h,"aria-selected",p=s[2]==="player"),o(h,"aria-controls","player-panel"),o(h,"class",C="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline")),o(y,"role","tab"),o(y,"aria-selected",E=s[2]==="monster"),o(y,"aria-controls","monster-panel"),o(y,"class",v="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline")),o(c,"class","flex gap-2"),o(c,"role","tablist"),o(c,"aria-label","Tipo de combatiente"),o(x,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),o(x,"aria-label","Cerrar modal"),o(l,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),o(M,"class","flex-1 overflow-y-auto p-4 space-y-4"),o(A,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),o(R,"class","text-xl"),o(S,"class","btn btn-dnd w-full md:w-auto"),S.disabled=L=s[2]==="player"?!s[16]:!s[15],o(k,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),o(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),o(e,"class","modal modal-open z-50"),o(e,"role","dialog"),o(e,"aria-modal","true"),o(e,"aria-labelledby","modal-title")},m(ee,Q){K(ee,e,Q),n(e,t),n(t,l),n(l,r),n(l,a),n(l,c),n(c,h),n(h,m),n(c,g),n(c,y),n(y,_),n(l,w),n(l,x),n(t,H),n(t,M),ne.m(M,null),n(t,P),n(t,k),n(k,A),n(k,G),n(k,S),n(S,R),n(S,F),O||(X=[oe(h,"click",s[23]),oe(y,"click",s[24]),oe(x,"click",s[22]),oe(A,"click",s[22]),oe(S,"click",function(){Yl(s[2]==="player"?s[18]:s[21])&&(s[2]==="player"?s[18]:s[21]).apply(this,arguments)}),oe(e,"keydown",s[38])],O=!0)},p(ee,Q){s=ee,Q[0]&4&&p!==(p=s[2]==="player")&&o(h,"aria-selected",p),Q[0]&4&&C!==(C="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline"))&&o(h,"class",C),Q[0]&4&&E!==(E=s[2]==="monster")&&o(y,"aria-selected",E),Q[0]&4&&v!==(v="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline"))&&o(y,"class",v),ie===(ie=se(s))&&ne?ne.p(s,Q):(ne.d(1),ne=ie(s),ne&&(ne.c(),ne.m(M,null))),Q[0]&98308&&L!==(L=s[2]==="player"?!s[16]:!s[15])&&(S.disabled=L)},d(ee){ee&&f(e),ne.d(),O=!1,et(X)}}}function ps(s){let e,t,l,r='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',i,a,c,h,m='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',p,C,g,y,_,E,v,w='<span class="label-text font-medieval text-neutral">Nombre <span class="text-error">*</span></span>',x,D,H,M,P,k,A,U,G='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',S,R,T,F,L,O,X,se='<span class="label-text font-medieval text-neutral">HP M√°ximo <span class="text-error">*</span></span>',ie,ne,ee,Q,te,q,Y,Z='<span class="label-text font-medieval text-neutral">AC <span class="text-error">*</span></span>',ce,re,ge,be,_e,W,fe=s[13]&&Il(),de=s[14]&&!s[13]&&Vl(),le=s[12].length>0&&!s[13]&&Hl(s),N=s[8].name&&s[9].name&&Al(s),$=s[8].initiative&&s[9].initiative&&Ml(s),he=s[8].maxHp&&s[9].maxHp&&Pl(s),ue=s[8].armorClass&&s[9].armorClass&&Ll(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=r,i=V(),a=d("input"),c=V(),h=d("label"),h.innerHTML=m,p=V(),fe&&fe.c(),C=V(),de&&de.c(),g=V(),le&&le.c(),y=V(),_=d("div"),E=d("div"),v=d("label"),v.innerHTML=w,x=V(),D=d("input"),M=V(),N&&N.c(),P=V(),k=d("div"),A=d("div"),U=d("label"),U.innerHTML=G,S=V(),R=d("input"),F=V(),$&&$.c(),L=V(),O=d("div"),X=d("label"),X.innerHTML=se,ie=V(),ne=d("input"),Q=V(),he&&he.c(),te=V(),q=d("div"),Y=d("label"),Y.innerHTML=Z,ce=V(),re=d("input"),be=V(),ue&&ue.c(),this.h()},l(J){e=u(J,"DIV",{class:!0});var pe=b(e);t=u(pe,"DIV",{class:!0});var we=b(t);l=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1s7wqfp"&&(l.innerHTML=r),i=I(we),a=u(we,"INPUT",{type:!0,placeholder:!0,class:!0}),c=I(we),h=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),z(h)!=="svelte-1b81k6w"&&(h.innerHTML=m),we.forEach(f),p=I(pe),fe&&fe.l(pe),C=I(pe),de&&de.l(pe),g=I(pe),le&&le.l(pe),y=I(pe),_=u(pe,"DIV",{class:!0});var qe=b(_);E=u(qe,"DIV",{class:!0});var Me=b(E);v=u(Me,"LABEL",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1i5ppw8"&&(v.innerHTML=w),x=I(Me),D=u(Me,"INPUT",{type:!0,placeholder:!0,class:!0}),M=I(Me),N&&N.l(Me),Me.forEach(f),P=I(qe),k=u(qe,"DIV",{class:!0});var ye=b(k);A=u(ye,"DIV",{class:!0});var De=b(A);U=u(De,"LABEL",{class:!0,"data-svelte-h":!0}),z(U)!=="svelte-wfd6ji"&&(U.innerHTML=G),S=I(De),R=u(De,"INPUT",{type:!0,min:!0,max:!0,class:!0}),F=I(De),$&&$.l(De),De.forEach(f),L=I(ye),O=u(ye,"DIV",{class:!0});var He=b(O);X=u(He,"LABEL",{class:!0,"data-svelte-h":!0}),z(X)!=="svelte-1ah5i3w"&&(X.innerHTML=se),ie=I(He),ne=u(He,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Q=I(He),he&&he.l(He),He.forEach(f),te=I(ye),q=u(ye,"DIV",{class:!0});var Oe=b(q);Y=u(Oe,"LABEL",{class:!0,"data-svelte-h":!0}),z(Y)!=="svelte-1yx9bl7"&&(Y.innerHTML=Z),ce=I(Oe),re=u(Oe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),be=I(Oe),ue&&ue.l(Oe),Oe.forEach(f),ye.forEach(f),qe.forEach(f),pe.forEach(f),this.h()},h(){o(l,"class","label"),o(a,"type","text"),o(a,"placeholder","Ej: kobold, goblin, dragon..."),o(a,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),o(h,"class","label"),o(t,"class","form-control mb-4"),o(v,"class","label"),o(D,"type","text"),o(D,"placeholder","Nombre de la criatura"),o(D,"class",H="input input-bordered bg-[#2d241c] text-base-content "+(s[8].name&&s[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(E,"class","form-control"),o(U,"class","label"),o(R,"type","number"),o(R,"min","1"),o(R,"max","100"),o(R,"class",T="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(A,"class","form-control"),o(X,"class","label"),o(ne,"type","number"),o(ne,"min","1"),o(ne,"max","999"),o(ne,"class",ee="input input-bordered bg-[#2d241c] text-base-content "+(s[8].maxHp&&s[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(O,"class","form-control"),o(Y,"class","label"),o(re,"type","number"),o(re,"min","1"),o(re,"max","30"),o(re,"class",ge="input input-bordered bg-[#2d241c] text-base-content "+(s[8].armorClass&&s[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(q,"class","form-control"),o(k,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),o(_,"class","space-y-4"),o(e,"class","space-y-4")},m(J,pe){K(J,e,pe),n(e,t),n(t,l),n(t,i),n(t,a),ke(a,s[11]),n(t,c),n(t,h),n(e,p),fe&&fe.m(e,null),n(e,C),de&&de.m(e,null),n(e,g),le&&le.m(e,null),n(e,y),n(e,_),n(_,E),n(E,v),n(E,x),n(E,D),ke(D,s[5]),n(E,M),N&&N.m(E,null),n(_,P),n(_,k),n(k,A),n(A,U),n(A,S),n(A,R),ke(R,s[3]),n(A,F),$&&$.m(A,null),n(k,L),n(k,O),n(O,X),n(O,ie),n(O,ne),ke(ne,s[6]),n(O,Q),he&&he.m(O,null),n(k,te),n(k,q),n(q,Y),n(q,ce),n(q,re),ke(re,s[7]),n(q,be),ue&&ue.m(q,null),_e||(W=[oe(a,"input",s[28]),oe(a,"input",s[19]),oe(D,"input",s[30]),oe(D,"blur",s[31]),oe(R,"input",s[32]),oe(R,"blur",s[33]),oe(ne,"input",s[34]),oe(ne,"blur",s[35]),oe(re,"input",s[36]),oe(re,"blur",s[37])],_e=!0)},p(J,pe){pe[0]&2048&&a.value!==J[11]&&ke(a,J[11]),J[13]?fe||(fe=Il(),fe.c(),fe.m(e,C)):fe&&(fe.d(1),fe=null),J[14]&&!J[13]?de||(de=Vl(),de.c(),de.m(e,g)):de&&(de.d(1),de=null),J[12].length>0&&!J[13]?le?le.p(J,pe):(le=Hl(J),le.c(),le.m(e,y)):le&&(le.d(1),le=null),pe[0]&768&&H!==(H="input input-bordered bg-[#2d241c] text-base-content "+(J[8].name&&J[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(D,"class",H),pe[0]&32&&D.value!==J[5]&&ke(D,J[5]),J[8].name&&J[9].name?N?N.p(J,pe):(N=Al(J),N.c(),N.m(E,null)):N&&(N.d(1),N=null),pe[0]&768&&T!==(T="input input-bordered bg-[#2d241c] text-base-content "+(J[8].initiative&&J[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(R,"class",T),pe[0]&8&&Xe(R.value)!==J[3]&&ke(R,J[3]),J[8].initiative&&J[9].initiative?$?$.p(J,pe):($=Ml(J),$.c(),$.m(A,null)):$&&($.d(1),$=null),pe[0]&768&&ee!==(ee="input input-bordered bg-[#2d241c] text-base-content "+(J[8].maxHp&&J[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(ne,"class",ee),pe[0]&64&&Xe(ne.value)!==J[6]&&ke(ne,J[6]),J[8].maxHp&&J[9].maxHp?he?he.p(J,pe):(he=Pl(J),he.c(),he.m(O,null)):he&&(he.d(1),he=null),pe[0]&768&&ge!==(ge="input input-bordered bg-[#2d241c] text-base-content "+(J[8].armorClass&&J[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(re,"class",ge),pe[0]&128&&Xe(re.value)!==J[7]&&ke(re,J[7]),J[8].armorClass&&J[9].armorClass?ue?ue.p(J,pe):(ue=Ll(J),ue.c(),ue.m(q,null)):ue&&(ue.d(1),ue=null)},d(J){J&&f(e),fe&&fe.d(),de&&de.d(),le&&le.d(),N&&N.d(),$&&$.d(),he&&he.d(),ue&&ue.d(),_e=!1,et(W)}}}function ms(s){var te,q,Y;let e,t,l,r='<span class="label-text font-medieval text-neutral">Seleccionar Jugador <span class="text-error">*</span></span>',i,a,c,h="-- Elegir jugador --",m,p,C,g='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',y,_,E,v,w,x,D,H,M,P=(((te=s[10])==null?void 0:te.name)||"Elegir jugador")+"",k,A,U,G,S=(((q=s[10])==null?void 0:q.maxHp)||0)+"",R,T,F=(((Y=s[10])==null?void 0:Y.armorClass)||0)+"",L,O,X,se=Ne(s[1]),ie=[];for(let Z=0;Z<se.length;Z+=1)ie[Z]=Nl(wl(s,se,Z));function ne(Z,ce){return Z[8].initiative&&Z[9].initiative?vs:bs}let ee=ne(s),Q=ee(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=r,i=V(),a=d("select"),c=d("option"),c.textContent=h;for(let Z=0;Z<ie.length;Z+=1)ie[Z].c();m=V(),p=d("div"),C=d("label"),C.innerHTML=g,y=V(),_=d("input"),v=V(),Q.c(),w=V(),x=d("div"),D=d("div"),H=d("div"),M=d("p"),k=j(P),A=V(),U=d("p"),G=j("HP: "),R=j(S),T=j(" | AC: "),L=j(F),this.h()},l(Z){e=u(Z,"DIV",{class:!0});var ce=b(e);t=u(ce,"DIV",{class:!0});var re=b(t);l=u(re,"LABEL",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-aatn1l"&&(l.innerHTML=r),i=I(re),a=u(re,"SELECT",{class:!0});var ge=b(a);c=u(ge,"OPTION",{"data-svelte-h":!0}),z(c)!=="svelte-ws9sqz"&&(c.textContent=h);for(let N=0;N<ie.length;N+=1)ie[N].l(ge);ge.forEach(f),re.forEach(f),m=I(ce),p=u(ce,"DIV",{class:!0});var be=b(p);C=u(be,"LABEL",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1kjkdwe"&&(C.innerHTML=g),y=I(be),_=u(be,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),v=I(be),Q.l(be),be.forEach(f),w=I(ce),x=u(ce,"DIV",{class:!0});var _e=b(x);D=u(_e,"DIV",{class:!0});var W=b(D);H=u(W,"DIV",{});var fe=b(H);M=u(fe,"P",{class:!0});var de=b(M);k=B(de,P),de.forEach(f),A=I(fe),U=u(fe,"P",{class:!0});var le=b(U);G=B(le,"HP: "),R=B(le,S),T=B(le," | AC: "),L=B(le,F),le.forEach(f),fe.forEach(f),W.forEach(f),_e.forEach(f),ce.forEach(f),this.h()},h(){o(l,"class","label"),c.__value="",ke(c,c.__value),c.disabled=!0,c.selected=!0,o(a,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),s[4]===void 0&&$l(()=>s[25].call(a)),o(t,"class","form-control"),o(C,"class","label"),o(_,"type","number"),o(_,"min","1"),o(_,"max","100"),o(_,"step","1"),_.required=!0,o(_,"class",E="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(p,"class","form-control"),o(M,"class","text-lg font-bold text-neutral"),o(U,"class","text-sm text-neutral/70"),o(D,"class","flex items-center gap-4"),o(x,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),o(e,"class","space-y-4")},m(Z,ce){K(Z,e,ce),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c);for(let re=0;re<ie.length;re+=1)ie[re]&&ie[re].m(a,null);ol(a,s[4],!0),n(e,m),n(e,p),n(p,C),n(p,y),n(p,_),ke(_,s[3]),n(p,v),Q.m(p,null),n(e,w),n(e,x),n(x,D),n(D,H),n(H,M),n(M,k),n(H,A),n(H,U),n(U,G),n(U,R),n(U,T),n(U,L),O||(X=[oe(a,"change",s[25]),oe(_,"input",s[26]),oe(_,"blur",s[27])],O=!0)},p(Z,ce){var re,ge,be;if(ce[0]&2){se=Ne(Z[1]);let _e;for(_e=0;_e<se.length;_e+=1){const W=wl(Z,se,_e);ie[_e]?ie[_e].p(W,ce):(ie[_e]=Nl(W),ie[_e].c(),ie[_e].m(a,null))}for(;_e<ie.length;_e+=1)ie[_e].d(1);ie.length=se.length}ce[0]&18&&ol(a,Z[4]),ce[0]&768&&E!==(E="input input-bordered bg-[#2d241c] text-base-content "+(Z[8].initiative&&Z[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(_,"class",E),ce[0]&8&&Xe(_.value)!==Z[3]&&ke(_,Z[3]),ee===(ee=ne(Z))&&Q?Q.p(Z,ce):(Q.d(1),Q=ee(Z),Q&&(Q.c(),Q.m(p,null))),ce[0]&1024&&P!==(P=(((re=Z[10])==null?void 0:re.name)||"Elegir jugador")+"")&&ae(k,P),ce[0]&1024&&S!==(S=(((ge=Z[10])==null?void 0:ge.maxHp)||0)+"")&&ae(R,S),ce[0]&1024&&F!==(F=(((be=Z[10])==null?void 0:be.armorClass)||0)+"")&&ae(L,F)},d(Z){Z&&f(e),it(ie,Z),Q.d(),O=!1,et(X)}}}function Il(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex justify-center items-center py-4")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function Vl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){o(e,"class","alert bg-warning/20 border-warning/40")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function Hl(s){let e,t,l,r=s[12].length+"",i,a,c=s[12].length!==1?"s":"",h,m,p=s[12].length!==1?"s":"",C,g,y,_=Ne(s[12]),E=[];for(let v=0;v<_.length;v+=1)E[v]=Tl(kl(s,_,v));return{c(){e=d("div"),t=d("p"),l=j("üìñ "),i=j(r),a=j(" criatura"),h=j(c),m=j(" encontrada"),C=j(p),g=V(),y=d("div");for(let v=0;v<E.length;v+=1)E[v].c();this.h()},l(v){e=u(v,"DIV",{class:!0});var w=b(e);t=u(w,"P",{class:!0});var x=b(t);l=B(x,"üìñ "),i=B(x,r),a=B(x," criatura"),h=B(x,c),m=B(x," encontrada"),C=B(x,p),x.forEach(f),g=I(w),y=u(w,"DIV",{class:!0});var D=b(y);for(let H=0;H<E.length;H+=1)E[H].l(D);D.forEach(f),w.forEach(f),this.h()},h(){o(t,"class","text-xs font-medieval text-neutral/70 mb-2"),o(y,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),o(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(v,w){K(v,e,w),n(e,t),n(t,l),n(t,i),n(t,a),n(t,h),n(t,m),n(t,C),n(e,g),n(e,y);for(let x=0;x<E.length;x+=1)E[x]&&E[x].m(y,null)},p(v,w){if(w[0]&4096&&r!==(r=v[12].length+"")&&ae(i,r),w[0]&4096&&c!==(c=v[12].length!==1?"s":"")&&ae(h,c),w[0]&4096&&p!==(p=v[12].length!==1?"s":"")&&ae(C,p),w[0]&1052672){_=Ne(v[12]);let x;for(x=0;x<_.length;x+=1){const D=kl(v,_,x);E[x]?E[x].p(D,w):(E[x]=Tl(D),E[x].c(),E[x].m(y,null))}for(;x<E.length;x+=1)E[x].d(1);E.length=_.length}},d(v){v&&f(e),it(E,v)}}}function Tl(s){let e,t,l,r=s[49].name+"",i,a,c,h=s[49].type+"",m,p,C=s[49].challenge_rating+"",g,y,_,E="Seleccionar",v,w,x;function D(){return s[29](s[49])}return{c(){e=d("button"),t=d("div"),l=d("span"),i=j(r),a=V(),c=d("span"),m=j(h),p=j(" | CR "),g=j(C),y=V(),_=d("span"),_.textContent=E,v=V(),this.h()},l(H){e=u(H,"BUTTON",{class:!0});var M=b(e);t=u(M,"DIV",{class:!0});var P=b(t);l=u(P,"SPAN",{class:!0});var k=b(l);i=B(k,r),k.forEach(f),a=I(P),c=u(P,"SPAN",{class:!0});var A=b(c);m=B(A,h),p=B(A," | CR "),g=B(A,C),A.forEach(f),P.forEach(f),y=I(M),_=u(M,"SPAN",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-15711il"&&(_.textContent=E),v=I(M),M.forEach(f),this.h()},h(){o(l,"class","font-bold text-neutral block"),o(c,"class","text-xs text-neutral/60"),o(t,"class","flex-1"),o(_,"class","text-xs badge badge-sm badge-primary"),o(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(H,M){K(H,e,M),n(e,t),n(t,l),n(l,i),n(t,a),n(t,c),n(c,m),n(c,p),n(c,g),n(e,y),n(e,_),n(e,v),w||(x=oe(e,"click",D),w=!0)},p(H,M){s=H,M[0]&4096&&r!==(r=s[49].name+"")&&ae(i,r),M[0]&4096&&h!==(h=s[49].type+"")&&ae(m,h),M[0]&4096&&C!==(C=s[49].challenge_rating+"")&&ae(g,C)},d(H){H&&f(e),w=!1,x()}}}function Al(s){let e,t,l,r=s[8].name+"",i;return{c(){e=d("label"),t=d("span"),l=j("‚ö†Ô∏è "),i=j(r),this.h()},l(a){e=u(a,"LABEL",{class:!0});var c=b(e);t=u(c,"SPAN",{class:!0});var h=b(t);l=B(h,"‚ö†Ô∏è "),i=B(h,r),h.forEach(f),c.forEach(f),this.h()},h(){o(t,"class","label-text-alt text-error text-xs"),o(e,"class","label")},m(a,c){K(a,e,c),n(e,t),n(t,l),n(t,i)},p(a,c){c[0]&256&&r!==(r=a[8].name+"")&&ae(i,r)},d(a){a&&f(e)}}}function Ml(s){let e,t,l=s[8].initiative+"",r;return{c(){e=d("label"),t=d("span"),r=j(l),this.h()},l(i){e=u(i,"LABEL",{class:!0});var a=b(e);t=u(a,"SPAN",{class:!0});var c=b(t);r=B(c,l),c.forEach(f),a.forEach(f),this.h()},h(){o(t,"class","label-text-alt text-error text-xs"),o(e,"class","label")},m(i,a){K(i,e,a),n(e,t),n(t,r)},p(i,a){a[0]&256&&l!==(l=i[8].initiative+"")&&ae(r,l)},d(i){i&&f(e)}}}function Pl(s){let e,t,l=s[8].maxHp+"",r;return{c(){e=d("label"),t=d("span"),r=j(l),this.h()},l(i){e=u(i,"LABEL",{class:!0});var a=b(e);t=u(a,"SPAN",{class:!0});var c=b(t);r=B(c,l),c.forEach(f),a.forEach(f),this.h()},h(){o(t,"class","label-text-alt text-error text-xs"),o(e,"class","label")},m(i,a){K(i,e,a),n(e,t),n(t,r)},p(i,a){a[0]&256&&l!==(l=i[8].maxHp+"")&&ae(r,l)},d(i){i&&f(e)}}}function Ll(s){let e,t,l=s[8].armorClass+"",r;return{c(){e=d("label"),t=d("span"),r=j(l),this.h()},l(i){e=u(i,"LABEL",{class:!0});var a=b(e);t=u(a,"SPAN",{class:!0});var c=b(t);r=B(c,l),c.forEach(f),a.forEach(f),this.h()},h(){o(t,"class","label-text-alt text-error text-xs"),o(e,"class","label")},m(i,a){K(i,e,a),n(e,t),n(t,r)},p(i,a){a[0]&256&&l!==(l=i[8].armorClass+"")&&ae(r,l)},d(i){i&&f(e)}}}function Nl(s){let e,t=s[46].name+"",l,r;return{c(){e=d("option"),l=j(t),this.h()},l(i){e=u(i,"OPTION",{});var a=b(e);l=B(a,t),a.forEach(f),this.h()},h(){e.__value=r=s[46].id,ke(e,e.__value)},m(i,a){K(i,e,a),n(e,l)},p(i,a){a[0]&2&&t!==(t=i[46].name+"")&&ae(l,t),a[0]&2&&r!==(r=i[46].id)&&(e.__value=r,ke(e,e.__value))},d(i){i&&f(e)}}}function bs(s){let e,t='<span class="label-text-alt text-neutral/60 italic text-xs">Valor de iniciativa tirado (1-100)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-18jw2s3"&&(e.innerHTML=t),this.h()},h(){o(e,"class","label")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function vs(s){let e,t,l,r=s[8].initiative+"",i;return{c(){e=d("label"),t=d("span"),l=j("‚ö†Ô∏è "),i=j(r),this.h()},l(a){e=u(a,"LABEL",{class:!0});var c=b(e);t=u(c,"SPAN",{class:!0});var h=b(t);l=B(h,"‚ö†Ô∏è "),i=B(h,r),h.forEach(f),c.forEach(f),this.h()},h(){o(t,"class","label-text-alt text-error text-xs"),o(e,"class","label")},m(a,c){K(a,e,c),n(e,t),n(t,l),n(t,i)},p(a,c){c[0]&256&&r!==(r=a[8].initiative+"")&&ae(i,r)},d(a){a&&f(e)}}}function _s(s){let e,t=s[0]&&Dl(s);return{c(){t&&t.c(),e=pt()},l(l){t&&t.l(l),e=pt()},m(l,r){t&&t.m(l,r),K(l,e,r)},p(l,r){l[0]?t?t.p(l,r):(t=Dl(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(l){l&&f(e),t&&t.d(l)}}}function gs(s,e,t){let l,r,i,{isOpen:a=!1}=e,{players:c=[]}=e;const h=jt();let m="player",p=0,C="",g="",y=[],_=null,E=!1,v=!1,w="",x=0,D=10,H="",M="",P="",k={name:"",initiative:"",maxHp:"",armorClass:""},A={name:!1,initiative:!1,maxHp:!1,armorClass:!1};function U(W){t(9,A[W]=!0,A)}function G(){if(m==="player"){t(9,A.initiative=!0,A);const W=Jt(p);return t(8,k.initiative=W.error||"",k),W.valid&&l!==void 0}else{Object.keys(A).forEach(N=>{t(9,A[N]=!0,A)});const W=dl(w),fe=Jt(p),de=cl(x),le=ul(D);return t(8,k.name=W.error||"",k),t(8,k.initiative=fe.error||"",k),t(8,k.maxHp=de.error||"",k),t(8,k.armorClass=le.error||"",k),W.valid&&fe.valid&&de.valid&&le.valid}}function S(){G()&&l&&(h("add",{type:"character",characterId:l.id,name:l.name,maxHp:l.maxHp,armorClass:l.armorClass,initiative:p,isNpc:!1}),L())}const R=Xl(async()=>{const W=g.trim();if(!W){t(12,y=[]),t(14,v=!1);return}t(13,E=!0),t(14,v=!1);try{const fe=await _t.searchMonsters(W);t(12,y=fe.results||[]),t(14,v=y.length===0)}catch(fe){console.error("Error buscando monstruos:",fe),t(12,y=[]),t(14,v=!0)}finally{t(13,E=!1)}},500);async function T(W){_=await _t.getMonster(W.slug),t(5,w=_.name),t(6,x=_.hit_points),t(7,D=_.armor_class),H=_.challenge_rating,_.type,M=_.size,P=_.alignment,t(12,y=[]),t(11,g=""),t(9,A.name=!0,A),t(9,A.maxHp=!0,A),t(9,A.armorClass=!0,A)}function F(){G()&&(h("add",{type:"creature",name:w,initiative:p,maxHp:x,armorClass:D,cr:H,size:M,alignment:P,isNpc:!0}),L())}function L(){t(4,C=""),_=null,t(11,g=""),t(12,y=[]),t(14,v=!1),t(5,w=""),t(3,p=0),t(6,x=0),t(7,D=10),H="",M="",P="",t(13,E=!1),Object.keys(A).forEach(W=>{t(9,A[W]=!1,A)}),Object.keys(k).forEach(W=>{t(8,k[W]="",k)}),h("close")}const O=()=>t(2,m="player"),X=()=>t(2,m="monster");function se(){C=Zl(this),t(4,C),t(1,c)}function ie(){p=Xe(this.value),t(3,p)}const ne=()=>U("initiative");function ee(){g=this.value,t(11,g)}const Q=W=>T(W);function te(){w=this.value,t(5,w)}const q=()=>U("name");function Y(){p=Xe(this.value),t(3,p)}const Z=()=>U("initiative");function ce(){x=Xe(this.value),t(6,x)}const re=()=>U("maxHp");function ge(){D=Xe(this.value),t(7,D)}const be=()=>U("armorClass"),_e=W=>W.key==="Escape"&&L();return s.$$set=W=>{"isOpen"in W&&t(0,a=W.isOpen),"players"in W&&t(1,c=W.players)},s.$$.update=()=>{if(s.$$.dirty[0]&18&&t(10,l=c.find(W=>W.id===C)),s.$$.dirty[0]&548&&A.name&&m==="monster"&&w){const W=dl(w);t(8,k.name=W.valid?"":W.error||"",k)}if(s.$$.dirty[0]&520&&A.initiative&&p!==null){const W=Jt(p);t(8,k.initiative=W.valid?"":W.error||"",k)}if(s.$$.dirty[0]&576&&A.maxHp&&x!==null){const W=cl(x);t(8,k.maxHp=W.valid?"":W.error||"",k)}if(s.$$.dirty[0]&640&&A.armorClass&&D!==null){const W=ul(D);t(8,k.armorClass=W.valid?"":W.error||"",k)}s.$$.dirty[0]&1288&&t(16,r=l&&p>=1&&!k.initiative),s.$$.dirty[0]&488&&t(15,i=!k.name&&!k.initiative&&!k.maxHp&&!k.armorClass&&w.trim()&&x>0&&D>0&&p>=1)},[a,c,m,p,C,w,x,D,k,A,l,g,y,E,v,i,r,U,S,R,T,F,L,O,X,se,ie,ne,ee,Q,te,q,Y,Z,ce,re,ge,be,_e]}class xs extends gt{constructor(e){super(),xt(this,e,gs,_s,Ct,{isOpen:0,players:1},null,[-1,-1])}}function Cs(s){let e,t,l,r="üö´",i,a,c="Acceso Denegado",h,m,p="Solo el Dungeon Master puede gestionar los puntos de vida.",C,g,y="Entendido",_,E;return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=r,i=V(),a=d("h3"),a.textContent=c,h=V(),m=d("p"),m.textContent=p,C=V(),g=d("button"),g.textContent=y,this.h()},l(v){e=u(v,"DIV",{class:!0});var w=b(e);t=u(w,"DIV",{class:!0});var x=b(t);l=u(x,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-13ghcez"&&(l.textContent=r),i=I(x),a=u(x,"H3",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-13fk1x3"&&(a.textContent=c),h=I(x),m=u(x,"P",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1myopqh"&&(m.textContent=p),C=I(x),g=u(x,"BUTTON",{class:!0,"data-svelte-h":!0}),z(g)!=="svelte-1bzkva0"&&(g.textContent=y),x.forEach(f),w.forEach(f),this.h()},h(){o(l,"class","text-6xl mb-4"),o(a,"class","text-2xl font-medieval text-neutral mb-3"),o(m,"class","text-neutral/70 font-body mb-6"),o(g,"class","btn btn-dnd"),o(t,"class","card-parchment border-4 border-error w-11/12 max-w-md text-center p-8"),o(e,"class","modal modal-open z-50")},m(v,w){K(v,e,w),n(e,t),n(t,l),n(t,i),n(t,a),n(t,h),n(t,m),n(t,C),n(t,g),_||(E=oe(g,"click",s[12]),_=!0)},p:Ce,d(v){v&&f(e),_=!1,E()}}}function ys(s){let e,t,l,r="‚úï",i,a,c,h="üíö Gesti√≥n de HP",m,p,C,g,y,_,E=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,w,x,D,H=s[1].name+"",M,P,k,A,U,G,S,R,T="HP ACTUAL",F,L,O,X=s[1].currentHp+"",se,ie,ne,ee,Q=s[1].maxHp+"",te,q,Y,Z,ce,re,ge,be,_e=s[5].toFixed(0)+"",W,fe,de,le,N,$="HP NUEVO",he,ue,J,pe,we,qe,Me,ye,De,He,Oe,Qe,Je=s[3].toFixed(0)+"",Ie,ct,Ye,Te,me,xe,Ze='<span class="label-text font-medieval text-neutral text-sm sm:text-base">üé≤ Cantidad de HP</span>',tt,Se,Pe,ut,Re,Le,je,mt="üí•",lt,Be,dt="Da√±o",$e,ft,Ve,Ue,bt="üíö",st,ze,rt="Curar",ot,Ut,Yt,Ae=s[1].isNpc&&Ol();function Zt(ve,Ee){return ve[8]!==0?ks:Es}let yt=Zt(s),Fe=yt(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=r,i=V(),a=d("div"),c=d("h3"),c.textContent=h,m=V(),p=d("div"),C=d("div"),g=d("div"),y=d("div"),_=d("span"),v=j(E),w=V(),x=d("div"),D=d("h4"),M=j(H),P=V(),k=d("div"),Ae&&Ae.c(),A=V(),U=d("div"),G=d("div"),S=d("div"),R=d("p"),R.textContent=T,F=V(),L=d("div"),O=d("p"),se=j(X),ie=V(),ne=d("p"),ee=j("de "),te=j(Q),q=V(),Y=d("progress"),ge=V(),be=d("p"),W=j(_e),fe=j("%"),de=V(),le=d("div"),N=d("p"),N.textContent=$,he=V(),ue=d("div"),J=d("p"),pe=j(s[4]),qe=V(),Fe.c(),Me=V(),ye=d("progress"),Oe=V(),Qe=d("p"),Ie=j(Je),ct=j("%"),Te=V(),me=d("div"),xe=d("label"),xe.innerHTML=Ze,tt=V(),Se=d("div"),Pe=d("input"),ut=V(),Re=d("div"),Le=d("button"),je=d("span"),je.textContent=mt,lt=V(),Be=d("span"),Be.textContent=dt,ft=V(),Ve=d("button"),Ue=d("span"),Ue.textContent=bt,st=V(),ze=d("span"),ze.textContent=rt,this.h()},l(ve){e=u(ve,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var Ee=b(e);t=u(Ee,"DIV",{class:!0});var ht=b(t);l=u(ht,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(l)!=="svelte-1h1x9md"&&(l.textContent=r),i=I(ht),a=u(ht,"DIV",{class:!0});var Et=b(a);c=u(Et,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(c)!=="svelte-15n0he0"&&(c.textContent=h),m=I(Et),p=u(Et,"DIV",{class:!0});var kt=b(p);C=u(kt,"DIV",{class:!0});var $t=b(C);g=u($t,"DIV",{class:!0});var el=b(g);y=u(el,"DIV",{class:!0});var tl=b(y);_=u(tl,"SPAN",{class:!0});var ll=b(_);v=B(ll,E),ll.forEach(f),tl.forEach(f),el.forEach(f),$t.forEach(f),w=I(kt),x=u(kt,"DIV",{class:!0});var wt=b(x);D=u(wt,"H4",{class:!0});var sl=b(D);M=B(sl,H),sl.forEach(f),P=I(wt),k=u(wt,"DIV",{class:!0});var nl=b(k);Ae&&Ae.l(nl),nl.forEach(f),wt.forEach(f),kt.forEach(f),Et.forEach(f),A=I(ht),U=u(ht,"DIV",{class:!0});var Dt=b(U);G=u(Dt,"DIV",{class:!0});var It=b(G);S=u(It,"DIV",{class:!0});var nt=b(S);R=u(nt,"P",{class:!0,"data-svelte-h":!0}),z(R)!=="svelte-15e8cb6"&&(R.textContent=T),F=I(nt),L=u(nt,"DIV",{class:!0});var Vt=b(L);O=u(Vt,"P",{class:!0});var al=b(O);se=B(al,X),al.forEach(f),ie=I(Vt),ne=u(Vt,"P",{class:!0});var zt=b(ne);ee=B(zt,"de "),te=B(zt,Q),zt.forEach(f),Vt.forEach(f),q=I(nt),Y=u(nt,"PROGRESS",{class:!0,max:!0}),b(Y).forEach(f),ge=I(nt),be=u(nt,"P",{class:!0});var qt=b(be);W=B(qt,_e),fe=B(qt,"%"),qt.forEach(f),nt.forEach(f),de=I(It),le=u(It,"DIV",{class:!0});var at=b(le);N=u(at,"P",{class:!0,"data-svelte-h":!0}),z(N)!=="svelte-ukgy9p"&&(N.textContent=$),he=I(at),ue=u(at,"DIV",{class:!0});var Ht=b(ue);J=u(Ht,"P",{class:!0});var rl=b(J);pe=B(rl,s[4]),rl.forEach(f),qe=I(Ht),Fe.l(Ht),Ht.forEach(f),Me=I(at),ye=u(at,"PROGRESS",{class:!0,max:!0}),b(ye).forEach(f),Oe=I(at),Qe=u(at,"P",{class:!0});var Rt=b(Qe);Ie=B(Rt,Je),ct=B(Rt,"%"),Rt.forEach(f),at.forEach(f),It.forEach(f),Te=I(Dt),me=u(Dt,"DIV",{});var Tt=b(me);xe=u(Tt,"LABEL",{class:!0,"data-svelte-h":!0}),z(xe)!=="svelte-640liv"&&(xe.innerHTML=Ze),tt=I(Tt),Se=u(Tt,"DIV",{class:!0});var At=b(Se);Pe=u(At,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ut=I(At),Re=u(At,"DIV",{class:!0});var Mt=b(Re);Le=u(Mt,"BUTTON",{class:!0});var Pt=b(Le);je=u(Pt,"SPAN",{class:!0,"data-svelte-h":!0}),z(je)!=="svelte-orvybg"&&(je.textContent=mt),lt=I(Pt),Be=u(Pt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Be)!=="svelte-117bemg"&&(Be.textContent=dt),Pt.forEach(f),ft=I(Mt),Ve=u(Mt,"BUTTON",{class:!0});var Lt=b(Ve);Ue=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),z(Ue)!=="svelte-rpoyvz"&&(Ue.textContent=bt),st=I(Lt),ze=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),z(ze)!=="svelte-v46veg"&&(ze.textContent=rt),Lt.forEach(f),Mt.forEach(f),At.forEach(f),Tt.forEach(f),Dt.forEach(f),ht.forEach(f),Ee.forEach(f),this.h()},h(){o(l,"class","btn btn-xs sm:btn-sm btn-circle btn-ghost absolute right-2 sm:right-3 top-2 sm:top-3 z-10 hover:bg-error/20"),o(l,"aria-label","Cerrar modal"),o(c,"id","hp-modal-title"),o(c,"class","font-bold text-xl sm:text-2xl font-medieval text-neutral text-center mb-2 sm:mb-3"),o(_,"class","text-lg sm:text-xl"),o(y,"class","bg-primary/20 flex items-center justify-center"),o(g,"class","w-10 h-10 sm:w-12 sm:h-12 rounded-full ring-2 ring-secondary"),o(C,"class","avatar flex-shrink-0"),o(D,"class","text-base sm:text-lg font-medieval text-neutral font-bold truncate"),o(k,"class","flex gap-2 mt-1"),o(x,"class","flex-1 min-w-0"),o(p,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-2 sm:p-3 rounded-lg border border-primary/30 flex items-center gap-2 sm:gap-3"),o(a,"class","p-3 sm:p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent border-b-2 border-secondary"),o(R,"class","text-xs font-medieval text-neutral/60 text-center"),o(O,"class","text-xl sm:text-2xl font-bold text-neutral"),o(ne,"class","text-xs sm:text-sm text-neutral/60"),o(L,"class","text-center"),o(Y,"class",Z="progress progress-"+s[9]+" w-full h-2 sm:h-3"),Y.value=ce=s[1].currentHp,o(Y,"max",re=s[1].maxHp),o(be,"class","text-xs text-center text-neutral/60"),o(S,"class","bg-neutral/10 flex flex-col gap-1 p-2 sm:p-3 rounded-lg border-2 border-primary/30"),o(N,"class","text-xs font-medieval text-neutral/60 text-center"),o(J,"class",we="text-xl sm:text-2xl font-bold text-"+(s[8]!==0?s[8]>0?"success":"error":"neutral")),o(ue,"class","text-center"),o(ye,"class",De="progress progress-"+(s[8]!==0?s[7]:s[9])+" w-full h-2 sm:h-3"),ye.value=s[4],o(ye,"max",He=s[1].maxHp),o(Qe,"class","text-xs text-center text-neutral/60"),o(le,"class",Ye="bg-"+(s[8]!==0?s[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(s[8]!==0?s[8]>0?"success":"error":"primary")+"/30"),o(G,"class","grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4"),o(xe,"class","label"),o(Pe,"type","number"),o(Pe,"placeholder","Ej: 15"),o(Pe,"class","input input-sm sm:input-md input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-lg sm:text-2xl font-bold focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(Pe,"min","0"),o(je,"class","text-base sm:text-xl"),o(Be,"class","font-medieval text-xs sm:text-sm"),o(Le,"class","btn btn-error btn-sm sm:btn-md flex-1"),Le.disabled=$e=s[6]<=0,o(Ue,"class","text-base sm:text-xl"),o(ze,"class","font-medieval text-xs sm:text-sm"),o(Ve,"class","btn btn-success btn-sm sm:btn-md flex-1"),Ve.disabled=ot=s[6]<=0,o(Re,"class","grid grid-cols-2 sm:flex gap-2 flex-1"),o(Se,"class","flex flex-col sm:flex-row gap-2"),o(U,"class","flex-1 p-3 sm:p-4 overflow-y-auto"),o(t,"class","card-parchment border-2 sm:border-4 border-secondary mx-2 sm:mx-4 relative w-[95vw] sm:w-[90vw] md:w-3/4 lg:w-1/2 max-h-[90vh] flex flex-col"),o(e,"class","modal modal-open z-50"),o(e,"role","dialog"),o(e,"aria-modal","true"),o(e,"aria-labelledby","hp-modal-title")},m(ve,Ee){K(ve,e,Ee),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c),n(a,m),n(a,p),n(p,C),n(C,g),n(g,y),n(y,_),n(_,v),n(p,w),n(p,x),n(x,D),n(D,M),n(x,P),n(x,k),Ae&&Ae.m(k,null),n(t,A),n(t,U),n(U,G),n(G,S),n(S,R),n(S,F),n(S,L),n(L,O),n(O,se),n(L,ie),n(L,ne),n(ne,ee),n(ne,te),n(S,q),n(S,Y),n(S,ge),n(S,be),n(be,W),n(be,fe),n(G,de),n(G,le),n(le,N),n(le,he),n(le,ue),n(ue,J),n(J,pe),n(ue,qe),Fe.m(ue,null),n(le,Me),n(le,ye),n(le,Oe),n(le,Qe),n(Qe,Ie),n(Qe,ct),n(U,Te),n(U,me),n(me,xe),n(me,tt),n(me,Se),n(Se,Pe),ke(Pe,s[6]),n(Se,ut),n(Se,Re),n(Re,Le),n(Le,je),n(Le,lt),n(Le,Be),n(Re,ft),n(Re,Ve),n(Ve,Ue),n(Ve,st),n(Ve,ze),Ut||(Yt=[oe(l,"click",s[12]),oe(Pe,"input",s[14]),oe(Le,"click",s[10]),oe(Ve,"click",s[11]),oe(e,"keydown",s[15])],Ut=!0)},p(ve,Ee){Ee&2&&E!==(E=ve[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(v,E),Ee&2&&H!==(H=ve[1].name+"")&&ae(M,H),ve[1].isNpc?Ae||(Ae=Ol(),Ae.c(),Ae.m(k,null)):Ae&&(Ae.d(1),Ae=null),Ee&2&&X!==(X=ve[1].currentHp+"")&&ae(se,X),Ee&2&&Q!==(Q=ve[1].maxHp+"")&&ae(te,Q),Ee&512&&Z!==(Z="progress progress-"+ve[9]+" w-full h-2 sm:h-3")&&o(Y,"class",Z),Ee&2&&ce!==(ce=ve[1].currentHp)&&(Y.value=ce),Ee&2&&re!==(re=ve[1].maxHp)&&o(Y,"max",re),Ee&32&&_e!==(_e=ve[5].toFixed(0)+"")&&ae(W,_e),Ee&16&&ae(pe,ve[4]),Ee&256&&we!==(we="text-xl sm:text-2xl font-bold text-"+(ve[8]!==0?ve[8]>0?"success":"error":"neutral"))&&o(J,"class",we),yt===(yt=Zt(ve))&&Fe?Fe.p(ve,Ee):(Fe.d(1),Fe=yt(ve),Fe&&(Fe.c(),Fe.m(ue,null))),Ee&896&&De!==(De="progress progress-"+(ve[8]!==0?ve[7]:ve[9])+" w-full h-2 sm:h-3")&&o(ye,"class",De),Ee&16&&(ye.value=ve[4]),Ee&2&&He!==(He=ve[1].maxHp)&&o(ye,"max",He),Ee&8&&Je!==(Je=ve[3].toFixed(0)+"")&&ae(Ie,Je),Ee&256&&Ye!==(Ye="bg-"+(ve[8]!==0?ve[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(ve[8]!==0?ve[8]>0?"success":"error":"primary")+"/30")&&o(le,"class",Ye),Ee&64&&Xe(Pe.value)!==ve[6]&&ke(Pe,ve[6]),Ee&64&&$e!==($e=ve[6]<=0)&&(Le.disabled=$e),Ee&64&&ot!==(ot=ve[6]<=0)&&(Ve.disabled=ot)},d(ve){ve&&f(e),Ae&&Ae.d(),Fe.d(),Ut=!1,et(Yt)}}}function Ol(s){let e,t="NPC";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-31ycly"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-error")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function Es(s){let e,t="Sin cambios";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-rbv1yy"&&(e.textContent=t),this.h()},h(){o(e,"class","text-xs sm:text-sm text-neutral/60")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function ks(s){let e,t=s[8]>0?"+":"",l,r,i;return{c(){e=d("p"),l=j(t),r=j(s[8]),this.h()},l(a){e=u(a,"P",{class:!0});var c=b(e);l=B(c,t),r=B(c,s[8]),c.forEach(f),this.h()},h(){o(e,"class",i="text-base sm:text-lg font-bold text-"+(s[8]>0?"success":"error"))},m(a,c){K(a,e,c),n(e,l),n(e,r)},p(a,c){c&256&&t!==(t=a[8]>0?"+":"")&&ae(l,t),c&256&&ae(r,a[8]),c&256&&i!==(i="text-base sm:text-lg font-bold text-"+(a[8]>0?"success":"error"))&&o(e,"class",i)},d(a){a&&f(e)}}}function ws(s){let e;function t(i,a){if(i[0]&&i[1]&&i[2])return ys;if(i[0]&&i[1]&&!i[2])return Cs}let l=t(s),r=l&&l(s);return{c(){r&&r.c(),e=pt()},l(i){r&&r.l(i),e=pt()},m(i,a){r&&r.m(i,a),K(i,e,a)},p(i,[a]){l===(l=t(i))&&r?r.p(i,a):(r&&r.d(1),r=l&&l(i),r&&(r.c(),r.m(e.parentNode,e)))},i:Ce,o:Ce,d(i){i&&f(e),r&&r.d(i)}}}function Ds(s,e,t){let l,r,i,a,c,h,{isOpen:m=!1}=e,{combatant:p=null}=e,{isDM:C=!1}=e;const g=jt();let y=0,_=0;function E(){if(p&&_>0){const H=-Math.abs(_);g("apply",H),t(6,_=0)}}function v(){if(p&&_>0){const H=Math.abs(_);g("apply",H),t(6,_=0)}}function w(){t(13,y=0),t(6,_=0),g("close")}function x(){_=Xe(this.value),t(6,_)}const D=H=>H.key==="Escape"&&w();return s.$$set=H=>{"isOpen"in H&&t(0,m=H.isOpen),"combatant"in H&&t(1,p=H.combatant),"isDM"in H&&t(2,C=H.isDM)},s.$$.update=()=>{s.$$.dirty&2&&t(5,l=p?p.currentHp/p.maxHp*100:0),s.$$.dirty&32&&t(9,r=l>50?"success":l>25?"warning":"error"),s.$$.dirty&8194&&t(4,i=p?Math.max(0,Math.min(p.maxHp,p.currentHp+y)):0),s.$$.dirty&18&&t(8,a=p?i-p.currentHp:0),s.$$.dirty&18&&t(3,c=p?i/p.maxHp*100:0),s.$$.dirty&8&&t(7,h=c>50?"success":c>25?"warning":"error")},[m,p,C,c,i,l,_,h,a,r,E,v,w,y,x,D]}class Is extends gt{constructor(e){super(),xt(this,e,Ds,ws,Ct,{isOpen:0,combatant:1,isDM:2})}}function Sl(s,e,t){const l=s.slice();return l[21]=e[t],l}function Bl(s,e,t){const l=s.slice();l[16]=e[t];const r=Array.isArray(l[1].conditions)?l[1].conditions:[];l[17]=r;const i=l[17].includes(l[16].name);return l[18]=i,l}function jl(s,e,t){const l=s.slice();return l[21]=e[t],l}function Vs(s){let e,t,l,r="‚úï",i,a,c,h=s[1].name+"",m,p,C,g,y,_="Solo el DM puede modificar estados",E,v,w="Cerrar",x,D;function H(k,A){return A&2&&(C=null),C==null&&(C=!!(k[1].conditions&&Array.isArray(k[1].conditions)&&k[1].conditions.length>0)),C?As:Ts}let M=H(s,-1),P=M(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=r,i=V(),a=d("h3"),c=j("‚ö†Ô∏è Estados de "),m=j(h),p=V(),P.c(),g=V(),y=d("p"),y.textContent=_,E=V(),v=d("button"),v.textContent=w,this.h()},l(k){e=u(k,"DIV",{class:!0});var A=b(e);t=u(A,"DIV",{class:!0});var U=b(t);l=u(U,"BUTTON",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-1t0z3ws"&&(l.textContent=r),i=I(U),a=u(U,"H3",{class:!0});var G=b(a);c=B(G,"‚ö†Ô∏è Estados de "),m=B(G,h),G.forEach(f),p=I(U),P.l(U),g=I(U),y=u(U,"P",{class:!0,"data-svelte-h":!0}),z(y)!=="svelte-1mg2e4g"&&(y.textContent=_),E=I(U),v=u(U,"BUTTON",{class:!0,"data-svelte-h":!0}),z(v)!=="svelte-1vgxpha"&&(v.textContent=w),U.forEach(f),A.forEach(f),this.h()},h(){o(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),o(a,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),o(y,"class","text-xs text-center text-neutral/60 italic mt-4"),o(v,"class","btn btn-dnd w-full mt-4"),o(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-md relative p-6"),o(e,"class","modal modal-open z-50")},m(k,A){K(k,e,A),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c),n(a,m),n(t,p),P.m(t,null),n(t,g),n(t,y),n(t,E),n(t,v),x||(D=[oe(l,"click",s[9]),oe(v,"click",s[9]),oe(e,"keydown",s[10])],x=!0)},p(k,A){A&2&&h!==(h=k[1].name+"")&&ae(m,h),M===(M=H(k,A))&&P?P.p(k,A):(P.d(1),P=M(k),P&&(P.c(),P.m(t,g)))},d(k){k&&f(e),P.d(),x=!1,et(D)}}}function Hs(s){let e,t,l,r="‚úï",i,a,c,h="‚ö†Ô∏è Estados de Combate",m,p,C,g,y,_,E=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,w,x,D,H=s[1].name+"",M,P,k,A,U,G=s[1].currentHp+"",S,R,T=s[1].maxHp+"",F,L,O,X,se=s[1].armorClass+"",ie,ne,ee,Q,te,q,Y,Z="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ce,re,ge=(s[1].conditions&&Array.isArray(s[1].conditions)?s[1].conditions.length:0)+"",be,_e,W,fe,de,le,N,$,he,ue,J="üîç",pe,we,qe="Base de datos oficial de D&D 5e",Me,ye,De,He,Oe;function Qe(me,xe){return xe&2&&(W=null),W==null&&(W=!!(me[1].conditions&&Array.isArray(me[1].conditions)&&me[1].conditions.length>0)),W?Ps:Ms}let Je=Qe(s,-1),Ie=Je(s);function ct(me,xe){return xe&8&&(De=null),me[5]?Ss:me[4].length>0?Os:(De==null&&(De=!!me[3].trim()),De?Ns:Ls)}let Ye=ct(s,-1),Te=Ye(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=r,i=V(),a=d("div"),c=d("h3"),c.textContent=h,m=V(),p=d("div"),C=d("div"),g=d("div"),y=d("div"),_=d("span"),v=j(E),w=V(),x=d("div"),D=d("h4"),M=j(H),P=V(),k=d("div"),A=d("div"),U=j("‚ù§Ô∏è "),S=j(G),R=j("/"),F=j(T),L=V(),O=d("div"),X=j("üõ°Ô∏è "),ie=j(se),ne=V(),ee=d("div"),Q=d("div"),te=d("div"),q=d("div"),Y=d("h5"),Y.innerHTML=Z,ce=V(),re=d("span"),be=j(ge),_e=V(),Ie.c(),fe=V(),de=d("div"),le=d("div"),N=d("div"),$=d("input"),he=V(),ue=d("div"),ue.textContent=J,pe=V(),we=d("p"),we.textContent=qe,Me=V(),ye=d("div"),Te.c(),this.h()},l(me){e=u(me,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var xe=b(e);t=u(xe,"DIV",{class:!0});var Ze=b(t);l=u(Ze,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),z(l)!=="svelte-hn98im"&&(l.textContent=r),i=I(Ze),a=u(Ze,"DIV",{class:!0});var tt=b(a);c=u(tt,"H3",{id:!0,class:!0,"data-svelte-h":!0}),z(c)!=="svelte-1wgccba"&&(c.textContent=h),m=I(tt),p=u(tt,"DIV",{class:!0});var Se=b(p);C=u(Se,"DIV",{class:!0});var Pe=b(C);g=u(Pe,"DIV",{class:!0});var ut=b(g);y=u(ut,"DIV",{class:!0});var Re=b(y);_=u(Re,"SPAN",{class:!0});var Le=b(_);v=B(Le,E),Le.forEach(f),Re.forEach(f),ut.forEach(f),Pe.forEach(f),w=I(Se),x=u(Se,"DIV",{class:!0});var je=b(x);D=u(je,"H4",{class:!0});var mt=b(D);M=B(mt,H),mt.forEach(f),P=I(je),k=u(je,"DIV",{class:!0});var lt=b(k);A=u(lt,"DIV",{class:!0});var Be=b(A);U=B(Be,"‚ù§Ô∏è "),S=B(Be,G),R=B(Be,"/"),F=B(Be,T),Be.forEach(f),L=I(lt),O=u(lt,"DIV",{class:!0});var dt=b(O);X=B(dt,"üõ°Ô∏è "),ie=B(dt,se),dt.forEach(f),lt.forEach(f),je.forEach(f),Se.forEach(f),tt.forEach(f),ne=I(Ze),ee=u(Ze,"DIV",{class:!0,style:!0});var $e=b(ee);Q=u($e,"DIV",{class:!0,style:!0});var ft=b(Q);te=u(ft,"DIV",{class:!0});var Ve=b(te);q=u(Ve,"DIV",{class:!0});var Ue=b(q);Y=u(Ue,"H5",{class:!0,"data-svelte-h":!0}),z(Y)!=="svelte-12hilzf"&&(Y.innerHTML=Z),ce=I(Ue),re=u(Ue,"SPAN",{class:!0});var bt=b(re);be=B(bt,ge),bt.forEach(f),Ue.forEach(f),_e=I(Ve),Ie.l(Ve),Ve.forEach(f),ft.forEach(f),fe=I($e),de=u($e,"DIV",{class:!0,style:!0});var st=b(de);le=u(st,"DIV",{class:!0});var ze=b(le);N=u(ze,"DIV",{class:!0});var rt=b(N);$=u(rt,"INPUT",{type:!0,placeholder:!0,class:!0}),he=I(rt),ue=u(rt,"DIV",{class:!0,"data-svelte-h":!0}),z(ue)!=="svelte-1duc997"&&(ue.textContent=J),rt.forEach(f),pe=I(ze),we=u(ze,"P",{class:!0,"data-svelte-h":!0}),z(we)!=="svelte-hqlo3f"&&(we.textContent=qe),ze.forEach(f),Me=I(st),ye=u(st,"DIV",{class:!0});var ot=b(ye);Te.l(ot),ot.forEach(f),st.forEach(f),$e.forEach(f),Ze.forEach(f),xe.forEach(f),this.h()},h(){o(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),o(l,"aria-label","Cerrar modal"),o(c,"id","condition-modal-title"),o(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),o(_,"class","text-xl"),o(y,"class","bg-primary/20 flex items-center justify-center"),o(g,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),o(C,"class","avatar"),o(D,"class","text-lg font-medieval text-neutral font-bold truncate"),o(A,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),o(O,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),o(k,"class","flex gap-2 mt-1"),o(x,"class","flex-1 min-w-0"),o(p,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),o(a,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),o(Y,"class","font-medieval text-neutral font-bold flex items-center gap-2"),o(re,"class","badge badge-warning badge-sm"),o(q,"class","flex items-center justify-between mb-3"),o(te,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),o(Q,"class","md:w-1/3 flex flex-col"),vt(Q,"min-height","300px"),o($,"type","text"),o($,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),o($,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),o(ue,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),o(N,"class","relative"),o(we,"class","text-xs text-neutral/50 mt-1 italic"),o(le,"class","mb-3"),o(ye,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),o(de,"class","md:w-2/3 flex flex-col"),vt(de,"min-height","300px"),o(ee,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),vt(ee,"min-height","0"),o(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),o(e,"class","modal modal-open z-50"),o(e,"role","dialog"),o(e,"aria-modal","true"),o(e,"aria-labelledby","condition-modal-title")},m(me,xe){K(me,e,xe),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c),n(a,m),n(a,p),n(p,C),n(C,g),n(g,y),n(y,_),n(_,v),n(p,w),n(p,x),n(x,D),n(D,M),n(x,P),n(x,k),n(k,A),n(A,U),n(A,S),n(A,R),n(A,F),n(k,L),n(k,O),n(O,X),n(O,ie),n(t,ne),n(t,ee),n(ee,Q),n(Q,te),n(te,q),n(q,Y),n(q,ce),n(q,re),n(re,be),n(te,_e),Ie.m(te,null),n(ee,fe),n(ee,de),n(de,le),n(le,N),n(N,$),ke($,s[3]),n(N,he),n(N,ue),n(le,pe),n(le,we),n(de,Me),n(de,ye),Te.m(ye,null),He||(Oe=[oe(l,"click",s[9]),oe($,"input",s[12]),oe($,"input",s[6]),oe(e,"keydown",s[10])],He=!0)},p(me,xe){xe&2&&E!==(E=me[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(v,E),xe&2&&H!==(H=me[1].name+"")&&ae(M,H),xe&2&&G!==(G=me[1].currentHp+"")&&ae(S,G),xe&2&&T!==(T=me[1].maxHp+"")&&ae(F,T),xe&2&&se!==(se=me[1].armorClass+"")&&ae(ie,se),xe&2&&ge!==(ge=(me[1].conditions&&Array.isArray(me[1].conditions)?me[1].conditions.length:0)+"")&&ae(be,ge),Je===(Je=Qe(me,xe))&&Ie?Ie.p(me,xe):(Ie.d(1),Ie=Je(me),Ie&&(Ie.c(),Ie.m(te,null))),xe&8&&$.value!==me[3]&&ke($,me[3]),Ye===(Ye=ct(me,xe))&&Te?Te.p(me,xe):(Te.d(1),Te=Ye(me),Te&&(Te.c(),Te.m(ye,null)))},d(me){me&&f(e),Ie.d(),Te.d(),He=!1,et(Oe)}}}function Ts(s){let e,t='<div class="text-4xl mb-2">üòå</div> <p class="text-neutral/70 font-body">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-18t8x0o"&&(e.innerHTML=t),this.h()},h(){o(e,"class","text-center py-6")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function As(s){let e,t=Ne(s[1].conditions),l=[];for(let r=0;r<t.length;r+=1)l[r]=Ul(Sl(s,t,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var i=b(e);for(let a=0;a<l.length;a+=1)l[a].l(i);i.forEach(f),this.h()},h(){o(e,"class","space-y-2")},m(r,i){K(r,e,i);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(r,i){if(i&2){t=Ne(r[1].conditions);let a;for(a=0;a<t.length;a+=1){const c=Sl(r,t,a);l[a]?l[a].p(c,i):(l[a]=Ul(c),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(r){r&&f(e),it(l,r)}}}function Ul(s){let e,t,l=s[21]+"",r,i;return{c(){e=d("div"),t=d("span"),r=j(l),i=V(),this.h()},l(a){e=u(a,"DIV",{class:!0});var c=b(e);t=u(c,"SPAN",{class:!0});var h=b(t);r=B(h,l),h.forEach(f),i=I(c),c.forEach(f),this.h()},h(){o(t,"class","font-medieval text-sm text-neutral"),o(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40")},m(a,c){K(a,e,c),n(e,t),n(t,r),n(e,i)},p(a,c){c&2&&l!==(l=a[21]+"")&&ae(r,l)},d(a){a&&f(e)}}}function Ms(s){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function Ps(s){let e,t=Ne(s[1].conditions),l=[];for(let r=0;r<t.length;r+=1)l[r]=zl(jl(s,t,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var i=b(e);for(let a=0;a<l.length;a+=1)l[a].l(i);i.forEach(f),this.h()},h(){o(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(r,i){K(r,e,i);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(r,i){if(i&258){t=Ne(r[1].conditions);let a;for(a=0;a<t.length;a+=1){const c=jl(r,t,a);l[a]?l[a].p(c,i):(l[a]=zl(c),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(r){r&&f(e),it(l,r)}}}function zl(s){let e,t,l=s[21]+"",r,i,a,c="‚úï",h,m,p;function C(){return s[11](s[21])}return{c(){e=d("div"),t=d("span"),r=j(l),i=V(),a=d("button"),a.textContent=c,h=V(),this.h()},l(g){e=u(g,"DIV",{class:!0});var y=b(e);t=u(y,"SPAN",{class:!0});var _=b(t);r=B(_,l),_.forEach(f),i=I(y),a=u(y,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),z(a)!=="svelte-5t970f"&&(a.textContent=c),h=I(y),y.forEach(f),this.h()},h(){o(t,"class","font-medieval text-sm text-neutral flex-1"),o(a,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),o(a,"title","Eliminar"),o(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(g,y){K(g,e,y),n(e,t),n(t,r),n(e,i),n(e,a),n(e,h),m||(p=oe(a,"click",C),m=!0)},p(g,y){s=g,y&2&&l!==(l=s[21]+"")&&ae(r,l)},d(g){g&&f(e),m=!1,p()}}}function Ls(s){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function Ns(s){let e,t,l="üîç",r,i,a,c,h,m,p,C,g="‚ûï Agregar como personalizado",y,_;return{c(){e=d("div"),t=d("div"),t.textContent=l,r=V(),i=d("p"),a=j('No se encontr√≥ "'),c=d("span"),h=j(s[3]),m=j('"'),p=V(),C=d("button"),C.textContent=g,this.h()},l(E){e=u(E,"DIV",{class:!0});var v=b(e);t=u(v,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sy51vw"&&(t.textContent=l),r=I(v),i=u(v,"P",{class:!0});var w=b(i);a=B(w,'No se encontr√≥ "'),c=u(w,"SPAN",{class:!0});var x=b(c);h=B(x,s[3]),x.forEach(f),m=B(w,'"'),w.forEach(f),p=I(v),C=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1rs0apo"&&(C.textContent=g),v.forEach(f),this.h()},h(){o(t,"class","text-4xl mb-3"),o(c,"class","font-bold"),o(i,"class","text-neutral/70 font-body mb-3"),o(C,"class","btn btn-primary btn-sm"),o(e,"class","flex flex-col items-center justify-center h-full text-center")},m(E,v){K(E,e,v),n(e,t),n(e,r),n(e,i),n(i,a),n(i,c),n(c,h),n(i,m),n(e,p),n(e,C),y||(_=oe(C,"click",s[14]),y=!0)},p(E,v){v&8&&ae(h,E[3])},d(E){E&&f(e),y=!1,_()}}}function Os(s){let e,t=Ne(s[4]),l=[];for(let r=0;r<t.length;r+=1)l[r]=Rl(Bl(s,t,r));return{c(){e=d("div");for(let r=0;r<l.length;r+=1)l[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var i=b(e);for(let a=0;a<l.length;a+=1)l[a].l(i);i.forEach(f),this.h()},h(){o(e,"class","space-y-2")},m(r,i){K(r,e,i);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(r,i){if(i&146){t=Ne(r[4]);let a;for(a=0;a<t.length;a+=1){const c=Bl(r,t,a);l[a]?l[a].p(c,i):(l[a]=Rl(c),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(r){r&&f(e),it(l,r)}}}function Ss(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex flex-col items-center justify-center h-full")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function ql(s){let e,t="‚úì Activo";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){o(e,"class","badge badge-xs badge-success shrink-0")},m(l,r){K(l,e,r)},d(l){l&&f(e)}}}function Rl(s){let e,t,l,r=s[16].name+"",i,a,c,h,m=_t.cleanDescription(s[16].desc,120)+"",p,C,g,y,_,E,v=s[18]&&ql();function w(){return s[13](s[16])}return{c(){e=d("button"),t=d("div"),l=d("span"),i=j(r),a=V(),v&&v.c(),c=V(),h=d("p"),p=j(m),C=V(),this.h()},l(x){e=u(x,"BUTTON",{class:!0});var D=b(e);t=u(D,"DIV",{class:!0});var H=b(t);l=u(H,"SPAN",{class:!0});var M=b(l);i=B(M,r),M.forEach(f),a=I(H),v&&v.l(H),H.forEach(f),c=I(D),h=u(D,"P",{class:!0});var P=b(h);p=B(P,m),P.forEach(f),C=I(D),D.forEach(f),this.h()},h(){o(l,"class","font-medieval font-bold text-neutral"),o(t,"class","flex items-start justify-between gap-2 mb-1"),o(h,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=g=s[18],o(e,"class",y="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(x,D){K(x,e,D),n(e,t),n(t,l),n(l,i),n(t,a),v&&v.m(t,null),n(e,c),n(e,h),n(h,p),n(e,C),_||(E=oe(e,"click",w),_=!0)},p(x,D){s=x,D&16&&r!==(r=s[16].name+"")&&ae(i,r),s[18]?v||(v=ql(),v.c(),v.m(t,null)):v&&(v.d(1),v=null),D&16&&m!==(m=_t.cleanDescription(s[16].desc,120)+"")&&ae(p,m),D&18&&g!==(g=s[18])&&(e.disabled=g),D&18&&y!==(y="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&o(e,"class",y)},d(x){x&&f(e),v&&v.d(),_=!1,E()}}}function Bs(s){let e;function t(i,a){if(i[0]&&i[1]&&i[2])return Hs;if(i[0]&&i[1]&&!i[2])return Vs}let l=t(s),r=l&&l(s);return{c(){r&&r.c(),e=pt()},l(i){r&&r.l(i),e=pt()},m(i,a){r&&r.m(i,a),K(i,e,a)},p(i,[a]){l===(l=t(i))&&r?r.p(i,a):(r&&r.d(1),r=l&&l(i),r&&(r.c(),r.m(e.parentNode,e)))},i:Ce,o:Ce,d(i){i&&f(e),r&&r.d(i)}}}function js(s,e,t){let{isOpen:l=!1}=e,{combatant:r=null}=e,{isDM:i=!1}=e;const a=jt();let c="",h=[],m=!1;const p=Xl(async()=>{if(!c.trim()){t(4,h=[]);return}t(5,m=!0);try{const D=await _t.searchConditions(c);t(4,h=D.results)}catch(D){console.error("Error searching conditions:",D),t(4,h=[])}finally{t(5,m=!1)}},300);function C(D){!r||!D.trim()||!i||(Array.isArray(r.conditions)?r.conditions:[]).includes(D)||(a("add",D),t(3,c=""),t(4,h=[]))}function g(D){!r||!i||a("remove",D)}function y(){t(3,c=""),t(4,h=[]),a("close")}function _(D){D.key==="Escape"&&y()}const E=D=>g(D);function v(){c=this.value,t(3,c)}const w=D=>C(D.name),x=()=>C(c.trim());return s.$$set=D=>{"isOpen"in D&&t(0,l=D.isOpen),"combatant"in D&&t(1,r=D.combatant),"isDM"in D&&t(2,i=D.isDM)},[l,r,i,c,h,m,p,C,g,y,_,E,v,w,x]}class Us extends gt{constructor(e){super(),xt(this,e,js,Bs,Ct,{isOpen:0,combatant:1,isDM:2})}}function Fl(s,e,t){const l=s.slice();return l[49]=e[t],l[51]=t,l}function Gl(s){let e,t,l,r,i,a,c="‚úï",h,m;return{c(){e=d("div"),t=d("div"),l=d("span"),r=j(s[7]),i=V(),a=d("button"),a.textContent=c,this.h()},l(p){e=u(p,"DIV",{class:!0});var C=b(e);t=u(C,"DIV",{class:!0});var g=b(t);l=u(g,"SPAN",{});var y=b(l);r=B(y,s[7]),y.forEach(f),i=I(g),a=u(g,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-4tcifc"&&(a.textContent=c),g.forEach(f),C.forEach(f),this.h()},h(){o(a,"class","btn btn-sm"),o(t,"class","alert alert-error flex justify-between items-center"),o(e,"class","container mx-auto p-4")},m(p,C){K(p,e,C),n(e,t),n(t,l),n(l,r),n(t,i),n(t,a),h||(m=oe(a,"click",s[31]),h=!0)},p(p,C){C[0]&128&&ae(r,p[7])},d(p){p&&f(e),h=!1,m()}}}function zs(s){let e,t,l,r,i,a=s[2].name+"",c,h,m,p,C,g=s[2].round+"",y,_,E,v,w=s[3].length+"",x,D,H,M,P,k,A,U,G=s[14]&&Ql(s),S=s[13]&&Jl(s);const R=[Gs,Fs],T=[];function F(L,O){return L[3].length===0?0:1}return k=F(s),A=T[k]=R[k](s),{c(){e=d("div"),t=d("div"),l=d("div"),r=d("div"),i=d("h2"),c=j(a),h=V(),m=d("div"),p=d("div"),C=j("üîÑ Ronda "),y=j(g),_=V(),E=d("div"),v=j("üë• "),x=j(w),D=j(" Combatientes"),H=V(),G&&G.c(),M=V(),S&&S.c(),P=V(),A.c(),this.h()},l(L){e=u(L,"DIV",{class:!0});var O=b(e);t=u(O,"DIV",{class:!0});var X=b(t);l=u(X,"DIV",{class:!0});var se=b(l);r=u(se,"DIV",{class:!0});var ie=b(r);i=u(ie,"H2",{class:!0});var ne=b(i);c=B(ne,a),ne.forEach(f),h=I(ie),m=u(ie,"DIV",{class:!0});var ee=b(m);p=u(ee,"DIV",{class:!0});var Q=b(p);C=B(Q,"üîÑ Ronda "),y=B(Q,g),Q.forEach(f),_=I(ee),E=u(ee,"DIV",{class:!0});var te=b(E);v=B(te,"üë• "),x=B(te,w),D=B(te," Combatientes"),te.forEach(f),ee.forEach(f),ie.forEach(f),H=I(se),G&&G.l(se),se.forEach(f),M=I(X),S&&S.l(X),X.forEach(f),P=I(O),A.l(O),O.forEach(f),this.h()},h(){o(i,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),o(p,"class","badge badge-ornate badge-md"),o(E,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),o(m,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),o(r,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),o(l,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),o(t,"class","card-parchment mb-6 corner-ornament"),o(e,"class","p-4 max-w-5xl mx-auto")},m(L,O){K(L,e,O),n(e,t),n(t,l),n(l,r),n(r,i),n(i,c),n(r,h),n(r,m),n(m,p),n(p,C),n(p,y),n(m,_),n(m,E),n(E,v),n(E,x),n(E,D),n(l,H),G&&G.m(l,null),n(t,M),S&&S.m(t,null),n(e,P),T[k].m(e,null),U=!0},p(L,O){(!U||O[0]&4)&&a!==(a=L[2].name+"")&&ae(c,a),(!U||O[0]&4)&&g!==(g=L[2].round+"")&&ae(y,g),(!U||O[0]&8)&&w!==(w=L[3].length+"")&&ae(x,w),L[14]?G?G.p(L,O):(G=Ql(L),G.c(),G.m(l,null)):G&&(G.d(1),G=null),L[13]?S?S.p(L,O):(S=Jl(L),S.c(),S.m(t,null)):S&&(S.d(1),S=null);let X=k;k=F(L),k===X?T[k].p(L,O):(Xt(),We(T[X],1,1,()=>{T[X]=null}),Wt(),A=T[k],A?A.p(L,O):(A=T[k]=R[k](L),A.c()),Ge(A,1),A.m(e,null))},i(L){U||(Ge(A),U=!0)},o(L){We(A),U=!1},d(L){L&&f(e),G&&G.d(),S&&S.d(),T[k].d()}}}function qs(s){let e,t,l,r="‚öîÔ∏è",i,a,c="No hay combate activo",h,m,p="El DM debe iniciar un encuentro para comenzar la batalla",C;function g(E,v){return E[14]?Js:Qs}let y=g(s),_=y(s);return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=r,i=V(),a=d("h2"),a.textContent=c,h=V(),m=d("p"),m.textContent=p,C=V(),_.c(),this.h()},l(E){e=u(E,"DIV",{class:!0});var v=b(e);t=u(v,"DIV",{class:!0});var w=b(t);l=u(w,"DIV",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-19xxu84"&&(l.textContent=r),i=I(w),a=u(w,"H2",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-itogws"&&(a.textContent=c),h=I(w),m=u(w,"P",{class:!0,"data-svelte-h":!0}),z(m)!=="svelte-1smrxik"&&(m.textContent=p),C=I(w),_.l(w),w.forEach(f),v.forEach(f),this.h()},h(){o(l,"class","text-6xl mb-4"),o(a,"class","text-3xl font-medieval text-neutral mb-4"),o(m,"class","text-neutral/70 font-body mb-6"),o(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),o(e,"class","flex items-center justify-center h-full p-4")},m(E,v){K(E,e,v),n(e,t),n(t,l),n(t,i),n(t,a),n(t,h),n(t,m),n(t,C),_.m(t,null)},p(E,v){y===(y=g(E))&&_?_.p(E,v):(_.d(1),_=y(E),_&&(_.c(),_.m(t,null)))},i:Ce,o:Ce,d(E){E&&f(e),_.d()}}}function Rs(s){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){o(e,"class","flex items-center justify-center h-full")},m(l,r){K(l,e,r)},p:Ce,i:Ce,o:Ce,d(l){l&&f(e)}}}function Ql(s){let e,t,l='<span class="text-lg">‚ûï</span> Agregar',r,i,a,c="‚ñ∂Ô∏è",h,m,p,C,g="üèÅ Finalizar",y,_;return{c(){e=d("div"),t=d("button"),t.innerHTML=l,r=V(),i=d("button"),a=d("span"),a.textContent=c,h=j(" Siguiente Turno"),p=V(),C=d("button"),C.textContent=g,this.h()},l(E){e=u(E,"DIV",{class:!0});var v=b(e);t=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-sdwydq"&&(t.innerHTML=l),r=I(v),i=u(v,"BUTTON",{class:!0});var w=b(i);a=u(w,"SPAN",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-vhmvlx"&&(a.textContent=c),h=B(w," Siguiente Turno"),w.forEach(f),p=I(v),C=u(v,"BUTTON",{class:!0,"data-svelte-h":!0}),z(C)!=="svelte-1oa32z5"&&(C.textContent=g),v.forEach(f),this.h()},h(){o(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),o(a,"class","text-lg"),o(i,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),i.disabled=m=s[3].length===0,o(C,"class","btn btn-error btn-sm flex-1 sm:flex-none"),o(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(E,v){K(E,e,v),n(e,t),n(e,r),n(e,i),n(i,a),n(i,h),n(e,p),n(e,C),y||(_=[oe(t,"click",s[33]),oe(i,"click",s[27]),oe(C,"click",s[18])],y=!0)},p(E,v){v[0]&8&&m!==(m=E[3].length===0)&&(i.disabled=m)},d(E){E&&f(e),y=!1,et(_)}}}function Jl(s){let e,t,l="TURNO ACTUAL",r,i,a=s[13].name+"",c;return{c(){e=d("div"),t=d("p"),t.textContent=l,r=V(),i=d("p"),c=j(a),this.h()},l(h){e=u(h,"DIV",{class:!0});var m=b(e);t=u(m,"P",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-j3qdhu"&&(t.textContent=l),r=I(m),i=u(m,"P",{class:!0});var p=b(i);c=B(p,a),p.forEach(f),m.forEach(f),this.h()},h(){o(t,"class","text-sm font-medieval text-neutral/70 mb-1"),o(i,"class","text-2xl font-bold font-medieval text-neutral"),o(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(h,m){K(h,e,m),n(e,t),n(e,r),n(e,i),n(i,c)},p(h,m){m[0]&8192&&a!==(a=h[13].name+"")&&ae(c,a)},d(h){h&&f(e)}}}function Fs(s){let e,t,l=Ne(s[3]),r=[];for(let a=0;a<l.length;a+=1)r[a]=Kl(Fl(s,l,a));const i=a=>We(r[a],1,1,()=>{r[a]=null});return{c(){e=d("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var c=b(e);for(let h=0;h<r.length;h+=1)r[h].l(c);c.forEach(f),this.h()},h(){o(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(a,c){K(a,e,c);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);t=!0},p(a,c){if(c[0]&7356428){l=Ne(a[3]);let h;for(h=0;h<l.length;h+=1){const m=Fl(a,l,h);r[h]?(r[h].p(m,c),Ge(r[h],1)):(r[h]=Kl(m),r[h].c(),Ge(r[h],1),r[h].m(e,null))}for(Xt(),h=l.length;h<r.length;h+=1)i(h);Wt()}},i(a){if(!t){for(let c=0;c<l.length;c+=1)Ge(r[c]);t=!0}},o(a){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)We(r[c]);t=!1},d(a){a&&f(e),it(r,a)}}}function Gs(s){let e,t,l="üé≤",r,i,a="Sin combatientes",c,h,m=s[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",p;return{c(){e=d("div"),t=d("div"),t.textContent=l,r=V(),i=d("p"),i.textContent=a,c=V(),h=d("p"),p=j(m),this.h()},l(C){e=u(C,"DIV",{class:!0});var g=b(e);t=u(g,"DIV",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-9xsxws"&&(t.textContent=l),r=I(g),i=u(g,"P",{class:!0,"data-svelte-h":!0}),z(i)!=="svelte-180lhql"&&(i.textContent=a),c=I(g),h=u(g,"P",{class:!0});var y=b(h);p=B(y,m),y.forEach(f),g.forEach(f),this.h()},h(){o(t,"class","text-4xl mb-3"),o(i,"class","text-xl font-medieval text-neutral mb-2"),o(h,"class","text-neutral/70 font-body"),o(e,"class","card-parchment p-12 text-center")},m(C,g){K(C,e,g),n(e,t),n(e,r),n(e,i),n(e,c),n(e,h),n(h,p)},p(C,g){g[0]&16384&&m!==(m=C[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&ae(p,m)},i:Ce,o:Ce,d(C){C&&f(e)}}}function Kl(s){let e,t;return e=new hs({props:{combatant:s[49],isCurrentTurn:s[51]===s[2].turnIndex%s[3].length,isDM:!!s[14]}}),e.$on("updateHP",s[21]),e.$on("addCondition",s[22]),e.$on("remove",s[20]),{c(){Bt(e.$$.fragment)},l(l){St(e.$$.fragment,l)},m(l,r){Ot(e,l,r),t=!0},p(l,r){const i={};r[0]&8&&(i.combatant=l[49]),r[0]&12&&(i.isCurrentTurn=l[51]===l[2].turnIndex%l[3].length),r[0]&16384&&(i.isDM=!!l[14]),e.$set(i)},i(l){t||(Ge(e.$$.fragment,l),t=!0)},o(l){We(e.$$.fragment,l),t=!1},d(l){Nt(e,l)}}}function Qs(s){let e,t="Esperando que el DM inicie el combate...";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){o(e,"class","text-sm text-neutral/50 italic")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function Js(s){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,l,r;return{c(){e=d("button"),e.innerHTML=t,this.h()},l(i){e=u(i,"BUTTON",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){o(e,"class","btn btn-dnd btn-lg")},m(i,a){K(i,e,a),l||(r=oe(e,"click",s[32]),l=!0)},p:Ce,d(i){i&&f(e),l=!1,r()}}}function Wl(s){let e,t,l,r="‚öîÔ∏è Iniciar Encuentro",i,a,c,h='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro <span class="text-error">*</span></span>',m,p,C,g,y,_,E,v="Cancelar",w,x,D,H="‚öîÔ∏è",M,P,k,A;function U(R,T){return R[0]&&R[1]?Ws:Ks}let G=U(s),S=G(s);return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=r,i=V(),a=d("div"),c=d("label"),c.innerHTML=h,m=V(),p=d("input"),g=V(),S.c(),y=V(),_=d("div"),E=d("button"),E.textContent=v,w=V(),x=d("button"),D=d("span"),D.textContent=H,M=j(`\r
          Iniciar Combate`),this.h()},l(R){e=u(R,"DIV",{class:!0});var T=b(e);t=u(T,"DIV",{class:!0});var F=b(t);l=u(F,"H3",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-jkbohq"&&(l.textContent=r),i=I(F),a=u(F,"DIV",{class:!0});var L=b(a);c=u(L,"LABEL",{class:!0,"data-svelte-h":!0}),z(c)!=="svelte-18eazf9"&&(c.innerHTML=h),m=I(L),p=u(L,"INPUT",{type:!0,placeholder:!0,class:!0}),g=I(L),S.l(L),L.forEach(f),y=I(F),_=u(F,"DIV",{class:!0});var O=b(_);E=u(O,"BUTTON",{class:!0,"data-svelte-h":!0}),z(E)!=="svelte-1rt1icx"&&(E.textContent=v),w=I(O),x=u(O,"BUTTON",{class:!0});var X=b(x);D=u(X,"SPAN",{class:!0,"data-svelte-h":!0}),z(D)!=="svelte-v5ojki"&&(D.textContent=H),M=B(X,`\r
          Iniciar Combate`),X.forEach(f),O.forEach(f),F.forEach(f),T.forEach(f),this.h()},h(){o(l,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),o(c,"class","label"),o(p,"type","text"),o(p,"placeholder","Ej: Emboscada de Orcos"),o(p,"class",C="input input-bordered bg-[#2d241c] text-base-content "+(s[0]&&s[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),o(a,"class","form-control"),o(E,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),o(D,"class","text-xl"),o(x,"class","btn btn-dnd"),x.disabled=P=!s[15],o(_,"class","modal-action justify-center gap-4"),o(t,"class","modal-box card-parchment border-4 border-secondary"),o(e,"class","modal modal-open z-50")},m(R,T){K(R,e,T),n(e,t),n(t,l),n(t,i),n(t,a),n(a,c),n(a,m),n(a,p),ke(p,s[4]),n(a,g),S.m(a,null),n(t,y),n(t,_),n(_,E),n(_,w),n(_,x),n(x,D),n(x,M),k||(A=[oe(p,"input",s[34]),oe(p,"input",s[16]),oe(E,"click",s[23]),oe(x,"click",s[17])],k=!0)},p(R,T){T[0]&3&&C!==(C="input input-bordered bg-[#2d241c] text-base-content "+(R[0]&&R[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&o(p,"class",C),T[0]&16&&p.value!==R[4]&&ke(p,R[4]),G===(G=U(R))&&S?S.p(R,T):(S.d(1),S=G(R),S&&(S.c(),S.m(a,null))),T[0]&32768&&P!==(P=!R[15])&&(x.disabled=P)},d(R){R&&f(e),S.d(),k=!1,et(A)}}}function Ks(s){let e,t='<span class="label-text-alt text-neutral/60 italic">Nombre del encuentro (3-100 caracteres)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-61x4np"&&(e.innerHTML=t),this.h()},h(){o(e,"class","label")},m(l,r){K(l,e,r)},p:Ce,d(l){l&&f(e)}}}function Ws(s){let e,t,l,r="‚ö†Ô∏è",i,a;return{c(){e=d("label"),t=d("span"),l=d("span"),l.textContent=r,i=V(),a=j(s[0]),this.h()},l(c){e=u(c,"LABEL",{class:!0});var h=b(e);t=u(h,"SPAN",{class:!0});var m=b(t);l=u(m,"SPAN",{class:!0,"data-svelte-h":!0}),z(l)!=="svelte-15g1o1n"&&(l.textContent=r),i=I(m),a=B(m,s[0]),m.forEach(f),h.forEach(f),this.h()},h(){o(l,"class","text-lg"),o(t,"class","label-text-alt text-error"),o(e,"class","label")},m(c,h){K(c,e,h),n(e,t),n(t,l),n(t,i),n(t,a)},p(c,h){h[0]&1&&ae(a,c[0])},d(c){c&&f(e)}}}function Xs(s){let e,t,l,r,i,a,c,h,m,p,C,g,y,_,E,v,w,x=s[7]&&Gl(s);const D=[Rs,qs,zs],H=[];function M(T,F){return T[6]?0:T[2]?2:1}i=M(s),a=H[i]=D[i](s);let P=s[9]&&Wl(s);function k(T){s[35](T)}let A={combatant:s[12],isDM:!!s[14]};s[10]!==void 0&&(A.isOpen=s[10]),m=new Is({props:A}),Ft.push(()=>Gt(m,"isOpen",k)),m.$on("apply",s[24]),m.$on("close",s[36]);function U(T){s[37](T)}let G={combatant:s[12],isDM:!!s[14]};s[11]!==void 0&&(G.isOpen=s[11]),g=new Us({props:G}),Ft.push(()=>Gt(g,"isOpen",U)),g.$on("add",s[25]),g.$on("remove",s[26]),g.$on("close",s[38]);function S(T){s[39](T)}let R={players:s[5]};return s[8]!==void 0&&(R.isOpen=s[8]),E=new xs({props:R}),Ft.push(()=>Gt(E,"isOpen",S)),E.$on("add",s[19]),E.$on("close",s[40]),{c(){e=d("div"),x&&x.c(),t=V(),l=d("div"),r=d("div"),a.c(),c=V(),P&&P.c(),h=V(),Bt(m.$$.fragment),C=V(),Bt(g.$$.fragment),_=V(),Bt(E.$$.fragment),this.h()},l(T){e=u(T,"DIV",{class:!0});var F=b(e);x&&x.l(F),t=I(F),l=u(F,"DIV",{class:!0});var L=b(l);r=u(L,"DIV",{class:!0});var O=b(r);a.l(O),O.forEach(f),L.forEach(f),F.forEach(f),c=I(T),P&&P.l(T),h=I(T),St(m.$$.fragment,T),C=I(T),St(g.$$.fragment,T),_=I(T),St(E.$$.fragment,T),this.h()},h(){o(r,"class","flex-1"),o(l,"class","flex flex-1"),o(e,"class","min-h-screen flex flex-col")},m(T,F){K(T,e,F),x&&x.m(e,null),n(e,t),n(e,l),n(l,r),H[i].m(r,null),K(T,c,F),P&&P.m(T,F),K(T,h,F),Ot(m,T,F),K(T,C,F),Ot(g,T,F),K(T,_,F),Ot(E,T,F),w=!0},p(T,F){T[7]?x?x.p(T,F):(x=Gl(T),x.c(),x.m(e,t)):x&&(x.d(1),x=null);let L=i;i=M(T),i===L?H[i].p(T,F):(Xt(),We(H[L],1,1,()=>{H[L]=null}),Wt(),a=H[i],a?a.p(T,F):(a=H[i]=D[i](T),a.c()),Ge(a,1),a.m(r,null)),T[9]?P?P.p(T,F):(P=Wl(T),P.c(),P.m(h.parentNode,h)):P&&(P.d(1),P=null);const O={};F[0]&4096&&(O.combatant=T[12]),F[0]&16384&&(O.isDM=!!T[14]),!p&&F[0]&1024&&(p=!0,O.isOpen=T[10],Qt(()=>p=!1)),m.$set(O);const X={};F[0]&4096&&(X.combatant=T[12]),F[0]&16384&&(X.isDM=!!T[14]),!y&&F[0]&2048&&(y=!0,X.isOpen=T[11],Qt(()=>y=!1)),g.$set(X);const se={};F[0]&32&&(se.players=T[5]),!v&&F[0]&256&&(v=!0,se.isOpen=T[8],Qt(()=>v=!1)),E.$set(se)},i(T){w||(Ge(a),Ge(m.$$.fragment,T),Ge(g.$$.fragment,T),Ge(E.$$.fragment,T),w=!0)},o(T){We(a),We(m.$$.fragment,T),We(g.$$.fragment,T),We(E.$$.fragment,T),w=!1},d(T){T&&(f(e),f(c),f(h),f(C),f(_)),x&&x.d(),H[i].d(),P&&P.d(T),Nt(m,T),Nt(g,T),Nt(E,T)}}}function Ys(s,e,t){let l,r,i,a,c,h;il(s,ns,N=>t(29,c=N)),il(s,ss,N=>t(30,h=N)),ls.set("Combate");let m="",p=!1;function C(){t(1,p=!0)}let g=null,y=null,_=[],E=[],v=!0,w="",x=!1,D=!1,H="",M=!1,P=!1,k=null,A=null,U=null;const G=as(os);es(async()=>{await T(),await F(),await S()}),ts(()=>{A&&A(),U&&U()});async function S(){try{t(6,v=!0);const N=hl(G,"encounters"),$=pl(N,Kt("campaignId","==",r),Kt("isActive","==",!0));A=ml($,he=>{if(he.empty)t(2,y=null),t(3,_=[]),U&&(U(),U=null);else{const ue=he.docs[0];t(2,y={id:ue.id,...ue.data()}),!U&&y&&R(y.id)}t(6,v=!1)},he=>{console.error("Error en listener de encuentro:",he),t(7,w=he.message),t(6,v=!1)})}catch(N){t(7,w=N.message),t(6,v=!1)}}function R(N){const $=hl(G,"combatants"),he=pl($,Kt("encounterId","==",N),rs("initiative","desc"));U=ml(he,ue=>{if(t(3,_=ue.docs.map(J=>({id:J.id,...J.data()}))),k){const J=_.find(pe=>pe.id===k.id);J&&t(12,k=J)}},ue=>{console.error("Error en listener de combatientes:",ue)})}async function T(){try{t(28,g=await Ke.getCampaign(r))}catch(N){t(7,w=N.message)}}async function F(){try{t(5,E=await Ke.getCampaignCharacters(r))}catch(N){console.error("Error loading characters:",N)}}async function L(){t(1,p=!0);const N=fl(H);if(!N.valid){t(0,m=N.error||"");return}try{await Ke.createEncounter(r,H),t(9,D=!1),t(4,H=""),t(1,p=!1),t(0,m="")}catch($){t(7,w=$.message)}}async function O(){if(!(!y||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Ke.endEncounter(y.id)}catch(N){t(7,w=N.message)}}async function X(N){if(y)try{await Ke.addCombatant(y.id,N.detail),t(8,x=!1)}catch($){t(7,w=$.message)}}async function se(N){const $=N.detail;if(confirm(`¬øEliminar a ${$.name} del combate?`))try{await Ke.removeCombatant($.id)}catch(he){t(7,w=he.message)}}function ie(N){t(12,k=N.detail),t(10,M=!0),t(11,P=!1)}function ne(N){t(12,k=N.detail),t(11,P=!0),t(10,M=!1)}function ee(){t(9,D=!1),t(4,H=""),t(1,p=!1),t(0,m="")}async function Q(N){if(k)try{const $=N.detail,he=Math.max(0,Math.min(k.maxHp,k.currentHp+$));await Ke.updateCombatant(k.id,{currentHp:he}),t(10,M=!1),t(12,k=null)}catch($){t(7,w=$.message)}}async function te(N){if(k)try{const $=N.detail,he=Array.isArray(k.conditions)?k.conditions:[];if(he.includes($))return;const ue=[...he,$];await Ke.updateCombatant(k.id,{conditions:ue})}catch($){t(7,w=$.message)}}async function q(N){if(k)try{const $=N.detail,ue=(Array.isArray(k.conditions)?k.conditions:[]).filter(J=>J!==$);await Ke.updateCombatant(k.id,{conditions:ue})}catch($){t(7,w=$.message)}}async function Y(){if(y)try{await Ke.nextTurn(y.id)}catch(N){t(7,w=N.message)}}const Z=()=>t(7,w=""),ce=()=>t(9,D=!0),re=()=>t(8,x=!0);function ge(){H=this.value,t(4,H)}function be(N){M=N,t(10,M)}const _e=()=>{t(10,M=!1),t(12,k=null)};function W(N){P=N,t(11,P)}const fe=()=>{t(11,P=!1),t(12,k=null)};function de(N){x=N,t(8,x)}const le=()=>t(8,x=!1);return s.$$.update=()=>{if(s.$$.dirty[0]&18&&p&&H){const N=fl(H);t(0,m=N.valid?"":N.error||"")}s.$$.dirty[0]&17&&t(15,l=!m&&H.trim()),s.$$.dirty[0]&1073741824&&(r=h.params.id||""),s.$$.dirty[0]&805306368&&t(14,i=g&&c&&g.dmId===c.uid),s.$$.dirty[0]&12&&t(13,a=y&&_.length>0?_[y.turnIndex%_.length]:null)},[m,p,y,_,H,E,v,w,x,D,M,P,k,a,i,l,C,L,O,X,se,ie,ne,ee,Q,te,q,Y,g,c,h,Z,ce,re,ge,be,_e,W,fe,de,le]}class on extends gt{constructor(e){super(),xt(this,e,Ys,Xs,Ct,{},null,[-1,-1])}}export{on as component};
