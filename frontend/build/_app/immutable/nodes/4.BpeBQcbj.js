import{S as qe,i as ze,s as Fe,n as se,d as b,o as re,c as d,a as j,b as a,e as p,f as g,h as N,g as I,p as Q,j as h,k as L,t as J,G as ot,r as it,l as oe,x as ct,u as Oe,v as Pe,H as Ne,I as dt,J as ft,K as mt,L as Ge,M as he,N as ie,O as Be,P as pt,Q as Re,R as Qe,T as Je,m as Ke,q as ht,A as bt,U as Se}from"../chunks/Ci_mYp0l.js";import{e as Ue,h as vt,a as je}from"../chunks/IoV-54eZ.js";import"../chunks/IHki7fMi.js";import{p as _t}from"../chunks/BMnbv9td.js";import"../chunks/Df_Q5QZT.js";import{u as xt}from"../chunks/Cjcxx2Yi.js";import{e as We,f as Xe,g as Ye,d as gt}from"../chunks/BvvFRrhp.js";import{g as Ct,c as Et,q as kt,w as yt,o as wt}from"../chunks/eN7n43qG.js";import{c as Ht}from"../chunks/Bhgkhhu0.js";function Ze(r,t,e){const l=r.slice();return l[8]=t[e],l}function $e(r){let t,e,l,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',u,s,f,o,m="‚úèÔ∏è Editar",n,c,_,v="üóëÔ∏è Eliminar",E,x;return{c(){t=h("div"),e=h("div"),l=h("label"),l.innerHTML=i,u=L(),s=h("ul"),f=h("li"),o=h("a"),o.textContent=m,n=L(),c=h("li"),_=h("a"),_.textContent=v,this.h()},l(C){t=p(C,"DIV",{class:!0});var B=g(t);e=p(B,"DIV",{class:!0});var H=g(e);l=p(H,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),N(l)!=="svelte-1yf0k0j"&&(l.innerHTML=i),u=I(H),s=p(H,"UL",{tabindex:!0,class:!0});var A=g(s);f=p(A,"LI",{});var M=g(f);o=p(M,"A",{class:!0,"data-svelte-h":!0}),N(o)!=="svelte-wsazpu"&&(o.textContent=m),M.forEach(b),n=I(A),c=p(A,"LI",{});var y=g(c);_=p(y,"A",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-14pabf4"&&(_.textContent=v),y.forEach(b),A.forEach(b),H.forEach(b),B.forEach(b),this.h()},h(){d(l,"tabindex","0"),d(l,"class","btn btn-ghost btn-sm btn-circle"),d(o,"class","text-secondary"),d(_,"class","text-error"),d(s,"tabindex","0"),d(s,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary"),d(e,"class","dropdown dropdown-end"),d(t,"class","mt-2 sm:mt-0 flex-shrink-0")},m(C,B){j(C,t,B),a(t,e),a(e,l),a(e,u),a(e,s),a(s,f),a(f,o),a(s,n),a(s,c),a(c,_),E||(x=[oe(o,"click",r[4]),oe(_,"click",r[5])],E=!0)},p:se,d(C){C&&b(t),E=!1,it(x)}}}function et(r){let t,e,l="‚ö†Ô∏è CONDICIONES ACTIVAS",i,u,s=Ue(r[0].conditions),f=[];for(let o=0;o<s.length;o+=1)f[o]=tt(Ze(r,s,o));return{c(){t=h("div"),e=h("p"),e.textContent=l,i=L(),u=h("div");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){t=p(o,"DIV",{class:!0});var m=g(t);e=p(m,"P",{class:!0,"data-svelte-h":!0}),N(e)!=="svelte-1kn9zfj"&&(e.textContent=l),i=I(m),u=p(m,"DIV",{class:!0});var n=g(u);for(let c=0;c<f.length;c+=1)f[c].l(n);n.forEach(b),m.forEach(b),this.h()},h(){d(e,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-2"),d(u,"class","flex flex-wrap gap-1"),d(t,"class","bg-warning/10 p-2 sm:p-3 rounded-lg border border-warning/30")},m(o,m){j(o,t,m),a(t,e),a(t,i),a(t,u);for(let n=0;n<f.length;n+=1)f[n]&&f[n].m(u,null)},p(o,m){if(m&1){s=Ue(o[0].conditions);let n;for(n=0;n<s.length;n+=1){const c=Ze(o,s,n);f[n]?f[n].p(c,m):(f[n]=tt(c),f[n].c(),f[n].m(u,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=s.length}},d(o){o&&b(t),ct(f,o)}}}function tt(r){let t,e=r[8]+"",l;return{c(){t=h("div"),l=J(e),this.h()},l(i){t=p(i,"DIV",{class:!0});var u=g(t);l=Q(u,e),u.forEach(b),this.h()},h(){d(t,"class","badge badge-warning badge-sm")},m(i,u){j(i,t,u),a(t,l)},p(i,u){u&1&&e!==(e=i[8]+"")&&re(l,e)},d(i){i&&b(t)}}}function It(r){let t,e,l,i,u,s='<div class="w-20 h-20 rounded-full ring-2 ring-secondary ring-offset-2 ring-offset-[#f4e4c1]"><div class="bg-gradient-to-br from-primary to-accent flex items-center justify-center w-full h-full"><span class="text-3xl">üßô‚Äç‚ôÇÔ∏è</span></div></div>',f,o,m,n=r[0].name+"",c,_,v,E=r[0].class+"",x,C,B,H,A,M,y="CA",w,P,T=r[0].armorClass+"",U,X,K,q,ce="INIT",D,Z,S,ae=r[0].initiative+"",ye,He,W,R,be,Me="PUNTOS DE VIDA",$,ee,ue=r[0].currentHp+"",_e,Ie,de=r[0].maxHp+"",xe,we,le,Le,De,ge,te,F=r[1]&&$e(r),z=r[2]&&et(r);return{c(){t=h("div"),e=h("div"),l=h("div"),i=h("div"),u=h("div"),u.innerHTML=s,f=L(),o=h("div"),m=h("h3"),c=J(n),_=L(),v=h("p"),x=J(E),C=L(),F&&F.c(),B=L(),H=h("div"),A=h("div"),M=h("p"),M.textContent=y,w=L(),P=h("p"),U=J(T),X=L(),K=h("div"),q=h("p"),q.textContent=ce,D=L(),Z=h("p"),S=J("+"),ye=J(ae),He=L(),W=h("div"),R=h("div"),be=h("span"),be.textContent=Me,$=L(),ee=h("span"),_e=J(ue),Ie=J("/"),xe=J(de),we=L(),le=h("progress"),te=L(),z&&z.c(),this.h()},l(V){t=p(V,"DIV",{class:!0});var G=g(t);e=p(G,"DIV",{class:!0});var ne=g(e);l=p(ne,"DIV",{class:!0});var Y=g(l);i=p(Y,"DIV",{class:!0});var k=g(i);u=p(k,"DIV",{class:!0,"data-svelte-h":!0}),N(u)!=="svelte-8bgp9u"&&(u.innerHTML=s),f=I(k),o=p(k,"DIV",{class:!0});var O=g(o);m=p(O,"H3",{class:!0});var Ce=g(m);c=Q(Ce,n),Ce.forEach(b),_=I(O),v=p(O,"P",{class:!0});var Ae=g(v);x=Q(Ae,E),Ae.forEach(b),O.forEach(b),k.forEach(b),C=I(Y),F&&F.l(Y),Y.forEach(b),B=I(ne),H=p(ne,"DIV",{class:!0});var fe=g(H);A=p(fe,"DIV",{class:!0});var me=g(A);M=p(me,"P",{class:!0,"data-svelte-h":!0}),N(M)!=="svelte-byf5tg"&&(M.textContent=y),w=I(me),P=p(me,"P",{class:!0});var Ve=g(P);U=Q(Ve,T),Ve.forEach(b),me.forEach(b),X=I(fe),K=p(fe,"DIV",{class:!0});var pe=g(K);q=p(pe,"P",{class:!0,"data-svelte-h":!0}),N(q)!=="svelte-166s956"&&(q.textContent=ce),D=I(pe),Z=p(pe,"P",{class:!0});var ve=g(Z);S=Q(ve,"+"),ye=Q(ve,ae),ve.forEach(b),pe.forEach(b),fe.forEach(b),He=I(ne),W=p(ne,"DIV",{class:!0});var Ee=g(W);R=p(Ee,"DIV",{class:!0});var ke=g(R);be=p(ke,"SPAN",{class:!0,"data-svelte-h":!0}),N(be)!=="svelte-5lfz6f"&&(be.textContent=Me),$=I(ke),ee=p(ke,"SPAN",{class:!0});var Te=g(ee);_e=Q(Te,ue),Ie=Q(Te,"/"),xe=Q(Te,de),Te.forEach(b),ke.forEach(b),we=I(Ee),le=p(Ee,"PROGRESS",{class:!0,max:!0}),g(le).forEach(b),Ee.forEach(b),te=I(ne),z&&z.l(ne),ne.forEach(b),G.forEach(b),this.h()},h(){d(u,"class","avatar flex-shrink-0"),d(m,"class","text-xl sm:text-2xl font-medieval font-bold text-neutral mb-1 break-normal whitespace-normal"),d(v,"class","text-sm sm:text-base text-neutral/70 font-body whitespace-normal"),d(o,"class","flex-1 min-w-0"),d(i,"class","flex items-center gap-4 min-w-0"),d(l,"class","flex items-center justify-between mb-4 flex-wrap"),d(M,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-1"),d(P,"class","text-xl sm:text-2xl font-bold text-neutral"),d(A,"class","bg-gradient-to-br from-info/20 to-success/20 p-2 sm:p-3 rounded-lg border border-info/30"),d(q,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-1"),d(Z,"class","text-xl sm:text-2xl font-bold text-neutral"),d(K,"class","bg-gradient-to-br from-warning/20 to-error/20 p-2 sm:p-3 rounded-lg border border-warning/30"),d(H,"class","grid grid-cols-2 sm:grid-cols-2 gap-3 mb-4 text-center"),d(be,"class","font-medieval text-neutral/70"),d(ee,"class","font-bold text-neutral"),d(R,"class","flex justify-between items-center mb-2 text-sm sm:text-base"),d(le,"class",Le="progress progress-"+r[3]+" w-full h-3 sm:h-4"),le.value=De=r[0].currentHp,d(le,"max",ge=r[0].maxHp),d(W,"class","bg-gradient-to-r from-success/10 to-error/10 p-2 sm:p-3 rounded-lg border border-success/30 mb-3"),d(e,"class","card-body p-4 sm:p-5"),d(t,"class","card-parchment card-hover corner-ornament w-full max-w-md mx-auto")},m(V,G){j(V,t,G),a(t,e),a(e,l),a(l,i),a(i,u),a(i,f),a(i,o),a(o,m),a(m,c),a(o,_),a(o,v),a(v,x),a(l,C),F&&F.m(l,null),a(e,B),a(e,H),a(H,A),a(A,M),a(A,w),a(A,P),a(P,U),a(H,X),a(H,K),a(K,q),a(K,D),a(K,Z),a(Z,S),a(Z,ye),a(e,He),a(e,W),a(W,R),a(R,be),a(R,$),a(R,ee),a(ee,_e),a(ee,Ie),a(ee,xe),a(W,we),a(W,le),a(e,te),z&&z.m(e,null)},p(V,[G]){G&1&&n!==(n=V[0].name+"")&&re(c,n),G&1&&E!==(E=V[0].class+"")&&re(x,E),V[1]?F?F.p(V,G):(F=$e(V),F.c(),F.m(l,null)):F&&(F.d(1),F=null),G&1&&T!==(T=V[0].armorClass+"")&&re(U,T),G&1&&ae!==(ae=V[0].initiative+"")&&re(ye,ae),G&1&&ue!==(ue=V[0].currentHp+"")&&re(_e,ue),G&1&&de!==(de=V[0].maxHp+"")&&re(xe,de),G&8&&Le!==(Le="progress progress-"+V[3]+" w-full h-3 sm:h-4")&&d(le,"class",Le),G&1&&De!==(De=V[0].currentHp)&&(le.value=De),G&1&&ge!==(ge=V[0].maxHp)&&d(le,"max",ge),V[2]?z?z.p(V,G):(z=et(V),z.c(),z.m(e,null)):z&&(z.d(1),z=null)},i:se,o:se,d(V){V&&b(t),F&&F.d(),z&&z.d()}}}function Lt(r,t,e){let l,i,u,{character:s}=t,{isOwner:f=!1}=t;const o=ot();function m(){o("edit",s)}function n(){o("delete",s)}return r.$$set=c=>{"character"in c&&e(0,s=c.character),"isOwner"in c&&e(1,f=c.isOwner)},r.$$.update=()=>{r.$$.dirty&1&&e(6,l=s.currentHp/s.maxHp*100),r.$$.dirty&64&&e(3,i=l>50?"success":l>25?"warning":"error"),r.$$.dirty&1&&e(2,u=Array.isArray(s.conditions)&&s.conditions.length>0)},[s,f,u,i,m,n,l]}class ut extends qe{constructor(t){super(),ze(this,t,Lt,It,Fe,{character:0,isOwner:1})}}function lt(r){let t,e,l,i="‚úï",u,s,f=r[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje",o,m,n,c,_,v='<span class="label-text font-medieval text-neutral text-lg">Nombre <span class="text-error">*</span></span>',E,x,C,B,H,A,M,y,w='<span class="label-text font-medieval text-neutral text-lg">HP M√°ximo <span class="text-error">*</span></span>',P,T,U,X,K,q,ce,D='<span class="label-text font-medieval text-neutral text-lg">Clase de Armadura (CA) <span class="text-error">*</span></span>',Z,S,ae,ye,He,W,R,be="Cancelar",Me,$,ee,ue=r[2]?"üíæ":"‚ú®",_e,Ie,de=r[2]?"Guardar Cambios":"Crear Personaje",xe,we,le,Le;function De(k,O){return k[3].name&&k[4].name?Vt:Dt}let ge=De(r),te=ge(r);function F(k,O){return k[3].maxHp&&k[4].maxHp?Mt:Tt}let z=F(r),V=z(r);function G(k,O){return k[3].armorClass&&k[4].armorClass?At:Pt}let ne=G(r),Y=ne(r);return{c(){t=h("div"),e=h("div"),l=h("button"),l.textContent=i,u=L(),s=h("h3"),o=J(f),m=L(),n=h("form"),c=h("div"),_=h("label"),_.innerHTML=v,E=L(),x=h("input"),B=L(),te.c(),H=L(),A=h("div"),M=h("div"),y=h("label"),y.innerHTML=w,P=L(),T=h("input"),X=L(),V.c(),K=L(),q=h("div"),ce=h("label"),ce.innerHTML=D,Z=L(),S=h("input"),ye=L(),Y.c(),He=L(),W=h("div"),R=h("button"),R.textContent=be,Me=L(),$=h("button"),ee=h("span"),_e=J(ue),Ie=L(),xe=J(de),this.h()},l(k){t=p(k,"DIV",{class:!0});var O=g(t);e=p(O,"DIV",{class:!0});var Ce=g(e);l=p(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-1t0z3ws"&&(l.textContent=i),u=I(Ce),s=p(Ce,"H3",{class:!0});var Ae=g(s);o=Q(Ae,f),Ae.forEach(b),m=I(Ce),n=p(Ce,"FORM",{class:!0});var fe=g(n);c=p(fe,"DIV",{class:!0});var me=g(c);_=p(me,"LABEL",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-126ln4a"&&(_.innerHTML=v),E=I(me),x=p(me,"INPUT",{type:!0,placeholder:!0,class:!0}),B=I(me),te.l(me),me.forEach(b),H=I(fe),A=p(fe,"DIV",{class:!0});var Ve=g(A);M=p(Ve,"DIV",{class:!0});var pe=g(M);y=p(pe,"LABEL",{class:!0,"data-svelte-h":!0}),N(y)!=="svelte-1179efa"&&(y.innerHTML=w),P=I(pe),T=p(pe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),X=I(pe),V.l(pe),pe.forEach(b),K=I(Ve),q=p(Ve,"DIV",{class:!0});var ve=g(q);ce=p(ve,"LABEL",{class:!0,"data-svelte-h":!0}),N(ce)!=="svelte-11qwlgk"&&(ce.innerHTML=D),Z=I(ve),S=p(ve,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ye=I(ve),Y.l(ve),ve.forEach(b),Ve.forEach(b),He=I(fe),W=p(fe,"DIV",{class:!0});var Ee=g(W);R=p(Ee,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),N(R)!=="svelte-qbe6z4"&&(R.textContent=be),Me=I(Ee),$=p(Ee,"BUTTON",{type:!0,class:!0});var ke=g($);ee=p(ke,"SPAN",{class:!0});var Te=g(ee);_e=Q(Te,ue),Te.forEach(b),Ie=I(ke),xe=Q(ke,de),ke.forEach(b),Ee.forEach(b),fe.forEach(b),Ce.forEach(b),O.forEach(b),this.h()},h(){d(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),d(s,"class","font-bold text-3xl font-medieval text-neutral mb-6 text-center"),d(_,"class","label mb-1"),d(x,"type","text"),d(x,"placeholder","Ej: Gandalf el Gris"),x.required=!0,d(x,"class",C="input input-bordered bg-[#2d241c] text-base-content border-2 "+(r[3].name&&r[4].name?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),d(c,"class","form-control"),d(y,"class","label mb-1"),d(T,"type","number"),d(T,"min","1"),d(T,"max","999"),T.required=!0,d(T,"class",U="input input-bordered bg-[#2d241c] text-base-content border-2 "+(r[3].maxHp&&r[4].maxHp?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),d(M,"class","form-control"),d(ce,"class","label mb-1"),d(S,"type","number"),d(S,"min","1"),d(S,"max","30"),S.required=!0,d(S,"class",ae="input input-bordered bg-[#2d241c] text-base-content border-2 "+(r[3].armorClass&&r[4].armorClass?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),d(q,"class","form-control"),d(A,"class","grid grid-cols-1 sm:grid-cols-2 gap-4"),d(R,"type","button"),d(R,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),d(ee,"class","text-xl"),d($,"type","submit"),d($,"class","btn btn-dnd"),$.disabled=we=!r[5],d(W,"class","modal-action justify-center gap-4 mt-4"),d(n,"class","space-y-4"),d(e,"class","bg-[#2d241c] text-base-content border-4 border-secondary corner-ornament card-parchment w-full max-w-2xl p-6 relative"),d(t,"class","modal modal-open z-50")},m(k,O){j(k,t,O),a(t,e),a(e,l),a(e,u),a(e,s),a(s,o),a(e,m),a(e,n),a(n,c),a(c,_),a(c,E),a(c,x),Pe(x,r[0].name),a(c,B),te.m(c,null),a(n,H),a(n,A),a(A,M),a(M,y),a(M,P),a(M,T),Pe(T,r[0].maxHp),a(M,X),V.m(M,null),a(A,K),a(A,q),a(q,ce),a(q,Z),a(q,S),Pe(S,r[0].armorClass),a(q,ye),Y.m(q,null),a(n,He),a(n,W),a(W,R),a(W,Me),a(W,$),a($,ee),a(ee,_e),a($,Ie),a($,xe),le||(Le=[oe(l,"click",r[8]),oe(x,"input",r[9]),oe(x,"blur",r[10]),oe(T,"input",r[11]),oe(T,"blur",r[12]),oe(S,"input",r[13]),oe(S,"blur",r[14]),oe(R,"click",r[8]),oe(n,"submit",dt(r[7]))],le=!0)},p(k,O){O&4&&f!==(f=k[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje")&&re(o,f),O&24&&C!==(C="input input-bordered bg-[#2d241c] text-base-content border-2 "+(k[3].name&&k[4].name?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150")&&d(x,"class",C),O&1&&x.value!==k[0].name&&Pe(x,k[0].name),ge===(ge=De(k))&&te?te.p(k,O):(te.d(1),te=ge(k),te&&(te.c(),te.m(c,null))),O&24&&U!==(U="input input-bordered bg-[#2d241c] text-base-content border-2 "+(k[3].maxHp&&k[4].maxHp?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150")&&d(T,"class",U),O&1&&Ne(T.value)!==k[0].maxHp&&Pe(T,k[0].maxHp),z===(z=F(k))&&V?V.p(k,O):(V.d(1),V=z(k),V&&(V.c(),V.m(M,null))),O&24&&ae!==(ae="input input-bordered bg-[#2d241c] text-base-content border-2 "+(k[3].armorClass&&k[4].armorClass?"border-error":"border-primary/50")+" focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150")&&d(S,"class",ae),O&1&&Ne(S.value)!==k[0].armorClass&&Pe(S,k[0].armorClass),ne===(ne=G(k))&&Y?Y.p(k,O):(Y.d(1),Y=ne(k),Y&&(Y.c(),Y.m(q,null))),O&4&&ue!==(ue=k[2]?"üíæ":"‚ú®")&&re(_e,ue),O&4&&de!==(de=k[2]?"Guardar Cambios":"Crear Personaje")&&re(xe,de),O&32&&we!==(we=!k[5])&&($.disabled=we)},d(k){k&&b(t),te.d(),V.d(),Y.d(),le=!1,it(Le)}}}function Dt(r){let t,e='<span class="label-text-alt text-neutral/60 italic text-xs">Nombre del personaje (2-50 caracteres)</span>';return{c(){t=h("label"),t.innerHTML=e,this.h()},l(l){t=p(l,"LABEL",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-5xpbjl"&&(t.innerHTML=e),this.h()},h(){d(t,"class","label")},m(l,i){j(l,t,i)},p:se,d(l){l&&b(t)}}}function Vt(r){let t,e,l,i="‚ö†Ô∏è",u,s=r[3].name+"",f;return{c(){t=h("label"),e=h("span"),l=h("span"),l.textContent=i,u=L(),f=J(s),this.h()},l(o){t=p(o,"LABEL",{class:!0});var m=g(t);e=p(m,"SPAN",{class:!0});var n=g(e);l=p(n,"SPAN",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-15g1o1n"&&(l.textContent=i),u=I(n),f=Q(n,s),n.forEach(b),m.forEach(b),this.h()},h(){d(l,"class","text-lg"),d(e,"class","label-text-alt text-error"),d(t,"class","label")},m(o,m){j(o,t,m),a(t,e),a(e,l),a(e,u),a(e,f)},p(o,m){m&8&&s!==(s=o[3].name+"")&&re(f,s)},d(o){o&&b(t)}}}function Tt(r){let t,e='<span class="label-text-alt text-neutral/60 italic text-xs">Puntos de vida m√°ximos (1-999)</span>';return{c(){t=h("label"),t.innerHTML=e,this.h()},l(l){t=p(l,"LABEL",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1l1zyba"&&(t.innerHTML=e),this.h()},h(){d(t,"class","label")},m(l,i){j(l,t,i)},p:se,d(l){l&&b(t)}}}function Mt(r){let t,e,l,i=r[3].maxHp+"",u;return{c(){t=h("label"),e=h("span"),l=J("‚ö†Ô∏è "),u=J(i),this.h()},l(s){t=p(s,"LABEL",{class:!0});var f=g(t);e=p(f,"SPAN",{class:!0});var o=g(e);l=Q(o,"‚ö†Ô∏è "),u=Q(o,i),o.forEach(b),f.forEach(b),this.h()},h(){d(e,"class","label-text-alt text-error text-xs"),d(t,"class","label")},m(s,f){j(s,t,f),a(t,e),a(e,l),a(e,u)},p(s,f){f&8&&i!==(i=s[3].maxHp+"")&&re(u,i)},d(s){s&&b(t)}}}function Pt(r){let t,e='<span class="label-text-alt text-neutral/60 italic text-xs">Clase de Armadura (1-30)</span>';return{c(){t=h("label"),t.innerHTML=e,this.h()},l(l){t=p(l,"LABEL",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-q9nn2u"&&(t.innerHTML=e),this.h()},h(){d(t,"class","label")},m(l,i){j(l,t,i)},p:se,d(l){l&&b(t)}}}function At(r){let t,e,l,i=r[3].armorClass+"",u;return{c(){t=h("label"),e=h("span"),l=J("‚ö†Ô∏è "),u=J(i),this.h()},l(s){t=p(s,"LABEL",{class:!0});var f=g(t);e=p(f,"SPAN",{class:!0});var o=g(e);l=Q(o,"‚ö†Ô∏è "),u=Q(o,i),o.forEach(b),f.forEach(b),this.h()},h(){d(e,"class","label-text-alt text-error text-xs"),d(t,"class","label")},m(s,f){j(s,t,f),a(t,e),a(e,l),a(e,u)},p(s,f){f&8&&i!==(i=s[3].armorClass+"")&&re(u,i)},d(s){s&&b(t)}}}function jt(r){let t,e=r[1]&&lt(r);return{c(){e&&e.c(),t=Oe()},l(l){e&&e.l(l),t=Oe()},m(l,i){e&&e.m(l,i),j(l,t,i)},p(l,[i]){l[1]?e?e.p(l,i):(e=lt(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:se,o:se,d(l){l&&b(t),e&&e.d(l)}}}function Ot(r,t,e){let l,{isOpen:i=!1}=t,{isEdit:u=!1}=t,{form:s={name:"",maxHp:10,armorClass:10}}=t;const f=ot();let o={name:"",maxHp:"",armorClass:""},m={name:!1,maxHp:!1,armorClass:!1};function n(y){e(4,m[y]=!0,m)}function c(){Object.keys(m).forEach(U=>{e(4,m[U]=!0,m)});const y=We(s.name),w=Xe(s.maxHp),P=Ye(s.armorClass);return gt(y,w,P).valid?!0:(e(3,o.name=y.error||"",o),e(3,o.maxHp=w.error||"",o),e(3,o.armorClass=P.error||"",o),!1)}function _(){c()&&(f("submit",s),v())}function v(){Object.keys(m).forEach(y=>{e(4,m[y]=!1,m)}),Object.keys(o).forEach(y=>{e(3,o[y]="",o)})}function E(){v(),f("close")}function x(){s.name=this.value,e(0,s)}const C=()=>n("name");function B(){s.maxHp=Ne(this.value),e(0,s)}const H=()=>n("maxHp");function A(){s.armorClass=Ne(this.value),e(0,s)}const M=()=>n("armorClass");return r.$$set=y=>{"isOpen"in y&&e(1,i=y.isOpen),"isEdit"in y&&e(2,u=y.isEdit),"form"in y&&e(0,s=y.form)},r.$$.update=()=>{if(r.$$.dirty&17&&m.name){const y=We(s.name);e(3,o.name=y.valid?"":y.error||"",o)}if(r.$$.dirty&17&&m.maxHp){const y=Xe(s.maxHp);e(3,o.maxHp=y.valid?"":y.error||"",o)}if(r.$$.dirty&17&&m.armorClass){const y=Ye(s.armorClass);e(3,o.armorClass=y.valid?"":y.error||"",o)}r.$$.dirty&9&&e(5,l=!o.name&&!o.maxHp&&!o.armorClass&&s.name.trim()&&s.maxHp>0&&s.armorClass>0),r.$$.dirty&2&&i&&v()},[s,i,u,o,m,l,n,_,E,x,C,B,H,A,M]}class Nt extends qe{constructor(t){super(),ze(this,t,Ot,jt,Fe,{isOpen:1,isEdit:2,form:0})}}function rt(r,t,e){const l=r.slice();return l[27]=t[e],l}function st(r){let t,e,l,i,u,s="‚úï",f,o;return{c(){t=h("div"),e=h("span"),l=J(r[1]),i=L(),u=h("button"),u.textContent=s,this.h()},l(m){t=p(m,"DIV",{class:!0});var n=g(t);e=p(n,"SPAN",{});var c=g(e);l=Q(c,r[1]),c.forEach(b),i=I(n),u=p(n,"BUTTON",{class:!0,"data-svelte-h":!0}),N(u)!=="svelte-4tcifc"&&(u.textContent=s),n.forEach(b),this.h()},h(){d(u,"class","btn btn-sm"),d(t,"class","alert alert-error mb-6")},m(m,n){j(m,t,n),a(t,e),a(e,l),a(t,i),a(t,u),f||(o=oe(u,"click",r[15]),f=!0)},p(m,n){n&2&&re(l,m[1])},d(m){m&&b(t),f=!1,o()}}}function Bt(r){let t,e,l,i,u,s;const f=[qt,Ut],o=[];function m(c,_){return c[6]?0:1}e=m(r),l=o[e]=f[e](r);let n=r[5].length>0&&at(r);return{c(){t=h("div"),l.c(),i=L(),n&&n.c(),u=Oe(),this.h()},l(c){t=p(c,"DIV",{class:!0});var _=g(t);l.l(_),_.forEach(b),i=I(c),n&&n.l(c),u=Oe(),this.h()},h(){d(t,"class","mb-10")},m(c,_){j(c,t,_),o[e].m(t,null),j(c,i,_),n&&n.m(c,_),j(c,u,_),s=!0},p(c,_){let v=e;e=m(c),e===v?o[e].p(c,_):(Se(),he(o[v],1,1,()=>{o[v]=null}),Be(),l=o[e],l?l.p(c,_):(l=o[e]=f[e](c),l.c()),ie(l,1),l.m(t,null)),c[5].length>0?n?(n.p(c,_),_&32&&ie(n,1)):(n=at(c),n.c(),ie(n,1),n.m(u.parentNode,u)):n&&(Se(),he(n,1,1,()=>{n=null}),Be())},i(c){s||(ie(l),ie(n),s=!0)},o(c){he(l),he(n),s=!1},d(c){c&&(b(t),b(i),b(u)),o[e].d(),n&&n.d(c)}}}function St(r){let t,e='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){t=h("div"),t.innerHTML=e,this.h()},l(l){t=p(l,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-1f8qah6"&&(t.innerHTML=e),this.h()},h(){d(t,"class","flex justify-center py-20")},m(l,i){j(l,t,i)},p:se,i:se,o:se,d(l){l&&b(t)}}}function Ut(r){let t,e,l,i="üßô‚Äç‚ôÇÔ∏è",u,s,f="No tienes personaje",o,m,n="Crea tu personaje para unirte a las aventuras de esta campa√±a",c,_,v=`<span class="text-2xl">‚ú®</span>
                  Crear Mi Personaje`,E,x;return{c(){t=h("div"),e=h("div"),l=h("div"),l.textContent=i,u=L(),s=h("h3"),s.textContent=f,o=L(),m=h("p"),m.textContent=n,c=L(),_=h("button"),_.innerHTML=v,this.h()},l(C){t=p(C,"DIV",{class:!0});var B=g(t);e=p(B,"DIV",{class:!0});var H=g(e);l=p(H,"DIV",{class:!0,"data-svelte-h":!0}),N(l)!=="svelte-199900m"&&(l.textContent=i),u=I(H),s=p(H,"H3",{class:!0,"data-svelte-h":!0}),N(s)!=="svelte-1gfgn0e"&&(s.textContent=f),o=I(H),m=p(H,"P",{class:!0,"data-svelte-h":!0}),N(m)!=="svelte-1134wa4"&&(m.textContent=n),c=I(H),_=p(H,"BUTTON",{class:!0,"data-svelte-h":!0}),N(_)!=="svelte-1akc889"&&(_.innerHTML=v),H.forEach(b),B.forEach(b),this.h()},h(){d(l,"class","text-6xl mb-4"),d(s,"class","text-2xl font-medieval text-neutral mb-3"),d(m,"class","text-neutral/70 font-body mb-6"),d(_,"class","btn btn-dnd btn-lg"),d(e,"class","card-parchment p-8 text-center max-w-2xl justify-center items-center corner-ornament"),d(t,"class","flex justify-center")},m(C,B){j(C,t,B),a(t,e),a(e,l),a(e,u),a(e,s),a(e,o),a(e,m),a(e,c),a(e,_),E||(x=oe(_,"click",r[7]),E=!0)},p:se,i:se,o:se,d(C){C&&b(t),E=!1,x()}}}function qt(r){let t,e,l,i;return l=new ut({props:{character:r[6],isOwner:!0}}),l.$on("edit",r[16]),l.$on("delete",r[17]),{c(){t=h("div"),e=h("div"),Je(l.$$.fragment),this.h()},l(u){t=p(u,"DIV",{class:!0});var s=g(t);e=p(s,"DIV",{class:!0});var f=g(e);Qe(l.$$.fragment,f),f.forEach(b),s.forEach(b),this.h()},h(){d(e,"class","max-w-md"),d(t,"class","flex justify-center")},m(u,s){j(u,t,s),a(t,e),Re(l,e,null),i=!0},p(u,s){const f={};s&64&&(f.character=u[6]),l.$set(f)},i(u){i||(ie(l.$$.fragment,u),i=!0)},o(u){he(l.$$.fragment,u),i=!1},d(u){u&&b(t),Ge(l)}}}function at(r){let t,e="‚öîÔ∏è",l,i,u='<h2 class="text-3xl font-medieval text-center text-secondary mb-2">Compa√±eros de Aventura</h2> <p class="text-primary text-center font-body italic">Los dem√°s h√©roes de esta campa√±a</p>',s,f,o,m,n=Ue(r[5]),c=[];for(let v=0;v<n.length;v+=1)c[v]=nt(rt(r,n,v));const _=v=>he(c[v],1,1,()=>{c[v]=null});return{c(){t=h("div"),t.textContent=e,l=L(),i=h("div"),i.innerHTML=u,s=L(),f=h("div"),o=h("div");for(let v=0;v<c.length;v+=1)c[v].c();this.h()},l(v){t=p(v,"DIV",{class:!0,"data-svelte-h":!0}),N(t)!=="svelte-erxn0r"&&(t.textContent=e),l=I(v),i=p(v,"DIV",{class:!0,"data-svelte-h":!0}),N(i)!=="svelte-1azjunw"&&(i.innerHTML=u),s=I(v),f=p(v,"DIV",{class:!0});var E=g(f);o=p(E,"DIV",{class:!0});var x=g(o);for(let C=0;C<c.length;C+=1)c[C].l(x);x.forEach(b),E.forEach(b),this.h()},h(){d(t,"class","divider text-neutral/50 my-8"),d(i,"class","mb-6"),d(o,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6"),d(f,"class","w-3/4 mx-auto")},m(v,E){j(v,t,E),j(v,l,E),j(v,i,E),j(v,s,E),j(v,f,E),a(f,o);for(let x=0;x<c.length;x+=1)c[x]&&c[x].m(o,null);m=!0},p(v,E){if(E&32){n=Ue(v[5]);let x;for(x=0;x<n.length;x+=1){const C=rt(v,n,x);c[x]?(c[x].p(C,E),ie(c[x],1)):(c[x]=nt(C),c[x].c(),ie(c[x],1),c[x].m(o,null))}for(Se(),x=n.length;x<c.length;x+=1)_(x);Be()}},i(v){if(!m){for(let E=0;E<n.length;E+=1)ie(c[E]);m=!0}},o(v){c=c.filter(Boolean);for(let E=0;E<c.length;E+=1)he(c[E]);m=!1},d(v){v&&(b(t),b(l),b(i),b(s),b(f)),ct(c,v)}}}function nt(r){let t,e;return t=new ut({props:{character:r[27],isOwner:!1}}),{c(){Je(t.$$.fragment)},l(l){Qe(t.$$.fragment,l)},m(l,i){Re(t,l,i),e=!0},p(l,i){const u={};i&32&&(u.character=l[27]),t.$set(u)},i(l){e||(ie(t.$$.fragment,l),e=!0)},o(l){he(t.$$.fragment,l),e=!1},d(l){Ge(t,l)}}}function zt(r){let t,e,l,i,u,s='<h1 class="text-4xl lg:text-5xl font-bold text-secondary title-ornament mb-3 text-shadow">Personajes</h1> <p class="text-base-content/70 font-body italic text-lg mb-2">&quot;Cada h√©roe tiene su historia...&quot;</p>',f,o,m,n,c,_,v,E,x,C=r[1]&&st(r);const B=[St,Bt],H=[];function A(w,P){return w[0]?0:1}m=A(r),n=H[m]=B[m](r);function M(w){r[18](w)}let y={isEdit:r[3],form:r[4]};return r[2]!==void 0&&(y.isOpen=r[2]),v=new Nt({props:y}),ft.push(()=>mt(v,"isOpen",M)),v.$on("submit",r[9]),v.$on("close",r[11]),{c(){t=h("div"),e=h("div"),l=h("div"),i=h("div"),u=h("div"),u.innerHTML=s,f=L(),C&&C.c(),o=L(),n.c(),c=L(),_=h("div"),Je(v.$$.fragment),this.h()},l(w){t=p(w,"DIV",{class:!0});var P=g(t);e=p(P,"DIV",{class:!0});var T=g(e);l=p(T,"DIV",{class:!0});var U=g(l);i=p(U,"DIV",{class:!0});var X=g(i);u=p(X,"DIV",{class:!0,"data-svelte-h":!0}),N(u)!=="svelte-1nv5ok9"&&(u.innerHTML=s),f=I(X),C&&C.l(X),o=I(X),n.l(X),X.forEach(b),U.forEach(b),T.forEach(b),P.forEach(b),c=I(w),_=p(w,"DIV",{class:!0});var K=g(_);Qe(v.$$.fragment,K),K.forEach(b),this.h()},h(){d(u,"class","mb-8 text-center"),d(i,"class","container mx-auto max-w-7xl"),d(l,"class","flex-1 p-6"),d(e,"class","flex flex-1"),d(t,"class","min-h-screen flex flex-col"),d(_,"class","justify-center items-center")},m(w,P){j(w,t,P),a(t,e),a(e,l),a(l,i),a(i,u),a(i,f),C&&C.m(i,null),a(i,o),H[m].m(i,null),j(w,c,P),j(w,_,P),Re(v,_,null),x=!0},p(w,[P]){w[1]?C?C.p(w,P):(C=st(w),C.c(),C.m(i,o)):C&&(C.d(1),C=null);let T=m;m=A(w),m===T?H[m].p(w,P):(Se(),he(H[T],1,1,()=>{H[T]=null}),Be(),n=H[m],n?n.p(w,P):(n=H[m]=B[m](w),n.c()),ie(n,1),n.m(i,null));const U={};P&8&&(U.isEdit=w[3]),P&16&&(U.form=w[4]),!E&&P&4&&(E=!0,U.isOpen=w[2],pt(()=>E=!1)),v.$set(U)},i(w){x||(ie(n),ie(v.$$.fragment,w),x=!0)},o(w){he(n),he(v.$$.fragment,w),x=!1},d(w){w&&(b(t),b(c),b(_)),C&&C.d(),H[m].d(),Ge(v)}}}function Ft(r,t,e){let l,i,u,s,f;Ke(r,xt,D=>e(13,s=D)),Ke(r,_t,D=>e(14,f=D)),vt.set("Personajes");let o=null,m=[],n=!0,c="",_=!1,v=null,E=!1,x={name:"",maxHp:10,armorClass:10,imageUrl:""},C=null;const B=Ct(Ht);ht(async()=>{await A(),H()}),bt(()=>{C&&C()});function H(){try{e(0,n=!0);const D=Et(B,"characters"),Z=kt(D,yt("campaignId","==",l));C=wt(Z,S=>{e(12,m=S.docs.map(ae=>({id:ae.id,...ae.data()}))),e(0,n=!1)},S=>{console.error("Error en listener de personajes:",S),e(1,c=S.message),e(0,n=!1)})}catch(D){e(1,c=D.message),e(0,n=!1)}}async function A(){try{o=await je.getCampaign(l)}catch(D){e(1,c=D.message)}}function M(){e(4,x={name:"",maxHp:10,armorClass:10,imageUrl:""})}function y(){v=null,e(3,E=!1),M(),e(2,_=!0)}function w(D){v=D,e(3,E=!0),e(4,x={name:D.name,maxHp:D.maxHp,armorClass:D.armorClass,imageUrl:D.imageUrl}),e(2,_=!0)}async function P(){try{E&&v?await je.updateCharacter(v.id,{...x,class:v.class,level:v.level,initiative:v.initiative}):await je.createCharacter(l,{...x,class:"Aventurero",level:1,initiative:0}),e(2,_=!1),M()}catch(D){e(1,c=D.message)}}async function T(D){if(confirm(`¬øEliminar a ${D.name}?`))try{await je.deleteCharacter(D.id)}catch(Z){e(1,c=Z.message)}}function U(){e(2,_=!1),M()}const X=()=>e(1,c=""),K=D=>w(D.detail),q=D=>T(D.detail);function ce(D){_=D,e(2,_)}return r.$$.update=()=>{r.$$.dirty&16384&&(l=f.params.id||""),r.$$.dirty&12288&&e(6,i=m.find(D=>D.userId===(s==null?void 0:s.uid))),r.$$.dirty&12288&&e(5,u=m.filter(D=>D.userId!==(s==null?void 0:s.uid)))},[n,c,_,E,x,u,i,y,w,P,T,U,m,s,f,X,K,q,ce]}class $t extends qe{constructor(t){super(),ze(this,t,Ft,zt,Fe,{})}}export{$t as component};
