import{S as Ae,i as je,s as He,n as te,d as p,a as j,b as c,c as u,e as h,f as y,h as A,g as E,u as ye,j as m,k as w,q as Se,o as ee,y as xe,p as J,z as Ce,t as F,r as Be,v as ke,l as $,x as Pe,w as ie}from"../chunks/Ci_mYp0l.js";import{h as qe,a as fe,e as ce}from"../chunks/Cfl1PM-f.js";import"../chunks/IHki7fMi.js";import{g as Ue}from"../chunks/2A4Ak0Xg.js";import{v as Ee}from"../chunks/BvvFRrhp.js";function we(r,e,t){const l=r.slice();return l[16]=e[t].campaign,l[17]=e[t].members,l}function De(r,e,t){const l=r.slice();return l[20]=e[t],l}function Ne(r){let e,t,l,s,n,o;return{c(){e=m("div"),t=Ce("svg"),l=Ce("path"),s=w(),n=m("span"),o=F(r[6]),this.h()},l(i){e=h(i,"DIV",{class:!0});var a=y(e);t=xe(a,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0});var v=y(t);l=xe(v,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),y(l).forEach(p),v.forEach(p),s=E(a),n=h(a,"SPAN",{class:!0});var d=y(n);o=J(d,r[6]),d.forEach(p),a.forEach(p),this.h()},h(){u(l,"stroke-linecap","round"),u(l,"stroke-linejoin","round"),u(l,"stroke-width","2"),u(l,"d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"class","stroke-error shrink-0 h-6 w-6"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(n,"class","font-body"),u(e,"class","alert bg-error/20 border-2 border-error mb-6")},m(i,a){j(i,e,a),c(e,t),c(t,l),c(e,s),c(e,n),c(n,o)},p(i,a){a&64&&ee(o,i[6])},d(i){i&&p(e)}}}function ze(r){let e,t=ce(r[3]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Te(we(r,t,s));return{c(){e=m("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=h(s,"DIV",{class:!0});var n=y(e);for(let o=0;o<l.length;o+=1)l[o].l(n);n.forEach(p),this.h()},h(){u(e,"class","w-fit gap-6")},m(s,n){j(s,e,n);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(s,n){if(n&8){t=ce(s[3]);let o;for(o=0;o<t.length;o+=1){const i=we(s,t,o);l[o]?l[o].p(i,n):(l[o]=Te(i),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=t.length}},d(s){s&&p(e),Pe(l,s)}}}function Oe(r){let e,t,l="üìñ",s,n,o="Tu Grimorio est√° Vac√≠o",i,a,v="No has creado ninguna campa√±a a√∫n. ¬°Comienza tu primera aventura √©pica!",d,f,_="Crear Primera Campa√±a",b,g;return{c(){e=m("div"),t=m("div"),t.textContent=l,s=w(),n=m("h2"),n.textContent=o,i=w(),a=m("p"),a.textContent=v,d=w(),f=m("button"),f.textContent=_,this.h()},l(C){e=h(C,"DIV",{class:!0});var D=y(e);t=h(D,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-jm5f9e"&&(t.textContent=l),s=E(D),n=h(D,"H2",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-lu3jlk"&&(n.textContent=o),i=E(D),a=h(D,"P",{class:!0,"data-svelte-h":!0}),A(a)!=="svelte-1p29ydw"&&(a.textContent=v),d=E(D),f=h(D,"BUTTON",{class:!0,"data-svelte-h":!0}),A(f)!=="svelte-1tu7q9a"&&(f.textContent=_),D.forEach(p),this.h()},h(){u(t,"class","text-6xl mb-4"),u(n,"class","text-2xl font-medieval mb-3 text-neutral"),u(a,"class","text-neutral/70 font-body text-lg mb-6"),u(f,"class","btn btn-dnd"),u(e,"class","card-parchment max-w-2xl mx-auto p-12 text-center corner-ornament")},m(C,D){j(C,e,D),c(e,t),c(e,s),c(e,n),c(e,i),c(e,a),c(e,d),c(e,f),b||(g=$(f,"click",r[11]),b=!0)},p:te,d(C){C&&p(e),b=!1,g()}}}function Ge(r){let e,t='<div class="relative"><span class="loading loading-spinner loading-lg text-secondary"></span> <p class="mt-4 text-secondary font-medieval">Consultando el grimorio...</p></div>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-prkuak"&&(e.innerHTML=t),this.h()},h(){u(e,"class","flex justify-center py-20")},m(l,s){j(l,e,s)},p:te,d(l){l&&p(e)}}}function Re(r){let e,t="En busca de valientes aventureros...";return{c(){e=m("p"),e.textContent=t,this.h()},l(l){e=h(l,"P",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-1olkbmy"&&(e.textContent=t),this.h()},h(){u(e,"class","text-sm text-neutral/60 font-body italic")},m(l,s){j(l,e,s)},p:te,d(l){l&&p(e)}}}function Je(r){var o,i;let e,t,l=ce((((o=r[17])==null?void 0:o.players)??[]).slice(0,6)),s=[];for(let a=0;a<l.length;a+=1)s[a]=Ie(De(r,l,a));let n=(((i=r[17])==null?void 0:i.players)??[]).length>6&&Ve(r);return{c(){e=m("div");for(let a=0;a<s.length;a+=1)s[a].c();t=w(),n&&n.c(),this.h()},l(a){e=h(a,"DIV",{class:!0});var v=y(e);for(let d=0;d<s.length;d+=1)s[d].l(v);t=E(v),n&&n.l(v),v.forEach(p),this.h()},h(){u(e,"class","flex flex-wrap gap-2")},m(a,v){j(a,e,v);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(e,null);c(e,t),n&&n.m(e,null)},p(a,v){var d,f;if(v&8){l=ce((((d=a[17])==null?void 0:d.players)??[]).slice(0,6));let _;for(_=0;_<l.length;_+=1){const b=De(a,l,_);s[_]?s[_].p(b,v):(s[_]=Ie(b),s[_].c(),s[_].m(e,t))}for(;_<s.length;_+=1)s[_].d(1);s.length=l.length}(((f=a[17])==null?void 0:f.players)??[]).length>6?n?n.p(a,v):(n=Ve(a),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(a){a&&p(e),Pe(s,a),n&&n.d()}}}function Ie(r){let e,t,l,s,n,o;return{c(){e=m("div"),t=m("div"),l=m("img"),this.h()},l(i){e=h(i,"DIV",{class:!0,title:!0});var a=y(e);t=h(a,"DIV",{class:!0});var v=y(t);l=h(v,"IMG",{src:!0,alt:!0}),v.forEach(p),a.forEach(p),this.h()},h(){ie(l.src,s=r[20].userPhoto||"")||u(l,"src",s),u(l,"alt",n=r[20].userName||"Jugador"),u(t,"class","w-9 rounded-full ring-2 ring-success ring-offset-2 ring-offset-[#f4e4c1]"),u(e,"class","avatar"),u(e,"title",o=r[20].userName||"Jugador")},m(i,a){j(i,e,a),c(e,t),c(t,l)},p(i,a){a&8&&!ie(l.src,s=i[20].userPhoto||"")&&u(l,"src",s),a&8&&n!==(n=i[20].userName||"Jugador")&&u(l,"alt",n),a&8&&o!==(o=i[20].userName||"Jugador")&&u(e,"title",o)},d(i){i&&p(e)}}}function Ve(r){var i;let e,t,l,s,n=(((i=r[17])==null?void 0:i.players)??[]).length-6+"",o;return{c(){e=m("div"),t=m("div"),l=m("span"),s=F("+"),o=F(n),this.h()},l(a){e=h(a,"DIV",{class:!0});var v=y(e);t=h(v,"DIV",{class:!0});var d=y(t);l=h(d,"SPAN",{class:!0});var f=y(l);s=J(f,"+"),o=J(f,n),f.forEach(p),d.forEach(p),v.forEach(p),this.h()},h(){u(l,"class","text-xs font-bold"),u(t,"class","w-9 rounded-full bg-neutral text-secondary ring-2 ring-secondary"),u(e,"class","avatar placeholder")},m(a,v){j(a,e,v),c(e,t),c(t,l),c(l,s),c(l,o)},p(a,v){var d;v&8&&n!==(n=(((d=a[17])==null?void 0:d.players)??[]).length-6+"")&&ee(o,n)},d(a){a&&p(e)}}}function Te(r){var ve,pe,_e;let e,t,l,s=r[16].name+"",n,o,i,a,v="DUNGEON MASTER",d,f,_,b,g,C,D,W,N,x,P=(((pe=(ve=r[17])==null?void 0:ve.dm)==null?void 0:pe.userName)||r[16].dmName||"Dungeon Master")+"",q,I,L,z,Y,G=(((_e=r[17])==null?void 0:_e.players)??[]).length+"",T,k,H,R,S,B,Z=`<span class="text-xl">‚öîÔ∏è</span>
                Entrar a la Aventura`,ue,de,he;function me(U,M){var V;return(((V=U[17])==null?void 0:V.players)??[]).length>0?Je:Re}let re=me(r),O=re(r);function Le(){return r[12](r[16])}return{c(){e=m("div"),t=m("div"),l=m("h2"),n=F(s),o=w(),i=m("div"),a=m("p"),a.textContent=v,d=w(),f=m("div"),_=m("div"),b=m("div"),g=m("img"),W=w(),N=m("div"),x=m("p"),q=F(P),I=w(),L=m("div"),z=m("p"),Y=F("AVENTUREROS ("),T=F(G),k=F(")"),H=w(),O.c(),R=w(),S=m("div"),B=m("button"),B.innerHTML=Z,ue=w(),this.h()},l(U){e=h(U,"DIV",{class:!0});var M=y(e);t=h(M,"DIV",{class:!0});var V=y(t);l=h(V,"H2",{class:!0});var K=y(l);n=J(K,s),K.forEach(p),o=E(V),i=h(V,"DIV",{class:!0});var Q=y(i);a=h(Q,"P",{class:!0,"data-svelte-h":!0}),A(a)!=="svelte-1wz0qbo"&&(a.textContent=v),d=E(Q),f=h(Q,"DIV",{class:!0});var X=y(f);_=h(X,"DIV",{class:!0});var le=y(_);b=h(le,"DIV",{class:!0});var ae=y(b);g=h(ae,"IMG",{src:!0,alt:!0}),ae.forEach(p),le.forEach(p),W=E(X),N=h(X,"DIV",{});var se=y(N);x=h(se,"P",{class:!0});var be=y(x);q=J(be,P),be.forEach(p),se.forEach(p),X.forEach(p),Q.forEach(p),I=E(V),L=h(V,"DIV",{class:!0});var ne=y(L);z=h(ne,"P",{class:!0});var oe=y(z);Y=J(oe,"AVENTUREROS ("),T=J(oe,G),k=J(oe,")"),oe.forEach(p),H=E(ne),O.l(ne),ne.forEach(p),R=E(V),S=h(V,"DIV",{class:!0});var ge=y(S);B=h(ge,"BUTTON",{class:!0,"data-svelte-h":!0}),A(B)!=="svelte-nl0ij0"&&(B.innerHTML=Z),ge.forEach(p),V.forEach(p),ue=E(M),M.forEach(p),this.h()},h(){var U,M,V,K;u(l,"class","card-title text-2xl font-medieval text-neutral mb-4 text-center"),u(a,"class","text-xs font-medieval text-neutral/60 mb-2 tracking-wider"),ie(g.src,C=((M=(U=r[17])==null?void 0:U.dm)==null?void 0:M.userPhoto)||r[16].dmPhoto||"")||u(g,"src",C),u(g,"alt",D=((K=(V=r[17])==null?void 0:V.dm)==null?void 0:K.userName)||r[16].dmName||"DM"),u(b,"class","w-10 rounded-full ring-2 ring-secondary ring-offset-2 ring-offset-[#f4e4c1]"),u(_,"class","avatar"),u(x,"class","font-bold text-neutral font-body"),u(f,"class","flex items-center gap-3"),u(i,"class","mb-4 bg-gradient-to-r from-primary/20 to-accent/20 p-3 rounded-lg border border-primary/30"),u(z,"class","text-xs font-medieval text-neutral/60 mb-2 tracking-wider"),u(L,"class","bg-gradient-to-r from-info/10 to-success/10 p-3 rounded-lg border border-info/30"),u(B,"class","btn btn-dnd w-full"),u(S,"class","card-actions justify-center mt-6"),u(t,"class","card-body"),u(e,"class","card-parchment card-hover corner-ornament")},m(U,M){j(U,e,M),c(e,t),c(t,l),c(l,n),c(t,o),c(t,i),c(i,a),c(i,d),c(i,f),c(f,_),c(_,b),c(b,g),c(f,W),c(f,N),c(N,x),c(x,q),c(t,I),c(t,L),c(L,z),c(z,Y),c(z,T),c(z,k),c(L,H),O.m(L,null),c(t,R),c(t,S),c(S,B),c(e,ue),de||(he=$(B,"click",Le),de=!0)},p(U,M){var V,K,Q,X,le,ae,se;r=U,M&8&&s!==(s=r[16].name+"")&&ee(n,s),M&8&&!ie(g.src,C=((K=(V=r[17])==null?void 0:V.dm)==null?void 0:K.userPhoto)||r[16].dmPhoto||"")&&u(g,"src",C),M&8&&D!==(D=((X=(Q=r[17])==null?void 0:Q.dm)==null?void 0:X.userName)||r[16].dmName||"DM")&&u(g,"alt",D),M&8&&P!==(P=(((ae=(le=r[17])==null?void 0:le.dm)==null?void 0:ae.userName)||r[16].dmName||"Dungeon Master")+"")&&ee(q,P),M&8&&G!==(G=(((se=r[17])==null?void 0:se.players)??[]).length+"")&&ee(T,G),re===(re=me(r))&&O?O.p(r,M):(O.d(1),O=re(r),O&&(O.c(),O.m(L,null)))},d(U){U&&p(e),O.d(),de=!1,he()}}}function Me(r){let e,t,l,s="üìú Crear Nueva Campa√±a",n,o,i,a='<span class="label-text font-medieval text-neutral text-lg">Nombre de la Campa√±a <span class="text-error">*</span></span>',v,d,f,_,b,g,C,D="Cancelar",W,N,x,P="‚ú®",q,I,L,z;function Y(k,H){return k[1]&&k[2]?We:Fe}let G=Y(r),T=G(r);return{c(){e=m("div"),t=m("div"),l=m("h3"),l.textContent=s,n=w(),o=m("div"),i=m("label"),i.innerHTML=a,v=w(),d=m("input"),_=w(),T.c(),b=w(),g=m("div"),C=m("button"),C.textContent=D,W=w(),N=m("button"),x=m("span"),x.textContent=P,q=F(`\r
          Crear`),this.h()},l(k){e=h(k,"DIV",{class:!0});var H=y(e);t=h(H,"DIV",{class:!0});var R=y(t);l=h(R,"H3",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-yzigb6"&&(l.textContent=s),n=E(R),o=h(R,"DIV",{class:!0});var S=y(o);i=h(S,"LABEL",{class:!0,"data-svelte-h":!0}),A(i)!=="svelte-okt6hf"&&(i.innerHTML=a),v=E(S),d=h(S,"INPUT",{type:!0,placeholder:!0,class:!0}),_=E(S),T.l(S),S.forEach(p),b=E(R),g=h(R,"DIV",{class:!0});var B=y(g);C=h(B,"BUTTON",{class:!0,"data-svelte-h":!0}),A(C)!=="svelte-uzvcor"&&(C.textContent=D),W=E(B),N=h(B,"BUTTON",{class:!0});var Z=y(N);x=h(Z,"SPAN",{class:!0,"data-svelte-h":!0}),A(x)!=="svelte-1to6107"&&(x.textContent=P),q=J(Z,`\r
          Crear`),Z.forEach(p),B.forEach(p),R.forEach(p),H.forEach(p),this.h()},h(){u(l,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),u(i,"class","label"),u(d,"type","text"),u(d,"placeholder","Ej: La Mina Perdida de Phandelver"),u(d,"class",f="input bg-[#2d241c] text-base-content border-2 "+(r[1]&&r[2]?"border-error":"border-primary/50")+" w-full text-lg font-body focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),u(o,"class","form-control w-full flex-1"),u(C,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-32"),u(x,"class","text-xl"),u(N,"class","btn btn-dnd w-32 disabled:opacity-50 disabled:cursor-not-allowed"),N.disabled=I=!r[7],u(g,"class","mt-6 flex justify-center gap-4"),u(t,"class","card-parchment border-4 border-secondary corner-ornament w-[420px] max-w-full relative p-6 flex flex-col transition-all duration-200 transform scale-100"),u(e,"class","modal modal-open z-50 fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm")},m(k,H){j(k,e,H),c(e,t),c(t,l),c(t,n),c(t,o),c(o,i),c(o,v),c(o,d),ke(d,r[0].name),c(o,_),T.m(o,null),c(t,b),c(t,g),c(g,C),c(g,W),c(g,N),c(N,x),c(N,q),L||(z=[$(d,"input",r[13]),$(d,"input",r[8]),$(C,"click",r[10]),$(N,"click",r[9])],L=!0)},p(k,H){H&6&&f!==(f="input bg-[#2d241c] text-base-content border-2 "+(k[1]&&k[2]?"border-error":"border-primary/50")+" w-full text-lg font-body focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&u(d,"class",f),H&1&&d.value!==k[0].name&&ke(d,k[0].name),G===(G=Y(k))&&T?T.p(k,H):(T.d(1),T=G(k),T&&(T.c(),T.m(o,null))),H&128&&I!==(I=!k[7])&&(N.disabled=I)},d(k){k&&p(e),T.d(),L=!1,Be(z)}}}function Fe(r){let e,t='<span class="label-text-alt text-neutral/60 italic">Elige un nombre √©pico para tu aventura (3-100 caracteres)</span>';return{c(){e=m("label"),e.innerHTML=t,this.h()},l(l){e=h(l,"LABEL",{class:!0,"data-svelte-h":!0}),A(e)!=="svelte-1ylpk91"&&(e.innerHTML=t),this.h()},h(){u(e,"class","label")},m(l,s){j(l,e,s)},p:te,d(l){l&&p(e)}}}function We(r){let e,t,l,s="‚ö†Ô∏è",n,o;return{c(){e=m("label"),t=m("span"),l=m("span"),l.textContent=s,n=w(),o=F(r[1]),this.h()},l(i){e=h(i,"LABEL",{class:!0});var a=y(e);t=h(a,"SPAN",{class:!0});var v=y(t);l=h(v,"SPAN",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-15g1o1n"&&(l.textContent=s),n=E(v),o=J(v,r[1]),v.forEach(p),a.forEach(p),this.h()},h(){u(l,"class","text-lg"),u(t,"class","label-text-alt text-error"),u(e,"class","label")},m(i,a){j(i,e,a),c(e,t),c(t,l),c(t,n),c(t,o)},p(i,a){a&2&&ee(o,i[1])},d(i){i&&p(e)}}}function Ke(r){let e,t,l='<h1 class="text-4xl lg:text-5xl font-bold text-secondary title-ornament mx-4 mb-3 text-shadow">Mis Campa√±as</h1> <p class="text-base-content/70 font-body italic text-lg">&quot;Las aventuras aguardan a quienes se atreven a explorar...&quot;</p>',s,n,o,i,a=r[6]&&Ne(r);function v(b,g){return b[4]?Ge:b[3].length===0?Oe:ze}let d=v(r),f=d(r),_=r[5]&&Me(r);return{c(){e=m("div"),t=m("div"),t.innerHTML=l,s=w(),a&&a.c(),n=w(),f.c(),o=w(),_&&_.c(),i=ye(),this.h()},l(b){e=h(b,"DIV",{class:!0});var g=y(e);t=h(g,"DIV",{class:!0,"data-svelte-h":!0}),A(t)!=="svelte-j8o7kj"&&(t.innerHTML=l),s=E(g),a&&a.l(g),n=E(g),f.l(g),g.forEach(p),o=E(b),_&&_.l(b),i=ye(),this.h()},h(){u(t,"class","mb-8 text-center"),u(e,"class","container mx-auto justify-center items-center flex flex-col p-6 lg:p-8")},m(b,g){j(b,e,g),c(e,t),c(e,s),a&&a.m(e,null),c(e,n),f.m(e,null),j(b,o,g),_&&_.m(b,g),j(b,i,g)},p(b,[g]){b[6]?a?a.p(b,g):(a=Ne(b),a.c(),a.m(e,n)):a&&(a.d(1),a=null),d===(d=v(b))&&f?f.p(b,g):(f.d(1),f=d(b),f&&(f.c(),f.m(e,null))),b[5]?_?_.p(b,g):(_=Me(b),_.c(),_.m(i.parentNode,i)):_&&(_.d(1),_=null)},i:te,o:te,d(b){b&&(p(e),p(o),p(i)),a&&a.d(),f.d(),_&&_.d(b)}}}function Qe(r,e,t){let l;qe.set("üé≤ Grimorio de Aventuras");let s=[],n=[],o=!0,i=!1,a={name:""},v="",d="",f=!1;Se(async()=>{await _()});async function _(){try{t(4,o=!0),t(6,v="");const x=await fe.getCampaigns();s=Array.isArray(x)?x:[];const P=await Promise.all(s.map(async q=>{try{const I=await fe.getCampaignMembers(q.id),L={dm:(I==null?void 0:I.dm)??null,players:Array.isArray(I==null?void 0:I.players)?I.players:[]};return{campaign:q,members:L}}catch{return{campaign:q,members:{dm:null,players:[]}}}}));t(3,n=P)}catch(x){t(6,v=(x==null?void 0:x.message)??String(x)),s=[],t(3,n=[])}finally{t(4,o=!1)}}function b(){t(2,f=!0)}async function g(){t(2,f=!0);const x=Ee(a.name);if(!x.valid){t(1,d=x.error||"");return}try{t(6,v=""),await fe.createCampaign({name:a.name.trim()}),t(5,i=!1),t(0,a={name:""}),t(2,f=!1),t(1,d=""),await _()}catch(P){t(6,v=(P==null?void 0:P.message)??String(P))}}function C(){t(5,i=!1),t(0,a={name:""}),t(2,f=!1),t(1,d="")}const D=()=>t(5,i=!0),W=x=>Ue(`/campaigns/${x.id}`);function N(){a.name=this.value,t(0,a)}return r.$$.update=()=>{if(r.$$.dirty&5&&f&&a.name){const x=Ee(a.name);t(1,d=x.valid?"":x.error||"")}r.$$.dirty&3&&t(7,l=!d&&a.name.trim())},[a,d,f,n,o,i,v,l,b,g,C,D,W,N]}class tt extends Ae{constructor(e){super(),je(this,e,Qe,Ke,He,{})}}export{tt as component};
