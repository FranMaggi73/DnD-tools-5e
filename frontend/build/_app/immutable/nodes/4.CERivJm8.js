import{S as Ue,i as Be,s as Se,n as oe,d as v,a as re,m as c,b as S,c as r,e as f,f as x,o as j,h as y,g as Z,j as m,k as D,t as $,A as at,u as rt,r as ce,x as nt,q as Me,v as Ce,B as Pe,C as it,D as ct,E as ut,F as qe,G as ne,H as ee,I as je,J as dt,K as ze,L as Fe,M as Ge,l as Qe,p as ft,N as mt,O as Oe}from"../chunks/B11dj0TC.js";import{e as Ae,h as ht,a as Le}from"../chunks/BFUIfuOa.js";import"../chunks/IHki7fMi.js";import{p as pt}from"../chunks/CSm4Wu21.js";import"../chunks/4AD-5CNy.js";import{u as vt}from"../chunks/Bhbx1GBa.js";import{g as _t,c as bt,q as gt,w as xt,o as Ct}from"../chunks/eN7n43qG.js";import{c as Et}from"../chunks/Bhgkhhu0.js";function We(n,t,e){const l=n.slice();return l[8]=t[e],l}function Xe(n){let t,e,l,i='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',o,u,p,d,_="‚úèÔ∏è Editar",s,a,b,h="üóëÔ∏è Eliminar",w,g;return{c(){t=m("div"),e=m("div"),l=m("label"),l.innerHTML=i,o=D(),u=m("ul"),p=m("li"),d=m("a"),d.textContent=_,s=D(),a=m("li"),b=m("a"),b.textContent=h,this.h()},l(C){t=f(C,"DIV",{class:!0});var H=x(t);e=f(H,"DIV",{class:!0});var I=x(e);l=f(I,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),j(l)!=="svelte-1yf0k0j"&&(l.innerHTML=i),o=y(I),u=f(I,"UL",{tabindex:!0,class:!0});var T=x(u);p=f(T,"LI",{});var q=x(p);d=f(q,"A",{class:!0,"data-svelte-h":!0}),j(d)!=="svelte-wsazpu"&&(d.textContent=_),q.forEach(v),s=y(T),a=f(T,"LI",{});var Q=x(a);b=f(Q,"A",{class:!0,"data-svelte-h":!0}),j(b)!=="svelte-14pabf4"&&(b.textContent=h),Q.forEach(v),T.forEach(v),I.forEach(v),H.forEach(v),this.h()},h(){c(l,"tabindex","0"),c(l,"class","btn btn-ghost btn-sm btn-circle"),c(d,"class","text-secondary"),c(b,"class","text-error"),c(u,"tabindex","0"),c(u,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary"),c(e,"class","dropdown dropdown-end"),c(t,"class","mt-2 sm:mt-0 flex-shrink-0")},m(C,H){S(C,t,H),r(t,e),r(e,l),r(e,o),r(e,u),r(u,p),r(p,d),r(u,s),r(u,a),r(a,b),w||(g=[ce(d,"click",n[4]),ce(b,"click",n[5])],w=!0)},p:oe,d(C){C&&v(t),w=!1,rt(g)}}}function Ye(n){let t,e,l="‚ö†Ô∏è CONDICIONES ACTIVAS",i,o,u=Ae(n[0].conditions),p=[];for(let d=0;d<u.length;d+=1)p[d]=Ze(We(n,u,d));return{c(){t=m("div"),e=m("p"),e.textContent=l,i=D(),o=m("div");for(let d=0;d<p.length;d+=1)p[d].c();this.h()},l(d){t=f(d,"DIV",{class:!0});var _=x(t);e=f(_,"P",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-1kn9zfj"&&(e.textContent=l),i=y(_),o=f(_,"DIV",{class:!0});var s=x(o);for(let a=0;a<p.length;a+=1)p[a].l(s);s.forEach(v),_.forEach(v),this.h()},h(){c(e,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-2"),c(o,"class","flex flex-wrap gap-1"),c(t,"class","bg-warning/10 p-2 sm:p-3 rounded-lg border border-warning/30")},m(d,_){S(d,t,_),r(t,e),r(t,i),r(t,o);for(let s=0;s<p.length;s+=1)p[s]&&p[s].m(o,null)},p(d,_){if(_&1){u=Ae(d[0].conditions);let s;for(s=0;s<u.length;s+=1){const a=We(d,u,s);p[s]?p[s].p(a,_):(p[s]=Ze(a),p[s].c(),p[s].m(o,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=u.length}},d(d){d&&v(t),nt(p,d)}}}function Ze(n){let t,e=n[8]+"",l;return{c(){t=m("div"),l=$(e),this.h()},l(i){t=f(i,"DIV",{class:!0});var o=x(t);l=Z(o,e),o.forEach(v),this.h()},h(){c(t,"class","badge badge-warning badge-sm")},m(i,o){S(i,t,o),r(t,l)},p(i,o){o&1&&e!==(e=i[8]+"")&&re(l,e)},d(i){i&&v(t)}}}function wt(n){let t,e,l,i,o,u='<div class="w-20 h-20 rounded-full ring-2 ring-secondary ring-offset-2 ring-offset-[#f4e4c1]"><div class="bg-gradient-to-br from-primary to-accent flex items-center justify-center w-full h-full"><span class="text-3xl">üßô‚Äç‚ôÇÔ∏è</span></div></div>',p,d,_,s=n[0].name+"",a,b,h,w=n[0].class+"",g,C,H,I,T,q,Q="CA",E,V,L=n[0].armorClass+"",P,K,F,O,he="INIT",k,A,le,te=n[0].initiative+"",R,ie,W,X,se,pe="PUNTOS DE VIDA",ve,Y,ue=n[0].currentHp+"",ge,N,z=n[0].maxHp+"",ae,xe,G,de,fe,me,_e,U=n[1]&&Xe(n),B=n[2]&&Ye(n);return{c(){t=m("div"),e=m("div"),l=m("div"),i=m("div"),o=m("div"),o.innerHTML=u,p=D(),d=m("div"),_=m("h3"),a=$(s),b=D(),h=m("p"),g=$(w),C=D(),U&&U.c(),H=D(),I=m("div"),T=m("div"),q=m("p"),q.textContent=Q,E=D(),V=m("p"),P=$(L),K=D(),F=m("div"),O=m("p"),O.textContent=he,k=D(),A=m("p"),le=$("+"),R=$(te),ie=D(),W=m("div"),X=m("div"),se=m("span"),se.textContent=pe,ve=D(),Y=m("span"),ge=$(ue),N=$("/"),ae=$(z),xe=D(),G=m("progress"),_e=D(),B&&B.c(),this.h()},l(M){t=f(M,"DIV",{class:!0});var J=x(t);e=f(J,"DIV",{class:!0});var be=x(e);l=f(be,"DIV",{class:!0});var Ee=x(l);i=f(Ee,"DIV",{class:!0});var we=x(i);o=f(we,"DIV",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-8bgp9u"&&(o.innerHTML=u),p=y(we),d=f(we,"DIV",{class:!0});var ke=x(d);_=f(ke,"H3",{class:!0});var Re=x(_);a=Z(Re,s),Re.forEach(v),b=y(ke),h=f(ke,"P",{class:!0});var Je=x(h);g=Z(Je,w),Je.forEach(v),ke.forEach(v),we.forEach(v),C=y(Ee),U&&U.l(Ee),Ee.forEach(v),H=y(be),I=f(be,"DIV",{class:!0});var Ie=x(I);T=f(Ie,"DIV",{class:!0});var ye=x(T);q=f(ye,"P",{class:!0,"data-svelte-h":!0}),j(q)!=="svelte-byf5tg"&&(q.textContent=Q),E=y(ye),V=f(ye,"P",{class:!0});var Ke=x(V);P=Z(Ke,L),Ke.forEach(v),ye.forEach(v),K=y(Ie),F=f(Ie,"DIV",{class:!0});var De=x(F);O=f(De,"P",{class:!0,"data-svelte-h":!0}),j(O)!=="svelte-166s956"&&(O.textContent=he),k=y(De),A=f(De,"P",{class:!0});var Ne=x(A);le=Z(Ne,"+"),R=Z(Ne,te),Ne.forEach(v),De.forEach(v),Ie.forEach(v),ie=y(be),W=f(be,"DIV",{class:!0});var He=x(W);X=f(He,"DIV",{class:!0});var Ve=x(X);se=f(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),j(se)!=="svelte-5lfz6f"&&(se.textContent=pe),ve=y(Ve),Y=f(Ve,"SPAN",{class:!0});var Te=x(Y);ge=Z(Te,ue),N=Z(Te,"/"),ae=Z(Te,z),Te.forEach(v),Ve.forEach(v),xe=y(He),G=f(He,"PROGRESS",{class:!0,max:!0}),x(G).forEach(v),He.forEach(v),_e=y(be),B&&B.l(be),be.forEach(v),J.forEach(v),this.h()},h(){c(o,"class","avatar flex-shrink-0"),c(_,"class","text-xl sm:text-2xl font-medieval font-bold text-neutral mb-1 break-normal whitespace-normal"),c(h,"class","text-sm sm:text-base text-neutral/70 font-body whitespace-normal"),c(d,"class","flex-1 min-w-0"),c(i,"class","flex items-center gap-4 min-w-0"),c(l,"class","flex items-center justify-between mb-4 flex-wrap"),c(q,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-1"),c(V,"class","text-xl sm:text-2xl font-bold text-neutral"),c(T,"class","bg-gradient-to-br from-info/20 to-success/20 p-2 sm:p-3 rounded-lg border border-info/30"),c(O,"class","text-xs sm:text-sm font-medieval text-neutral/60 mb-1"),c(A,"class","text-xl sm:text-2xl font-bold text-neutral"),c(F,"class","bg-gradient-to-br from-warning/20 to-error/20 p-2 sm:p-3 rounded-lg border border-warning/30"),c(I,"class","grid grid-cols-2 sm:grid-cols-2 gap-3 mb-4 text-center"),c(se,"class","font-medieval text-neutral/70"),c(Y,"class","font-bold text-neutral"),c(X,"class","flex justify-between items-center mb-2 text-sm sm:text-base"),c(G,"class",de="progress progress-"+n[3]+" w-full h-3 sm:h-4"),G.value=fe=n[0].currentHp,c(G,"max",me=n[0].maxHp),c(W,"class","bg-gradient-to-r from-success/10 to-error/10 p-2 sm:p-3 rounded-lg border border-success/30 mb-3"),c(e,"class","card-body p-4 sm:p-5"),c(t,"class","card-parchment card-hover corner-ornament w-full max-w-md mx-auto")},m(M,J){S(M,t,J),r(t,e),r(e,l),r(l,i),r(i,o),r(i,p),r(i,d),r(d,_),r(_,a),r(d,b),r(d,h),r(h,g),r(l,C),U&&U.m(l,null),r(e,H),r(e,I),r(I,T),r(T,q),r(T,E),r(T,V),r(V,P),r(I,K),r(I,F),r(F,O),r(F,k),r(F,A),r(A,le),r(A,R),r(e,ie),r(e,W),r(W,X),r(X,se),r(X,ve),r(X,Y),r(Y,ge),r(Y,N),r(Y,ae),r(W,xe),r(W,G),r(e,_e),B&&B.m(e,null)},p(M,[J]){J&1&&s!==(s=M[0].name+"")&&re(a,s),J&1&&w!==(w=M[0].class+"")&&re(g,w),M[1]?U?U.p(M,J):(U=Xe(M),U.c(),U.m(l,null)):U&&(U.d(1),U=null),J&1&&L!==(L=M[0].armorClass+"")&&re(P,L),J&1&&te!==(te=M[0].initiative+"")&&re(R,te),J&1&&ue!==(ue=M[0].currentHp+"")&&re(ge,ue),J&1&&z!==(z=M[0].maxHp+"")&&re(ae,z),J&8&&de!==(de="progress progress-"+M[3]+" w-full h-3 sm:h-4")&&c(G,"class",de),J&1&&fe!==(fe=M[0].currentHp)&&(G.value=fe),J&1&&me!==(me=M[0].maxHp)&&c(G,"max",me),M[2]?B?B.p(M,J):(B=Ye(M),B.c(),B.m(e,null)):B&&(B.d(1),B=null)},i:oe,o:oe,d(M){M&&v(t),U&&U.d(),B&&B.d()}}}function kt(n,t,e){let l,i,o,{character:u}=t,{isOwner:p=!1}=t;const d=at();function _(){d("edit",u)}function s(){d("delete",u)}return n.$$set=a=>{"character"in a&&e(0,u=a.character),"isOwner"in a&&e(1,p=a.isOwner)},n.$$.update=()=>{n.$$.dirty&1&&e(6,l=u.currentHp/u.maxHp*100),n.$$.dirty&64&&e(3,i=l>50?"success":l>25?"warning":"error"),n.$$.dirty&1&&e(2,o=Array.isArray(u.conditions)&&u.conditions.length>0)},[u,p,o,i,_,s,l]}class ot extends Ue{constructor(t){super(),Be(this,t,kt,wt,Se,{character:0,isOwner:1})}}function $e(n){let t,e,l,i="‚úï",o,u,p=n[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje",d,_,s,a,b,h='<span class="label-text font-medieval text-neutral text-lg">Nombre *</span>',w,g,C,H,I,T,q='<span class="label-text font-medieval text-neutral text-lg">HP M√°ximo *</span>',Q,E,V,L,P,K='<span class="label-text font-medieval text-neutral text-lg">Clase de Armadura (CA) *</span>',F,O,he,k,A,le="Cancelar",te,R,ie,W=n[2]?"üíæ":"‚ú®",X,se,pe=n[2]?"Guardar Cambios":"Crear Personaje",ve,Y,ue,ge;return{c(){t=m("div"),e=m("div"),l=m("button"),l.textContent=i,o=D(),u=m("h3"),d=$(p),_=D(),s=m("form"),a=m("div"),b=m("label"),b.innerHTML=h,w=D(),g=m("input"),C=D(),H=m("div"),I=m("div"),T=m("label"),T.innerHTML=q,Q=D(),E=m("input"),V=D(),L=m("div"),P=m("label"),P.innerHTML=K,F=D(),O=m("input"),he=D(),k=m("div"),A=m("button"),A.textContent=le,te=D(),R=m("button"),ie=m("span"),X=$(W),se=D(),ve=$(pe),this.h()},l(N){t=f(N,"DIV",{class:!0});var z=x(t);e=f(z,"DIV",{class:!0});var ae=x(e);l=f(ae,"BUTTON",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-weuy30"&&(l.textContent=i),o=y(ae),u=f(ae,"H3",{class:!0});var xe=x(u);d=Z(xe,p),xe.forEach(v),_=y(ae),s=f(ae,"FORM",{class:!0});var G=x(s);a=f(G,"DIV",{class:!0});var de=x(a);b=f(de,"LABEL",{class:!0,"data-svelte-h":!0}),j(b)!=="svelte-1pn00cu"&&(b.innerHTML=h),w=y(de),g=f(de,"INPUT",{type:!0,placeholder:!0,class:!0}),de.forEach(v),C=y(G),H=f(G,"DIV",{class:!0});var fe=x(H);I=f(fe,"DIV",{class:!0});var me=x(I);T=f(me,"LABEL",{class:!0,"data-svelte-h":!0}),j(T)!=="svelte-1hd80f6"&&(T.innerHTML=q),Q=y(me),E=f(me,"INPUT",{type:!0,min:!0,class:!0}),me.forEach(v),V=y(fe),L=f(fe,"DIV",{class:!0});var _e=x(L);P=f(_e,"LABEL",{class:!0,"data-svelte-h":!0}),j(P)!=="svelte-1lykn8k"&&(P.innerHTML=K),F=y(_e),O=f(_e,"INPUT",{type:!0,min:!0,class:!0}),_e.forEach(v),fe.forEach(v),he=y(G),k=f(G,"DIV",{class:!0});var U=x(k);A=f(U,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(A)!=="svelte-hlh51s"&&(A.textContent=le),te=y(U),R=f(U,"BUTTON",{type:!0,class:!0});var B=x(R);ie=f(B,"SPAN",{class:!0});var M=x(ie);X=Z(M,W),M.forEach(v),se=y(B),ve=Z(B,pe),B.forEach(v),U.forEach(v),G.forEach(v),ae.forEach(v),z.forEach(v),this.h()},h(){c(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),c(u,"class","font-bold text-3xl font-medieval text-neutral mb-6 text-center"),c(b,"class","label mb-1"),c(g,"type","text"),c(g,"placeholder","Ej: Gandalf el Gris"),g.required=!0,c(g,"class","input input-bordered bg-[#2d241c] text-base-content border-2 border-primary/50 focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),c(a,"class","form-control"),c(T,"class","label mb-1"),c(E,"type","number"),c(E,"min","1"),E.required=!0,c(E,"class","input input-bordered bg-[#2d241c] text-base-content border-2 border-primary/50 focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),c(I,"class","form-control"),c(P,"class","label mb-1"),c(O,"type","number"),c(O,"min","1"),O.required=!0,c(O,"class","input input-bordered bg-[#2d241c] text-base-content border-2 border-primary/50 focus:border-secondary focus:ring-0 focus:outline-none w-full transition-colors duration-150"),c(L,"class","form-control"),c(H,"class","grid grid-cols-1 sm:grid-cols-2 gap-4"),c(A,"type","button"),c(A,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),c(ie,"class","text-xl"),c(R,"type","submit"),c(R,"class","btn btn-dnd"),R.disabled=Y=!n[0].name||!n[0].maxHp,c(k,"class","modal-action justify-center gap-4 mt-4"),c(s,"class","space-y-4"),c(e,"class","bg-[#2d241c] text-base-content border-4 border-secondary corner-ornament card-parchment w-full max-w-2xl p-6 relative"),c(t,"class","modal modal-open z-50")},m(N,z){S(N,t,z),r(t,e),r(e,l),r(e,o),r(e,u),r(u,d),r(e,_),r(e,s),r(s,a),r(a,b),r(a,w),r(a,g),Ce(g,n[0].name),r(s,C),r(s,H),r(H,I),r(I,T),r(I,Q),r(I,E),Ce(E,n[0].maxHp),r(H,V),r(H,L),r(L,P),r(L,F),r(L,O),Ce(O,n[0].armorClass),r(s,he),r(s,k),r(k,A),r(k,te),r(k,R),r(R,ie),r(ie,X),r(R,se),r(R,ve),ue||(ge=[ce(l,"click",n[4]),ce(g,"input",n[5]),ce(E,"input",n[6]),ce(O,"input",n[7]),ce(A,"click",n[4]),ce(s,"submit",it(n[3]))],ue=!0)},p(N,z){z&4&&p!==(p=N[2]?"‚úèÔ∏è Editar Personaje":"üßô‚Äç‚ôÇÔ∏è Crear Personaje")&&re(d,p),z&1&&g.value!==N[0].name&&Ce(g,N[0].name),z&1&&Pe(E.value)!==N[0].maxHp&&Ce(E,N[0].maxHp),z&1&&Pe(O.value)!==N[0].armorClass&&Ce(O,N[0].armorClass),z&4&&W!==(W=N[2]?"üíæ":"‚ú®")&&re(X,W),z&4&&pe!==(pe=N[2]?"Guardar Cambios":"Crear Personaje")&&re(ve,pe),z&1&&Y!==(Y=!N[0].name||!N[0].maxHp)&&(R.disabled=Y)},d(N){N&&v(t),ue=!1,rt(ge)}}}function It(n){let t,e=n[1]&&$e(n);return{c(){e&&e.c(),t=Me()},l(l){e&&e.l(l),t=Me()},m(l,i){e&&e.m(l,i),S(l,t,i)},p(l,[i]){l[1]?e?e.p(l,i):(e=$e(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:oe,o:oe,d(l){l&&v(t),e&&e.d(l)}}}function yt(n,t,e){let{isOpen:l=!1}=t,{isEdit:i=!1}=t,{form:o={name:"",maxHp:10,armorClass:10}}=t;const u=at();function p(){u("submit",o)}function d(){u("close")}function _(){o.name=this.value,e(0,o)}function s(){o.maxHp=Pe(this.value),e(0,o)}function a(){o.armorClass=Pe(this.value),e(0,o)}return n.$$set=b=>{"isOpen"in b&&e(1,l=b.isOpen),"isEdit"in b&&e(2,i=b.isEdit),"form"in b&&e(0,o=b.form)},[o,l,i,p,d,_,s,a]}class Dt extends Ue{constructor(t){super(),Be(this,t,yt,It,Se,{isOpen:1,isEdit:2,form:0})}}function et(n,t,e){const l=n.slice();return l[27]=t[e],l}function tt(n){let t,e,l,i,o,u="‚úï",p,d;return{c(){t=m("div"),e=m("span"),l=$(n[1]),i=D(),o=m("button"),o.textContent=u,this.h()},l(_){t=f(_,"DIV",{class:!0});var s=x(t);e=f(s,"SPAN",{});var a=x(e);l=Z(a,n[1]),a.forEach(v),i=y(s),o=f(s,"BUTTON",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-4tcifc"&&(o.textContent=u),s.forEach(v),this.h()},h(){c(o,"class","btn btn-sm"),c(t,"class","alert alert-error mb-6")},m(_,s){S(_,t,s),r(t,e),r(e,l),r(t,i),r(t,o),p||(d=ce(o,"click",n[15]),p=!0)},p(_,s){s&2&&re(l,_[1])},d(_){_&&v(t),p=!1,d()}}}function Ht(n){let t,e,l,i,o,u;const p=[Lt,Tt],d=[];function _(a,b){return a[6]?0:1}e=_(n),l=d[e]=p[e](n);let s=n[5].length>0&&lt(n);return{c(){t=m("div"),l.c(),i=D(),s&&s.c(),o=Me(),this.h()},l(a){t=f(a,"DIV",{class:!0});var b=x(t);l.l(b),b.forEach(v),i=y(a),s&&s.l(a),o=Me(),this.h()},h(){c(t,"class","mb-10")},m(a,b){S(a,t,b),d[e].m(t,null),S(a,i,b),s&&s.m(a,b),S(a,o,b),u=!0},p(a,b){let h=e;e=_(a),e===h?d[e].p(a,b):(Oe(),ne(d[h],1,1,()=>{d[h]=null}),je(),l=d[e],l?l.p(a,b):(l=d[e]=p[e](a),l.c()),ee(l,1),l.m(t,null)),a[5].length>0?s?(s.p(a,b),b&32&&ee(s,1)):(s=lt(a),s.c(),ee(s,1),s.m(o.parentNode,o)):s&&(Oe(),ne(s,1,1,()=>{s=null}),je())},i(a){u||(ee(l),ee(s),u=!0)},o(a){ne(l),ne(s),u=!1},d(a){a&&(v(t),v(i),v(o)),d[e].d(),s&&s.d(a)}}}function Vt(n){let t,e='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){t=m("div"),t.innerHTML=e,this.h()},l(l){t=f(l,"DIV",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1f8qah6"&&(t.innerHTML=e),this.h()},h(){c(t,"class","flex justify-center py-20")},m(l,i){S(l,t,i)},p:oe,i:oe,o:oe,d(l){l&&v(t)}}}function Tt(n){let t,e,l,i="üßô‚Äç‚ôÇÔ∏è",o,u,p="No tienes personaje",d,_,s="Crea tu personaje para unirte a las aventuras de esta campa√±a",a,b,h=`<span class="text-2xl">‚ú®</span>
                  Crear Mi Personaje`,w,g;return{c(){t=m("div"),e=m("div"),l=m("div"),l.textContent=i,o=D(),u=m("h3"),u.textContent=p,d=D(),_=m("p"),_.textContent=s,a=D(),b=m("button"),b.innerHTML=h,this.h()},l(C){t=f(C,"DIV",{class:!0});var H=x(t);e=f(H,"DIV",{class:!0});var I=x(e);l=f(I,"DIV",{class:!0,"data-svelte-h":!0}),j(l)!=="svelte-199900m"&&(l.textContent=i),o=y(I),u=f(I,"H3",{class:!0,"data-svelte-h":!0}),j(u)!=="svelte-1gfgn0e"&&(u.textContent=p),d=y(I),_=f(I,"P",{class:!0,"data-svelte-h":!0}),j(_)!=="svelte-1134wa4"&&(_.textContent=s),a=y(I),b=f(I,"BUTTON",{class:!0,"data-svelte-h":!0}),j(b)!=="svelte-1akc889"&&(b.innerHTML=h),I.forEach(v),H.forEach(v),this.h()},h(){c(l,"class","text-6xl mb-4"),c(u,"class","text-2xl font-medieval text-neutral mb-3"),c(_,"class","text-neutral/70 font-body mb-6"),c(b,"class","btn btn-dnd btn-lg"),c(e,"class","card-parchment p-8 text-center max-w-2xl justify-center items-center corner-ornament"),c(t,"class","flex justify-center")},m(C,H){S(C,t,H),r(t,e),r(e,l),r(e,o),r(e,u),r(e,d),r(e,_),r(e,a),r(e,b),w||(g=ce(b,"click",n[7]),w=!0)},p:oe,i:oe,o:oe,d(C){C&&v(t),w=!1,g()}}}function Lt(n){let t,e,l,i;return l=new ot({props:{character:n[6],isOwner:!0}}),l.$on("edit",n[16]),l.$on("delete",n[17]),{c(){t=m("div"),e=m("div"),Ge(l.$$.fragment),this.h()},l(o){t=f(o,"DIV",{class:!0});var u=x(t);e=f(u,"DIV",{class:!0});var p=x(e);Fe(l.$$.fragment,p),p.forEach(v),u.forEach(v),this.h()},h(){c(e,"class","max-w-md"),c(t,"class","flex justify-center")},m(o,u){S(o,t,u),r(t,e),ze(l,e,null),i=!0},p(o,u){const p={};u&64&&(p.character=o[6]),l.$set(p)},i(o){i||(ee(l.$$.fragment,o),i=!0)},o(o){ne(l.$$.fragment,o),i=!1},d(o){o&&v(t),qe(l)}}}function lt(n){let t,e="‚öîÔ∏è",l,i,o='<h2 class="text-3xl font-medieval text-center text-secondary mb-2">Compa√±eros de Aventura</h2> <p class="text-primary text-center font-body italic">Los dem√°s h√©roes de esta campa√±a</p>',u,p,d,_,s=Ae(n[5]),a=[];for(let h=0;h<s.length;h+=1)a[h]=st(et(n,s,h));const b=h=>ne(a[h],1,1,()=>{a[h]=null});return{c(){t=m("div"),t.textContent=e,l=D(),i=m("div"),i.innerHTML=o,u=D(),p=m("div"),d=m("div");for(let h=0;h<a.length;h+=1)a[h].c();this.h()},l(h){t=f(h,"DIV",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-erxn0r"&&(t.textContent=e),l=y(h),i=f(h,"DIV",{class:!0,"data-svelte-h":!0}),j(i)!=="svelte-1azjunw"&&(i.innerHTML=o),u=y(h),p=f(h,"DIV",{class:!0});var w=x(p);d=f(w,"DIV",{class:!0});var g=x(d);for(let C=0;C<a.length;C+=1)a[C].l(g);g.forEach(v),w.forEach(v),this.h()},h(){c(t,"class","divider text-neutral/50 my-8"),c(i,"class","mb-6"),c(d,"class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6"),c(p,"class","w-3/4 mx-auto")},m(h,w){S(h,t,w),S(h,l,w),S(h,i,w),S(h,u,w),S(h,p,w),r(p,d);for(let g=0;g<a.length;g+=1)a[g]&&a[g].m(d,null);_=!0},p(h,w){if(w&32){s=Ae(h[5]);let g;for(g=0;g<s.length;g+=1){const C=et(h,s,g);a[g]?(a[g].p(C,w),ee(a[g],1)):(a[g]=st(C),a[g].c(),ee(a[g],1),a[g].m(d,null))}for(Oe(),g=s.length;g<a.length;g+=1)b(g);je()}},i(h){if(!_){for(let w=0;w<s.length;w+=1)ee(a[w]);_=!0}},o(h){a=a.filter(Boolean);for(let w=0;w<a.length;w+=1)ne(a[w]);_=!1},d(h){h&&(v(t),v(l),v(i),v(u),v(p)),nt(a,h)}}}function st(n){let t,e;return t=new ot({props:{character:n[27],isOwner:!1}}),{c(){Ge(t.$$.fragment)},l(l){Fe(t.$$.fragment,l)},m(l,i){ze(t,l,i),e=!0},p(l,i){const o={};i&32&&(o.character=l[27]),t.$set(o)},i(l){e||(ee(t.$$.fragment,l),e=!0)},o(l){ne(t.$$.fragment,l),e=!1},d(l){qe(t,l)}}}function Mt(n){let t,e,l,i,o,u='<h1 class="text-4xl lg:text-5xl font-bold text-secondary title-ornament mb-3 text-shadow">Personajes</h1> <p class="text-base-content/70 font-body italic text-lg mb-2">&quot;Cada h√©roe tiene su historia...&quot;</p>',p,d,_,s,a,b,h,w,g,C=n[1]&&tt(n);const H=[Vt,Ht],I=[];function T(E,V){return E[0]?0:1}_=T(n),s=I[_]=H[_](n);function q(E){n[18](E)}let Q={isEdit:n[3],form:n[4]};return n[2]!==void 0&&(Q.isOpen=n[2]),h=new Dt({props:Q}),ct.push(()=>ut(h,"isOpen",q)),h.$on("submit",n[9]),h.$on("close",n[11]),{c(){t=m("div"),e=m("div"),l=m("div"),i=m("div"),o=m("div"),o.innerHTML=u,p=D(),C&&C.c(),d=D(),s.c(),a=D(),b=m("div"),Ge(h.$$.fragment),this.h()},l(E){t=f(E,"DIV",{class:!0});var V=x(t);e=f(V,"DIV",{class:!0});var L=x(e);l=f(L,"DIV",{class:!0});var P=x(l);i=f(P,"DIV",{class:!0});var K=x(i);o=f(K,"DIV",{class:!0,"data-svelte-h":!0}),j(o)!=="svelte-1nv5ok9"&&(o.innerHTML=u),p=y(K),C&&C.l(K),d=y(K),s.l(K),K.forEach(v),P.forEach(v),L.forEach(v),V.forEach(v),a=y(E),b=f(E,"DIV",{class:!0});var F=x(b);Fe(h.$$.fragment,F),F.forEach(v),this.h()},h(){c(o,"class","mb-8 text-center"),c(i,"class","container mx-auto max-w-7xl"),c(l,"class","flex-1 p-6"),c(e,"class","flex flex-1"),c(t,"class","min-h-screen flex flex-col"),c(b,"class","justify-center items-center")},m(E,V){S(E,t,V),r(t,e),r(e,l),r(l,i),r(i,o),r(i,p),C&&C.m(i,null),r(i,d),I[_].m(i,null),S(E,a,V),S(E,b,V),ze(h,b,null),g=!0},p(E,[V]){E[1]?C?C.p(E,V):(C=tt(E),C.c(),C.m(i,d)):C&&(C.d(1),C=null);let L=_;_=T(E),_===L?I[_].p(E,V):(Oe(),ne(I[L],1,1,()=>{I[L]=null}),je(),s=I[_],s?s.p(E,V):(s=I[_]=H[_](E),s.c()),ee(s,1),s.m(i,null));const P={};V&8&&(P.isEdit=E[3]),V&16&&(P.form=E[4]),!w&&V&4&&(w=!0,P.isOpen=E[2],dt(()=>w=!1)),h.$set(P)},i(E){g||(ee(s),ee(h.$$.fragment,E),g=!0)},o(E){ne(s),ne(h.$$.fragment,E),g=!1},d(E){E&&(v(t),v(a),v(b)),C&&C.d(),I[_].d(),qe(h)}}}function Pt(n,t,e){let l,i,o,u,p;Qe(n,vt,k=>e(13,u=k)),Qe(n,pt,k=>e(14,p=k)),ht.set("Personajes");let d=null,_=[],s=!0,a="",b=!1,h=null,w=!1,g={name:"",maxHp:10,armorClass:10,imageUrl:""},C=null;const H=_t(Et);ft(async()=>{await T(),I()}),mt(()=>{C&&C()});function I(){try{e(0,s=!0);const k=bt(H,"characters"),A=gt(k,xt("campaignId","==",l));C=Ct(A,le=>{e(12,_=le.docs.map(te=>({id:te.id,...te.data()}))),e(0,s=!1)},le=>{console.error("Error en listener de personajes:",le),e(1,a=le.message),e(0,s=!1)})}catch(k){e(1,a=k.message),e(0,s=!1)}}async function T(){try{d=await Le.getCampaign(l)}catch(k){e(1,a=k.message)}}function q(){e(4,g={name:"",maxHp:10,armorClass:10,imageUrl:""})}function Q(){h=null,e(3,w=!1),q(),e(2,b=!0)}function E(k){h=k,e(3,w=!0),e(4,g={name:k.name,maxHp:k.maxHp,armorClass:k.armorClass,imageUrl:k.imageUrl}),e(2,b=!0)}async function V(){try{w&&h?await Le.updateCharacter(h.id,{...g,class:h.class,level:h.level,initiative:h.initiative}):await Le.createCharacter(l,{...g,class:"Aventurero",level:1,initiative:0}),e(2,b=!1),q()}catch(k){e(1,a=k.message)}}async function L(k){if(confirm(`¬øEliminar a ${k.name}?`))try{await Le.deleteCharacter(k.id)}catch(A){e(1,a=A.message)}}function P(){e(2,b=!1),q()}const K=()=>e(1,a=""),F=k=>E(k.detail),O=k=>L(k.detail);function he(k){b=k,e(2,b)}return n.$$.update=()=>{n.$$.dirty&16384&&(l=p.params.id||""),n.$$.dirty&12288&&e(6,i=_.find(k=>k.userId===(u==null?void 0:u.uid))),n.$$.dirty&12288&&e(5,o=_.filter(k=>k.userId!==(u==null?void 0:u.uid)))},[s,a,b,w,g,o,i,Q,E,V,L,P,_,u,p,K,F,O,he]}class zt extends Ue{constructor(t){super(),Be(this,t,Pt,Mt,Se,{})}}export{zt as component};
