import{S as xt,i as Ct,s as yt,n as Ce,d as f,o as ne,c as i,a as J,b as n,e as u,f as v,g as D,p as j,j as d,k as T,t as B,G as zt,h as U,l as ce,x as it,r as et,Z as _t,u as mt,a2 as us,F as ds,H as Xe,B as ul,v as ke,D as fs,J as Wt,K as Qt,L as St,M as Ke,N as Ge,O as Yt,P as Jt,Q as jt,R as Bt,T as Ut,m as dl,q as hs,A as ms,U as $t}from"../chunks/Ci_mYp0l.js";import{e as Ne,o as gt,h as ps,a as Je}from"../chunks/IoV-54eZ.js";import"../chunks/IHki7fMi.js";import{p as bs}from"../chunks/BMnbv9td.js";import{u as vs}from"../chunks/Cjcxx2Yi.js";import{h as Kt,f as fl,g as hl,e as ml,i as pl}from"../chunks/BvvFRrhp.js";import{g as _s,c as bl,q as vl,w as Xt,o as _l,a as gs}from"../chunks/eN7n43qG.js";import{c as xs}from"../chunks/Bhgkhhu0.js";function gl(l,e,t){const s=l.slice();return s[11]=e[t],s}function xl(l){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-tne6n3"&&(e.textContent=t),this.h()},h(){i(e,"class","absolute -top-3 -right-3 badge badge-ornate text-sm sm:text-lg animate-bounce z-10")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Cl(l){let e,t='<span class="text-4xl sm:text-6xl">üíÄ</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1m5cl71"&&(e.innerHTML=t),this.h()},h(){i(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function yl(l){let e,t,s=l[0].armorClass+"",a;return{c(){e=d("div"),t=B("üõ°Ô∏è AC "),a=B(s),this.h()},l(o){e=u(o,"DIV",{class:!0});var r=v(e);t=j(r,"üõ°Ô∏è AC "),a=j(r,s),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm bg-info/30 text-neutral border-info/50")},m(o,r){J(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&s!==(s=o[0].armorClass+"")&&ne(a,s)},d(o){o&&f(e)}}}function El(l){let e,t,s='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,o,r,c,h="üóëÔ∏è Eliminar",p,m;return{c(){e=d("div"),t=d("label"),t.innerHTML=s,a=T(),o=d("ul"),r=d("li"),c=d("a"),c.textContent=h,this.h()},l(x){e=u(x,"DIV",{class:!0});var g=v(e);t=u(g,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),U(t)!=="svelte-13tftyw"&&(t.innerHTML=s),a=D(g),o=u(g,"UL",{tabindex:!0,class:!0});var k=v(o);r=u(k,"LI",{});var _=v(r);c=u(_,"A",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-hji4ll"&&(c.textContent=h),_.forEach(f),k.forEach(f),g.forEach(f),this.h()},h(){i(t,"tabindex","0"),i(t,"class","btn btn-ghost btn-xs btn-circle"),i(c,"class","text-error"),i(o,"tabindex","0"),i(o,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary text-sm"),i(e,"class","dropdown dropdown-end flex-shrink-0")},m(x,g){J(x,e,g),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),p||(m=ce(c,"click",l[9]),p=!0)},p:Ce,d(x){x&&f(e),p=!1,m()}}}function Cs(l){let e,t,s,a="Estado",o,r,c,h=l[4].icon+"",p,m,x,g=l[4].label+"",k,_,y,b,I,C,E;return{c(){e=d("div"),t=d("div"),s=d("span"),s.textContent=a,o=T(),r=d("div"),c=d("span"),p=B(h),m=T(),x=d("span"),k=B(g),y=T(),b=d("div"),I=d("div"),this.h()},l(A){e=u(A,"DIV",{class:!0});var P=v(e);t=u(P,"DIV",{class:!0});var V=v(t);s=u(V,"SPAN",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1lnb92u"&&(s.textContent=a),o=D(V),r=u(V,"DIV",{class:!0});var w=v(r);c=u(w,"SPAN",{class:!0});var M=v(c);p=j(M,h),M.forEach(f),m=D(w),x=u(w,"SPAN",{class:!0});var L=v(x);k=j(L,g),L.forEach(f),w.forEach(f),V.forEach(f),y=D(P),b=u(P,"DIV",{class:!0});var F=v(b);I=u(F,"DIV",{class:!0,style:!0}),v(I).forEach(f),F.forEach(f),P.forEach(f),this.h()},h(){i(s,"class","text-xs font-medieval text-neutral/70"),i(c,"class","text-lg sm:text-xl"),i(x,"class",_="font-medieval text-xs sm:text-sm "+l[4].color+" font-bold"),i(r,"class","flex items-center gap-1"),i(t,"class","flex items-center justify-between gap-2"),i(I,"class",C="bg-"+l[6]+" h-full rounded-full transition-all duration-300"),_t(I,"width",l[3]+"%"),i(b,"class","w-full bg-neutral/20 rounded-full h-1.5 sm:h-2 mt-1"),i(e,"class",E="bg-"+l[6]+"/10 p-2 rounded-lg border border-"+l[6]+"/30")},m(A,P){J(A,e,P),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(c,p),n(r,m),n(r,x),n(x,k),n(e,y),n(e,b),n(b,I)},p(A,P){P&16&&h!==(h=A[4].icon+"")&&ne(p,h),P&16&&g!==(g=A[4].label+"")&&ne(k,g),P&16&&_!==(_="font-medieval text-xs sm:text-sm "+A[4].color+" font-bold")&&i(x,"class",_),P&64&&C!==(C="bg-"+A[6]+" h-full rounded-full transition-all duration-300")&&i(I,"class",C),P&8&&_t(I,"width",A[3]+"%"),P&64&&E!==(E="bg-"+A[6]+"/10 p-2 rounded-lg border border-"+A[6]+"/30")&&i(e,"class",E)},d(A){A&&f(e)}}}function ys(l){let e,t,s="Puntos de Vida",a,o,r=l[0].currentHp+"",c,h,p=l[0].maxHp+"",m,x,g,k,_,y;return{c(){e=d("div"),t=d("span"),t.textContent=s,a=T(),o=d("span"),c=B(r),h=B("/"),m=B(p),x=T(),g=d("progress"),this.h()},l(b){e=u(b,"DIV",{class:!0});var I=v(e);t=u(I,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1a9ef08"&&(t.textContent=s),a=D(I),o=u(I,"SPAN",{class:!0});var C=v(o);c=j(C,r),h=j(C,"/"),m=j(C,p),C.forEach(f),I.forEach(f),x=D(b),g=u(b,"PROGRESS",{class:!0,max:!0}),v(g).forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70"),i(o,"class","font-bold text-neutral text-sm sm:text-base"),i(e,"class","flex justify-between items-center mb-1"),i(g,"class",k="progress progress-"+l[6]+" w-full h-2 sm:h-3"),g.value=_=l[0].currentHp,i(g,"max",y=l[0].maxHp)},m(b,I){J(b,e,I),n(e,t),n(e,a),n(e,o),n(o,c),n(o,h),n(o,m),J(b,x,I),J(b,g,I)},p(b,I){I&1&&r!==(r=b[0].currentHp+"")&&ne(c,r),I&1&&p!==(p=b[0].maxHp+"")&&ne(m,p),I&64&&k!==(k="progress progress-"+b[6]+" w-full h-2 sm:h-3")&&i(g,"class",k),I&1&&_!==(_=b[0].currentHp)&&(g.value=_),I&1&&y!==(y=b[0].maxHp)&&i(g,"max",y)},d(b){b&&(f(e),f(x),f(g))}}}function kl(l){let e,t,s="Condiciones:",a,o,r=Ne(l[0].conditions),c=[];for(let h=0;h<r.length;h+=1)c[h]=wl(gl(l,r,h));return{c(){e=d("div"),t=d("span"),t.textContent=s,a=T(),o=d("div");for(let h=0;h<c.length;h+=1)c[h].c();this.h()},l(h){e=u(h,"DIV",{class:!0});var p=v(e);t=u(p,"SPAN",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-maxnwi"&&(t.textContent=s),a=D(p),o=u(p,"DIV",{class:!0});var m=v(o);for(let x=0;x<c.length;x+=1)c[x].l(m);m.forEach(f),p.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 block mb-1"),i(o,"class","flex flex-wrap gap-1"),i(e,"class","mt-2")},m(h,p){J(h,e,p),n(e,t),n(e,a),n(e,o);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(o,null)},p(h,p){if(p&1){r=Ne(h[0].conditions);let m;for(m=0;m<r.length;m+=1){const x=gl(h,r,m);c[m]?c[m].p(x,p):(c[m]=wl(x),c[m].c(),c[m].m(o,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=r.length}},d(h){h&&f(e),it(c,h)}}}function wl(l){let e,t=l[11]+"",s;return{c(){e=d("div"),s=B(t),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=v(e);s=j(o,t),o.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm badge-warning")},m(a,o){J(a,e,o),n(e,s)},p(a,o){o&1&&t!==(t=a[11]+"")&&ne(s,t)},d(a){a&&f(e)}}}function Il(l){let e,t,s="üíö HP",a,o,r="‚ö†Ô∏è Estado",c,h;return{c(){e=d("div"),t=d("button"),t.textContent=s,a=T(),o=d("button"),o.textContent=r,this.h()},l(p){e=u(p,"DIV",{class:!0});var m=v(e);t=u(m,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1u8cl5l"&&(t.textContent=s),a=D(m),o=u(m,"BUTTON",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1lc9vql"&&(o.textContent=r),m.forEach(f),this.h()},h(){i(t,"class","btn btn-xs sm:btn-sm btn-success flex-1"),i(o,"class","btn btn-xs sm:btn-sm btn-warning flex-1"),i(e,"class","flex gap-2 mt-3")},m(p,m){J(p,e,m),n(e,t),n(e,a),n(e,o),c||(h=[ce(t,"click",l[7]),ce(o,"click",l[8])],c=!0)},p:Ce,d(p){p&&f(e),c=!1,et(h)}}}function Es(l){let e,t,s,a,o,r,c,h,p,m=l[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",x,g,k,_,y,b=l[0].name+"",I,C,E,A,P,V=l[0].initiative+"",w,M,L,F,z,W,H,q,N=l[1]&&xl(),S=l[5]&&Cl(),K=l[2]&&yl(l),X=l[2]&&El(l);function le(G,$){return G[2]?ys:Cs}let re=le(l),ae=re(l),Z=l[0].conditions&&l[0].conditions.length>0&&kl(l),se=l[2]&&Il(l);return{c(){e=d("div"),N&&N.c(),t=T(),S&&S.c(),s=T(),a=d("div"),o=d("div"),r=d("div"),c=d("div"),h=d("div"),p=d("span"),x=B(m),k=T(),_=d("div"),y=d("h3"),I=B(b),C=T(),E=d("div"),A=d("div"),P=B("üé≤ "),w=B(V),M=T(),K&&K.c(),L=T(),X&&X.c(),F=T(),z=d("div"),ae.c(),W=T(),Z&&Z.c(),H=T(),se&&se.c(),this.h()},l(G){e=u(G,"DIV",{class:!0});var $=v(e);N&&N.l($),t=D($),S&&S.l($),s=D($),a=u($,"DIV",{class:!0});var Y=v(a);o=u(Y,"DIV",{class:!0});var ie=v(o);r=u(ie,"DIV",{class:!0});var oe=v(r);c=u(oe,"DIV",{class:!0});var ge=v(c);h=u(ge,"DIV",{class:!0});var ve=v(h);p=u(ve,"SPAN",{class:!0});var R=v(p);x=j(R,m),R.forEach(f),ve.forEach(f),ge.forEach(f),oe.forEach(f),k=D(ie),_=u(ie,"DIV",{class:!0});var _e=v(_);y=u(_e,"H3",{class:!0});var be=v(y);I=j(be,b),be.forEach(f),C=D(_e),E=u(_e,"DIV",{class:!0});var de=v(E);A=u(de,"DIV",{class:!0});var te=v(A);P=j(te,"üé≤ "),w=j(te,V),te.forEach(f),M=D(de),K&&K.l(de),de.forEach(f),_e.forEach(f),L=D(ie),X&&X.l(ie),ie.forEach(f),F=D(Y),z=u(Y,"DIV",{class:!0});var O=v(z);ae.l(O),O.forEach(f),W=D(Y),Z&&Z.l(Y),H=D(Y),se&&se.l(Y),Y.forEach(f),$.forEach(f),this.h()},h(){i(p,"class","text-xl sm:text-2xl"),i(h,"class","bg-primary/20 flex items-center justify-center"),i(c,"class",g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(l[1]?"ring-secondary":"ring-primary/50")),i(r,"class","avatar flex-shrink-0"),i(y,"class","font-medieval text-base sm:text-lg text-neutral font-bold truncate"),i(A,"class","badge badge-xs sm:badge-sm bg-primary/30 text-neutral border-primary/50"),i(E,"class","flex flex-wrap gap-1 sm:gap-2 mt-1"),i(_,"class","flex-1 min-w-0"),i(o,"class","flex items-start gap-2 sm:gap-3"),i(z,"class","mt-2 sm:mt-3"),i(a,"class","card-body p-3 sm:p-4"),i(e,"class",q="card-parchment corner-ornament relative "+(l[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(l[5]?"opacity-50":""))},m(G,$){J(G,e,$),N&&N.m(e,null),n(e,t),S&&S.m(e,null),n(e,s),n(e,a),n(a,o),n(o,r),n(r,c),n(c,h),n(h,p),n(p,x),n(o,k),n(o,_),n(_,y),n(y,I),n(_,C),n(_,E),n(E,A),n(A,P),n(A,w),n(E,M),K&&K.m(E,null),n(o,L),X&&X.m(o,null),n(a,F),n(a,z),ae.m(z,null),n(a,W),Z&&Z.m(a,null),n(a,H),se&&se.m(a,null)},p(G,[$]){G[1]?N||(N=xl(),N.c(),N.m(e,t)):N&&(N.d(1),N=null),G[5]?S||(S=Cl(),S.c(),S.m(e,s)):S&&(S.d(1),S=null),$&1&&m!==(m=G[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ne(x,m),$&2&&g!==(g="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(G[1]?"ring-secondary":"ring-primary/50"))&&i(c,"class",g),$&1&&b!==(b=G[0].name+"")&&ne(I,b),$&1&&V!==(V=G[0].initiative+"")&&ne(w,V),G[2]?K?K.p(G,$):(K=yl(G),K.c(),K.m(E,null)):K&&(K.d(1),K=null),G[2]?X?X.p(G,$):(X=El(G),X.c(),X.m(o,null)):X&&(X.d(1),X=null),re===(re=le(G))&&ae?ae.p(G,$):(ae.d(1),ae=re(G),ae&&(ae.c(),ae.m(z,null))),G[0].conditions&&G[0].conditions.length>0?Z?Z.p(G,$):(Z=kl(G),Z.c(),Z.m(a,H)):Z&&(Z.d(1),Z=null),G[2]?se?se.p(G,$):(se=Il(G),se.c(),se.m(a,null)):se&&(se.d(1),se=null),$&34&&q!==(q="card-parchment corner-ornament relative "+(G[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(G[5]?"opacity-50":""))&&i(e,"class",q)},i:Ce,o:Ce,d(G){G&&f(e),N&&N.d(),S&&S.d(),K&&K.d(),X&&X.d(),ae.d(),Z&&Z.d(),se&&se.d()}}}function ks(l){return l<=0?{label:"Ca√≠do",icon:"üíÄ",color:"text-error"}:l<25?{label:"Gravemente herido",icon:"ü©∏",color:"text-error"}:l<50?{label:"Herido",icon:"ü§ï",color:"text-warning"}:l<75?{label:"Lastimado",icon:"üò£",color:"text-warning"}:l<100?{label:"Ligeramente herido",icon:"üòê",color:"text-success"}:{label:"Ileso",icon:"üí™",color:"text-success"}}function ws(l,e,t){let s,a,o,r,{combatant:c}=e,{isCurrentTurn:h=!1}=e,{isDM:p=!1}=e;const m=zt();function x(){m("updateHP",c)}function g(){m("addCondition",c)}function k(){m("remove",c)}return l.$$set=_=>{"combatant"in _&&t(0,c=_.combatant),"isCurrentTurn"in _&&t(1,h=_.isCurrentTurn),"isDM"in _&&t(2,p=_.isDM)},l.$$.update=()=>{l.$$.dirty&1&&t(3,s=c.currentHp/c.maxHp*100),l.$$.dirty&8&&t(6,a=s>50?"success":s>25?"warning":"error"),l.$$.dirty&1&&t(5,o=c.currentHp<=0),l.$$.dirty&8&&t(4,r=ks(s))},[c,h,p,s,r,o,a,x,g,k]}class Is extends xt{constructor(e){super(),Ct(this,e,ws,Es,yt,{combatant:0,isCurrentTurn:1,isDM:2})}}var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ds(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Ts(l){var e=typeof l;return l!=null&&(e=="object"||e=="function")}var rs=Ts,Vs=typeof Ot=="object"&&Ot&&Ot.Object===Object&&Ot,Hs=Vs,Ms=Hs,As=typeof self=="object"&&self&&self.Object===Object&&self,Ps=Ms||As||Function("return this")(),as=Ps,Ls=as,Ns=function(){return Ls.Date.now()},Os=Ns,Ss=/\s/;function js(l){for(var e=l.length;e--&&Ss.test(l.charAt(e)););return e}var Bs=js,Us=Bs,zs=/^\s+/;function Rs(l){return l&&l.slice(0,Us(l)+1).replace(zs,"")}var Fs=Rs,qs=as,Gs=qs.Symbol,os=Gs,Dl=os,is=Object.prototype,Ws=is.hasOwnProperty,Qs=is.toString,vt=Dl?Dl.toStringTag:void 0;function Js(l){var e=Ws.call(l,vt),t=l[vt];try{l[vt]=void 0;var s=!0}catch{}var a=Qs.call(l);return s&&(e?l[vt]=t:delete l[vt]),a}var Ks=Js,Xs=Object.prototype,Zs=Xs.toString;function Ys(l){return Zs.call(l)}var $s=Ys,Tl=os,en=Ks,tn=$s,ln="[object Null]",sn="[object Undefined]",Vl=Tl?Tl.toStringTag:void 0;function nn(l){return l==null?l===void 0?sn:ln:Vl&&Vl in Object(l)?en(l):tn(l)}var rn=nn;function an(l){return l!=null&&typeof l=="object"}var on=an,cn=rn,un=on,dn="[object Symbol]";function fn(l){return typeof l=="symbol"||un(l)&&cn(l)==dn}var hn=fn,mn=Fs,Hl=rs,pn=hn,Ml=NaN,bn=/^[-+]0x[0-9a-f]+$/i,vn=/^0b[01]+$/i,_n=/^0o[0-7]+$/i,gn=parseInt;function xn(l){if(typeof l=="number")return l;if(pn(l))return Ml;if(Hl(l)){var e=typeof l.valueOf=="function"?l.valueOf():l;l=Hl(e)?e+"":e}if(typeof l!="string")return l===0?l:+l;l=mn(l);var t=vn.test(l);return t||_n.test(l)?gn(l.slice(2),t?2:8):bn.test(l)?Ml:+l}var Cn=xn,yn=rs,Zt=Os,Al=Cn,En="Expected a function",kn=Math.max,wn=Math.min;function In(l,e,t){var s,a,o,r,c,h,p=0,m=!1,x=!1,g=!0;if(typeof l!="function")throw new TypeError(En);e=Al(e)||0,yn(t)&&(m=!!t.leading,x="maxWait"in t,o=x?kn(Al(t.maxWait)||0,e):o,g="trailing"in t?!!t.trailing:g);function k(V){var w=s,M=a;return s=a=void 0,p=V,r=l.apply(M,w),r}function _(V){return p=V,c=setTimeout(I,e),m?k(V):r}function y(V){var w=V-h,M=V-p,L=e-w;return x?wn(L,o-M):L}function b(V){var w=V-h,M=V-p;return h===void 0||w>=e||w<0||x&&M>=o}function I(){var V=Zt();if(b(V))return C(V);c=setTimeout(I,y(V))}function C(V){return c=void 0,g&&s?k(V):(s=a=void 0,r)}function E(){c!==void 0&&clearTimeout(c),p=0,s=h=a=c=void 0}function A(){return c===void 0?r:C(Zt())}function P(){var V=Zt(),w=b(V);if(s=arguments,a=this,h=V,w){if(c===void 0)return _(h);if(x)return clearTimeout(c),c=setTimeout(I,e),k(h)}return c===void 0&&(c=setTimeout(I,e)),r}return P.cancel=E,P.flush=A,P}var Dn=In;const cs=Ds(Dn);function Pl(l,e,t){const s=l.slice();return s[48]=e[t],s}function Ll(l,e,t){const s=l.slice();return s[45]=e[t],s}function Nl(l){let e,t,s,a,o="‚öîÔ∏è Agregar Combatiente",r,c,h,p,m,x,g,k,_,y,b,I="‚úï",C,E,A,P,V,w="Cancelar",M,L,F,z="‚öîÔ∏è",W,H,q,N;function S(le,re){return le[2]==="player"?Vn:Tn}let K=S(l),X=K(l);return{c(){e=d("div"),t=d("div"),s=d("div"),a=d("h3"),a.textContent=o,r=T(),c=d("div"),h=d("button"),p=B("üßù Jugador"),x=T(),g=d("button"),k=B("üêâ Monstruo"),y=T(),b=d("button"),b.textContent=I,C=T(),E=d("div"),X.c(),A=T(),P=d("div"),V=d("button"),V.textContent=w,M=T(),L=d("button"),F=d("span"),F.textContent=z,W=B(" Agregar al Combate"),this.h()},l(le){e=u(le,"DIV",{class:!0});var re=v(e);t=u(re,"DIV",{class:!0});var ae=v(t);s=u(ae,"DIV",{class:!0});var Z=v(s);a=u(Z,"H3",{class:!0,"data-svelte-h":!0}),U(a)!=="svelte-157e7j1"&&(a.textContent=o),r=D(Z),c=u(Z,"DIV",{class:!0});var se=v(c);h=u(se,"BUTTON",{class:!0});var G=v(h);p=j(G,"üßù Jugador"),G.forEach(f),x=D(se),g=u(se,"BUTTON",{class:!0});var $=v(g);k=j($,"üêâ Monstruo"),$.forEach(f),se.forEach(f),y=D(Z),b=u(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1r1r6u3"&&(b.textContent=I),Z.forEach(f),C=D(ae),E=u(ae,"DIV",{class:!0});var Y=v(E);X.l(Y),Y.forEach(f),A=D(ae),P=u(ae,"DIV",{class:!0});var ie=v(P);V=u(ie,"BUTTON",{class:!0,"data-svelte-h":!0}),U(V)!=="svelte-toewbe"&&(V.textContent=w),M=D(ie),L=u(ie,"BUTTON",{class:!0});var oe=v(L);F=u(oe,"SPAN",{class:!0,"data-svelte-h":!0}),U(F)!=="svelte-v5ojki"&&(F.textContent=z),W=j(oe," Agregar al Combate"),oe.forEach(f),ie.forEach(f),ae.forEach(f),re.forEach(f),this.h()},h(){i(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),i(h,"class",m="btn btn-sm font-medieval "+(l[2]==="player"?"btn-primary":"btn-outline")),i(g,"class",_="btn btn-sm font-medieval "+(l[2]==="monster"?"btn-primary":"btn-outline")),i(c,"class","flex gap-2"),i(b,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),i(s,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),i(E,"class","flex-1 overflow-y-auto p-4 space-y-4"),i(V,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),i(F,"class","text-xl"),i(L,"class","btn btn-dnd w-full md:w-auto"),L.disabled=H=l[2]==="player"?!l[16]:!l[15],i(P,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),i(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),i(e,"class","modal modal-open z-50")},m(le,re){J(le,e,re),n(e,t),n(t,s),n(s,a),n(s,r),n(s,c),n(c,h),n(h,p),n(c,x),n(c,g),n(g,k),n(s,y),n(s,b),n(t,C),n(t,E),X.m(E,null),n(t,A),n(t,P),n(P,V),n(P,M),n(P,L),n(L,F),n(L,W),q||(N=[ce(h,"click",l[23]),ce(g,"click",l[24]),ce(b,"click",l[22]),ce(V,"click",l[22]),ce(L,"click",function(){us(l[2]==="player"?l[18]:l[21])&&(l[2]==="player"?l[18]:l[21]).apply(this,arguments)})],q=!0)},p(le,re){l=le,re[0]&4&&m!==(m="btn btn-sm font-medieval "+(l[2]==="player"?"btn-primary":"btn-outline"))&&i(h,"class",m),re[0]&4&&_!==(_="btn btn-sm font-medieval "+(l[2]==="monster"?"btn-primary":"btn-outline"))&&i(g,"class",_),K===(K=S(l))&&X?X.p(l,re):(X.d(1),X=K(l),X&&(X.c(),X.m(E,null))),re[0]&98308&&H!==(H=l[2]==="player"?!l[16]:!l[15])&&(L.disabled=H)},d(le){le&&f(e),X.d(),q=!1,et(N)}}}function Tn(l){let e,t,s,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',o,r,c,h,p='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',m,x,g,k,_,y,b,I='<span class="label-text font-medieval text-neutral">Nombre <span class="text-error">*</span></span>',C,E,A,P,V,w,M,L,F='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',z,W,H,q,N,S,K,X='<span class="label-text font-medieval text-neutral">HP M√°ximo <span class="text-error">*</span></span>',le,re,ae,Z,se,G,$,Y='<span class="label-text font-medieval text-neutral">AC <span class="text-error">*</span></span>',ie,oe,ge,ve,R,_e,be=l[13]&&Ol(),de=l[14]&&!l[13]&&Sl(),te=l[12].length>0&&!l[13]&&jl(l),O=l[8].name&&l[9].name&&Ul(l),ee=l[8].initiative&&l[9].initiative&&zl(l),fe=l[8].maxHp&&l[9].maxHp&&Rl(l),ue=l[8].armorClass&&l[9].armorClass&&Fl(l);return{c(){e=d("div"),t=d("div"),s=d("label"),s.innerHTML=a,o=T(),r=d("input"),c=T(),h=d("label"),h.innerHTML=p,m=T(),be&&be.c(),x=T(),de&&de.c(),g=T(),te&&te.c(),k=T(),_=d("div"),y=d("div"),b=d("label"),b.innerHTML=I,C=T(),E=d("input"),P=T(),O&&O.c(),V=T(),w=d("div"),M=d("div"),L=d("label"),L.innerHTML=F,z=T(),W=d("input"),q=T(),ee&&ee.c(),N=T(),S=d("div"),K=d("label"),K.innerHTML=X,le=T(),re=d("input"),Z=T(),fe&&fe.c(),se=T(),G=d("div"),$=d("label"),$.innerHTML=Y,ie=T(),oe=d("input"),ve=T(),ue&&ue.c(),this.h()},l(Q){e=u(Q,"DIV",{class:!0});var he=v(e);t=u(he,"DIV",{class:!0});var we=v(t);s=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1s7wqfp"&&(s.innerHTML=a),o=D(we),r=u(we,"INPUT",{type:!0,placeholder:!0,class:!0}),c=D(we),h=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-1b81k6w"&&(h.innerHTML=p),we.forEach(f),m=D(he),be&&be.l(he),x=D(he),de&&de.l(he),g=D(he),te&&te.l(he),k=D(he),_=u(he,"DIV",{class:!0});var Re=v(_);y=u(Re,"DIV",{class:!0});var Ae=v(y);b=u(Ae,"LABEL",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1i5ppw8"&&(b.innerHTML=I),C=D(Ae),E=u(Ae,"INPUT",{type:!0,placeholder:!0,class:!0}),P=D(Ae),O&&O.l(Ae),Ae.forEach(f),V=D(Re),w=u(Re,"DIV",{class:!0});var ye=v(w);M=u(ye,"DIV",{class:!0});var Ie=v(M);L=u(Ie,"LABEL",{class:!0,"data-svelte-h":!0}),U(L)!=="svelte-wfd6ji"&&(L.innerHTML=F),z=D(Ie),W=u(Ie,"INPUT",{type:!0,min:!0,max:!0,class:!0}),q=D(Ie),ee&&ee.l(Ie),Ie.forEach(f),N=D(ye),S=u(ye,"DIV",{class:!0});var Ve=v(S);K=u(Ve,"LABEL",{class:!0,"data-svelte-h":!0}),U(K)!=="svelte-1ah5i3w"&&(K.innerHTML=X),le=D(Ve),re=u(Ve,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Z=D(Ve),fe&&fe.l(Ve),Ve.forEach(f),se=D(ye),G=u(ye,"DIV",{class:!0});var Oe=v(G);$=u(Oe,"LABEL",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-1yx9bl7"&&($.innerHTML=Y),ie=D(Oe),oe=u(Oe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ve=D(Oe),ue&&ue.l(Oe),Oe.forEach(f),ye.forEach(f),Re.forEach(f),he.forEach(f),this.h()},h(){i(s,"class","label"),i(r,"type","text"),i(r,"placeholder","Ej: kobold, goblin, dragon..."),i(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),i(h,"class","label"),i(t,"class","form-control mb-4"),i(b,"class","label"),i(E,"type","text"),i(E,"placeholder","Nombre de la criatura"),i(E,"class",A="input input-bordered bg-[#2d241c] text-base-content "+(l[8].name&&l[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(y,"class","form-control"),i(L,"class","label"),i(W,"type","number"),i(W,"min","1"),i(W,"max","100"),i(W,"class",H="input input-bordered bg-[#2d241c] text-base-content "+(l[8].initiative&&l[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(M,"class","form-control"),i(K,"class","label"),i(re,"type","number"),i(re,"min","1"),i(re,"max","999"),i(re,"class",ae="input input-bordered bg-[#2d241c] text-base-content "+(l[8].maxHp&&l[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(S,"class","form-control"),i($,"class","label"),i(oe,"type","number"),i(oe,"min","1"),i(oe,"max","30"),i(oe,"class",ge="input input-bordered bg-[#2d241c] text-base-content "+(l[8].armorClass&&l[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(G,"class","form-control"),i(w,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),i(_,"class","space-y-4"),i(e,"class","space-y-4")},m(Q,he){J(Q,e,he),n(e,t),n(t,s),n(t,o),n(t,r),ke(r,l[11]),n(t,c),n(t,h),n(e,m),be&&be.m(e,null),n(e,x),de&&de.m(e,null),n(e,g),te&&te.m(e,null),n(e,k),n(e,_),n(_,y),n(y,b),n(y,C),n(y,E),ke(E,l[5]),n(y,P),O&&O.m(y,null),n(_,V),n(_,w),n(w,M),n(M,L),n(M,z),n(M,W),ke(W,l[3]),n(M,q),ee&&ee.m(M,null),n(w,N),n(w,S),n(S,K),n(S,le),n(S,re),ke(re,l[6]),n(S,Z),fe&&fe.m(S,null),n(w,se),n(w,G),n(G,$),n(G,ie),n(G,oe),ke(oe,l[7]),n(G,ve),ue&&ue.m(G,null),R||(_e=[ce(r,"input",l[28]),ce(r,"input",l[19]),ce(E,"input",l[30]),ce(E,"blur",l[31]),ce(W,"input",l[32]),ce(W,"blur",l[33]),ce(re,"input",l[34]),ce(re,"blur",l[35]),ce(oe,"input",l[36]),ce(oe,"blur",l[37])],R=!0)},p(Q,he){he[0]&2048&&r.value!==Q[11]&&ke(r,Q[11]),Q[13]?be||(be=Ol(),be.c(),be.m(e,x)):be&&(be.d(1),be=null),Q[14]&&!Q[13]?de||(de=Sl(),de.c(),de.m(e,g)):de&&(de.d(1),de=null),Q[12].length>0&&!Q[13]?te?te.p(Q,he):(te=jl(Q),te.c(),te.m(e,k)):te&&(te.d(1),te=null),he[0]&768&&A!==(A="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].name&&Q[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(E,"class",A),he[0]&32&&E.value!==Q[5]&&ke(E,Q[5]),Q[8].name&&Q[9].name?O?O.p(Q,he):(O=Ul(Q),O.c(),O.m(y,null)):O&&(O.d(1),O=null),he[0]&768&&H!==(H="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].initiative&&Q[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(W,"class",H),he[0]&8&&Xe(W.value)!==Q[3]&&ke(W,Q[3]),Q[8].initiative&&Q[9].initiative?ee?ee.p(Q,he):(ee=zl(Q),ee.c(),ee.m(M,null)):ee&&(ee.d(1),ee=null),he[0]&768&&ae!==(ae="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].maxHp&&Q[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(re,"class",ae),he[0]&64&&Xe(re.value)!==Q[6]&&ke(re,Q[6]),Q[8].maxHp&&Q[9].maxHp?fe?fe.p(Q,he):(fe=Rl(Q),fe.c(),fe.m(S,null)):fe&&(fe.d(1),fe=null),he[0]&768&&ge!==(ge="input input-bordered bg-[#2d241c] text-base-content "+(Q[8].armorClass&&Q[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(oe,"class",ge),he[0]&128&&Xe(oe.value)!==Q[7]&&ke(oe,Q[7]),Q[8].armorClass&&Q[9].armorClass?ue?ue.p(Q,he):(ue=Fl(Q),ue.c(),ue.m(G,null)):ue&&(ue.d(1),ue=null)},d(Q){Q&&f(e),be&&be.d(),de&&de.d(),te&&te.d(),O&&O.d(),ee&&ee.d(),fe&&fe.d(),ue&&ue.d(),R=!1,et(_e)}}}function Vn(l){var se,G,$;let e,t,s,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador <span class="text-error">*</span></span>',o,r,c,h="-- Elegir jugador --",p,m,x,g='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',k,_,y,b,I,C,E,A,P,V=(((se=l[10])==null?void 0:se.name)||"Elegir jugador")+"",w,M,L,F,z=(((G=l[10])==null?void 0:G.maxHp)||0)+"",W,H,q=((($=l[10])==null?void 0:$.armorClass)||0)+"",N,S,K,X=Ne(l[1]),le=[];for(let Y=0;Y<X.length;Y+=1)le[Y]=ql(Ll(l,X,Y));function re(Y,ie){return Y[8].initiative&&Y[9].initiative?Mn:Hn}let ae=re(l),Z=ae(l);return{c(){e=d("div"),t=d("div"),s=d("label"),s.innerHTML=a,o=T(),r=d("select"),c=d("option"),c.textContent=h;for(let Y=0;Y<le.length;Y+=1)le[Y].c();p=T(),m=d("div"),x=d("label"),x.innerHTML=g,k=T(),_=d("input"),b=T(),Z.c(),I=T(),C=d("div"),E=d("div"),A=d("div"),P=d("p"),w=B(V),M=T(),L=d("p"),F=B("HP: "),W=B(z),H=B(" | AC: "),N=B(q),this.h()},l(Y){e=u(Y,"DIV",{class:!0});var ie=v(e);t=u(ie,"DIV",{class:!0});var oe=v(t);s=u(oe,"LABEL",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-aatn1l"&&(s.innerHTML=a),o=D(oe),r=u(oe,"SELECT",{class:!0});var ge=v(r);c=u(ge,"OPTION",{"data-svelte-h":!0}),U(c)!=="svelte-ws9sqz"&&(c.textContent=h);for(let O=0;O<le.length;O+=1)le[O].l(ge);ge.forEach(f),oe.forEach(f),p=D(ie),m=u(ie,"DIV",{class:!0});var ve=v(m);x=u(ve,"LABEL",{class:!0,"data-svelte-h":!0}),U(x)!=="svelte-1kjkdwe"&&(x.innerHTML=g),k=D(ve),_=u(ve,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),b=D(ve),Z.l(ve),ve.forEach(f),I=D(ie),C=u(ie,"DIV",{class:!0});var R=v(C);E=u(R,"DIV",{class:!0});var _e=v(E);A=u(_e,"DIV",{});var be=v(A);P=u(be,"P",{class:!0});var de=v(P);w=j(de,V),de.forEach(f),M=D(be),L=u(be,"P",{class:!0});var te=v(L);F=j(te,"HP: "),W=j(te,z),H=j(te," | AC: "),N=j(te,q),te.forEach(f),be.forEach(f),_e.forEach(f),R.forEach(f),ie.forEach(f),this.h()},h(){i(s,"class","label"),c.__value="",ke(c,c.__value),c.disabled=!0,c.selected=!0,i(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),l[4]===void 0&&fs(()=>l[25].call(r)),i(t,"class","form-control"),i(x,"class","label"),i(_,"type","number"),i(_,"min","1"),i(_,"max","100"),i(_,"step","1"),_.required=!0,i(_,"class",y="input input-bordered bg-[#2d241c] text-base-content "+(l[8].initiative&&l[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(m,"class","form-control"),i(P,"class","text-lg font-bold text-neutral"),i(L,"class","text-sm text-neutral/70"),i(E,"class","flex items-center gap-4"),i(C,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),i(e,"class","space-y-4")},m(Y,ie){J(Y,e,ie),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c);for(let oe=0;oe<le.length;oe+=1)le[oe]&&le[oe].m(r,null);ul(r,l[4],!0),n(e,p),n(e,m),n(m,x),n(m,k),n(m,_),ke(_,l[3]),n(m,b),Z.m(m,null),n(e,I),n(e,C),n(C,E),n(E,A),n(A,P),n(P,w),n(A,M),n(A,L),n(L,F),n(L,W),n(L,H),n(L,N),S||(K=[ce(r,"change",l[25]),ce(_,"input",l[26]),ce(_,"blur",l[27])],S=!0)},p(Y,ie){var oe,ge,ve;if(ie[0]&2){X=Ne(Y[1]);let R;for(R=0;R<X.length;R+=1){const _e=Ll(Y,X,R);le[R]?le[R].p(_e,ie):(le[R]=ql(_e),le[R].c(),le[R].m(r,null))}for(;R<le.length;R+=1)le[R].d(1);le.length=X.length}ie[0]&18&&ul(r,Y[4]),ie[0]&768&&y!==(y="input input-bordered bg-[#2d241c] text-base-content "+(Y[8].initiative&&Y[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(_,"class",y),ie[0]&8&&Xe(_.value)!==Y[3]&&ke(_,Y[3]),ae===(ae=re(Y))&&Z?Z.p(Y,ie):(Z.d(1),Z=ae(Y),Z&&(Z.c(),Z.m(m,null))),ie[0]&1024&&V!==(V=(((oe=Y[10])==null?void 0:oe.name)||"Elegir jugador")+"")&&ne(w,V),ie[0]&1024&&z!==(z=(((ge=Y[10])==null?void 0:ge.maxHp)||0)+"")&&ne(W,z),ie[0]&1024&&q!==(q=(((ve=Y[10])==null?void 0:ve.armorClass)||0)+"")&&ne(N,q)},d(Y){Y&&f(e),it(le,Y),Z.d(),S=!1,et(K)}}}function Ol(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex justify-center items-center py-4")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Sl(l){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert bg-warning/20 border-warning/40")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function jl(l){let e,t,s,a=l[12].length+"",o,r,c=l[12].length!==1?"s":"",h,p,m=l[12].length!==1?"s":"",x,g,k,_=Ne(l[12]),y=[];for(let b=0;b<_.length;b+=1)y[b]=Bl(Pl(l,_,b));return{c(){e=d("div"),t=d("p"),s=B("üìñ "),o=B(a),r=B(" criatura"),h=B(c),p=B(" encontrada"),x=B(m),g=T(),k=d("div");for(let b=0;b<y.length;b+=1)y[b].c();this.h()},l(b){e=u(b,"DIV",{class:!0});var I=v(e);t=u(I,"P",{class:!0});var C=v(t);s=j(C,"üìñ "),o=j(C,a),r=j(C," criatura"),h=j(C,c),p=j(C," encontrada"),x=j(C,m),C.forEach(f),g=D(I),k=u(I,"DIV",{class:!0});var E=v(k);for(let A=0;A<y.length;A+=1)y[A].l(E);E.forEach(f),I.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 mb-2"),i(k,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),i(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(b,I){J(b,e,I),n(e,t),n(t,s),n(t,o),n(t,r),n(t,h),n(t,p),n(t,x),n(e,g),n(e,k);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(k,null)},p(b,I){if(I[0]&4096&&a!==(a=b[12].length+"")&&ne(o,a),I[0]&4096&&c!==(c=b[12].length!==1?"s":"")&&ne(h,c),I[0]&4096&&m!==(m=b[12].length!==1?"s":"")&&ne(x,m),I[0]&1052672){_=Ne(b[12]);let C;for(C=0;C<_.length;C+=1){const E=Pl(b,_,C);y[C]?y[C].p(E,I):(y[C]=Bl(E),y[C].c(),y[C].m(k,null))}for(;C<y.length;C+=1)y[C].d(1);y.length=_.length}},d(b){b&&f(e),it(y,b)}}}function Bl(l){let e,t,s,a=l[48].name+"",o,r,c,h=l[48].type+"",p,m,x=l[48].challenge_rating+"",g,k,_,y="Seleccionar",b,I,C;function E(){return l[29](l[48])}return{c(){e=d("button"),t=d("div"),s=d("span"),o=B(a),r=T(),c=d("span"),p=B(h),m=B(" | CR "),g=B(x),k=T(),_=d("span"),_.textContent=y,b=T(),this.h()},l(A){e=u(A,"BUTTON",{class:!0});var P=v(e);t=u(P,"DIV",{class:!0});var V=v(t);s=u(V,"SPAN",{class:!0});var w=v(s);o=j(w,a),w.forEach(f),r=D(V),c=u(V,"SPAN",{class:!0});var M=v(c);p=j(M,h),m=j(M," | CR "),g=j(M,x),M.forEach(f),V.forEach(f),k=D(P),_=u(P,"SPAN",{class:!0,"data-svelte-h":!0}),U(_)!=="svelte-15711il"&&(_.textContent=y),b=D(P),P.forEach(f),this.h()},h(){i(s,"class","font-bold text-neutral block"),i(c,"class","text-xs text-neutral/60"),i(t,"class","flex-1"),i(_,"class","text-xs badge badge-sm badge-primary"),i(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(A,P){J(A,e,P),n(e,t),n(t,s),n(s,o),n(t,r),n(t,c),n(c,p),n(c,m),n(c,g),n(e,k),n(e,_),n(e,b),I||(C=ce(e,"click",E),I=!0)},p(A,P){l=A,P[0]&4096&&a!==(a=l[48].name+"")&&ne(o,a),P[0]&4096&&h!==(h=l[48].type+"")&&ne(p,h),P[0]&4096&&x!==(x=l[48].challenge_rating+"")&&ne(g,x)},d(A){A&&f(e),I=!1,C()}}}function Ul(l){let e,t,s,a=l[8].name+"",o;return{c(){e=d("label"),t=d("span"),s=B("‚ö†Ô∏è "),o=B(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=v(e);t=u(c,"SPAN",{class:!0});var h=v(t);s=j(h,"‚ö†Ô∏è "),o=j(h,a),h.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){J(r,e,c),n(e,t),n(t,s),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].name+"")&&ne(o,a)},d(r){r&&f(e)}}}function zl(l){let e,t,s=l[8].initiative+"",a;return{c(){e=d("label"),t=d("span"),a=B(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=v(e);t=u(r,"SPAN",{class:!0});var c=v(t);a=j(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].initiative+"")&&ne(a,s)},d(o){o&&f(e)}}}function Rl(l){let e,t,s=l[8].maxHp+"",a;return{c(){e=d("label"),t=d("span"),a=B(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=v(e);t=u(r,"SPAN",{class:!0});var c=v(t);a=j(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].maxHp+"")&&ne(a,s)},d(o){o&&f(e)}}}function Fl(l){let e,t,s=l[8].armorClass+"",a;return{c(){e=d("label"),t=d("span"),a=B(s),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=v(e);t=u(r,"SPAN",{class:!0});var c=v(t);a=j(c,s),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){J(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&s!==(s=o[8].armorClass+"")&&ne(a,s)},d(o){o&&f(e)}}}function ql(l){let e,t=l[45].name+"",s,a;return{c(){e=d("option"),s=B(t),this.h()},l(o){e=u(o,"OPTION",{});var r=v(e);s=j(r,t),r.forEach(f),this.h()},h(){e.__value=a=l[45].id,ke(e,e.__value)},m(o,r){J(o,e,r),n(e,s)},p(o,r){r[0]&2&&t!==(t=o[45].name+"")&&ne(s,t),r[0]&2&&a!==(a=o[45].id)&&(e.__value=a,ke(e,e.__value))},d(o){o&&f(e)}}}function Hn(l){let e,t='<span class="label-text-alt text-neutral/60 italic text-xs">Valor de iniciativa tirado (1-100)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(s){e=u(s,"LABEL",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-18jw2s3"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Mn(l){let e,t,s,a=l[8].initiative+"",o;return{c(){e=d("label"),t=d("span"),s=B("‚ö†Ô∏è "),o=B(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=v(e);t=u(c,"SPAN",{class:!0});var h=v(t);s=j(h,"‚ö†Ô∏è "),o=j(h,a),h.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){J(r,e,c),n(e,t),n(t,s),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].initiative+"")&&ne(o,a)},d(r){r&&f(e)}}}function An(l){let e,t=l[0]&&Nl(l);return{c(){t&&t.c(),e=mt()},l(s){t&&t.l(s),e=mt()},m(s,a){t&&t.m(s,a),J(s,e,a)},p(s,a){s[0]?t?t.p(s,a):(t=Nl(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Ce,o:Ce,d(s){s&&f(e),t&&t.d(s)}}}function Pn(l,e,t){let s,a,o,{isOpen:r=!1}=e,{players:c=[]}=e;const h=zt();let p="player",m=0,x="",g="",k=[],_=null,y=!1,b=!1,I="",C=0,E=10,A="",P="",V="",w={name:"",initiative:"",maxHp:"",armorClass:""},M={name:!1,initiative:!1,maxHp:!1,armorClass:!1};function L(R){t(9,M[R]=!0,M)}function F(){if(p==="player"){t(9,M.initiative=!0,M);const R=Kt(m);return t(8,w.initiative=R.error||"",w),R.valid&&s!==void 0}else{Object.keys(M).forEach(te=>{t(9,M[te]=!0,M)});const R=ml(I),_e=Kt(m),be=fl(C),de=hl(E);return t(8,w.name=R.error||"",w),t(8,w.initiative=_e.error||"",w),t(8,w.maxHp=be.error||"",w),t(8,w.armorClass=de.error||"",w),R.valid&&_e.valid&&be.valid&&de.valid}}function z(){F()&&s&&(h("add",{type:"character",characterId:s.id,name:s.name,maxHp:s.maxHp,armorClass:s.armorClass,initiative:m,isNpc:!1}),N())}const W=cs(async()=>{const R=g.trim();if(!R){t(12,k=[]),t(14,b=!1);return}t(13,y=!0),t(14,b=!1);try{const _e=await gt.searchMonsters(R);t(12,k=_e.results||[]),t(14,b=k.length===0)}catch(_e){console.error("Error buscando monstruos:",_e),t(12,k=[]),t(14,b=!0)}finally{t(13,y=!1)}},500);async function H(R){_=await gt.getMonster(R.slug),t(5,I=_.name),t(6,C=_.hit_points),t(7,E=_.armor_class),A=_.challenge_rating,_.type,P=_.size,V=_.alignment,t(12,k=[]),t(11,g=""),t(9,M.name=!0,M),t(9,M.maxHp=!0,M),t(9,M.armorClass=!0,M)}function q(){F()&&(h("add",{type:"creature",name:I,initiative:m,maxHp:C,armorClass:E,cr:A,size:P,alignment:V,isNpc:!0}),N())}function N(){t(4,x=""),_=null,t(11,g=""),t(12,k=[]),t(14,b=!1),t(5,I=""),t(3,m=0),t(6,C=0),t(7,E=10),A="",P="",V="",t(13,y=!1),Object.keys(M).forEach(R=>{t(9,M[R]=!1,M)}),Object.keys(w).forEach(R=>{t(8,w[R]="",w)}),h("close")}const S=()=>t(2,p="player"),K=()=>t(2,p="monster");function X(){x=ds(this),t(4,x),t(1,c)}function le(){m=Xe(this.value),t(3,m)}const re=()=>L("initiative");function ae(){g=this.value,t(11,g)}const Z=R=>H(R);function se(){I=this.value,t(5,I)}const G=()=>L("name");function $(){m=Xe(this.value),t(3,m)}const Y=()=>L("initiative");function ie(){C=Xe(this.value),t(6,C)}const oe=()=>L("maxHp");function ge(){E=Xe(this.value),t(7,E)}const ve=()=>L("armorClass");return l.$$set=R=>{"isOpen"in R&&t(0,r=R.isOpen),"players"in R&&t(1,c=R.players)},l.$$.update=()=>{if(l.$$.dirty[0]&18&&t(10,s=c.find(R=>R.id===x)),l.$$.dirty[0]&548&&M.name&&p==="monster"&&I){const R=ml(I);t(8,w.name=R.valid?"":R.error||"",w)}if(l.$$.dirty[0]&520&&M.initiative&&m!==null){const R=Kt(m);t(8,w.initiative=R.valid?"":R.error||"",w)}if(l.$$.dirty[0]&576&&M.maxHp&&C!==null){const R=fl(C);t(8,w.maxHp=R.valid?"":R.error||"",w)}if(l.$$.dirty[0]&640&&M.armorClass&&E!==null){const R=hl(E);t(8,w.armorClass=R.valid?"":R.error||"",w)}l.$$.dirty[0]&1288&&t(16,a=s&&m>=1&&!w.initiative),l.$$.dirty[0]&488&&t(15,o=!w.name&&!w.initiative&&!w.maxHp&&!w.armorClass&&I.trim()&&C>0&&E>0&&m>=1)},[r,c,p,m,x,I,C,E,w,M,s,g,k,y,b,o,a,L,z,W,H,q,N,S,K,X,le,re,ae,Z,se,G,$,Y,ie,oe,ge,ve]}class Ln extends xt{constructor(e){super(),Ct(this,e,Pn,An,yt,{isOpen:0,players:1},null,[-1,-1])}}function Nn(l){let e,t,s,a="üö´",o,r,c="Acceso Denegado",h,p,m="Solo el Dungeon Master puede gestionar los puntos de vida.",x,g,k="Entendido",_,y;return{c(){e=d("div"),t=d("div"),s=d("div"),s.textContent=a,o=T(),r=d("h3"),r.textContent=c,h=T(),p=d("p"),p.textContent=m,x=T(),g=d("button"),g.textContent=k,this.h()},l(b){e=u(b,"DIV",{class:!0});var I=v(e);t=u(I,"DIV",{class:!0});var C=v(t);s=u(C,"DIV",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-13ghcez"&&(s.textContent=a),o=D(C),r=u(C,"H3",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-13fk1x3"&&(r.textContent=c),h=D(C),p=u(C,"P",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1myopqh"&&(p.textContent=m),x=D(C),g=u(C,"BUTTON",{class:!0,"data-svelte-h":!0}),U(g)!=="svelte-1bzkva0"&&(g.textContent=k),C.forEach(f),I.forEach(f),this.h()},h(){i(s,"class","text-6xl mb-4"),i(r,"class","text-2xl font-medieval text-neutral mb-3"),i(p,"class","text-neutral/70 font-body mb-6"),i(g,"class","btn btn-dnd"),i(t,"class","card-parchment border-4 border-error w-11/12 max-w-md text-center p-8"),i(e,"class","modal modal-open z-50")},m(b,I){J(b,e,I),n(e,t),n(t,s),n(t,o),n(t,r),n(t,h),n(t,p),n(t,x),n(t,g),_||(y=ce(g,"click",l[12]),_=!0)},p:Ce,d(b){b&&f(e),_=!1,y()}}}function On(l){let e,t,s,a="‚úï",o,r,c,h="üíö Gesti√≥n de HP",p,m,x,g,k,_,y=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",b,I,C,E,A=l[1].name+"",P,V,w,M,L,F,z,W,H="HP ACTUAL",q,N,S,K=l[1].currentHp+"",X,le,re,ae,Z=l[1].maxHp+"",se,G,$,Y,ie,oe,ge,ve,R=l[5].toFixed(0)+"",_e,be,de,te,O,ee="HP NUEVO",fe,ue,Q,he,we,Re,Ae,ye,Ie,Ve,Oe,We,Qe=l[3].toFixed(0)+"",De,ct,Ze,He,me,xe,Ye='<span class="label-text font-medieval text-neutral text-sm sm:text-base">üé≤ Cantidad de HP</span>',tt,Se,Pe,ut,Fe,Le,Be,pt="üí•",lt,je,dt="Da√±o",$e,ft,Te,Ue,bt="üíö",st,ze,at="Curar",ot,Rt,el,Me=l[1].isNpc&&Gl();function tl(pe,Ee){return pe[8]!==0?jn:Sn}let Et=tl(l),qe=Et(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=h,p=T(),m=d("div"),x=d("div"),g=d("div"),k=d("div"),_=d("span"),b=B(y),I=T(),C=d("div"),E=d("h4"),P=B(A),V=T(),w=d("div"),Me&&Me.c(),M=T(),L=d("div"),F=d("div"),z=d("div"),W=d("p"),W.textContent=H,q=T(),N=d("div"),S=d("p"),X=B(K),le=T(),re=d("p"),ae=B("de "),se=B(Z),G=T(),$=d("progress"),ge=T(),ve=d("p"),_e=B(R),be=B("%"),de=T(),te=d("div"),O=d("p"),O.textContent=ee,fe=T(),ue=d("div"),Q=d("p"),he=B(l[4]),Re=T(),qe.c(),Ae=T(),ye=d("progress"),Oe=T(),We=d("p"),De=B(Qe),ct=B("%"),He=T(),me=d("div"),xe=d("label"),xe.innerHTML=Ye,tt=T(),Se=d("div"),Pe=d("input"),ut=T(),Fe=d("div"),Le=d("button"),Be=d("span"),Be.textContent=pt,lt=T(),je=d("span"),je.textContent=dt,ft=T(),Te=d("button"),Ue=d("span"),Ue.textContent=bt,st=T(),ze=d("span"),ze.textContent=at,this.h()},l(pe){e=u(pe,"DIV",{class:!0});var Ee=v(e);t=u(Ee,"DIV",{class:!0});var ht=v(t);s=u(ht,"BUTTON",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1jnmpfy"&&(s.textContent=a),o=D(ht),r=u(ht,"DIV",{class:!0});var kt=v(r);c=u(kt,"H3",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-sdtwsr"&&(c.textContent=h),p=D(kt),m=u(kt,"DIV",{class:!0});var wt=v(m);x=u(wt,"DIV",{class:!0});var ll=v(x);g=u(ll,"DIV",{class:!0});var sl=v(g);k=u(sl,"DIV",{class:!0});var nl=v(k);_=u(nl,"SPAN",{class:!0});var rl=v(_);b=j(rl,y),rl.forEach(f),nl.forEach(f),sl.forEach(f),ll.forEach(f),I=D(wt),C=u(wt,"DIV",{class:!0});var It=v(C);E=u(It,"H4",{class:!0});var al=v(E);P=j(al,A),al.forEach(f),V=D(It),w=u(It,"DIV",{class:!0});var ol=v(w);Me&&Me.l(ol),ol.forEach(f),It.forEach(f),wt.forEach(f),kt.forEach(f),M=D(ht),L=u(ht,"DIV",{class:!0});var Dt=v(L);F=u(Dt,"DIV",{class:!0});var Tt=v(F);z=u(Tt,"DIV",{class:!0});var nt=v(z);W=u(nt,"P",{class:!0,"data-svelte-h":!0}),U(W)!=="svelte-15e8cb6"&&(W.textContent=H),q=D(nt),N=u(nt,"DIV",{class:!0});var Vt=v(N);S=u(Vt,"P",{class:!0});var il=v(S);X=j(il,K),il.forEach(f),le=D(Vt),re=u(Vt,"P",{class:!0});var Ft=v(re);ae=j(Ft,"de "),se=j(Ft,Z),Ft.forEach(f),Vt.forEach(f),G=D(nt),$=u(nt,"PROGRESS",{class:!0,max:!0}),v($).forEach(f),ge=D(nt),ve=u(nt,"P",{class:!0});var qt=v(ve);_e=j(qt,R),be=j(qt,"%"),qt.forEach(f),nt.forEach(f),de=D(Tt),te=u(Tt,"DIV",{class:!0});var rt=v(te);O=u(rt,"P",{class:!0,"data-svelte-h":!0}),U(O)!=="svelte-ukgy9p"&&(O.textContent=ee),fe=D(rt),ue=u(rt,"DIV",{class:!0});var Ht=v(ue);Q=u(Ht,"P",{class:!0});var cl=v(Q);he=j(cl,l[4]),cl.forEach(f),Re=D(Ht),qe.l(Ht),Ht.forEach(f),Ae=D(rt),ye=u(rt,"PROGRESS",{class:!0,max:!0}),v(ye).forEach(f),Oe=D(rt),We=u(rt,"P",{class:!0});var Gt=v(We);De=j(Gt,Qe),ct=j(Gt,"%"),Gt.forEach(f),rt.forEach(f),Tt.forEach(f),He=D(Dt),me=u(Dt,"DIV",{});var Mt=v(me);xe=u(Mt,"LABEL",{class:!0,"data-svelte-h":!0}),U(xe)!=="svelte-640liv"&&(xe.innerHTML=Ye),tt=D(Mt),Se=u(Mt,"DIV",{class:!0});var At=v(Se);Pe=u(At,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ut=D(At),Fe=u(At,"DIV",{class:!0});var Pt=v(Fe);Le=u(Pt,"BUTTON",{class:!0});var Lt=v(Le);Be=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),U(Be)!=="svelte-orvybg"&&(Be.textContent=pt),lt=D(Lt),je=u(Lt,"SPAN",{class:!0,"data-svelte-h":!0}),U(je)!=="svelte-117bemg"&&(je.textContent=dt),Lt.forEach(f),ft=D(Pt),Te=u(Pt,"BUTTON",{class:!0});var Nt=v(Te);Ue=u(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),U(Ue)!=="svelte-rpoyvz"&&(Ue.textContent=bt),st=D(Nt),ze=u(Nt,"SPAN",{class:!0,"data-svelte-h":!0}),U(ze)!=="svelte-v46veg"&&(ze.textContent=at),Nt.forEach(f),Pt.forEach(f),At.forEach(f),Mt.forEach(f),Dt.forEach(f),ht.forEach(f),Ee.forEach(f),this.h()},h(){i(s,"class","btn btn-xs sm:btn-sm btn-circle btn-ghost absolute right-2 sm:right-3 top-2 sm:top-3 z-10 hover:bg-error/20"),i(c,"class","font-bold text-xl sm:text-2xl font-medieval text-neutral text-center mb-2 sm:mb-3"),i(_,"class","text-lg sm:text-xl"),i(k,"class","bg-primary/20 flex items-center justify-center"),i(g,"class","w-10 h-10 sm:w-12 sm:h-12 rounded-full ring-2 ring-secondary"),i(x,"class","avatar flex-shrink-0"),i(E,"class","text-base sm:text-lg font-medieval text-neutral font-bold truncate"),i(w,"class","flex gap-2 mt-1"),i(C,"class","flex-1 min-w-0"),i(m,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-2 sm:p-3 rounded-lg border border-primary/30 flex items-center gap-2 sm:gap-3"),i(r,"class","p-3 sm:p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent border-b-2 border-secondary"),i(W,"class","text-xs font-medieval text-neutral/60 text-center"),i(S,"class","text-xl sm:text-2xl font-bold text-neutral"),i(re,"class","text-xs sm:text-sm text-neutral/60"),i(N,"class","text-center"),i($,"class",Y="progress progress-"+l[9]+" w-full h-2 sm:h-3"),$.value=ie=l[1].currentHp,i($,"max",oe=l[1].maxHp),i(ve,"class","text-xs text-center text-neutral/60"),i(z,"class","bg-neutral/10 flex flex-col gap-1 p-2 sm:p-3 rounded-lg border-2 border-primary/30"),i(O,"class","text-xs font-medieval text-neutral/60 text-center"),i(Q,"class",we="text-xl sm:text-2xl font-bold text-"+(l[8]!==0?l[8]>0?"success":"error":"neutral")),i(ue,"class","text-center"),i(ye,"class",Ie="progress progress-"+(l[8]!==0?l[7]:l[9])+" w-full h-2 sm:h-3"),ye.value=l[4],i(ye,"max",Ve=l[1].maxHp),i(We,"class","text-xs text-center text-neutral/60"),i(te,"class",Ze="bg-"+(l[8]!==0?l[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(l[8]!==0?l[8]>0?"success":"error":"primary")+"/30"),i(F,"class","grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4"),i(xe,"class","label"),i(Pe,"type","number"),i(Pe,"placeholder","Ej: 15"),i(Pe,"class","input input-sm sm:input-md input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-lg sm:text-2xl font-bold focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(Pe,"min","0"),i(Be,"class","text-base sm:text-xl"),i(je,"class","font-medieval text-xs sm:text-sm"),i(Le,"class","btn btn-error btn-sm sm:btn-md flex-1"),Le.disabled=$e=l[6]<=0,i(Ue,"class","text-base sm:text-xl"),i(ze,"class","font-medieval text-xs sm:text-sm"),i(Te,"class","btn btn-success btn-sm sm:btn-md flex-1"),Te.disabled=ot=l[6]<=0,i(Fe,"class","grid grid-cols-2 sm:flex gap-2 flex-1"),i(Se,"class","flex flex-col sm:flex-row gap-2"),i(L,"class","flex-1 p-3 sm:p-4 overflow-y-auto"),i(t,"class","card-parchment border-2 sm:border-4 border-secondary mx-2 sm:mx-4 relative w-[95vw] sm:w-[90vw] md:w-3/4 lg:w-1/2 max-h-[90vh] flex flex-col"),i(e,"class","modal modal-open z-50")},m(pe,Ee){J(pe,e,Ee),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,p),n(r,m),n(m,x),n(x,g),n(g,k),n(k,_),n(_,b),n(m,I),n(m,C),n(C,E),n(E,P),n(C,V),n(C,w),Me&&Me.m(w,null),n(t,M),n(t,L),n(L,F),n(F,z),n(z,W),n(z,q),n(z,N),n(N,S),n(S,X),n(N,le),n(N,re),n(re,ae),n(re,se),n(z,G),n(z,$),n(z,ge),n(z,ve),n(ve,_e),n(ve,be),n(F,de),n(F,te),n(te,O),n(te,fe),n(te,ue),n(ue,Q),n(Q,he),n(ue,Re),qe.m(ue,null),n(te,Ae),n(te,ye),n(te,Oe),n(te,We),n(We,De),n(We,ct),n(L,He),n(L,me),n(me,xe),n(me,tt),n(me,Se),n(Se,Pe),ke(Pe,l[6]),n(Se,ut),n(Se,Fe),n(Fe,Le),n(Le,Be),n(Le,lt),n(Le,je),n(Fe,ft),n(Fe,Te),n(Te,Ue),n(Te,st),n(Te,ze),Rt||(el=[ce(s,"click",l[12]),ce(Pe,"input",l[14]),ce(Le,"click",l[10]),ce(Te,"click",l[11])],Rt=!0)},p(pe,Ee){Ee&2&&y!==(y=pe[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ne(b,y),Ee&2&&A!==(A=pe[1].name+"")&&ne(P,A),pe[1].isNpc?Me||(Me=Gl(),Me.c(),Me.m(w,null)):Me&&(Me.d(1),Me=null),Ee&2&&K!==(K=pe[1].currentHp+"")&&ne(X,K),Ee&2&&Z!==(Z=pe[1].maxHp+"")&&ne(se,Z),Ee&512&&Y!==(Y="progress progress-"+pe[9]+" w-full h-2 sm:h-3")&&i($,"class",Y),Ee&2&&ie!==(ie=pe[1].currentHp)&&($.value=ie),Ee&2&&oe!==(oe=pe[1].maxHp)&&i($,"max",oe),Ee&32&&R!==(R=pe[5].toFixed(0)+"")&&ne(_e,R),Ee&16&&ne(he,pe[4]),Ee&256&&we!==(we="text-xl sm:text-2xl font-bold text-"+(pe[8]!==0?pe[8]>0?"success":"error":"neutral"))&&i(Q,"class",we),Et===(Et=tl(pe))&&qe?qe.p(pe,Ee):(qe.d(1),qe=Et(pe),qe&&(qe.c(),qe.m(ue,null))),Ee&896&&Ie!==(Ie="progress progress-"+(pe[8]!==0?pe[7]:pe[9])+" w-full h-2 sm:h-3")&&i(ye,"class",Ie),Ee&16&&(ye.value=pe[4]),Ee&2&&Ve!==(Ve=pe[1].maxHp)&&i(ye,"max",Ve),Ee&8&&Qe!==(Qe=pe[3].toFixed(0)+"")&&ne(De,Qe),Ee&256&&Ze!==(Ze="bg-"+(pe[8]!==0?pe[8]>0?"success":"error":"neutral")+"/10 p-2 sm:p-3 rounded-lg gap-1 flex flex-col justify-center items-center border-2 border-"+(pe[8]!==0?pe[8]>0?"success":"error":"primary")+"/30")&&i(te,"class",Ze),Ee&64&&Xe(Pe.value)!==pe[6]&&ke(Pe,pe[6]),Ee&64&&$e!==($e=pe[6]<=0)&&(Le.disabled=$e),Ee&64&&ot!==(ot=pe[6]<=0)&&(Te.disabled=ot)},d(pe){pe&&f(e),Me&&Me.d(),qe.d(),Rt=!1,et(el)}}}function Gl(l){let e,t="NPC";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-31ycly"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-error")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Sn(l){let e,t="Sin cambios";return{c(){e=d("p"),e.textContent=t,this.h()},l(s){e=u(s,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-rbv1yy"&&(e.textContent=t),this.h()},h(){i(e,"class","text-xs sm:text-sm text-neutral/60")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function jn(l){let e,t=l[8]>0?"+":"",s,a,o;return{c(){e=d("p"),s=B(t),a=B(l[8]),this.h()},l(r){e=u(r,"P",{class:!0});var c=v(e);s=j(c,t),a=j(c,l[8]),c.forEach(f),this.h()},h(){i(e,"class",o="text-base sm:text-lg font-bold text-"+(l[8]>0?"success":"error"))},m(r,c){J(r,e,c),n(e,s),n(e,a)},p(r,c){c&256&&t!==(t=r[8]>0?"+":"")&&ne(s,t),c&256&&ne(a,r[8]),c&256&&o!==(o="text-base sm:text-lg font-bold text-"+(r[8]>0?"success":"error"))&&i(e,"class",o)},d(r){r&&f(e)}}}function Bn(l){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return On;if(o[0]&&o[1]&&!o[2])return Nn}let s=t(l),a=s&&s(l);return{c(){a&&a.c(),e=mt()},l(o){a&&a.l(o),e=mt()},m(o,r){a&&a.m(o,r),J(o,e,r)},p(o,[r]){s===(s=t(o))&&a?a.p(o,r):(a&&a.d(1),a=s&&s(o),a&&(a.c(),a.m(e.parentNode,e)))},i:Ce,o:Ce,d(o){o&&f(e),a&&a.d(o)}}}function Un(l,e,t){let s,a,o,r,c,h,{isOpen:p=!1}=e,{combatant:m=null}=e,{isDM:x=!1}=e;const g=zt();let k=0,_=0;function y(){if(m&&_>0){const E=-Math.abs(_);g("apply",E),t(6,_=0)}}function b(){if(m&&_>0){const E=Math.abs(_);g("apply",E),t(6,_=0)}}function I(){t(13,k=0),t(6,_=0),g("close")}function C(){_=Xe(this.value),t(6,_)}return l.$$set=E=>{"isOpen"in E&&t(0,p=E.isOpen),"combatant"in E&&t(1,m=E.combatant),"isDM"in E&&t(2,x=E.isDM)},l.$$.update=()=>{l.$$.dirty&2&&t(5,s=m?m.currentHp/m.maxHp*100:0),l.$$.dirty&32&&t(9,a=s>50?"success":s>25?"warning":"error"),l.$$.dirty&8194&&t(4,o=m?Math.max(0,Math.min(m.maxHp,m.currentHp+k)):0),l.$$.dirty&18&&t(8,r=m?o-m.currentHp:0),l.$$.dirty&18&&t(3,c=m?o/m.maxHp*100:0),l.$$.dirty&8&&t(7,h=c>50?"success":c>25?"warning":"error")},[p,m,x,c,o,s,_,h,r,a,y,b,I,k,C]}class zn extends xt{constructor(e){super(),Ct(this,e,Un,Bn,yt,{isOpen:0,combatant:1,isDM:2})}}function Wl(l,e,t){const s=l.slice();return s[21]=e[t],s}function Ql(l,e,t){const s=l.slice();s[16]=e[t];const a=Array.isArray(s[1].conditions)?s[1].conditions:[];s[17]=a;const o=s[17].includes(s[16].name);return s[18]=o,s}function Jl(l,e,t){const s=l.slice();return s[21]=e[t],s}function Rn(l){let e,t,s,a="‚úï",o,r,c,h=l[1].name+"",p,m,x,g,k,_="Solo el DM puede modificar estados",y,b,I="Cerrar",C,E;function A(w,M){return M&2&&(x=null),x==null&&(x=!!(w[1].conditions&&Array.isArray(w[1].conditions)&&w[1].conditions.length>0)),x?Gn:qn}let P=A(l,-1),V=P(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("h3"),c=B("‚ö†Ô∏è Estados de "),p=B(h),m=T(),V.c(),g=T(),k=d("p"),k.textContent=_,y=T(),b=d("button"),b.textContent=I,this.h()},l(w){e=u(w,"DIV",{class:!0});var M=v(e);t=u(M,"DIV",{class:!0});var L=v(t);s=u(L,"BUTTON",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1t0z3ws"&&(s.textContent=a),o=D(L),r=u(L,"H3",{class:!0});var F=v(r);c=j(F,"‚ö†Ô∏è Estados de "),p=j(F,h),F.forEach(f),m=D(L),V.l(L),g=D(L),k=u(L,"P",{class:!0,"data-svelte-h":!0}),U(k)!=="svelte-1mg2e4g"&&(k.textContent=_),y=D(L),b=u(L,"BUTTON",{class:!0,"data-svelte-h":!0}),U(b)!=="svelte-1vgxpha"&&(b.textContent=I),L.forEach(f),M.forEach(f),this.h()},h(){i(s,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),i(r,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),i(k,"class","text-xs text-center text-neutral/60 italic mt-4"),i(b,"class","btn btn-dnd w-full mt-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-md relative p-6"),i(e,"class","modal modal-open z-50")},m(w,M){J(w,e,M),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,p),n(t,m),V.m(t,null),n(t,g),n(t,k),n(t,y),n(t,b),C||(E=[ce(s,"click",l[9]),ce(b,"click",l[9]),ce(e,"keydown",l[10])],C=!0)},p(w,M){M&2&&h!==(h=w[1].name+"")&&ne(p,h),P===(P=A(w,M))&&V?V.p(w,M):(V.d(1),V=P(w),V&&(V.c(),V.m(t,g)))},d(w){w&&f(e),V.d(),C=!1,et(E)}}}function Fn(l){let e,t,s,a="‚úï",o,r,c,h="‚ö†Ô∏è Estados de Combate",p,m,x,g,k,_,y=l[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",b,I,C,E,A=l[1].name+"",P,V,w,M,L,F=l[1].currentHp+"",z,W,H=l[1].maxHp+"",q,N,S,K,X=l[1].armorClass+"",le,re,ae,Z,se,G,$,Y="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ie,oe,ge=(l[1].conditions&&Array.isArray(l[1].conditions)?l[1].conditions.length:0)+"",ve,R,_e,be,de,te,O,ee,fe,ue,Q="üîç",he,we,Re="Base de datos oficial de D&D 5e",Ae,ye,Ie,Ve,Oe;function We(me,xe){return xe&2&&(_e=null),_e==null&&(_e=!!(me[1].conditions&&Array.isArray(me[1].conditions)&&me[1].conditions.length>0)),_e?Qn:Wn}let Qe=We(l,-1),De=Qe(l);function ct(me,xe){return xe&8&&(Ie=null),me[5]?Zn:me[4].length>0?Xn:(Ie==null&&(Ie=!!me[3].trim()),Ie?Kn:Jn)}let Ze=ct(l,-1),He=Ze(l);return{c(){e=d("div"),t=d("div"),s=d("button"),s.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=h,p=T(),m=d("div"),x=d("div"),g=d("div"),k=d("div"),_=d("span"),b=B(y),I=T(),C=d("div"),E=d("h4"),P=B(A),V=T(),w=d("div"),M=d("div"),L=B("‚ù§Ô∏è "),z=B(F),W=B("/"),q=B(H),N=T(),S=d("div"),K=B("üõ°Ô∏è "),le=B(X),re=T(),ae=d("div"),Z=d("div"),se=d("div"),G=d("div"),$=d("h5"),$.innerHTML=Y,ie=T(),oe=d("span"),ve=B(ge),R=T(),De.c(),be=T(),de=d("div"),te=d("div"),O=d("div"),ee=d("input"),fe=T(),ue=d("div"),ue.textContent=Q,he=T(),we=d("p"),we.textContent=Re,Ae=T(),ye=d("div"),He.c(),this.h()},l(me){e=u(me,"DIV",{class:!0});var xe=v(e);t=u(xe,"DIV",{class:!0});var Ye=v(t);s=u(Ye,"BUTTON",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1vc2djp"&&(s.textContent=a),o=D(Ye),r=u(Ye,"DIV",{class:!0});var tt=v(r);c=u(tt,"H3",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-j0oh10"&&(c.textContent=h),p=D(tt),m=u(tt,"DIV",{class:!0});var Se=v(m);x=u(Se,"DIV",{class:!0});var Pe=v(x);g=u(Pe,"DIV",{class:!0});var ut=v(g);k=u(ut,"DIV",{class:!0});var Fe=v(k);_=u(Fe,"SPAN",{class:!0});var Le=v(_);b=j(Le,y),Le.forEach(f),Fe.forEach(f),ut.forEach(f),Pe.forEach(f),I=D(Se),C=u(Se,"DIV",{class:!0});var Be=v(C);E=u(Be,"H4",{class:!0});var pt=v(E);P=j(pt,A),pt.forEach(f),V=D(Be),w=u(Be,"DIV",{class:!0});var lt=v(w);M=u(lt,"DIV",{class:!0});var je=v(M);L=j(je,"‚ù§Ô∏è "),z=j(je,F),W=j(je,"/"),q=j(je,H),je.forEach(f),N=D(lt),S=u(lt,"DIV",{class:!0});var dt=v(S);K=j(dt,"üõ°Ô∏è "),le=j(dt,X),dt.forEach(f),lt.forEach(f),Be.forEach(f),Se.forEach(f),tt.forEach(f),re=D(Ye),ae=u(Ye,"DIV",{class:!0,style:!0});var $e=v(ae);Z=u($e,"DIV",{class:!0,style:!0});var ft=v(Z);se=u(ft,"DIV",{class:!0});var Te=v(se);G=u(Te,"DIV",{class:!0});var Ue=v(G);$=u(Ue,"H5",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-12hilzf"&&($.innerHTML=Y),ie=D(Ue),oe=u(Ue,"SPAN",{class:!0});var bt=v(oe);ve=j(bt,ge),bt.forEach(f),Ue.forEach(f),R=D(Te),De.l(Te),Te.forEach(f),ft.forEach(f),be=D($e),de=u($e,"DIV",{class:!0,style:!0});var st=v(de);te=u(st,"DIV",{class:!0});var ze=v(te);O=u(ze,"DIV",{class:!0});var at=v(O);ee=u(at,"INPUT",{type:!0,placeholder:!0,class:!0}),fe=D(at),ue=u(at,"DIV",{class:!0,"data-svelte-h":!0}),U(ue)!=="svelte-1duc997"&&(ue.textContent=Q),at.forEach(f),he=D(ze),we=u(ze,"P",{class:!0,"data-svelte-h":!0}),U(we)!=="svelte-hqlo3f"&&(we.textContent=Re),ze.forEach(f),Ae=D(st),ye=u(st,"DIV",{class:!0});var ot=v(ye);He.l(ot),ot.forEach(f),st.forEach(f),$e.forEach(f),Ye.forEach(f),xe.forEach(f),this.h()},h(){i(s,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(_,"class","text-xl"),i(k,"class","bg-primary/20 flex items-center justify-center"),i(g,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(x,"class","avatar"),i(E,"class","text-lg font-medieval text-neutral font-bold truncate"),i(M,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),i(S,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),i(w,"class","flex gap-2 mt-1"),i(C,"class","flex-1 min-w-0"),i(m,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),i($,"class","font-medieval text-neutral font-bold flex items-center gap-2"),i(oe,"class","badge badge-warning badge-sm"),i(G,"class","flex items-center justify-between mb-3"),i(se,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),i(Z,"class","md:w-1/3 flex flex-col"),_t(Z,"min-height","300px"),i(ee,"type","text"),i(ee,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),i(ee,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),i(ue,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),i(O,"class","relative"),i(we,"class","text-xs text-neutral/50 mt-1 italic"),i(te,"class","mb-3"),i(ye,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),i(de,"class","md:w-2/3 flex flex-col"),_t(de,"min-height","300px"),i(ae,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),_t(ae,"min-height","0"),i(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),i(e,"class","modal modal-open z-50")},m(me,xe){J(me,e,xe),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,p),n(r,m),n(m,x),n(x,g),n(g,k),n(k,_),n(_,b),n(m,I),n(m,C),n(C,E),n(E,P),n(C,V),n(C,w),n(w,M),n(M,L),n(M,z),n(M,W),n(M,q),n(w,N),n(w,S),n(S,K),n(S,le),n(t,re),n(t,ae),n(ae,Z),n(Z,se),n(se,G),n(G,$),n(G,ie),n(G,oe),n(oe,ve),n(se,R),De.m(se,null),n(ae,be),n(ae,de),n(de,te),n(te,O),n(O,ee),ke(ee,l[3]),n(O,fe),n(O,ue),n(te,he),n(te,we),n(de,Ae),n(de,ye),He.m(ye,null),Ve||(Oe=[ce(s,"click",l[9]),ce(ee,"input",l[12]),ce(ee,"input",l[6]),ce(e,"keydown",l[10])],Ve=!0)},p(me,xe){xe&2&&y!==(y=me[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ne(b,y),xe&2&&A!==(A=me[1].name+"")&&ne(P,A),xe&2&&F!==(F=me[1].currentHp+"")&&ne(z,F),xe&2&&H!==(H=me[1].maxHp+"")&&ne(q,H),xe&2&&X!==(X=me[1].armorClass+"")&&ne(le,X),xe&2&&ge!==(ge=(me[1].conditions&&Array.isArray(me[1].conditions)?me[1].conditions.length:0)+"")&&ne(ve,ge),Qe===(Qe=We(me,xe))&&De?De.p(me,xe):(De.d(1),De=Qe(me),De&&(De.c(),De.m(se,null))),xe&8&&ee.value!==me[3]&&ke(ee,me[3]),Ze===(Ze=ct(me,xe))&&He?He.p(me,xe):(He.d(1),He=Ze(me),He&&(He.c(),He.m(ye,null)))},d(me){me&&f(e),De.d(),He.d(),Ve=!1,et(Oe)}}}function qn(l){let e,t='<div class="text-4xl mb-2">üòå</div> <p class="text-neutral/70 font-body">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-18t8x0o"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Gn(l){let e,t=Ne(l[1].conditions),s=[];for(let a=0;a<t.length;a+=1)s[a]=Kl(Wl(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=v(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&2){t=Ne(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=Wl(a,t,r);s[r]?s[r].p(c,o):(s[r]=Kl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Kl(l){let e,t,s=l[21]+"",a,o;return{c(){e=d("div"),t=d("span"),a=B(s),o=T(),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=v(e);t=u(c,"SPAN",{class:!0});var h=v(t);a=j(h,s),h.forEach(f),o=D(c),c.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40")},m(r,c){J(r,e,c),n(e,t),n(t,a),n(e,o)},p(r,c){c&2&&s!==(s=r[21]+"")&&ne(a,s)},d(r){r&&f(e)}}}function Wn(l){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Qn(l){let e,t=Ne(l[1].conditions),s=[];for(let a=0;a<t.length;a+=1)s[a]=Xl(Jl(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=v(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&258){t=Ne(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=Jl(a,t,r);s[r]?s[r].p(c,o):(s[r]=Xl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Xl(l){let e,t,s=l[21]+"",a,o,r,c="‚úï",h,p,m;function x(){return l[11](l[21])}return{c(){e=d("div"),t=d("span"),a=B(s),o=T(),r=d("button"),r.textContent=c,h=T(),this.h()},l(g){e=u(g,"DIV",{class:!0});var k=v(e);t=u(k,"SPAN",{class:!0});var _=v(t);a=j(_,s),_.forEach(f),o=D(k),r=u(k,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),U(r)!=="svelte-5t970f"&&(r.textContent=c),h=D(k),k.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral flex-1"),i(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),i(r,"title","Eliminar"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(g,k){J(g,e,k),n(e,t),n(t,a),n(e,o),n(e,r),n(e,h),p||(m=ce(r,"click",x),p=!0)},p(g,k){l=g,k&2&&s!==(s=l[21]+"")&&ne(a,s)},d(g){g&&f(e),p=!1,m()}}}function Jn(l){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Kn(l){let e,t,s="üîç",a,o,r,c,h,p,m,x,g="‚ûï Agregar como personalizado",k,_;return{c(){e=d("div"),t=d("div"),t.textContent=s,a=T(),o=d("p"),r=B('No se encontr√≥ "'),c=d("span"),h=B(l[3]),p=B('"'),m=T(),x=d("button"),x.textContent=g,this.h()},l(y){e=u(y,"DIV",{class:!0});var b=v(e);t=u(b,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-sy51vw"&&(t.textContent=s),a=D(b),o=u(b,"P",{class:!0});var I=v(o);r=j(I,'No se encontr√≥ "'),c=u(I,"SPAN",{class:!0});var C=v(c);h=j(C,l[3]),C.forEach(f),p=j(I,'"'),I.forEach(f),m=D(b),x=u(b,"BUTTON",{class:!0,"data-svelte-h":!0}),U(x)!=="svelte-1rs0apo"&&(x.textContent=g),b.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(c,"class","font-bold"),i(o,"class","text-neutral/70 font-body mb-3"),i(x,"class","btn btn-primary btn-sm"),i(e,"class","flex flex-col items-center justify-center h-full text-center")},m(y,b){J(y,e,b),n(e,t),n(e,a),n(e,o),n(o,r),n(o,c),n(c,h),n(o,p),n(e,m),n(e,x),k||(_=ce(x,"click",l[14]),k=!0)},p(y,b){b&8&&ne(h,y[3])},d(y){y&&f(e),k=!1,_()}}}function Xn(l){let e,t=Ne(l[4]),s=[];for(let a=0;a<t.length;a+=1)s[a]=Yl(Ql(l,t,a));return{c(){e=d("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=v(e);for(let r=0;r<s.length;r+=1)s[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){J(a,e,o);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null)},p(a,o){if(o&146){t=Ne(a[4]);let r;for(r=0;r<t.length;r+=1){const c=Ql(a,t,r);s[r]?s[r].p(c,o):(s[r]=Yl(c),s[r].c(),s[r].m(e,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=t.length}},d(a){a&&f(e),it(s,a)}}}function Zn(l){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function Zl(l){let e,t="‚úì Activo";return{c(){e=d("span"),e.textContent=t,this.h()},l(s){e=u(s,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-success shrink-0")},m(s,a){J(s,e,a)},d(s){s&&f(e)}}}function Yl(l){let e,t,s,a=l[16].name+"",o,r,c,h,p=gt.cleanDescription(l[16].desc,120)+"",m,x,g,k,_,y,b=l[18]&&Zl();function I(){return l[13](l[16])}return{c(){e=d("button"),t=d("div"),s=d("span"),o=B(a),r=T(),b&&b.c(),c=T(),h=d("p"),m=B(p),x=T(),this.h()},l(C){e=u(C,"BUTTON",{class:!0});var E=v(e);t=u(E,"DIV",{class:!0});var A=v(t);s=u(A,"SPAN",{class:!0});var P=v(s);o=j(P,a),P.forEach(f),r=D(A),b&&b.l(A),A.forEach(f),c=D(E),h=u(E,"P",{class:!0});var V=v(h);m=j(V,p),V.forEach(f),x=D(E),E.forEach(f),this.h()},h(){i(s,"class","font-medieval font-bold text-neutral"),i(t,"class","flex items-start justify-between gap-2 mb-1"),i(h,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=g=l[18],i(e,"class",k="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(C,E){J(C,e,E),n(e,t),n(t,s),n(s,o),n(t,r),b&&b.m(t,null),n(e,c),n(e,h),n(h,m),n(e,x),_||(y=ce(e,"click",I),_=!0)},p(C,E){l=C,E&16&&a!==(a=l[16].name+"")&&ne(o,a),l[18]?b||(b=Zl(),b.c(),b.m(t,null)):b&&(b.d(1),b=null),E&16&&p!==(p=gt.cleanDescription(l[16].desc,120)+"")&&ne(m,p),E&18&&g!==(g=l[18])&&(e.disabled=g),E&18&&k!==(k="w-full text-left p-3 rounded-lg border-2 transition-all "+(l[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&i(e,"class",k)},d(C){C&&f(e),b&&b.d(),_=!1,y()}}}function Yn(l){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return Fn;if(o[0]&&o[1]&&!o[2])return Rn}let s=t(l),a=s&&s(l);return{c(){a&&a.c(),e=mt()},l(o){a&&a.l(o),e=mt()},m(o,r){a&&a.m(o,r),J(o,e,r)},p(o,[r]){s===(s=t(o))&&a?a.p(o,r):(a&&a.d(1),a=s&&s(o),a&&(a.c(),a.m(e.parentNode,e)))},i:Ce,o:Ce,d(o){o&&f(e),a&&a.d(o)}}}function $n(l,e,t){let{isOpen:s=!1}=e,{combatant:a=null}=e,{isDM:o=!1}=e;const r=zt();let c="",h=[],p=!1;const m=cs(async()=>{if(!c.trim()){t(4,h=[]);return}t(5,p=!0);try{const E=await gt.searchConditions(c);t(4,h=E.results)}catch(E){console.error("Error searching conditions:",E),t(4,h=[])}finally{t(5,p=!1)}},300);function x(E){if(!a||!E.trim()||!o)return;if((Array.isArray(a.conditions)?a.conditions:[]).includes(E)){console.log("Condici√≥n ya existe:",E);return}console.log("Agregando condici√≥n:",E),r("add",E),t(3,c=""),t(4,h=[])}function g(E){!a||!o||(console.log("Removiendo condici√≥n:",E),r("remove",E))}function k(){t(3,c=""),t(4,h=[]),r("close")}function _(E){E.key==="Escape"&&k()}const y=E=>g(E);function b(){c=this.value,t(3,c)}const I=E=>x(E.name),C=()=>x(c.trim());return l.$$set=E=>{"isOpen"in E&&t(0,s=E.isOpen),"combatant"in E&&t(1,a=E.combatant),"isDM"in E&&t(2,o=E.isDM)},[s,a,o,c,h,p,m,x,g,k,_,y,b,I,C]}class er extends xt{constructor(e){super(),Ct(this,e,$n,Yn,yt,{isOpen:0,combatant:1,isDM:2})}}function $l(l,e,t){const s=l.slice();return s[49]=e[t],s[51]=t,s}function es(l){let e,t,s,a,o,r,c="‚úï",h,p;return{c(){e=d("div"),t=d("div"),s=d("span"),a=B(l[7]),o=T(),r=d("button"),r.textContent=c,this.h()},l(m){e=u(m,"DIV",{class:!0});var x=v(e);t=u(x,"DIV",{class:!0});var g=v(t);s=u(g,"SPAN",{});var k=v(s);a=j(k,l[7]),k.forEach(f),o=D(g),r=u(g,"BUTTON",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-4tcifc"&&(r.textContent=c),g.forEach(f),x.forEach(f),this.h()},h(){i(r,"class","btn btn-sm"),i(t,"class","alert alert-error flex justify-between items-center"),i(e,"class","container mx-auto p-4")},m(m,x){J(m,e,x),n(e,t),n(t,s),n(s,a),n(t,o),n(t,r),h||(p=ce(r,"click",l[31]),h=!0)},p(m,x){x[0]&128&&ne(a,m[7])},d(m){m&&f(e),h=!1,p()}}}function tr(l){let e,t,s,a,o,r=l[2].name+"",c,h,p,m,x,g=l[2].round+"",k,_,y,b,I=l[3].length+"",C,E,A,P,V,w,M,L,F=l[14]&&ts(l),z=l[13]&&ls(l);const W=[rr,nr],H=[];function q(N,S){return N[3].length===0?0:1}return w=q(l),M=H[w]=W[w](l),{c(){e=d("div"),t=d("div"),s=d("div"),a=d("div"),o=d("h2"),c=B(r),h=T(),p=d("div"),m=d("div"),x=B("üîÑ Ronda "),k=B(g),_=T(),y=d("div"),b=B("üë• "),C=B(I),E=B(" Combatientes"),A=T(),F&&F.c(),P=T(),z&&z.c(),V=T(),M.c(),this.h()},l(N){e=u(N,"DIV",{class:!0});var S=v(e);t=u(S,"DIV",{class:!0});var K=v(t);s=u(K,"DIV",{class:!0});var X=v(s);a=u(X,"DIV",{class:!0});var le=v(a);o=u(le,"H2",{class:!0});var re=v(o);c=j(re,r),re.forEach(f),h=D(le),p=u(le,"DIV",{class:!0});var ae=v(p);m=u(ae,"DIV",{class:!0});var Z=v(m);x=j(Z,"üîÑ Ronda "),k=j(Z,g),Z.forEach(f),_=D(ae),y=u(ae,"DIV",{class:!0});var se=v(y);b=j(se,"üë• "),C=j(se,I),E=j(se," Combatientes"),se.forEach(f),ae.forEach(f),le.forEach(f),A=D(X),F&&F.l(X),X.forEach(f),P=D(K),z&&z.l(K),K.forEach(f),V=D(S),M.l(S),S.forEach(f),this.h()},h(){i(o,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),i(m,"class","badge badge-ornate badge-md"),i(y,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),i(p,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),i(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),i(s,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),i(t,"class","card-parchment mb-6 corner-ornament"),i(e,"class","p-4 max-w-5xl mx-auto")},m(N,S){J(N,e,S),n(e,t),n(t,s),n(s,a),n(a,o),n(o,c),n(a,h),n(a,p),n(p,m),n(m,x),n(m,k),n(p,_),n(p,y),n(y,b),n(y,C),n(y,E),n(s,A),F&&F.m(s,null),n(t,P),z&&z.m(t,null),n(e,V),H[w].m(e,null),L=!0},p(N,S){(!L||S[0]&4)&&r!==(r=N[2].name+"")&&ne(c,r),(!L||S[0]&4)&&g!==(g=N[2].round+"")&&ne(k,g),(!L||S[0]&8)&&I!==(I=N[3].length+"")&&ne(C,I),N[14]?F?F.p(N,S):(F=ts(N),F.c(),F.m(s,null)):F&&(F.d(1),F=null),N[13]?z?z.p(N,S):(z=ls(N),z.c(),z.m(t,null)):z&&(z.d(1),z=null);let K=w;w=q(N),w===K?H[w].p(N,S):($t(),Ke(H[K],1,1,()=>{H[K]=null}),Yt(),M=H[w],M?M.p(N,S):(M=H[w]=W[w](N),M.c()),Ge(M,1),M.m(e,null))},i(N){L||(Ge(M),L=!0)},o(N){Ke(M),L=!1},d(N){N&&f(e),F&&F.d(),z&&z.d(),H[w].d()}}}function lr(l){let e,t,s,a="‚öîÔ∏è",o,r,c="No hay combate activo",h,p,m="El DM debe iniciar un encuentro para comenzar la batalla",x;function g(y,b){return y[14]?or:ar}let k=g(l),_=k(l);return{c(){e=d("div"),t=d("div"),s=d("div"),s.textContent=a,o=T(),r=d("h2"),r.textContent=c,h=T(),p=d("p"),p.textContent=m,x=T(),_.c(),this.h()},l(y){e=u(y,"DIV",{class:!0});var b=v(e);t=u(b,"DIV",{class:!0});var I=v(t);s=u(I,"DIV",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-19xxu84"&&(s.textContent=a),o=D(I),r=u(I,"H2",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-itogws"&&(r.textContent=c),h=D(I),p=u(I,"P",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1smrxik"&&(p.textContent=m),x=D(I),_.l(I),I.forEach(f),b.forEach(f),this.h()},h(){i(s,"class","text-6xl mb-4"),i(r,"class","text-3xl font-medieval text-neutral mb-4"),i(p,"class","text-neutral/70 font-body mb-6"),i(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),i(e,"class","flex items-center justify-center h-full p-4")},m(y,b){J(y,e,b),n(e,t),n(t,s),n(t,o),n(t,r),n(t,h),n(t,p),n(t,x),_.m(t,null)},p(y,b){k===(k=g(y))&&_?_.p(y,b):(_.d(1),_=k(y),_&&(_.c(),_.m(t,null)))},i:Ce,o:Ce,d(y){y&&f(e),_.d()}}}function sr(l){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(s){e=u(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center justify-center h-full")},m(s,a){J(s,e,a)},p:Ce,i:Ce,o:Ce,d(s){s&&f(e)}}}function ts(l){let e,t,s='<span class="text-lg">‚ûï</span> Agregar',a,o,r,c="‚ñ∂Ô∏è",h,p,m,x,g="üèÅ Finalizar",k,_;return{c(){e=d("div"),t=d("button"),t.innerHTML=s,a=T(),o=d("button"),r=d("span"),r.textContent=c,h=B(" Siguiente Turno"),m=T(),x=d("button"),x.textContent=g,this.h()},l(y){e=u(y,"DIV",{class:!0});var b=v(e);t=u(b,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-sdwydq"&&(t.innerHTML=s),a=D(b),o=u(b,"BUTTON",{class:!0});var I=v(o);r=u(I,"SPAN",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-vhmvlx"&&(r.textContent=c),h=j(I," Siguiente Turno"),I.forEach(f),m=D(b),x=u(b,"BUTTON",{class:!0,"data-svelte-h":!0}),U(x)!=="svelte-1oa32z5"&&(x.textContent=g),b.forEach(f),this.h()},h(){i(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),i(r,"class","text-lg"),i(o,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),o.disabled=p=l[3].length===0,i(x,"class","btn btn-error btn-sm flex-1 sm:flex-none"),i(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(y,b){J(y,e,b),n(e,t),n(e,a),n(e,o),n(o,r),n(o,h),n(e,m),n(e,x),k||(_=[ce(t,"click",l[33]),ce(o,"click",l[27]),ce(x,"click",l[18])],k=!0)},p(y,b){b[0]&8&&p!==(p=y[3].length===0)&&(o.disabled=p)},d(y){y&&f(e),k=!1,et(_)}}}function ls(l){let e,t,s="TURNO ACTUAL",a,o,r=l[13].name+"",c;return{c(){e=d("div"),t=d("p"),t.textContent=s,a=T(),o=d("p"),c=B(r),this.h()},l(h){e=u(h,"DIV",{class:!0});var p=v(e);t=u(p,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-j3qdhu"&&(t.textContent=s),a=D(p),o=u(p,"P",{class:!0});var m=v(o);c=j(m,r),m.forEach(f),p.forEach(f),this.h()},h(){i(t,"class","text-sm font-medieval text-neutral/70 mb-1"),i(o,"class","text-2xl font-bold font-medieval text-neutral"),i(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(h,p){J(h,e,p),n(e,t),n(e,a),n(e,o),n(o,c)},p(h,p){p[0]&8192&&r!==(r=h[13].name+"")&&ne(c,r)},d(h){h&&f(e)}}}function nr(l){let e,t,s=Ne(l[3]),a=[];for(let r=0;r<s.length;r+=1)a[r]=ss($l(l,s,r));const o=r=>Ke(a[r],1,1,()=>{a[r]=null});return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var c=v(e);for(let h=0;h<a.length;h+=1)a[h].l(c);c.forEach(f),this.h()},h(){i(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,c){J(r,e,c);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);t=!0},p(r,c){if(c[0]&7356428){s=Ne(r[3]);let h;for(h=0;h<s.length;h+=1){const p=$l(r,s,h);a[h]?(a[h].p(p,c),Ge(a[h],1)):(a[h]=ss(p),a[h].c(),Ge(a[h],1),a[h].m(e,null))}for($t(),h=s.length;h<a.length;h+=1)o(h);Yt()}},i(r){if(!t){for(let c=0;c<s.length;c+=1)Ge(a[c]);t=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Ke(a[c]);t=!1},d(r){r&&f(e),it(a,r)}}}function rr(l){let e,t,s="üé≤",a,o,r="Sin combatientes",c,h,p=l[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",m;return{c(){e=d("div"),t=d("div"),t.textContent=s,a=T(),o=d("p"),o.textContent=r,c=T(),h=d("p"),m=B(p),this.h()},l(x){e=u(x,"DIV",{class:!0});var g=v(e);t=u(g,"DIV",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-9xsxws"&&(t.textContent=s),a=D(g),o=u(g,"P",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-180lhql"&&(o.textContent=r),c=D(g),h=u(g,"P",{class:!0});var k=v(h);m=j(k,p),k.forEach(f),g.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(o,"class","text-xl font-medieval text-neutral mb-2"),i(h,"class","text-neutral/70 font-body"),i(e,"class","card-parchment p-12 text-center")},m(x,g){J(x,e,g),n(e,t),n(e,a),n(e,o),n(e,c),n(e,h),n(h,m)},p(x,g){g[0]&16384&&p!==(p=x[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&ne(m,p)},i:Ce,o:Ce,d(x){x&&f(e)}}}function ss(l){let e,t;return e=new Is({props:{combatant:l[49],isCurrentTurn:l[51]===l[2].turnIndex%l[3].length,isDM:!!l[14]}}),e.$on("updateHP",l[21]),e.$on("addCondition",l[22]),e.$on("remove",l[20]),{c(){Ut(e.$$.fragment)},l(s){Bt(e.$$.fragment,s)},m(s,a){jt(e,s,a),t=!0},p(s,a){const o={};a[0]&8&&(o.combatant=s[49]),a[0]&12&&(o.isCurrentTurn=s[51]===s[2].turnIndex%s[3].length),a[0]&16384&&(o.isDM=!!s[14]),e.$set(o)},i(s){t||(Ge(e.$$.fragment,s),t=!0)},o(s){Ke(e.$$.fragment,s),t=!1},d(s){St(e,s)}}}function ar(l){let e,t="Esperando que el DM inicie el combate...";return{c(){e=d("p"),e.textContent=t,this.h()},l(s){e=u(s,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){i(e,"class","text-sm text-neutral/50 italic")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function or(l){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,s,a;return{c(){e=d("button"),e.innerHTML=t,this.h()},l(o){e=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-dnd btn-lg")},m(o,r){J(o,e,r),s||(a=ce(e,"click",l[32]),s=!0)},p:Ce,d(o){o&&f(e),s=!1,a()}}}function ns(l){let e,t,s,a="‚öîÔ∏è Iniciar Encuentro",o,r,c,h='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro <span class="text-error">*</span></span>',p,m,x,g,k,_,y,b="Cancelar",I,C,E,A="‚öîÔ∏è",P,V,w,M;function L(W,H){return W[0]&&W[1]?cr:ir}let F=L(l),z=F(l);return{c(){e=d("div"),t=d("div"),s=d("h3"),s.textContent=a,o=T(),r=d("div"),c=d("label"),c.innerHTML=h,p=T(),m=d("input"),g=T(),z.c(),k=T(),_=d("div"),y=d("button"),y.textContent=b,I=T(),C=d("button"),E=d("span"),E.textContent=A,P=B(`\r
          Iniciar Combate`),this.h()},l(W){e=u(W,"DIV",{class:!0});var H=v(e);t=u(H,"DIV",{class:!0});var q=v(t);s=u(q,"H3",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-jkbohq"&&(s.textContent=a),o=D(q),r=u(q,"DIV",{class:!0});var N=v(r);c=u(N,"LABEL",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-18eazf9"&&(c.innerHTML=h),p=D(N),m=u(N,"INPUT",{type:!0,placeholder:!0,class:!0}),g=D(N),z.l(N),N.forEach(f),k=D(q),_=u(q,"DIV",{class:!0});var S=v(_);y=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),U(y)!=="svelte-1rt1icx"&&(y.textContent=b),I=D(S),C=u(S,"BUTTON",{class:!0});var K=v(C);E=u(K,"SPAN",{class:!0,"data-svelte-h":!0}),U(E)!=="svelte-v5ojki"&&(E.textContent=A),P=j(K,`\r
          Iniciar Combate`),K.forEach(f),S.forEach(f),q.forEach(f),H.forEach(f),this.h()},h(){i(s,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),i(c,"class","label"),i(m,"type","text"),i(m,"placeholder","Ej: Emboscada de Orcos"),i(m,"class",x="input input-bordered bg-[#2d241c] text-base-content "+(l[0]&&l[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(r,"class","form-control"),i(y,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),i(E,"class","text-xl"),i(C,"class","btn btn-dnd"),C.disabled=V=!l[15],i(_,"class","modal-action justify-center gap-4"),i(t,"class","modal-box card-parchment border-4 border-secondary"),i(e,"class","modal modal-open z-50")},m(W,H){J(W,e,H),n(e,t),n(t,s),n(t,o),n(t,r),n(r,c),n(r,p),n(r,m),ke(m,l[4]),n(r,g),z.m(r,null),n(t,k),n(t,_),n(_,y),n(_,I),n(_,C),n(C,E),n(C,P),w||(M=[ce(m,"input",l[34]),ce(m,"input",l[16]),ce(y,"click",l[23]),ce(C,"click",l[17])],w=!0)},p(W,H){H[0]&3&&x!==(x="input input-bordered bg-[#2d241c] text-base-content "+(W[0]&&W[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(m,"class",x),H[0]&16&&m.value!==W[4]&&ke(m,W[4]),F===(F=L(W))&&z?z.p(W,H):(z.d(1),z=F(W),z&&(z.c(),z.m(r,null))),H[0]&32768&&V!==(V=!W[15])&&(C.disabled=V)},d(W){W&&f(e),z.d(),w=!1,et(M)}}}function ir(l){let e,t='<span class="label-text-alt text-neutral/60 italic">Nombre del encuentro (3-100 caracteres)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(s){e=u(s,"LABEL",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-61x4np"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(s,a){J(s,e,a)},p:Ce,d(s){s&&f(e)}}}function cr(l){let e,t,s,a="‚ö†Ô∏è",o,r;return{c(){e=d("label"),t=d("span"),s=d("span"),s.textContent=a,o=T(),r=B(l[0]),this.h()},l(c){e=u(c,"LABEL",{class:!0});var h=v(e);t=u(h,"SPAN",{class:!0});var p=v(t);s=u(p,"SPAN",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-15g1o1n"&&(s.textContent=a),o=D(p),r=j(p,l[0]),p.forEach(f),h.forEach(f),this.h()},h(){i(s,"class","text-lg"),i(t,"class","label-text-alt text-error"),i(e,"class","label")},m(c,h){J(c,e,h),n(e,t),n(t,s),n(t,o),n(t,r)},p(c,h){h[0]&1&&ne(r,c[0])},d(c){c&&f(e)}}}function ur(l){let e,t,s,a,o,r,c,h,p,m,x,g,k,_,y,b,I,C=l[7]&&es(l);const E=[sr,lr,tr],A=[];function P(H,q){return H[6]?0:H[2]?2:1}o=P(l),r=A[o]=E[o](l);let V=l[9]&&ns(l);function w(H){l[35](H)}let M={combatant:l[12],isDM:!!l[14]};l[10]!==void 0&&(M.isOpen=l[10]),p=new zn({props:M}),Wt.push(()=>Qt(p,"isOpen",w)),p.$on("apply",l[24]),p.$on("close",l[36]);function L(H){l[37](H)}let F={combatant:l[12],isDM:!!l[14]};l[11]!==void 0&&(F.isOpen=l[11]),g=new er({props:F}),Wt.push(()=>Qt(g,"isOpen",L)),g.$on("add",l[25]),g.$on("remove",l[26]),g.$on("close",l[38]);function z(H){l[39](H)}let W={players:l[5]};return l[8]!==void 0&&(W.isOpen=l[8]),y=new Ln({props:W}),Wt.push(()=>Qt(y,"isOpen",z)),y.$on("add",l[19]),y.$on("close",l[40]),{c(){e=d("div"),C&&C.c(),t=T(),s=d("div"),a=d("div"),r.c(),c=T(),V&&V.c(),h=T(),Ut(p.$$.fragment),x=T(),Ut(g.$$.fragment),_=T(),Ut(y.$$.fragment),this.h()},l(H){e=u(H,"DIV",{class:!0});var q=v(e);C&&C.l(q),t=D(q),s=u(q,"DIV",{class:!0});var N=v(s);a=u(N,"DIV",{class:!0});var S=v(a);r.l(S),S.forEach(f),N.forEach(f),q.forEach(f),c=D(H),V&&V.l(H),h=D(H),Bt(p.$$.fragment,H),x=D(H),Bt(g.$$.fragment,H),_=D(H),Bt(y.$$.fragment,H),this.h()},h(){i(a,"class","flex-1"),i(s,"class","flex flex-1"),i(e,"class","min-h-screen flex flex-col")},m(H,q){J(H,e,q),C&&C.m(e,null),n(e,t),n(e,s),n(s,a),A[o].m(a,null),J(H,c,q),V&&V.m(H,q),J(H,h,q),jt(p,H,q),J(H,x,q),jt(g,H,q),J(H,_,q),jt(y,H,q),I=!0},p(H,q){H[7]?C?C.p(H,q):(C=es(H),C.c(),C.m(e,t)):C&&(C.d(1),C=null);let N=o;o=P(H),o===N?A[o].p(H,q):($t(),Ke(A[N],1,1,()=>{A[N]=null}),Yt(),r=A[o],r?r.p(H,q):(r=A[o]=E[o](H),r.c()),Ge(r,1),r.m(a,null)),H[9]?V?V.p(H,q):(V=ns(H),V.c(),V.m(h.parentNode,h)):V&&(V.d(1),V=null);const S={};q[0]&4096&&(S.combatant=H[12]),q[0]&16384&&(S.isDM=!!H[14]),!m&&q[0]&1024&&(m=!0,S.isOpen=H[10],Jt(()=>m=!1)),p.$set(S);const K={};q[0]&4096&&(K.combatant=H[12]),q[0]&16384&&(K.isDM=!!H[14]),!k&&q[0]&2048&&(k=!0,K.isOpen=H[11],Jt(()=>k=!1)),g.$set(K);const X={};q[0]&32&&(X.players=H[5]),!b&&q[0]&256&&(b=!0,X.isOpen=H[8],Jt(()=>b=!1)),y.$set(X)},i(H){I||(Ge(r),Ge(p.$$.fragment,H),Ge(g.$$.fragment,H),Ge(y.$$.fragment,H),I=!0)},o(H){Ke(r),Ke(p.$$.fragment,H),Ke(g.$$.fragment,H),Ke(y.$$.fragment,H),I=!1},d(H){H&&(f(e),f(c),f(h),f(x),f(_)),C&&C.d(),A[o].d(),V&&V.d(H),St(p,H),St(g,H),St(y,H)}}}function dr(l,e,t){let s,a,o,r,c,h;dl(l,vs,O=>t(29,c=O)),dl(l,bs,O=>t(30,h=O)),ps.set("Combate");let p="",m=!1;function x(){t(1,m=!0)}let g=null,k=null,_=[],y=[],b=!0,I="",C=!1,E=!1,A="",P=!1,V=!1,w=null,M=null,L=null;const F=_s(xs);hs(async()=>{await H(),await q(),await z()}),ms(()=>{M&&M(),L&&L()});async function z(){try{t(6,b=!0);const O=bl(F,"encounters"),ee=vl(O,Xt("campaignId","==",a),Xt("isActive","==",!0));M=_l(ee,fe=>{if(fe.empty)t(2,k=null),t(3,_=[]),L&&(L(),L=null);else{const ue=fe.docs[0];t(2,k={id:ue.id,...ue.data()}),!L&&k&&W(k.id)}t(6,b=!1)},fe=>{console.error("Error en listener de encuentro:",fe),t(7,I=fe.message),t(6,b=!1)})}catch(O){t(7,I=O.message),t(6,b=!1)}}function W(O){const ee=bl(F,"combatants"),fe=vl(ee,Xt("encounterId","==",O),gs("initiative","desc"));L=_l(fe,ue=>{if(t(3,_=ue.docs.map(Q=>({id:Q.id,...Q.data()}))),w){const Q=_.find(he=>he.id===w.id);Q&&t(12,w=Q)}},ue=>{console.error("Error en listener de combatientes:",ue)})}async function H(){try{t(28,g=await Je.getCampaign(a))}catch(O){t(7,I=O.message)}}async function q(){try{t(5,y=await Je.getCampaignCharacters(a))}catch(O){console.error("Error loading characters:",O)}}async function N(){t(1,m=!0);const O=pl(A);if(!O.valid){t(0,p=O.error||"");return}try{await Je.createEncounter(a,A),t(9,E=!1),t(4,A=""),t(1,m=!1),t(0,p="")}catch(ee){t(7,I=ee.message)}}async function S(){if(!(!k||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Je.endEncounter(k.id)}catch(O){t(7,I=O.message)}}async function K(O){if(k)try{await Je.addCombatant(k.id,O.detail),t(8,C=!1)}catch(ee){t(7,I=ee.message)}}async function X(O){const ee=O.detail;if(confirm(`¬øEliminar a ${ee.name} del combate?`))try{await Je.removeCombatant(ee.id)}catch(fe){t(7,I=fe.message)}}function le(O){t(12,w=O.detail),t(10,P=!0),t(11,V=!1)}function re(O){t(12,w=O.detail),t(11,V=!0),t(10,P=!1)}function ae(){t(9,E=!1),t(4,A=""),t(1,m=!1),t(0,p="")}async function Z(O){if(w)try{const ee=O.detail,fe=Math.max(0,Math.min(w.maxHp,w.currentHp+ee));await Je.updateCombatant(w.id,{currentHp:fe}),t(10,P=!1),t(12,w=null)}catch(ee){t(7,I=ee.message)}}async function se(O){if(w)try{const ee=O.detail,fe=Array.isArray(w.conditions)?w.conditions:[];if(fe.includes(ee)){console.log("Condici√≥n ya existe, ignorando");return}const ue=[...fe,ee];await Je.updateCombatant(w.id,{conditions:ue})}catch(ee){t(7,I=ee.message)}}async function G(O){if(w)try{const ee=O.detail,ue=(Array.isArray(w.conditions)?w.conditions:[]).filter(Q=>Q!==ee);await Je.updateCombatant(w.id,{conditions:ue})}catch(ee){t(7,I=ee.message)}}async function $(){if(k)try{await Je.nextTurn(k.id)}catch(O){t(7,I=O.message)}}const Y=()=>t(7,I=""),ie=()=>t(9,E=!0),oe=()=>t(8,C=!0);function ge(){A=this.value,t(4,A)}function ve(O){P=O,t(10,P)}const R=()=>{t(10,P=!1),t(12,w=null)};function _e(O){V=O,t(11,V)}const be=()=>{t(11,V=!1),t(12,w=null)};function de(O){C=O,t(8,C)}const te=()=>t(8,C=!1);return l.$$.update=()=>{if(l.$$.dirty[0]&18&&m&&A){const O=pl(A);t(0,p=O.valid?"":O.error||"")}l.$$.dirty[0]&17&&t(15,s=!p&&A.trim()),l.$$.dirty[0]&1073741824&&(a=h.params.id||""),l.$$.dirty[0]&805306368&&t(14,o=g&&c&&g.dmId===c.uid),l.$$.dirty[0]&12&&t(13,r=k&&_.length>0?_[k.turnIndex%_.length]:null)},[p,m,k,_,A,y,b,I,C,E,P,V,w,r,o,s,x,N,S,K,X,le,re,ae,Z,se,G,$,g,c,h,Y,ie,oe,ge,ve,R,_e,be,de,te]}class xr extends xt{constructor(e){super(),Ct(this,e,dr,ur,yt,{},null,[-1,-1])}}export{xr as component};
