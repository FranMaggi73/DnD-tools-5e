import{S as Ye,i as Ze,s as $e,n as xe,d as f,o as ae,c as i,a as F,b as n,e as u,f as _,g as I,p as j,j as d,k as T,t as U,V as ft,h as J,l as re,x as ze,r as Se,u as Re,T as Ge,W as Hl,F as Dl,X as Le,B as wt,v as De,D as wl,U as ht,Y as bt,O as it,H as Be,I as Oe,K as gt,Z as mt,Q as ct,R as ut,P as dt,m as It,q as Il,A as Tl,J as Ct}from"../chunks/b1l4neni.js";import{e as Te,o as Xe,h as Vl,a as Pe}from"../chunks/B0AGoUMz.js";import"../chunks/IHki7fMi.js";import{p as Ml}from"../chunks/CBsnC47a.js";import{u as Pl}from"../chunks/DMj5m-5l.js";import{d as kl}from"../chunks/B0l-HeGw.js";import{e as vt,f as Tt,g as Vt,h as Mt,i as Pt}from"../chunks/Dpq2-5VD.js";import{g as Ll,c as Lt,q as At,w as _t,o as Nt,a as Al}from"../chunks/eN7n43qG.js";import{c as Nl}from"../chunks/Bhgkhhu0.js";function Ot(s,e,t){const l=s.slice();return l[11]=e[t],l}function St(s){let e,t="‚öîÔ∏è SU TURNO";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-tne6n3"&&(e.textContent=t),this.h()},h(){i(e,"class","absolute -top-3 -right-3 badge badge-ornate text-sm sm:text-lg animate-bounce z-10")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Bt(s){let e,t='<span class="text-4xl sm:text-6xl">üíÄ</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1m5cl71"&&(e.innerHTML=t),this.h()},h(){i(e,"class","absolute inset-0 bg-error/20 flex items-center justify-center -z-10 rounded-lg")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function jt(s){let e,t,l=s[0].armorClass+"",a;return{c(){e=d("div"),t=U("üõ°Ô∏è AC "),a=U(l),this.h()},l(o){e=u(o,"DIV",{class:!0});var r=_(e);t=j(r,"üõ°Ô∏è AC "),a=j(r,l),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm bg-info/30 text-neutral border-info/50")},m(o,r){F(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&l!==(l=o[0].armorClass+"")&&ae(a,l)},d(o){o&&f(e)}}}function Ut(s){let e,t,l='<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"></path></svg>',a,o,r,c,p="üóëÔ∏è Eliminar",b,h;return{c(){e=d("div"),t=d("label"),t.innerHTML=l,a=T(),o=d("ul"),r=d("li"),c=d("a"),c.textContent=p,this.h()},l(v){e=u(v,"DIV",{class:!0});var k=_(e);t=u(k,"LABEL",{tabindex:!0,class:!0,"data-svelte-h":!0}),J(t)!=="svelte-13tftyw"&&(t.innerHTML=l),a=I(k),o=u(k,"UL",{tabindex:!0,class:!0});var m=_(o);r=u(m,"LI",{});var g=_(r);c=u(g,"A",{class:!0,"data-svelte-h":!0}),J(c)!=="svelte-hji4ll"&&(c.textContent=p),g.forEach(f),m.forEach(f),k.forEach(f),this.h()},h(){i(t,"tabindex","0"),i(t,"class","btn btn-ghost btn-xs btn-circle"),i(c,"class","text-error"),i(o,"tabindex","0"),i(o,"class","dropdown-content z-[1] menu p-2 shadow bg-neutral rounded-box w-40 sm:w-52 border-2 border-secondary text-sm"),i(e,"class","dropdown dropdown-end flex-shrink-0")},m(v,k){F(v,e,k),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),b||(h=re(c,"click",s[9]),b=!0)},p:xe,d(v){v&&f(e),b=!1,h()}}}function Ol(s){let e,t,l,a="Estado",o,r,c,p=s[4].icon+"",b,h,v,k=s[4].label+"",m,g,x,E,w,y,D,L,A,H=s[0].temporaryHp>0&&zt(s),C=s[0].temporaryHp>0&&qt();return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,o=T(),r=d("div"),c=d("span"),b=U(p),h=T(),v=d("span"),m=U(k),x=T(),H&&H.c(),E=T(),w=d("div"),y=d("div"),L=T(),C&&C.c(),this.h()},l(V){e=u(V,"DIV",{class:!0});var N=_(e);t=u(N,"DIV",{class:!0});var M=_(t);l=u(M,"SPAN",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1lnb92u"&&(l.textContent=a),o=I(M),r=u(M,"DIV",{class:!0});var S=_(r);c=u(S,"SPAN",{class:!0});var O=_(c);b=j(O,p),O.forEach(f),h=I(S),v=u(S,"SPAN",{class:!0});var P=_(v);m=j(P,k),P.forEach(f),x=I(S),H&&H.l(S),S.forEach(f),M.forEach(f),E=I(N),w=u(N,"DIV",{class:!0});var R=_(w);y=u(R,"DIV",{class:!0,style:!0}),_(y).forEach(f),R.forEach(f),L=I(N),C&&C.l(N),N.forEach(f),this.h()},h(){i(l,"class","text-xs font-medieval text-neutral/70"),i(c,"class","text-lg sm:text-xl"),i(v,"class",g="font-medieval text-xs sm:text-sm "+s[4].color+" font-bold"),i(r,"class","flex items-center gap-1"),i(t,"class","flex items-center justify-between gap-2"),i(y,"class",D="bg-"+s[6]+" h-full rounded-full transition-all duration-300"),Ge(y,"width",s[3]+"%"),i(w,"class","w-full bg-neutral/20 rounded-full h-1.5 sm:h-2 mt-1"),i(e,"class",A="bg-"+s[6]+"/10 p-2 rounded-lg border border-"+s[6]+"/30")},m(V,N){F(V,e,N),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(c,b),n(r,h),n(r,v),n(v,m),n(r,x),H&&H.m(r,null),n(e,E),n(e,w),n(w,y),n(e,L),C&&C.m(e,null)},p(V,N){N&16&&p!==(p=V[4].icon+"")&&ae(b,p),N&16&&k!==(k=V[4].label+"")&&ae(m,k),N&16&&g!==(g="font-medieval text-xs sm:text-sm "+V[4].color+" font-bold")&&i(v,"class",g),V[0].temporaryHp>0?H?H.p(V,N):(H=zt(V),H.c(),H.m(r,null)):H&&(H.d(1),H=null),N&64&&D!==(D="bg-"+V[6]+" h-full rounded-full transition-all duration-300")&&i(y,"class",D),N&8&&Ge(y,"width",V[3]+"%"),V[0].temporaryHp>0?C||(C=qt(),C.c(),C.m(e,null)):C&&(C.d(1),C=null),N&64&&A!==(A="bg-"+V[6]+"/10 p-2 rounded-lg border border-"+V[6]+"/30")&&i(e,"class",A)},d(V){V&&f(e),H&&H.d(),C&&C.d()}}}function Sl(s){let e,t,l="Puntos de Vida",a,o,r,c,p=s[0].currentHp+"",b,h,v=s[0].maxHp+"",k,m,g,x,E,w,y,D,L=s[0].temporaryHp>0&&Rt(s),A=s[0].temporaryHp>0&&Ft(s);return{c(){e=d("div"),t=d("span"),t.textContent=l,a=T(),o=d("div"),L&&L.c(),r=T(),c=d("span"),b=U(p),h=U("/"),k=U(v),m=T(),g=d("progress"),y=T(),A&&A.c(),D=Re(),this.h()},l(H){e=u(H,"DIV",{class:!0});var C=_(e);t=u(C,"SPAN",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1a9ef08"&&(t.textContent=l),a=I(C),o=u(C,"DIV",{class:!0});var V=_(o);L&&L.l(V),r=I(V),c=u(V,"SPAN",{class:!0});var N=_(c);b=j(N,p),h=j(N,"/"),k=j(N,v),N.forEach(f),V.forEach(f),C.forEach(f),m=I(H),g=u(H,"PROGRESS",{class:!0,max:!0}),_(g).forEach(f),y=I(H),A&&A.l(H),D=Re(),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70"),i(c,"class","font-bold text-neutral text-sm sm:text-base"),i(o,"class","flex items-center gap-1"),i(e,"class","flex justify-between items-center mb-1"),i(g,"class",x="progress progress-"+s[6]+" w-full h-2 sm:h-3"),g.value=E=s[0].currentHp,i(g,"max",w=s[0].maxHp)},m(H,C){F(H,e,C),n(e,t),n(e,a),n(e,o),L&&L.m(o,null),n(o,r),n(o,c),n(c,b),n(c,h),n(c,k),F(H,m,C),F(H,g,C),F(H,y,C),A&&A.m(H,C),F(H,D,C)},p(H,C){H[0].temporaryHp>0?L?L.p(H,C):(L=Rt(H),L.c(),L.m(o,r)):L&&(L.d(1),L=null),C&1&&p!==(p=H[0].currentHp+"")&&ae(b,p),C&1&&v!==(v=H[0].maxHp+"")&&ae(k,v),C&64&&x!==(x="progress progress-"+H[6]+" w-full h-2 sm:h-3")&&i(g,"class",x),C&1&&E!==(E=H[0].currentHp)&&(g.value=E),C&1&&w!==(w=H[0].maxHp)&&i(g,"max",w),H[0].temporaryHp>0?A?A.p(H,C):(A=Ft(H),A.c(),A.m(D.parentNode,D)):A&&(A.d(1),A=null)},d(H){H&&(f(e),f(m),f(g),f(y),f(D)),L&&L.d(),A&&A.d(H)}}}function zt(s){let e,t,l=s[0].temporaryHp+"",a,o;return{c(){e=d("span"),t=U("+"),a=U(l),o=U(" üõ°Ô∏è"),this.h()},l(r){e=u(r,"SPAN",{class:!0});var c=_(e);t=j(c,"+"),a=j(c,l),o=j(c," üõ°Ô∏è"),c.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info ml-1")},m(r,c){F(r,e,c),n(e,t),n(e,a),n(e,o)},p(r,c){c&1&&l!==(l=r[0].temporaryHp+"")&&ae(a,l)},d(r){r&&f(e)}}}function qt(s){let e,t='<div class="bg-info h-full rounded-full w-1/3"></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-wxu9s9"&&(e.innerHTML=t),this.h()},h(){i(e,"class","w-full bg-info/20 rounded-full h-1 mt-1")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Rt(s){let e,t,l=s[0].temporaryHp+"",a;return{c(){e=d("span"),t=U("üõ°Ô∏è +"),a=U(l),this.h()},l(o){e=u(o,"SPAN",{class:!0});var r=_(e);t=j(r,"üõ°Ô∏è +"),a=j(r,l),r.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info")},m(o,r){F(o,e,r),n(e,t),n(e,a)},p(o,r){r&1&&l!==(l=o[0].temporaryHp+"")&&ae(a,l)},d(o){o&&f(e)}}}function Ft(s){let e,t,l;return{c(){e=d("div"),t=d("div"),l=d("div"),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);t=u(o,"DIV",{class:!0});var r=_(t);l=u(r,"DIV",{class:!0,style:!0}),_(l).forEach(f),r.forEach(f),o.forEach(f),this.h()},h(){i(l,"class","bg-info h-full rounded-full"),Ge(l,"width",Math.min(100,s[0].temporaryHp/s[0].maxHp*100)+"%"),i(t,"class","w-full bg-info/20 rounded-full h-1.5"),i(e,"class","mt-1")},m(a,o){F(a,e,o),n(e,t),n(t,l)},p(a,o){o&1&&Ge(l,"width",Math.min(100,a[0].temporaryHp/a[0].maxHp*100)+"%")},d(a){a&&f(e)}}}function Gt(s){let e,t,l="Condiciones:",a,o,r=Te(s[0].conditions),c=[];for(let p=0;p<r.length;p+=1)c[p]=Qt(Ot(s,r,p));return{c(){e=d("div"),t=d("span"),t.textContent=l,a=T(),o=d("div");for(let p=0;p<c.length;p+=1)c[p].c();this.h()},l(p){e=u(p,"DIV",{class:!0});var b=_(e);t=u(b,"SPAN",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-maxnwi"&&(t.textContent=l),a=I(b),o=u(b,"DIV",{class:!0});var h=_(o);for(let v=0;v<c.length;v+=1)c[v].l(h);h.forEach(f),b.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 block mb-1"),i(o,"class","flex flex-wrap gap-1"),i(e,"class","mt-2")},m(p,b){F(p,e,b),n(e,t),n(e,a),n(e,o);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(o,null)},p(p,b){if(b&1){r=Te(p[0].conditions);let h;for(h=0;h<r.length;h+=1){const v=Ot(p,r,h);c[h]?c[h].p(v,b):(c[h]=Qt(v),c[h].c(),c[h].m(o,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=r.length}},d(p){p&&f(e),ze(c,p)}}}function Qt(s){let e,t=s[11]+"",l;return{c(){e=d("div"),l=U(t),this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);l=j(o,t),o.forEach(f),this.h()},h(){i(e,"class","badge badge-xs sm:badge-sm badge-warning")},m(a,o){F(a,e,o),n(e,l)},p(a,o){o&1&&t!==(t=a[11]+"")&&ae(l,t)},d(a){a&&f(e)}}}function Jt(s){let e,t,l="üíö HP",a,o,r="‚ö†Ô∏è Estado",c,p;return{c(){e=d("div"),t=d("button"),t.textContent=l,a=T(),o=d("button"),o.textContent=r,this.h()},l(b){e=u(b,"DIV",{class:!0});var h=_(e);t=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1u8cl5l"&&(t.textContent=l),a=I(h),o=u(h,"BUTTON",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-1lc9vql"&&(o.textContent=r),h.forEach(f),this.h()},h(){i(t,"class","btn btn-xs sm:btn-sm btn-success flex-1"),i(o,"class","btn btn-xs sm:btn-sm btn-warning flex-1"),i(e,"class","flex gap-2 mt-3")},m(b,h){F(b,e,h),n(e,t),n(e,a),n(e,o),c||(p=[re(t,"click",s[7]),re(o,"click",s[8])],c=!0)},p:xe,d(b){b&&f(e),c=!1,Se(p)}}}function Bl(s){let e,t,l,a,o,r,c,p,b,h=s[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",v,k,m,g,x,E=s[0].name+"",w,y,D,L,A,H=s[0].initiative+"",C,V,N,M,S,O,P,R,q=s[1]&&St(),B=s[5]&&Bt(),$=s[2]&&jt(s),ee=s[2]&&Ut(s);function ce(Q,se){return Q[2]?Sl:Ol}let ie=ce(s),te=ie(s),z=s[0].conditions&&s[0].conditions.length>0&&Gt(s),K=s[2]&&Jt(s);return{c(){e=d("div"),q&&q.c(),t=T(),B&&B.c(),l=T(),a=d("div"),o=d("div"),r=d("div"),c=d("div"),p=d("div"),b=d("span"),v=U(h),m=T(),g=d("div"),x=d("h3"),w=U(E),y=T(),D=d("div"),L=d("div"),A=U("üé≤ "),C=U(H),V=T(),$&&$.c(),N=T(),ee&&ee.c(),M=T(),S=d("div"),te.c(),O=T(),z&&z.c(),P=T(),K&&K.c(),this.h()},l(Q){e=u(Q,"DIV",{class:!0});var se=_(e);q&&q.l(se),t=I(se),B&&B.l(se),l=I(se),a=u(se,"DIV",{class:!0});var Y=_(a);o=u(Y,"DIV",{class:!0});var ue=_(o);r=u(ue,"DIV",{class:!0});var Z=_(r);c=u(Z,"DIV",{class:!0});var ve=_(c);p=u(ve,"DIV",{class:!0});var me=_(p);b=u(me,"SPAN",{class:!0});var pe=_(b);v=j(pe,h),pe.forEach(f),me.forEach(f),ve.forEach(f),Z.forEach(f),m=I(ue),g=u(ue,"DIV",{class:!0});var G=_(g);x=u(G,"H3",{class:!0});var ne=_(x);w=j(ne,E),ne.forEach(f),y=I(G),D=u(G,"DIV",{class:!0});var de=_(D);L=u(de,"DIV",{class:!0});var oe=_(L);A=j(oe,"üé≤ "),C=j(oe,H),oe.forEach(f),V=I(de),$&&$.l(de),de.forEach(f),G.forEach(f),N=I(ue),ee&&ee.l(ue),ue.forEach(f),M=I(Y),S=u(Y,"DIV",{class:!0});var he=_(S);te.l(he),he.forEach(f),O=I(Y),z&&z.l(Y),P=I(Y),K&&K.l(Y),Y.forEach(f),se.forEach(f),this.h()},h(){i(b,"class","text-xl sm:text-2xl"),i(p,"class","bg-primary/20 flex items-center justify-center"),i(c,"class",k="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(s[1]?"ring-secondary":"ring-primary/50")),i(r,"class","avatar flex-shrink-0"),i(x,"class","font-medieval text-base sm:text-lg text-neutral font-bold truncate"),i(L,"class","badge badge-xs sm:badge-sm bg-primary/30 text-neutral border-primary/50"),i(D,"class","flex flex-wrap gap-1 sm:gap-2 mt-1"),i(g,"class","flex-1 min-w-0"),i(o,"class","flex items-start gap-2 sm:gap-3"),i(S,"class","mt-2 sm:mt-3"),i(a,"class","card-body p-3 sm:p-4"),i(e,"class",R="card-parchment corner-ornament relative "+(s[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(s[5]?"opacity-50":""))},m(Q,se){F(Q,e,se),q&&q.m(e,null),n(e,t),B&&B.m(e,null),n(e,l),n(e,a),n(a,o),n(o,r),n(r,c),n(c,p),n(p,b),n(b,v),n(o,m),n(o,g),n(g,x),n(x,w),n(g,y),n(g,D),n(D,L),n(L,A),n(L,C),n(D,V),$&&$.m(D,null),n(o,N),ee&&ee.m(o,null),n(a,M),n(a,S),te.m(S,null),n(a,O),z&&z.m(a,null),n(a,P),K&&K.m(a,null)},p(Q,[se]){Q[1]?q||(q=St(),q.c(),q.m(e,t)):q&&(q.d(1),q=null),Q[5]?B||(B=Bt(),B.c(),B.m(e,l)):B&&(B.d(1),B=null),se&1&&h!==(h=Q[0].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(v,h),se&2&&k!==(k="w-12 h-12 sm:w-16 sm:h-16 rounded-full ring-2 "+(Q[1]?"ring-secondary":"ring-primary/50"))&&i(c,"class",k),se&1&&E!==(E=Q[0].name+"")&&ae(w,E),se&1&&H!==(H=Q[0].initiative+"")&&ae(C,H),Q[2]?$?$.p(Q,se):($=jt(Q),$.c(),$.m(D,null)):$&&($.d(1),$=null),Q[2]?ee?ee.p(Q,se):(ee=Ut(Q),ee.c(),ee.m(o,null)):ee&&(ee.d(1),ee=null),ie===(ie=ce(Q))&&te?te.p(Q,se):(te.d(1),te=ie(Q),te&&(te.c(),te.m(S,null))),Q[0].conditions&&Q[0].conditions.length>0?z?z.p(Q,se):(z=Gt(Q),z.c(),z.m(a,P)):z&&(z.d(1),z=null),Q[2]?K?K.p(Q,se):(K=Jt(Q),K.c(),K.m(a,null)):K&&(K.d(1),K=null),se&34&&R!==(R="card-parchment corner-ornament relative "+(Q[1]?"ring-4 ring-secondary animate-pulse":"")+" "+(Q[5]?"opacity-50":""))&&i(e,"class",R)},i:xe,o:xe,d(Q){Q&&f(e),q&&q.d(),B&&B.d(),$&&$.d(),ee&&ee.d(),te.d(),z&&z.d(),K&&K.d()}}}function jl(s){return s<=0?{label:"Ca√≠do",icon:"üíÄ",color:"text-error"}:s<25?{label:"Gravemente herido",icon:"ü©∏",color:"text-error"}:s<50?{label:"Herido",icon:"ü§ï",color:"text-warning"}:s<75?{label:"Lastimado",icon:"üò£",color:"text-warning"}:s<100?{label:"Ligeramente herido",icon:"üòê",color:"text-success"}:{label:"Ileso",icon:"üí™",color:"text-success"}}function Ul(s,e,t){let l,a,o,r,{combatant:c}=e,{isCurrentTurn:p=!1}=e,{isDM:b=!1}=e;const h=ft();function v(){h("updateHP",c)}function k(){h("addCondition",c)}function m(){h("remove",c)}return s.$$set=g=>{"combatant"in g&&t(0,c=g.combatant),"isCurrentTurn"in g&&t(1,p=g.isCurrentTurn),"isDM"in g&&t(2,b=g.isDM)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=c.currentHp/c.maxHp*100),s.$$.dirty&8&&t(6,a=l>50?"success":l>25?"warning":"error"),s.$$.dirty&1&&t(5,o=c.currentHp<=0),s.$$.dirty&8&&t(4,r=jl(l))},[c,p,b,l,r,o,a,v,k,m]}class zl extends Ye{constructor(e){super(),Ze(this,e,Ul,Bl,$e,{combatant:0,isCurrentTurn:1,isDM:2})}}function Kt(s,e,t){const l=s.slice();return l[49]=e[t],l}function Wt(s,e,t){const l=s.slice();return l[46]=e[t],l}function Xt(s){let e,t,l,a,o="‚öîÔ∏è Agregar Combatiente",r,c,p,b,h,v,k,m,g,x,E,w,y,D="‚úï",L,A,H,C,V,N="Cancelar",M,S,O,P="‚öîÔ∏è",R,q,B,$;function ee(te,z){return te[2]==="player"?Rl:ql}let ce=ee(s),ie=ce(s);return{c(){e=d("div"),t=d("div"),l=d("div"),a=d("h3"),a.textContent=o,r=T(),c=d("div"),p=d("button"),b=U("üßù Jugador"),k=T(),m=d("button"),g=U("üêâ Monstruo"),w=T(),y=d("button"),y.textContent=D,L=T(),A=d("div"),ie.c(),H=T(),C=d("div"),V=d("button"),V.textContent=N,M=T(),S=d("button"),O=d("span"),O.textContent=P,R=U(" Agregar al Combate"),this.h()},l(te){e=u(te,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var z=_(e);t=u(z,"DIV",{class:!0});var K=_(t);l=u(K,"DIV",{class:!0});var Q=_(l);a=u(Q,"H3",{id:!0,class:!0,"data-svelte-h":!0}),J(a)!=="svelte-cw4yad"&&(a.textContent=o),r=I(Q),c=u(Q,"DIV",{class:!0,role:!0,"aria-label":!0});var se=_(c);p=u(se,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var Y=_(p);b=j(Y,"üßù Jugador"),Y.forEach(f),k=I(se),m=u(se,"BUTTON",{role:!0,"aria-selected":!0,"aria-controls":!0,class:!0});var ue=_(m);g=j(ue,"üêâ Monstruo"),ue.forEach(f),se.forEach(f),w=I(Q),y=u(Q,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),J(y)!=="svelte-1j9u8d0"&&(y.textContent=D),Q.forEach(f),L=I(K),A=u(K,"DIV",{class:!0});var Z=_(A);ie.l(Z),Z.forEach(f),H=I(K),C=u(K,"DIV",{class:!0});var ve=_(C);V=u(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),J(V)!=="svelte-toewbe"&&(V.textContent=N),M=I(ve),S=u(ve,"BUTTON",{class:!0});var me=_(S);O=u(me,"SPAN",{class:!0,"data-svelte-h":!0}),J(O)!=="svelte-v5ojki"&&(O.textContent=P),R=j(me," Agregar al Combate"),me.forEach(f),ve.forEach(f),K.forEach(f),z.forEach(f),this.h()},h(){i(a,"id","modal-title"),i(a,"class","font-bold text-2xl md:text-3xl font-medieval text-neutral flex-1 text-center md:text-left"),i(p,"role","tab"),i(p,"aria-selected",h=s[2]==="player"),i(p,"aria-controls","player-panel"),i(p,"class",v="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline")),i(m,"role","tab"),i(m,"aria-selected",x=s[2]==="monster"),i(m,"aria-controls","monster-panel"),i(m,"class",E="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline")),i(c,"class","flex gap-2"),i(c,"role","tablist"),i(c,"aria-label","Tipo de combatiente"),i(y,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2 md:static"),i(y,"aria-label","Cerrar modal"),i(l,"class","flex flex-col md:flex-row justify-between items-center p-4 border-b-2 border-secondary gap-2 md:gap-4"),i(A,"class","flex-1 overflow-y-auto p-4 space-y-4"),i(V,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval w-full md:w-auto"),i(O,"class","text-xl"),i(S,"class","btn btn-dnd w-full md:w-auto"),S.disabled=q=s[2]==="player"?!s[16]:!s[15],i(C,"class","flex justify-center gap-4 pt-4 border-t-2 border-secondary flex-col md:flex-row"),i(t,"class","modal-box card-parchment w-11/12 max-w-3xl h-11/12 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","modal-title")},m(te,z){F(te,e,z),n(e,t),n(t,l),n(l,a),n(l,r),n(l,c),n(c,p),n(p,b),n(c,k),n(c,m),n(m,g),n(l,w),n(l,y),n(t,L),n(t,A),ie.m(A,null),n(t,H),n(t,C),n(C,V),n(C,M),n(C,S),n(S,O),n(S,R),B||($=[re(p,"click",s[23]),re(m,"click",s[24]),re(y,"click",s[22]),re(V,"click",s[22]),re(S,"click",function(){Hl(s[2]==="player"?s[18]:s[21])&&(s[2]==="player"?s[18]:s[21]).apply(this,arguments)}),re(e,"keydown",s[38])],B=!0)},p(te,z){s=te,z[0]&4&&h!==(h=s[2]==="player")&&i(p,"aria-selected",h),z[0]&4&&v!==(v="btn btn-sm font-medieval "+(s[2]==="player"?"btn-primary":"btn-outline"))&&i(p,"class",v),z[0]&4&&x!==(x=s[2]==="monster")&&i(m,"aria-selected",x),z[0]&4&&E!==(E="btn btn-sm font-medieval "+(s[2]==="monster"?"btn-primary":"btn-outline"))&&i(m,"class",E),ce===(ce=ee(s))&&ie?ie.p(s,z):(ie.d(1),ie=ce(s),ie&&(ie.c(),ie.m(A,null))),z[0]&98308&&q!==(q=s[2]==="player"?!s[16]:!s[15])&&(S.disabled=q)},d(te){te&&f(e),ie.d(),B=!1,Se($)}}}function ql(s){let e,t,l,a='<span class="label-text font-medieval text-neutral">Buscar monstruo (Open5e)</span>',o,r,c,p,b='<span class="label-text-alt text-neutral/60 italic">üí° Prueba con nombres en ingl√©s (kobold, goblin, orc)</span>',h,v,k,m,g,x,E,w='<span class="label-text font-medieval text-neutral">Nombre <span class="text-error">*</span></span>',y,D,L,A,H,C,V,N,M='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',S,O,P,R,q,B,$,ee='<span class="label-text font-medieval text-neutral">HP M√°ximo <span class="text-error">*</span></span>',ce,ie,te,z,K,Q,se,Y='<span class="label-text font-medieval text-neutral">AC <span class="text-error">*</span></span>',ue,Z,ve,me,pe,G,ne=s[13]&&Yt(),de=s[14]&&!s[13]&&Zt(),oe=s[12].length>0&&!s[13]&&$t(s),he=s[8].name&&s[9].name&&tl(s),ge=s[8].initiative&&s[9].initiative&&ll(s),W=s[8].maxHp&&s[9].maxHp&&sl(s),le=s[8].armorClass&&s[9].armorClass&&nl(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=a,o=T(),r=d("input"),c=T(),p=d("label"),p.innerHTML=b,h=T(),ne&&ne.c(),v=T(),de&&de.c(),k=T(),oe&&oe.c(),m=T(),g=d("div"),x=d("div"),E=d("label"),E.innerHTML=w,y=T(),D=d("input"),A=T(),he&&he.c(),H=T(),C=d("div"),V=d("div"),N=d("label"),N.innerHTML=M,S=T(),O=d("input"),R=T(),ge&&ge.c(),q=T(),B=d("div"),$=d("label"),$.innerHTML=ee,ce=T(),ie=d("input"),z=T(),W&&W.c(),K=T(),Q=d("div"),se=d("label"),se.innerHTML=Y,ue=T(),Z=d("input"),me=T(),le&&le.c(),this.h()},l(X){e=u(X,"DIV",{class:!0});var fe=_(e);t=u(fe,"DIV",{class:!0});var ke=_(t);l=u(ke,"LABEL",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1s7wqfp"&&(l.innerHTML=a),o=I(ke),r=u(ke,"INPUT",{type:!0,placeholder:!0,class:!0}),c=I(ke),p=u(ke,"LABEL",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-1b81k6w"&&(p.innerHTML=b),ke.forEach(f),h=I(fe),ne&&ne.l(fe),v=I(fe),de&&de.l(fe),k=I(fe),oe&&oe.l(fe),m=I(fe),g=u(fe,"DIV",{class:!0});var Me=_(g);x=u(Me,"DIV",{class:!0});var we=_(x);E=u(we,"LABEL",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-1i5ppw8"&&(E.innerHTML=w),y=I(we),D=u(we,"INPUT",{type:!0,placeholder:!0,class:!0}),A=I(we),he&&he.l(we),we.forEach(f),H=I(Me),C=u(Me,"DIV",{class:!0});var Ee=_(C);V=u(Ee,"DIV",{class:!0});var ye=_(V);N=u(ye,"LABEL",{class:!0,"data-svelte-h":!0}),J(N)!=="svelte-wfd6ji"&&(N.innerHTML=M),S=I(ye),O=u(ye,"INPUT",{type:!0,min:!0,max:!0,class:!0}),R=I(ye),ge&&ge.l(ye),ye.forEach(f),q=I(Ee),B=u(Ee,"DIV",{class:!0});var be=_(B);$=u(be,"LABEL",{class:!0,"data-svelte-h":!0}),J($)!=="svelte-1ah5i3w"&&($.innerHTML=ee),ce=I(be),ie=u(be,"INPUT",{type:!0,min:!0,max:!0,class:!0}),z=I(be),W&&W.l(be),be.forEach(f),K=I(Ee),Q=u(Ee,"DIV",{class:!0});var _e=_(Q);se=u(_e,"LABEL",{class:!0,"data-svelte-h":!0}),J(se)!=="svelte-1yx9bl7"&&(se.innerHTML=Y),ue=I(_e),Z=u(_e,"INPUT",{type:!0,min:!0,max:!0,class:!0}),me=I(_e),le&&le.l(_e),_e.forEach(f),Ee.forEach(f),Me.forEach(f),fe.forEach(f),this.h()},h(){i(l,"class","label"),i(r,"type","text"),i(r,"placeholder","Ej: kobold, goblin, dragon..."),i(r,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),i(p,"class","label"),i(t,"class","form-control mb-4"),i(E,"class","label"),i(D,"type","text"),i(D,"placeholder","Nombre de la criatura"),i(D,"class",L="input input-bordered bg-[#2d241c] text-base-content "+(s[8].name&&s[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(x,"class","form-control"),i(N,"class","label"),i(O,"type","number"),i(O,"min","1"),i(O,"max","100"),i(O,"class",P="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(V,"class","form-control"),i($,"class","label"),i(ie,"type","number"),i(ie,"min","1"),i(ie,"max","999"),i(ie,"class",te="input input-bordered bg-[#2d241c] text-base-content "+(s[8].maxHp&&s[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(B,"class","form-control"),i(se,"class","label"),i(Z,"type","number"),i(Z,"min","1"),i(Z,"max","30"),i(Z,"class",ve="input input-bordered bg-[#2d241c] text-base-content "+(s[8].armorClass&&s[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(Q,"class","form-control"),i(C,"class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"),i(g,"class","space-y-4"),i(e,"class","space-y-4")},m(X,fe){F(X,e,fe),n(e,t),n(t,l),n(t,o),n(t,r),De(r,s[11]),n(t,c),n(t,p),n(e,h),ne&&ne.m(e,null),n(e,v),de&&de.m(e,null),n(e,k),oe&&oe.m(e,null),n(e,m),n(e,g),n(g,x),n(x,E),n(x,y),n(x,D),De(D,s[5]),n(x,A),he&&he.m(x,null),n(g,H),n(g,C),n(C,V),n(V,N),n(V,S),n(V,O),De(O,s[3]),n(V,R),ge&&ge.m(V,null),n(C,q),n(C,B),n(B,$),n(B,ce),n(B,ie),De(ie,s[6]),n(B,z),W&&W.m(B,null),n(C,K),n(C,Q),n(Q,se),n(Q,ue),n(Q,Z),De(Z,s[7]),n(Q,me),le&&le.m(Q,null),pe||(G=[re(r,"input",s[28]),re(r,"input",s[19]),re(D,"input",s[30]),re(D,"blur",s[31]),re(O,"input",s[32]),re(O,"blur",s[33]),re(ie,"input",s[34]),re(ie,"blur",s[35]),re(Z,"input",s[36]),re(Z,"blur",s[37])],pe=!0)},p(X,fe){fe[0]&2048&&r.value!==X[11]&&De(r,X[11]),X[13]?ne||(ne=Yt(),ne.c(),ne.m(e,v)):ne&&(ne.d(1),ne=null),X[14]&&!X[13]?de||(de=Zt(),de.c(),de.m(e,k)):de&&(de.d(1),de=null),X[12].length>0&&!X[13]?oe?oe.p(X,fe):(oe=$t(X),oe.c(),oe.m(e,m)):oe&&(oe.d(1),oe=null),fe[0]&768&&L!==(L="input input-bordered bg-[#2d241c] text-base-content "+(X[8].name&&X[9].name?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(D,"class",L),fe[0]&32&&D.value!==X[5]&&De(D,X[5]),X[8].name&&X[9].name?he?he.p(X,fe):(he=tl(X),he.c(),he.m(x,null)):he&&(he.d(1),he=null),fe[0]&768&&P!==(P="input input-bordered bg-[#2d241c] text-base-content "+(X[8].initiative&&X[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(O,"class",P),fe[0]&8&&Le(O.value)!==X[3]&&De(O,X[3]),X[8].initiative&&X[9].initiative?ge?ge.p(X,fe):(ge=ll(X),ge.c(),ge.m(V,null)):ge&&(ge.d(1),ge=null),fe[0]&768&&te!==(te="input input-bordered bg-[#2d241c] text-base-content "+(X[8].maxHp&&X[9].maxHp?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(ie,"class",te),fe[0]&64&&Le(ie.value)!==X[6]&&De(ie,X[6]),X[8].maxHp&&X[9].maxHp?W?W.p(X,fe):(W=sl(X),W.c(),W.m(B,null)):W&&(W.d(1),W=null),fe[0]&768&&ve!==(ve="input input-bordered bg-[#2d241c] text-base-content "+(X[8].armorClass&&X[9].armorClass?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(Z,"class",ve),fe[0]&128&&Le(Z.value)!==X[7]&&De(Z,X[7]),X[8].armorClass&&X[9].armorClass?le?le.p(X,fe):(le=nl(X),le.c(),le.m(Q,null)):le&&(le.d(1),le=null)},d(X){X&&f(e),ne&&ne.d(),de&&de.d(),oe&&oe.d(),he&&he.d(),ge&&ge.d(),W&&W.d(),le&&le.d(),pe=!1,Se(G)}}}function Rl(s){var K,Q,se;let e,t,l,a='<span class="label-text font-medieval text-neutral">Seleccionar Jugador <span class="text-error">*</span></span>',o,r,c,p="-- Elegir jugador --",b,h,v,k='<span class="label-text font-medieval text-neutral">Iniciativa <span class="text-error">*</span></span>',m,g,x,E,w,y,D,L,A,H=(((K=s[10])==null?void 0:K.name)||"Elegir jugador")+"",C,V,N,M,S=(((Q=s[10])==null?void 0:Q.maxHp)||0)+"",O,P,R=(((se=s[10])==null?void 0:se.armorClass)||0)+"",q,B,$,ee=Te(s[1]),ce=[];for(let Y=0;Y<ee.length;Y+=1)ce[Y]=rl(Wt(s,ee,Y));function ie(Y,ue){return Y[8].initiative&&Y[9].initiative?Gl:Fl}let te=ie(s),z=te(s);return{c(){e=d("div"),t=d("div"),l=d("label"),l.innerHTML=a,o=T(),r=d("select"),c=d("option"),c.textContent=p;for(let Y=0;Y<ce.length;Y+=1)ce[Y].c();b=T(),h=d("div"),v=d("label"),v.innerHTML=k,m=T(),g=d("input"),E=T(),z.c(),w=T(),y=d("div"),D=d("div"),L=d("div"),A=d("p"),C=U(H),V=T(),N=d("p"),M=U("HP: "),O=U(S),P=U(" | AC: "),q=U(R),this.h()},l(Y){e=u(Y,"DIV",{class:!0});var ue=_(e);t=u(ue,"DIV",{class:!0});var Z=_(t);l=u(Z,"LABEL",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-aatn1l"&&(l.innerHTML=a),o=I(Z),r=u(Z,"SELECT",{class:!0});var ve=_(r);c=u(ve,"OPTION",{"data-svelte-h":!0}),J(c)!=="svelte-ws9sqz"&&(c.textContent=p);for(let he=0;he<ce.length;he+=1)ce[he].l(ve);ve.forEach(f),Z.forEach(f),b=I(ue),h=u(ue,"DIV",{class:!0});var me=_(h);v=u(me,"LABEL",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1kjkdwe"&&(v.innerHTML=k),m=I(me),g=u(me,"INPUT",{type:!0,min:!0,max:!0,step:!0,class:!0}),E=I(me),z.l(me),me.forEach(f),w=I(ue),y=u(ue,"DIV",{class:!0});var pe=_(y);D=u(pe,"DIV",{class:!0});var G=_(D);L=u(G,"DIV",{});var ne=_(L);A=u(ne,"P",{class:!0});var de=_(A);C=j(de,H),de.forEach(f),V=I(ne),N=u(ne,"P",{class:!0});var oe=_(N);M=j(oe,"HP: "),O=j(oe,S),P=j(oe," | AC: "),q=j(oe,R),oe.forEach(f),ne.forEach(f),G.forEach(f),pe.forEach(f),ue.forEach(f),this.h()},h(){i(l,"class","label"),c.__value="",De(c,c.__value),c.disabled=!0,c.selected=!0,i(r,"class","select select-bordered bg-[#2d241c] text-base-content border-primary/50 w-full"),s[4]===void 0&&wl(()=>s[25].call(r)),i(t,"class","form-control"),i(v,"class","label"),i(g,"type","number"),i(g,"min","1"),i(g,"max","100"),i(g,"step","1"),g.required=!0,i(g,"class",x="input input-bordered bg-[#2d241c] text-base-content "+(s[8].initiative&&s[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(h,"class","form-control"),i(A,"class","text-lg font-bold text-neutral"),i(N,"class","text-sm text-neutral/70"),i(D,"class","flex items-center gap-4"),i(y,"class","card bg-neutral/20 border border-primary/40 p-4 mt-2"),i(e,"class","space-y-4")},m(Y,ue){F(Y,e,ue),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c);for(let Z=0;Z<ce.length;Z+=1)ce[Z]&&ce[Z].m(r,null);wt(r,s[4],!0),n(e,b),n(e,h),n(h,v),n(h,m),n(h,g),De(g,s[3]),n(h,E),z.m(h,null),n(e,w),n(e,y),n(y,D),n(D,L),n(L,A),n(A,C),n(L,V),n(L,N),n(N,M),n(N,O),n(N,P),n(N,q),B||($=[re(r,"change",s[25]),re(g,"input",s[26]),re(g,"blur",s[27])],B=!0)},p(Y,ue){var Z,ve,me;if(ue[0]&2){ee=Te(Y[1]);let pe;for(pe=0;pe<ee.length;pe+=1){const G=Wt(Y,ee,pe);ce[pe]?ce[pe].p(G,ue):(ce[pe]=rl(G),ce[pe].c(),ce[pe].m(r,null))}for(;pe<ce.length;pe+=1)ce[pe].d(1);ce.length=ee.length}ue[0]&18&&wt(r,Y[4]),ue[0]&768&&x!==(x="input input-bordered bg-[#2d241c] text-base-content "+(Y[8].initiative&&Y[9].initiative?"border-error border-2":"border-primary/50")+" w-full focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(g,"class",x),ue[0]&8&&Le(g.value)!==Y[3]&&De(g,Y[3]),te===(te=ie(Y))&&z?z.p(Y,ue):(z.d(1),z=te(Y),z&&(z.c(),z.m(h,null))),ue[0]&1024&&H!==(H=(((Z=Y[10])==null?void 0:Z.name)||"Elegir jugador")+"")&&ae(C,H),ue[0]&1024&&S!==(S=(((ve=Y[10])==null?void 0:ve.maxHp)||0)+"")&&ae(O,S),ue[0]&1024&&R!==(R=(((me=Y[10])==null?void 0:me.armorClass)||0)+"")&&ae(q,R)},d(Y){Y&&f(e),ze(ce,Y),z.d(),B=!1,Se($)}}}function Yt(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <span class="ml-3 text-neutral/70">Buscando criaturas...</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1grq8kx"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex justify-center items-center py-4")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function Zt(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-warning" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> <div><p class="font-bold">No se encontraron resultados</p> <p class="text-xs">Intenta con otro nombre o crea el monstruo manualmente</p></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1q2li4n"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert bg-warning/20 border-warning/40")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function $t(s){let e,t,l,a=s[12].length+"",o,r,c=s[12].length!==1?"s":"",p,b,h=s[12].length!==1?"s":"",v,k,m,g=Te(s[12]),x=[];for(let E=0;E<g.length;E+=1)x[E]=el(Kt(s,g,E));return{c(){e=d("div"),t=d("p"),l=U("üìñ "),o=U(a),r=U(" criatura"),p=U(c),b=U(" encontrada"),v=U(h),k=T(),m=d("div");for(let E=0;E<x.length;E+=1)x[E].c();this.h()},l(E){e=u(E,"DIV",{class:!0});var w=_(e);t=u(w,"P",{class:!0});var y=_(t);l=j(y,"üìñ "),o=j(y,a),r=j(y," criatura"),p=j(y,c),b=j(y," encontrada"),v=j(y,h),y.forEach(f),k=I(w),m=u(w,"DIV",{class:!0});var D=_(m);for(let L=0;L<x.length;L+=1)x[L].l(D);D.forEach(f),w.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/70 mb-2"),i(m,"class","grid grid-cols-1 gap-2 max-h-48 overflow-y-auto"),i(e,"class","bg-neutral/10 rounded-lg border border-primary/30 p-3")},m(E,w){F(E,e,w),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,b),n(t,v),n(e,k),n(e,m);for(let y=0;y<x.length;y+=1)x[y]&&x[y].m(m,null)},p(E,w){if(w[0]&4096&&a!==(a=E[12].length+"")&&ae(o,a),w[0]&4096&&c!==(c=E[12].length!==1?"s":"")&&ae(p,c),w[0]&4096&&h!==(h=E[12].length!==1?"s":"")&&ae(v,h),w[0]&1052672){g=Te(E[12]);let y;for(y=0;y<g.length;y+=1){const D=Kt(E,g,y);x[y]?x[y].p(D,w):(x[y]=el(D),x[y].c(),x[y].m(m,null))}for(;y<x.length;y+=1)x[y].d(1);x.length=g.length}},d(E){E&&f(e),ze(x,E)}}}function el(s){let e,t,l,a=s[49].name+"",o,r,c,p=s[49].type+"",b,h,v=s[49].challenge_rating+"",k,m,g,x="Seleccionar",E,w,y;function D(){return s[29](s[49])}return{c(){e=d("button"),t=d("div"),l=d("span"),o=U(a),r=T(),c=d("span"),b=U(p),h=U(" | CR "),k=U(v),m=T(),g=d("span"),g.textContent=x,E=T(),this.h()},l(L){e=u(L,"BUTTON",{class:!0});var A=_(e);t=u(A,"DIV",{class:!0});var H=_(t);l=u(H,"SPAN",{class:!0});var C=_(l);o=j(C,a),C.forEach(f),r=I(H),c=u(H,"SPAN",{class:!0});var V=_(c);b=j(V,p),h=j(V," | CR "),k=j(V,v),V.forEach(f),H.forEach(f),m=I(A),g=u(A,"SPAN",{class:!0,"data-svelte-h":!0}),J(g)!=="svelte-15711il"&&(g.textContent=x),E=I(A),A.forEach(f),this.h()},h(){i(l,"class","font-bold text-neutral block"),i(c,"class","text-xs text-neutral/60"),i(t,"class","flex-1"),i(g,"class","text-xs badge badge-sm badge-primary"),i(e,"class","btn btn-ghost text-left border border-primary/30 hover:bg-primary/20 flex justify-between w-full p-3 h-auto min-h-[3rem]")},m(L,A){F(L,e,A),n(e,t),n(t,l),n(l,o),n(t,r),n(t,c),n(c,b),n(c,h),n(c,k),n(e,m),n(e,g),n(e,E),w||(y=re(e,"click",D),w=!0)},p(L,A){s=L,A[0]&4096&&a!==(a=s[49].name+"")&&ae(o,a),A[0]&4096&&p!==(p=s[49].type+"")&&ae(b,p),A[0]&4096&&v!==(v=s[49].challenge_rating+"")&&ae(k,v)},d(L){L&&f(e),w=!1,y()}}}function tl(s){let e,t,l,a=s[8].name+"",o;return{c(){e=d("label"),t=d("span"),l=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);l=j(p,"‚ö†Ô∏è "),o=j(p,a),p.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){F(r,e,c),n(e,t),n(t,l),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].name+"")&&ae(o,a)},d(r){r&&f(e)}}}function ll(s){let e,t,l=s[8].initiative+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].initiative+"")&&ae(a,l)},d(o){o&&f(e)}}}function sl(s){let e,t,l=s[8].maxHp+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].maxHp+"")&&ae(a,l)},d(o){o&&f(e)}}}function nl(s){let e,t,l=s[8].armorClass+"",a;return{c(){e=d("label"),t=d("span"),a=U(l),this.h()},l(o){e=u(o,"LABEL",{class:!0});var r=_(e);t=u(r,"SPAN",{class:!0});var c=_(t);a=j(c,l),c.forEach(f),r.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(o,r){F(o,e,r),n(e,t),n(t,a)},p(o,r){r[0]&256&&l!==(l=o[8].armorClass+"")&&ae(a,l)},d(o){o&&f(e)}}}function rl(s){let e,t=s[46].name+"",l,a;return{c(){e=d("option"),l=U(t),this.h()},l(o){e=u(o,"OPTION",{});var r=_(e);l=j(r,t),r.forEach(f),this.h()},h(){e.__value=a=s[46].id,De(e,e.__value)},m(o,r){F(o,e,r),n(e,l)},p(o,r){r[0]&2&&t!==(t=o[46].name+"")&&ae(l,t),r[0]&2&&a!==(a=o[46].id)&&(e.__value=a,De(e,e.__value))},d(o){o&&f(e)}}}function Fl(s){let e,t='<span class="label-text-alt text-neutral/60 italic text-xs">Valor de iniciativa tirado (1-100)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-18jw2s3"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function Gl(s){let e,t,l,a=s[8].initiative+"",o;return{c(){e=d("label"),t=d("span"),l=U("‚ö†Ô∏è "),o=U(a),this.h()},l(r){e=u(r,"LABEL",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);l=j(p,"‚ö†Ô∏è "),o=j(p,a),p.forEach(f),c.forEach(f),this.h()},h(){i(t,"class","label-text-alt text-error text-xs"),i(e,"class","label")},m(r,c){F(r,e,c),n(e,t),n(t,l),n(t,o)},p(r,c){c[0]&256&&a!==(a=r[8].initiative+"")&&ae(o,a)},d(r){r&&f(e)}}}function Ql(s){let e,t=s[0]&&Xt(s);return{c(){t&&t.c(),e=Re()},l(l){t&&t.l(l),e=Re()},m(l,a){t&&t.m(l,a),F(l,e,a)},p(l,a){l[0]?t?t.p(l,a):(t=Xt(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:xe,o:xe,d(l){l&&f(e),t&&t.d(l)}}}function Jl(s,e,t){let l,a,o,{isOpen:r=!1}=e,{players:c=[]}=e;const p=ft();let b="player",h=0,v="",k="",m=[],g=null,x=!1,E=!1,w="",y=0,D=10,L="",A="",H="",C={name:"",initiative:"",maxHp:"",armorClass:""},V={name:!1,initiative:!1,maxHp:!1,armorClass:!1};function N(G){t(9,V[G]=!0,V)}function M(){if(b==="player"){t(9,V.initiative=!0,V);const G=vt(h);return t(8,C.initiative=G.error||"",C),G.valid&&l!==void 0}else{Object.keys(V).forEach(he=>{t(9,V[he]=!0,V)});const G=Mt(w),ne=vt(h),de=Tt(y),oe=Vt(D);return t(8,C.name=G.error||"",C),t(8,C.initiative=ne.error||"",C),t(8,C.maxHp=de.error||"",C),t(8,C.armorClass=oe.error||"",C),G.valid&&ne.valid&&de.valid&&oe.valid}}function S(){M()&&l&&(p("add",{type:"character",characterId:l.id,name:l.name,maxHp:l.maxHp,armorClass:l.armorClass,initiative:h,isNpc:!1}),q())}const O=kl(async()=>{const G=k.trim();if(!G){t(12,m=[]),t(14,E=!1);return}t(13,x=!0),t(14,E=!1);try{const ne=await Xe.searchMonsters(G);t(12,m=ne.results||[]),t(14,E=m.length===0)}catch(ne){console.error("Error buscando monstruos:",ne),t(12,m=[]),t(14,E=!0)}finally{t(13,x=!1)}},500);async function P(G){g=await Xe.getMonster(G.slug),t(5,w=g.name),t(6,y=g.hit_points),t(7,D=g.armor_class),L=g.challenge_rating,g.type,A=g.size,H=g.alignment,t(12,m=[]),t(11,k=""),t(9,V.name=!0,V),t(9,V.maxHp=!0,V),t(9,V.armorClass=!0,V)}function R(){M()&&(p("add",{type:"creature",name:w,initiative:h,maxHp:y,armorClass:D,cr:L,size:A,alignment:H,isNpc:!0}),q())}function q(){t(4,v=""),g=null,t(11,k=""),t(12,m=[]),t(14,E=!1),t(5,w=""),t(3,h=0),t(6,y=0),t(7,D=10),L="",A="",H="",t(13,x=!1),Object.keys(V).forEach(G=>{t(9,V[G]=!1,V)}),Object.keys(C).forEach(G=>{t(8,C[G]="",C)}),p("close")}const B=()=>t(2,b="player"),$=()=>t(2,b="monster");function ee(){v=Dl(this),t(4,v),t(1,c)}function ce(){h=Le(this.value),t(3,h)}const ie=()=>N("initiative");function te(){k=this.value,t(11,k)}const z=G=>P(G);function K(){w=this.value,t(5,w)}const Q=()=>N("name");function se(){h=Le(this.value),t(3,h)}const Y=()=>N("initiative");function ue(){y=Le(this.value),t(6,y)}const Z=()=>N("maxHp");function ve(){D=Le(this.value),t(7,D)}const me=()=>N("armorClass"),pe=G=>G.key==="Escape"&&q();return s.$$set=G=>{"isOpen"in G&&t(0,r=G.isOpen),"players"in G&&t(1,c=G.players)},s.$$.update=()=>{if(s.$$.dirty[0]&18&&t(10,l=c.find(G=>G.id===v)),s.$$.dirty[0]&548&&V.name&&b==="monster"&&w){const G=Mt(w);t(8,C.name=G.valid?"":G.error||"",C)}if(s.$$.dirty[0]&520&&V.initiative&&h!==null){const G=vt(h);t(8,C.initiative=G.valid?"":G.error||"",C)}if(s.$$.dirty[0]&576&&V.maxHp&&y!==null){const G=Tt(y);t(8,C.maxHp=G.valid?"":G.error||"",C)}if(s.$$.dirty[0]&640&&V.armorClass&&D!==null){const G=Vt(D);t(8,C.armorClass=G.valid?"":G.error||"",C)}s.$$.dirty[0]&1288&&t(16,a=l&&h>=1&&!C.initiative),s.$$.dirty[0]&488&&t(15,o=!C.name&&!C.initiative&&!C.maxHp&&!C.armorClass&&w.trim()&&y>0&&D>0&&h>=1)},[r,c,b,h,v,w,y,D,C,V,l,k,m,x,E,o,a,N,S,O,P,R,q,B,$,ee,ce,ie,te,z,K,Q,se,Y,ue,Z,ve,me,pe]}class Kl extends Ye{constructor(e){super(),Ze(this,e,Jl,Ql,$e,{isOpen:0,players:1},null,[-1,-1])}}function al(s,e,t){const l=s.slice();return l[35]=e[t],l}function ol(s,e,t){const l=s.slice();return l[35]=e[t],l}function Wl(s){let e,t,l,a="üö´",o,r,c="Acceso Denegado",p,b,h="Solo el Dungeon Master puede gestionar los puntos de vida.",v,k,m="Entendido",g,x;return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=a,o=T(),r=d("h3"),r.textContent=c,p=T(),b=d("p"),b.textContent=h,v=T(),k=d("button"),k.textContent=m,this.h()},l(E){e=u(E,"DIV",{class:!0});var w=_(e);t=u(w,"DIV",{class:!0});var y=_(t);l=u(y,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-13ghcez"&&(l.textContent=a),o=I(y),r=u(y,"H3",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-13fk1x3"&&(r.textContent=c),p=I(y),b=u(y,"P",{class:!0,"data-svelte-h":!0}),J(b)!=="svelte-1myopqh"&&(b.textContent=h),v=I(y),k=u(y,"BUTTON",{class:!0,"data-svelte-h":!0}),J(k)!=="svelte-1bzkva0"&&(k.textContent=m),y.forEach(f),w.forEach(f),this.h()},h(){i(l,"class","text-6xl mb-4"),i(r,"class","text-2xl font-medieval text-neutral mb-3"),i(b,"class","text-neutral/70 font-body mb-6"),i(k,"class","btn btn-dnd"),i(t,"class","card-parchment border-4 border-error w-11/12 max-w-md text-center p-8"),i(e,"class","modal modal-open z-50")},m(E,w){F(E,e,w),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,b),n(t,v),n(t,k),g||(x=re(k,"click",s[20]),g=!0)},p:xe,d(E){E&&f(e),g=!1,x()}}}function Xl(s){let e,t,l,a="‚úï",o,r,c,p="üíö Gesti√≥n de Vida",b,h,v,k,m,g,x=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",E,w,y,D,L=s[1].name+"",A,H,C,V,N,M,S,O,P,R,q,B,$,ee,ce,ie,te,z,K,Q,se;function Y(G,ne){if(G[10])return Zl;if(G[1].temporaryHp>0)return Yl}let ue=Y(s),Z=ue&&ue(s);function ve(G,ne){if(G[5]==="hp")return ts;if(G[5]==="temp")return es;if(G[5]==="death")return $l}let me=ve(s),pe=me&&me(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=p,b=T(),h=d("div"),v=d("div"),k=d("div"),m=d("div"),g=d("span"),E=U(x),w=T(),y=d("div"),D=d("h4"),A=U(L),H=T(),C=d("div"),Z&&Z.c(),V=T(),N=d("div"),M=d("button"),S=U("üíö HP Normal"),P=T(),R=d("button"),q=U("üõ°Ô∏è HP Temporal"),$=T(),ee=d("button"),ce=U("üíÄ Death Saves"),z=T(),K=d("div"),pe&&pe.c(),this.h()},l(G){e=u(G,"DIV",{class:!0,role:!0,"aria-modal":!0});var ne=_(e);t=u(ne,"DIV",{class:!0});var de=_(t);l=u(de,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),J(l)!=="svelte-kahe5o"&&(l.textContent=a),o=I(de),r=u(de,"DIV",{class:!0});var oe=_(r);c=u(oe,"H3",{class:!0,"data-svelte-h":!0}),J(c)!=="svelte-f3fslb"&&(c.textContent=p),b=I(oe),h=u(oe,"DIV",{class:!0});var he=_(h);v=u(he,"DIV",{class:!0});var ge=_(v);k=u(ge,"DIV",{class:!0});var W=_(k);m=u(W,"DIV",{class:!0});var le=_(m);g=u(le,"SPAN",{class:!0});var X=_(g);E=j(X,x),X.forEach(f),le.forEach(f),W.forEach(f),ge.forEach(f),w=I(he),y=u(he,"DIV",{class:!0});var fe=_(y);D=u(fe,"H4",{class:!0});var ke=_(D);A=j(ke,L),ke.forEach(f),H=I(fe),C=u(fe,"DIV",{class:!0});var Me=_(C);Z&&Z.l(Me),Me.forEach(f),fe.forEach(f),he.forEach(f),oe.forEach(f),V=I(de),N=u(de,"DIV",{class:!0});var we=_(N);M=u(we,"BUTTON",{class:!0});var Ee=_(M);S=j(Ee,"üíö HP Normal"),Ee.forEach(f),P=I(we),R=u(we,"BUTTON",{class:!0});var ye=_(R);q=j(ye,"üõ°Ô∏è HP Temporal"),ye.forEach(f),$=I(we),ee=u(we,"BUTTON",{class:!0});var be=_(ee);ce=j(be,"üíÄ Death Saves"),be.forEach(f),we.forEach(f),z=I(de),K=u(de,"DIV",{class:!0});var _e=_(K);pe&&pe.l(_e),_e.forEach(f),de.forEach(f),ne.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(l,"aria-label","Cerrar modal"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(g,"class","text-xl"),i(m,"class","bg-primary/20 flex items-center justify-center"),i(k,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(v,"class","avatar"),i(D,"class","text-lg font-medieval text-neutral font-bold"),i(C,"class","flex gap-2 mt-1"),i(y,"class","flex-1"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 border-b-2 border-secondary"),i(M,"class",O="tab flex-1 "+(s[5]==="hp"?"tab-active":"")),i(R,"class",B="tab flex-1 "+(s[5]==="temp"?"tab-active":"")),i(ee,"class",ie="tab flex-1 "+(s[5]==="death"?"tab-active":"")),ee.disabled=te=!s[10],i(N,"class","tabs tabs-boxed bg-neutral/20 p-2 flex-shrink-0"),i(K,"class","flex-1 overflow-y-auto p-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-2xl relative max-h-[90vh] flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(G,ne){F(G,e,ne),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),n(h,v),n(v,k),n(k,m),n(m,g),n(g,E),n(h,w),n(h,y),n(y,D),n(D,A),n(y,H),n(y,C),Z&&Z.m(C,null),n(t,V),n(t,N),n(N,M),n(M,S),n(N,P),n(N,R),n(R,q),n(N,$),n(N,ee),n(ee,ce),n(t,z),n(t,K),pe&&pe.m(K,null),Q||(se=[re(l,"click",s[20]),re(M,"click",s[26]),re(R,"click",s[27]),re(ee,"click",s[28]),re(e,"keydown",s[33])],Q=!0)},p(G,ne){ne[0]&2&&x!==(x=G[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(E,x),ne[0]&2&&L!==(L=G[1].name+"")&&ae(A,L),ue===(ue=Y(G))&&Z?Z.p(G,ne):(Z&&Z.d(1),Z=ue&&ue(G),Z&&(Z.c(),Z.m(C,null))),ne[0]&32&&O!==(O="tab flex-1 "+(G[5]==="hp"?"tab-active":""))&&i(M,"class",O),ne[0]&32&&B!==(B="tab flex-1 "+(G[5]==="temp"?"tab-active":""))&&i(R,"class",B),ne[0]&32&&ie!==(ie="tab flex-1 "+(G[5]==="death"?"tab-active":""))&&i(ee,"class",ie),ne[0]&1024&&te!==(te=!G[10])&&(ee.disabled=te),me===(me=ve(G))&&pe?pe.p(G,ne):(pe&&pe.d(1),pe=me&&me(G),pe&&(pe.c(),pe.m(K,null)))},d(G){G&&f(e),Z&&Z.d(),pe&&pe.d(),Q=!1,Se(se)}}}function Yl(s){let e,t,l=s[1].temporaryHp+"",a,o;return{c(){e=d("div"),t=U("üõ°Ô∏è +"),a=U(l),o=U(" temp"),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);t=j(c,"üõ°Ô∏è +"),a=j(c,l),o=j(c," temp"),c.forEach(f),this.h()},h(){i(e,"class","badge badge-xs badge-info")},m(r,c){F(r,e,c),n(e,t),n(e,a),n(e,o)},p(r,c){c[0]&2&&l!==(l=r[1].temporaryHp+"")&&ae(a,l)},d(r){r&&f(e)}}}function Zl(s){let e,t="üíÄ Ca√≠do";return{c(){e=d("div"),e.textContent=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1i75sp6"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-error")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function $l(s){let e,t,l,a,o=`<span class="text-xl">‚úÖ</span>
              √âxitos de Salvaci√≥n`,r,c,p,b,h,v=`<span class="text-xl">‚ùå</span>
              Fallos de Salvaci√≥n`,k,m,g,x,E="üîÑ Resetear Death Saves",w,y;function D(M,S){if(M[8])return ss;if(M[9])return ls}let L=D(s),A=L&&L(s),H=Te([0,1,2]),C=[];for(let M=0;M<3;M+=1)C[M]=il(ol(s,H,M));let V=Te([0,1,2]),N=[];for(let M=0;M<3;M+=1)N[M]=cl(al(s,V,M));return{c(){e=d("div"),A&&A.c(),t=T(),l=d("div"),a=d("p"),a.innerHTML=o,r=T(),c=d("div");for(let M=0;M<3;M+=1)C[M].c();p=T(),b=d("div"),h=d("p"),h.innerHTML=v,k=T(),m=d("div");for(let M=0;M<3;M+=1)N[M].c();g=T(),x=d("button"),x.textContent=E,this.h()},l(M){e=u(M,"DIV",{class:!0});var S=_(e);A&&A.l(S),t=I(S),l=u(S,"DIV",{class:!0});var O=_(l);a=u(O,"P",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-zmz0xw"&&(a.innerHTML=o),r=I(O),c=u(O,"DIV",{class:!0});var P=_(c);for(let B=0;B<3;B+=1)C[B].l(P);P.forEach(f),O.forEach(f),p=I(S),b=u(S,"DIV",{class:!0});var R=_(b);h=u(R,"P",{class:!0,"data-svelte-h":!0}),J(h)!=="svelte-7gszam"&&(h.innerHTML=v),k=I(R),m=u(R,"DIV",{class:!0});var q=_(m);for(let B=0;B<3;B+=1)N[B].l(q);q.forEach(f),R.forEach(f),g=I(S),x=u(S,"BUTTON",{class:!0,"data-svelte-h":!0}),J(x)!=="svelte-19stx8c"&&(x.textContent=E),S.forEach(f),this.h()},h(){i(a,"class","font-medieval text-neutral mb-3 flex items-center gap-2"),i(c,"class","flex gap-3 justify-center"),i(l,"class","bg-success/10 p-4 rounded-lg border-2 border-success/30"),i(h,"class","font-medieval text-neutral mb-3 flex items-center gap-2"),i(m,"class","flex gap-3 justify-center"),i(b,"class","bg-error/10 p-4 rounded-lg border-2 border-error/30"),i(x,"class","btn btn-dnd border-2 border-neutral w-full px-4"),i(e,"class","space-y-4")},m(M,S){F(M,e,S),A&&A.m(e,null),n(e,t),n(e,l),n(l,a),n(l,r),n(l,c);for(let O=0;O<3;O+=1)C[O]&&C[O].m(c,null);n(e,p),n(e,b),n(b,h),n(b,k),n(b,m);for(let O=0;O<3;O+=1)N[O]&&N[O].m(m,null);n(e,g),n(e,x),w||(y=re(x,"click",s[19]),w=!0)},p(M,S){if(L!==(L=D(M))&&(A&&A.d(1),A=L&&L(M),A&&(A.c(),A.m(e,t))),S[0]&262152){H=Te([0,1,2]);let O;for(O=0;O<3;O+=1){const P=ol(M,H,O);C[O]?C[O].p(P,S):(C[O]=il(P),C[O].c(),C[O].m(c,null))}for(;O<3;O+=1)C[O].d(1)}if(S[0]&262152){V=Te([0,1,2]);let O;for(O=0;O<3;O+=1){const P=al(M,V,O);N[O]?N[O].p(P,S):(N[O]=cl(P),N[O].c(),N[O].m(m,null))}for(;O<3;O+=1)N[O].d(1)}},d(M){M&&f(e),A&&A.d(),ze(C,M),ze(N,M),w=!1,y()}}}function es(s){let e,t,l,a,o='<span class="label-text font-medieval text-neutral">üõ°Ô∏è Nuevo HP Temporal</span>',r,c,p,b,h,v,k="‚ú®",m,g,x,E,w,y,D;function L(M,S){return M[1].temporaryHp>0?cs:is}let A=L(s),H=A(s);function C(M,S){return M[7]>0?ds:us}let V=C(s),N=V(s);return{c(){e=d("div"),H.c(),t=T(),l=d("div"),a=d("label"),a.innerHTML=o,r=T(),c=d("div"),p=d("input"),b=T(),h=d("button"),v=d("span"),v.textContent=k,m=U(`\r
      Aplicar`),x=T(),E=d("label"),w=d("span"),N.c(),this.h()},l(M){e=u(M,"DIV",{class:!0});var S=_(e);H.l(S),t=I(S),l=u(S,"DIV",{});var O=_(l);a=u(O,"LABEL",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-lglt23"&&(a.innerHTML=o),r=I(O),c=u(O,"DIV",{class:!0});var P=_(c);p=u(P,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0,step:!0}),b=I(P),h=u(P,"BUTTON",{class:!0});var R=_(h);v=u(R,"SPAN",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1to6107"&&(v.textContent=k),m=j(R,`\r
      Aplicar`),R.forEach(f),P.forEach(f),x=I(O),E=u(O,"LABEL",{class:!0});var q=_(E);w=u(q,"SPAN",{class:!0});var B=_(w);N.l(B),B.forEach(f),q.forEach(f),O.forEach(f),S.forEach(f),this.h()},h(){var M;i(a,"class","label"),i(p,"type","number"),i(p,"placeholder","Ej: 10"),i(p,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-2xl font-bold"),i(p,"min","0"),i(p,"step","1"),i(v,"class","text-xl"),i(h,"class","btn btn-info"),h.disabled=g=s[7]<=0||s[7]===((M=s[1])==null?void 0:M.temporaryHp),i(c,"class","flex gap-2"),i(w,"class","label-text-alt text-neutral/60 italic"),i(E,"class","label"),i(e,"class","space-y-4")},m(M,S){F(M,e,S),H.m(e,null),n(e,t),n(e,l),n(l,a),n(l,r),n(l,c),n(c,p),De(p,s[7]),n(c,b),n(c,h),n(h,v),n(h,m),n(l,x),n(l,E),n(E,w),N.m(w,null),y||(D=[re(p,"input",s[30]),re(h,"click",s[16])],y=!0)},p(M,S){var O;A===(A=L(M))&&H?H.p(M,S):(H.d(1),H=A(M),H&&(H.c(),H.m(e,t))),S[0]&128&&Le(p.value)!==M[7]&&De(p,M[7]),S[0]&130&&g!==(g=M[7]<=0||M[7]===((O=M[1])==null?void 0:O.temporaryHp))&&(h.disabled=g),V===(V=C(M))&&N?N.p(M,S):(N.d(1),N=V(M),N&&(N.c(),N.m(w,null)))},d(M){M&&f(e),H.d(),N.d(),y=!1,Se(D)}}}function ts(s){let e,t,l,a,o="HP ACTUAL",r,c,p,b=s[1].currentHp+"",h,v,k,m,g=s[1].maxHp+"",x,E,w,y,D,L,A,H,C,V="HP NUEVO",N,M,S,O,P,R,q,B,$,ee,ce,ie,te,z,K='<span class="label-text font-medieval text-neutral">üé≤ Cantidad de HP</span>',Q,se,Y,ue,Z,ve,me,pe="üí•",G,ne,de,oe,he,ge="üíö",W,le,X,fe,ke;function Me(be,_e){return be[12]!==0?ps:fs}let we=Me(s),Ee=we(s),ye=s[1].temporaryHp>0&&ul(s);return{c(){e=d("div"),t=d("div"),l=d("div"),a=d("p"),a.textContent=o,r=T(),c=d("div"),p=d("p"),h=U(b),v=T(),k=d("p"),m=U("de "),x=U(g),E=T(),w=d("progress"),A=T(),H=d("div"),C=d("p"),C.textContent=V,N=T(),M=d("div"),S=d("p"),O=U(s[4]),R=T(),Ee.c(),q=T(),B=d("progress"),ie=T(),te=d("div"),z=d("label"),z.innerHTML=K,Q=T(),se=d("div"),Y=d("input"),ue=T(),Z=d("div"),ve=d("button"),me=d("span"),me.textContent=pe,G=U(`\r
                    Da√±o`),de=T(),oe=d("button"),he=d("span"),he.textContent=ge,W=U(`\r
                    Curar`),X=T(),ye&&ye.c(),this.h()},l(be){e=u(be,"DIV",{class:!0});var _e=_(e);t=u(_e,"DIV",{class:!0});var Fe=_(t);l=u(Fe,"DIV",{class:!0});var Ae=_(l);a=u(Ae,"P",{class:!0,"data-svelte-h":!0}),J(a)!=="svelte-15e8cb6"&&(a.textContent=o),r=I(Ae),c=u(Ae,"DIV",{class:!0});var Ve=_(c);p=u(Ve,"P",{class:!0});var Ke=_(p);h=j(Ke,b),Ke.forEach(f),v=I(Ve),k=u(Ve,"P",{class:!0});var qe=_(k);m=j(qe,"de "),x=j(qe,g),qe.forEach(f),Ve.forEach(f),E=I(Ae),w=u(Ae,"PROGRESS",{class:!0,max:!0}),_(w).forEach(f),Ae.forEach(f),A=I(Fe),H=u(Fe,"DIV",{class:!0});var Ie=_(H);C=u(Ie,"P",{class:!0,"data-svelte-h":!0}),J(C)!=="svelte-ukgy9p"&&(C.textContent=V),N=I(Ie),M=u(Ie,"DIV",{class:!0});var Ce=_(M);S=u(Ce,"P",{class:!0});var He=_(S);O=j(He,s[4]),He.forEach(f),R=I(Ce),Ee.l(Ce),Ce.forEach(f),q=I(Ie),B=u(Ie,"PROGRESS",{class:!0,max:!0}),_(B).forEach(f),Ie.forEach(f),Fe.forEach(f),ie=I(_e),te=u(_e,"DIV",{});var Ne=_(te);z=u(Ne,"LABEL",{class:!0,"data-svelte-h":!0}),J(z)!=="svelte-1b89huq"&&(z.innerHTML=K),Q=I(Ne),se=u(Ne,"DIV",{class:!0});var je=_(se);Y=u(je,"INPUT",{type:!0,placeholder:!0,class:!0,min:!0}),ue=I(je),Z=u(je,"DIV",{class:!0});var Ue=_(Z);ve=u(Ue,"BUTTON",{class:!0});var Qe=_(ve);me=u(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),J(me)!=="svelte-qwnz9x"&&(me.textContent=pe),G=j(Qe,`\r
                    Da√±o`),Qe.forEach(f),de=I(Ue),oe=u(Ue,"BUTTON",{class:!0});var Je=_(oe);he=u(Je,"SPAN",{class:!0,"data-svelte-h":!0}),J(he)!=="svelte-cy0xo0"&&(he.textContent=ge),W=j(Je,`\r
                    Curar`),Je.forEach(f),Ue.forEach(f),je.forEach(f),Ne.forEach(f),X=I(_e),ye&&ye.l(_e),_e.forEach(f),this.h()},h(){i(a,"class","text-xs font-medieval text-neutral/60 text-center"),i(p,"class","text-2xl font-bold text-neutral"),i(k,"class","text-sm text-neutral/60"),i(c,"class","text-center"),i(w,"class",y="progress progress-"+s[13]+" w-full h-3"),w.value=D=s[1].currentHp,i(w,"max",L=s[1].maxHp),i(l,"class","bg-neutral/10 p-3 rounded-lg border-2 border-primary/30"),i(C,"class","text-xs font-medieval text-neutral/60 text-center"),i(S,"class",P="text-2xl font-bold text-"+(s[12]!==0?s[12]>0?"success":"error":"neutral")),i(M,"class","text-center"),i(B,"class",$="progress progress-"+(s[12]!==0?s[11]:s[13])+" w-full h-3"),B.value=s[4],i(B,"max",ee=s[1].maxHp),i(H,"class",ce="bg-"+(s[12]!==0?s[12]>0?"success":"error":"neutral")+"/10 p-3 rounded-lg border-2 border-"+(s[12]!==0?s[12]>0?"success":"error":"primary")+"/30"),i(t,"class","grid grid-cols-2 gap-3"),i(z,"class","label"),i(Y,"type","number"),i(Y,"placeholder","Ej: 15"),i(Y,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 flex-1 text-center text-2xl font-bold"),i(Y,"min","0"),i(me,"class","text-xl"),i(ve,"class","btn btn-error"),ve.disabled=ne=s[6]<=0,i(he,"class","text-xl"),i(oe,"class","btn btn-success"),oe.disabled=le=s[6]<=0,i(Z,"class","flex gap-2"),i(se,"class","flex gap-2"),i(e,"class","space-y-4")},m(be,_e){F(be,e,_e),n(e,t),n(t,l),n(l,a),n(l,r),n(l,c),n(c,p),n(p,h),n(c,v),n(c,k),n(k,m),n(k,x),n(l,E),n(l,w),n(t,A),n(t,H),n(H,C),n(H,N),n(H,M),n(M,S),n(S,O),n(M,R),Ee.m(M,null),n(H,q),n(H,B),n(e,ie),n(e,te),n(te,z),n(te,Q),n(te,se),n(se,Y),De(Y,s[6]),n(se,ue),n(se,Z),n(Z,ve),n(ve,me),n(ve,G),n(Z,de),n(Z,oe),n(oe,he),n(oe,W),n(e,X),ye&&ye.m(e,null),fe||(ke=[re(Y,"input",s[29]),re(ve,"click",s[14]),re(oe,"click",s[15])],fe=!0)},p(be,_e){_e[0]&2&&b!==(b=be[1].currentHp+"")&&ae(h,b),_e[0]&2&&g!==(g=be[1].maxHp+"")&&ae(x,g),_e[0]&8192&&y!==(y="progress progress-"+be[13]+" w-full h-3")&&i(w,"class",y),_e[0]&2&&D!==(D=be[1].currentHp)&&(w.value=D),_e[0]&2&&L!==(L=be[1].maxHp)&&i(w,"max",L),_e[0]&16&&ae(O,be[4]),_e[0]&4096&&P!==(P="text-2xl font-bold text-"+(be[12]!==0?be[12]>0?"success":"error":"neutral"))&&i(S,"class",P),we===(we=Me(be))&&Ee?Ee.p(be,_e):(Ee.d(1),Ee=we(be),Ee&&(Ee.c(),Ee.m(M,null))),_e[0]&14336&&$!==($="progress progress-"+(be[12]!==0?be[11]:be[13])+" w-full h-3")&&i(B,"class",$),_e[0]&16&&(B.value=be[4]),_e[0]&2&&ee!==(ee=be[1].maxHp)&&i(B,"max",ee),_e[0]&4096&&ce!==(ce="bg-"+(be[12]!==0?be[12]>0?"success":"error":"neutral")+"/10 p-3 rounded-lg border-2 border-"+(be[12]!==0?be[12]>0?"success":"error":"primary")+"/30")&&i(H,"class",ce),_e[0]&64&&Le(Y.value)!==be[6]&&De(Y,be[6]),_e[0]&64&&ne!==(ne=be[6]<=0)&&(ve.disabled=ne),_e[0]&64&&le!==(le=be[6]<=0)&&(oe.disabled=le),be[1].temporaryHp>0?ye?ye.p(be,_e):(ye=ul(be),ye.c(),ye.m(e,null)):ye&&(ye.d(1),ye=null)},d(be){be&&f(e),Ee.d(),ye&&ye.d(),fe=!1,Se(ke)}}}function ls(s){let e,t='<span class="text-lg">‚ú® El personaje est√° estabilizado</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-azbxug"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert alert-success")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function ss(s){let e,t='<span class="text-lg">üíÄ El personaje ha muerto permanentemente</span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-fu2lox"&&(e.innerHTML=t),this.h()},h(){i(e,"class","alert alert-error")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function ns(s){let e;return{c(){e=U("‚óã")},l(t){e=j(t,"‚óã")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function rs(s){let e;return{c(){e=U("‚úì")},l(t){e=j(t,"‚úì")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function il(s){let e,t,l,a,o;function r(h,v){return h[3].successes>h[35]?rs:ns}let c=r(s),p=c(s);function b(){return s[31](s[35])}return{c(){e=d("button"),p.c(),t=T(),this.h()},l(h){e=u(h,"BUTTON",{class:!0});var v=_(e);p.l(v),t=I(v),v.forEach(f),this.h()},h(){i(e,"class",l="btn btn-circle btn-lg "+(s[3].successes>s[35]?"btn-success":"btn-ghost border-2 border-success/30"))},m(h,v){F(h,e,v),p.m(e,null),n(e,t),a||(o=re(e,"click",b),a=!0)},p(h,v){s=h,c!==(c=r(s))&&(p.d(1),p=c(s),p&&(p.c(),p.m(e,t))),v[0]&8&&l!==(l="btn btn-circle btn-lg "+(s[3].successes>s[35]?"btn-success":"btn-ghost border-2 border-success/30"))&&i(e,"class",l)},d(h){h&&f(e),p.d(),a=!1,o()}}}function as(s){let e;return{c(){e=U("‚óã")},l(t){e=j(t,"‚óã")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function os(s){let e;return{c(){e=U("‚úó")},l(t){e=j(t,"‚úó")},m(t,l){F(t,e,l)},d(t){t&&f(e)}}}function cl(s){let e,t,l,a,o;function r(h,v){return h[3].failures>h[35]?os:as}let c=r(s),p=c(s);function b(){return s[32](s[35])}return{c(){e=d("button"),p.c(),t=T(),this.h()},l(h){e=u(h,"BUTTON",{class:!0});var v=_(e);p.l(v),t=I(v),v.forEach(f),this.h()},h(){i(e,"class",l="btn btn-circle btn-lg "+(s[3].failures>s[35]?"btn-error":"btn-ghost border-2 border-error/30"))},m(h,v){F(h,e,v),p.m(e,null),n(e,t),a||(o=re(e,"click",b),a=!0)},p(h,v){s=h,c!==(c=r(s))&&(p.d(1),p=c(s),p&&(p.c(),p.m(e,t))),v[0]&8&&l!==(l="btn btn-circle btn-lg "+(s[3].failures>s[35]?"btn-error":"btn-ghost border-2 border-error/30"))&&i(e,"class",l)},d(h){h&&f(e),p.d(),a=!1,o()}}}function is(s){let e,t='<div class="text-4xl mb-2">üõ°Ô∏è</div> <p class="text-neutral/70 font-body">Sin HP temporal activo</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1yzstpc"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function cs(s){let e,t,l="HP TEMPORAL ACTUAL",a,o,r,c,p=s[1].temporaryHp+"",b,h,v,k="puntos de protecci√≥n",m,g,x="üóëÔ∏è Remover",E,w;return{c(){e=d("div"),t=d("p"),t.textContent=l,a=T(),o=d("div"),r=d("div"),c=d("p"),b=U(p),h=T(),v=d("p"),v.textContent=k,m=T(),g=d("button"),g.textContent=x,this.h()},l(y){e=u(y,"DIV",{class:!0});var D=_(e);t=u(D,"P",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-1j9s9nd"&&(t.textContent=l),a=I(D),o=u(D,"DIV",{class:!0});var L=_(o);r=u(L,"DIV",{});var A=_(r);c=u(A,"P",{class:!0});var H=_(c);b=j(H,p),H.forEach(f),h=I(A),v=u(A,"P",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-8qspga"&&(v.textContent=k),A.forEach(f),m=I(L),g=u(L,"BUTTON",{class:!0,"data-svelte-h":!0}),J(g)!=="svelte-jo9tjw"&&(g.textContent=x),L.forEach(f),D.forEach(f),this.h()},h(){i(t,"class","text-xs font-medieval text-neutral/60 mb-2"),i(c,"class","text-3xl font-bold text-info"),i(v,"class","text-sm text-neutral/70"),i(g,"class","btn btn-error btn-sm"),i(o,"class","flex justify-between items-center"),i(e,"class","bg-info/20 p-4 rounded-lg border-2 border-info/40")},m(y,D){F(y,e,D),n(e,t),n(e,a),n(e,o),n(o,r),n(r,c),n(c,b),n(r,h),n(r,v),n(o,m),n(o,g),E||(w=re(g,"click",s[17]),E=!0)},p(y,D){D[0]&2&&p!==(p=y[1].temporaryHp+"")&&ae(b,p)},d(y){y&&f(e),E=!1,w()}}}function us(s){let e;return{c(){e=U("Los HP temporales protegen contra el da√±o pero no se acumulan")},l(t){e=j(t,"Los HP temporales protegen contra el da√±o pero no se acumulan")},m(t,l){F(t,e,l)},p:xe,d(t){t&&f(e)}}}function ds(s){var c;let e,t=(c=s[1])!=null&&c.temporaryHp?"reemplazar√°":"agregar√°",l,a,o,r;return{c(){e=U("üí° Esto "),l=U(t),a=T(),o=U(s[7]),r=U(" HP temporal")},l(p){e=j(p,"üí° Esto "),l=j(p,t),a=I(p),o=j(p,s[7]),r=j(p," HP temporal")},m(p,b){F(p,e,b),F(p,l,b),F(p,a,b),F(p,o,b),F(p,r,b)},p(p,b){var h;b[0]&2&&t!==(t=(h=p[1])!=null&&h.temporaryHp?"reemplazar√°":"agregar√°")&&ae(l,t),b[0]&128&&ae(o,p[7])},d(p){p&&(f(e),f(l),f(a),f(o),f(r))}}}function fs(s){let e,t="Sin cambios";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-yn2w7t"&&(e.textContent=t),this.h()},h(){i(e,"class","text-sm text-neutral/60")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function ps(s){let e,t=s[12]>0?"+":"",l,a,o;return{c(){e=d("p"),l=U(t),a=U(s[12]),this.h()},l(r){e=u(r,"P",{class:!0});var c=_(e);l=j(c,t),a=j(c,s[12]),c.forEach(f),this.h()},h(){i(e,"class",o="text-lg font-bold text-"+(s[12]>0?"success":"error"))},m(r,c){F(r,e,c),n(e,l),n(e,a)},p(r,c){c[0]&4096&&t!==(t=r[12]>0?"+":"")&&ae(l,t),c[0]&4096&&ae(a,r[12]),c[0]&4096&&o!==(o="text-lg font-bold text-"+(r[12]>0?"success":"error"))&&i(e,"class",o)},d(r){r&&f(e)}}}function ul(s){let e,t,l,a="HP TEMPORAL ACTIVO",o,r,c,p=s[1].temporaryHp+"",b,h,v,k="üí° El da√±o reducir√° primero los HP temporales";return{c(){e=d("div"),t=d("div"),l=d("span"),l.textContent=a,o=T(),r=d("span"),c=U("üõ°Ô∏è "),b=U(p),h=T(),v=d("p"),v.textContent=k,this.h()},l(m){e=u(m,"DIV",{class:!0});var g=_(e);t=u(g,"DIV",{class:!0});var x=_(t);l=u(x,"SPAN",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-tzs62y"&&(l.textContent=a),o=I(x),r=u(x,"SPAN",{class:!0});var E=_(r);c=j(E,"üõ°Ô∏è "),b=j(E,p),E.forEach(f),x.forEach(f),h=I(g),v=u(g,"P",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1a6d5wt"&&(v.textContent=k),g.forEach(f),this.h()},h(){i(l,"class","text-xs font-medieval text-neutral/70"),i(r,"class","badge badge-info"),i(t,"class","flex items-center justify-between mb-2"),i(v,"class","text-xs text-neutral/60 italic"),i(e,"class","bg-info/10 p-3 rounded-lg border border-info/30 mt-4")},m(m,g){F(m,e,g),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,b),n(e,h),n(e,v)},p(m,g){g[0]&2&&p!==(p=m[1].temporaryHp+"")&&ae(b,p)},d(m){m&&f(e)}}}function hs(s){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return Xl;if(o[0]&&o[1]&&!o[2])return Wl}let l=t(s),a=l&&l(s);return{c(){a&&a.c(),e=Re()},l(o){a&&a.l(o),e=Re()},m(o,r){a&&a.m(o,r),F(o,e,r)},p(o,r){l===(l=t(o))&&a?a.p(o,r):(a&&a.d(1),a=l&&l(o),a&&(a.c(),a.m(e.parentNode,e)))},i:xe,o:xe,d(o){o&&f(e),a&&a.d(o)}}}function bs(s,e,t){let l,a,o,r,c,p,b,h,v,{isOpen:k=!1}=e,{combatant:m=null}=e,{isDM:g=!1}=e;const x=ft();let E="hp",w=0,y=0,D=0,L={successes:0,failures:0},A=!1,H="";function C(){if(m&&y>0){const z=Math.abs(y),K=m.temporaryHp||0;if(K>0)if(z<=K){const Q=K-z;x("updateTemp",Q),x("apply",0)}else{const Q=z-K;x("updateTemp",0),x("apply",-Q)}else x("apply",-z);t(6,y=0)}}function V(){if(m&&y>0){const z=Math.abs(y);x("apply",z),t(6,y=0)}}function N(){m&&D>=0&&x("updateTemp",D)}function M(){m&&(t(7,D=0),x("updateTemp",0))}function S(z,K){if(!m)return;const Q={...L};z==="success"?Q.successes=Q.successes===K+1?K:K+1:Q.failures=Q.failures===K+1?K:K+1,t(3,L=Q),x("updateDeathSaves",Q)}function O(){m&&(t(3,L={successes:0,failures:0}),x("updateDeathSaves",{successes:0,failures:0}))}function P(){t(21,w=0),t(6,y=0),t(5,E="hp"),t(22,A=!1),t(23,H=""),x("close")}const R=()=>t(5,E="hp"),q=()=>t(5,E="temp"),B=()=>t(5,E="death");function $(){y=Le(this.value),t(6,y)}function ee(){D=Le(this.value),t(7,D),t(0,k),t(1,m),t(22,A),t(23,H)}const ce=z=>S("success",z),ie=z=>S("failure",z),te=z=>z.key==="Escape"&&P();return s.$$set=z=>{"isOpen"in z&&t(0,k=z.isOpen),"combatant"in z&&t(1,m=z.combatant),"isDM"in z&&t(2,g=z.isDM)},s.$$.update=()=>{if(s.$$.dirty[0]&12582915&&(k&&m?((!A||H!==m.id)&&(t(7,D=m.temporaryHp||0),t(3,L=m.deathSaves||{successes:0,failures:0}),t(23,H=m.id)),t(22,A=!0)):k||t(22,A=!1)),s.$$.dirty[0]&2097154)if(m&&w!==0)if(w<0){const z=Math.abs(w),K=m.temporaryHp||0;if(K>0)if(z<=K)t(4,o=m.currentHp);else{const Q=z-K;t(4,o=Math.max(0,m.currentHp-Q))}else t(4,o=Math.max(0,m.currentHp+w))}else t(4,o=Math.max(0,Math.min(m.maxHp,m.currentHp+w)));else m&&t(4,o=m.currentHp);s.$$.dirty[0]&2&&t(25,l=m?m.currentHp/m.maxHp*100:0),s.$$.dirty[0]&33554432&&t(13,a=l>50?"success":l>25?"warning":"error"),s.$$.dirty[0]&2097154&&t(4,o=m?Math.max(0,Math.min(m.maxHp,m.currentHp+w)):0),s.$$.dirty[0]&18&&t(12,r=m?o-m.currentHp:0),s.$$.dirty[0]&18&&t(24,c=m?o/m.maxHp*100:0),s.$$.dirty[0]&16777216&&t(11,p=c>50?"success":c>25?"warning":"error"),s.$$.dirty[0]&2&&t(10,b=m&&m.currentHp<=0),s.$$.dirty[0]&8&&t(9,h=L.successes>=3),s.$$.dirty[0]&8&&t(8,v=L.failures>=3)},[k,m,g,L,o,E,y,D,v,h,b,p,r,a,C,V,N,M,S,O,P,w,A,H,c,l,R,q,B,$,ee,ce,ie,te]}class ms extends Ye{constructor(e){super(),Ze(this,e,bs,hs,$e,{isOpen:0,combatant:1,isDM:2},null,[-1,-1])}}function dl(s,e,t){const l=s.slice();return l[21]=e[t],l}function fl(s,e,t){const l=s.slice();l[16]=e[t];const a=Array.isArray(l[1].conditions)?l[1].conditions:[];l[17]=a;const o=l[17].includes(l[16].name);return l[18]=o,l}function pl(s,e,t){const l=s.slice();return l[21]=e[t],l}function vs(s){let e,t,l,a="‚úï",o,r,c,p=s[1].name+"",b,h,v,k,m,g="Solo el DM puede modificar estados",x,E,w="Cerrar",y,D;function L(C,V){return V&2&&(v=null),v==null&&(v=!!(C[1].conditions&&Array.isArray(C[1].conditions)&&C[1].conditions.length>0)),v?Cs:gs}let A=L(s,-1),H=A(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=T(),r=d("h3"),c=U("‚ö†Ô∏è Estados de "),b=U(p),h=T(),H.c(),k=T(),m=d("p"),m.textContent=g,x=T(),E=d("button"),E.textContent=w,this.h()},l(C){e=u(C,"DIV",{class:!0});var V=_(e);t=u(V,"DIV",{class:!0});var N=_(t);l=u(N,"BUTTON",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-1t0z3ws"&&(l.textContent=a),o=I(N),r=u(N,"H3",{class:!0});var M=_(r);c=j(M,"‚ö†Ô∏è Estados de "),b=j(M,p),M.forEach(f),h=I(N),H.l(N),k=I(N),m=u(N,"P",{class:!0,"data-svelte-h":!0}),J(m)!=="svelte-1mg2e4g"&&(m.textContent=g),x=I(N),E=u(N,"BUTTON",{class:!0,"data-svelte-h":!0}),J(E)!=="svelte-1vgxpha"&&(E.textContent=w),N.forEach(f),V.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-2 top-2"),i(r,"class","font-bold text-2xl font-medieval text-neutral text-center mb-4"),i(m,"class","text-xs text-center text-neutral/60 italic mt-4"),i(E,"class","btn btn-dnd w-full mt-4"),i(t,"class","card-parchment border-4 border-secondary w-11/12 max-w-md relative p-6"),i(e,"class","modal modal-open z-50")},m(C,V){F(C,e,V),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,b),n(t,h),H.m(t,null),n(t,k),n(t,m),n(t,x),n(t,E),y||(D=[re(l,"click",s[9]),re(E,"click",s[9]),re(e,"keydown",s[10])],y=!0)},p(C,V){V&2&&p!==(p=C[1].name+"")&&ae(b,p),A===(A=L(C,V))&&H?H.p(C,V):(H.d(1),H=A(C),H&&(H.c(),H.m(t,k)))},d(C){C&&f(e),H.d(),y=!1,Se(D)}}}function _s(s){let e,t,l,a="‚úï",o,r,c,p="‚ö†Ô∏è Estados de Combate",b,h,v,k,m,g,x=s[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è",E,w,y,D,L=s[1].name+"",A,H,C,V,N,M=s[1].currentHp+"",S,O,P=s[1].maxHp+"",R,q,B,$,ee=s[1].armorClass+"",ce,ie,te,z,K,Q,se,Y="<span>‚ö†Ô∏è</span> <span>Estados Activos</span>",ue,Z,ve=(s[1].conditions&&Array.isArray(s[1].conditions)?s[1].conditions.length:0)+"",me,pe,G,ne,de,oe,he,ge,W,le,X="üîç",fe,ke,Me="Base de datos oficial de D&D 5e",we,Ee,ye,be,_e;function Fe(Ce,He){return He&2&&(G=null),G==null&&(G=!!(Ce[1].conditions&&Array.isArray(Ce[1].conditions)&&Ce[1].conditions.length>0)),G?xs:ys}let Ae=Fe(s,-1),Ve=Ae(s);function Ke(Ce,He){return He&8&&(ye=null),Ce[5]?Ds:Ce[4].length>0?Hs:(ye==null&&(ye=!!Ce[3].trim()),ye?ks:Es)}let qe=Ke(s,-1),Ie=qe(s);return{c(){e=d("div"),t=d("div"),l=d("button"),l.textContent=a,o=T(),r=d("div"),c=d("h3"),c.textContent=p,b=T(),h=d("div"),v=d("div"),k=d("div"),m=d("div"),g=d("span"),E=U(x),w=T(),y=d("div"),D=d("h4"),A=U(L),H=T(),C=d("div"),V=d("div"),N=U("‚ù§Ô∏è "),S=U(M),O=U("/"),R=U(P),q=T(),B=d("div"),$=U("üõ°Ô∏è "),ce=U(ee),ie=T(),te=d("div"),z=d("div"),K=d("div"),Q=d("div"),se=d("h5"),se.innerHTML=Y,ue=T(),Z=d("span"),me=U(ve),pe=T(),Ve.c(),ne=T(),de=d("div"),oe=d("div"),he=d("div"),ge=d("input"),W=T(),le=d("div"),le.textContent=X,fe=T(),ke=d("p"),ke.textContent=Me,we=T(),Ee=d("div"),Ie.c(),this.h()},l(Ce){e=u(Ce,"DIV",{class:!0,role:!0,"aria-modal":!0,"aria-labelledby":!0});var He=_(e);t=u(He,"DIV",{class:!0});var Ne=_(t);l=u(Ne,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),J(l)!=="svelte-hn98im"&&(l.textContent=a),o=I(Ne),r=u(Ne,"DIV",{class:!0});var je=_(r);c=u(je,"H3",{id:!0,class:!0,"data-svelte-h":!0}),J(c)!=="svelte-1wgccba"&&(c.textContent=p),b=I(je),h=u(je,"DIV",{class:!0});var Ue=_(h);v=u(Ue,"DIV",{class:!0});var Qe=_(v);k=u(Qe,"DIV",{class:!0});var Je=_(k);m=u(Je,"DIV",{class:!0});var yt=_(m);g=u(yt,"SPAN",{class:!0});var xt=_(g);E=j(xt,x),xt.forEach(f),yt.forEach(f),Je.forEach(f),Qe.forEach(f),w=I(Ue),y=u(Ue,"DIV",{class:!0});var et=_(y);D=u(et,"H4",{class:!0});var Et=_(D);A=j(Et,L),Et.forEach(f),H=I(et),C=u(et,"DIV",{class:!0});var tt=_(C);V=u(tt,"DIV",{class:!0});var We=_(V);N=j(We,"‚ù§Ô∏è "),S=j(We,M),O=j(We,"/"),R=j(We,P),We.forEach(f),q=I(tt),B=u(tt,"DIV",{class:!0});var pt=_(B);$=j(pt,"üõ°Ô∏è "),ce=j(pt,ee),pt.forEach(f),tt.forEach(f),et.forEach(f),Ue.forEach(f),je.forEach(f),ie=I(Ne),te=u(Ne,"DIV",{class:!0,style:!0});var lt=_(te);z=u(lt,"DIV",{class:!0,style:!0});var kt=_(z);K=u(kt,"DIV",{class:!0});var st=_(K);Q=u(st,"DIV",{class:!0});var nt=_(Q);se=u(nt,"H5",{class:!0,"data-svelte-h":!0}),J(se)!=="svelte-12hilzf"&&(se.innerHTML=Y),ue=I(nt),Z=u(nt,"SPAN",{class:!0});var Ht=_(Z);me=j(Ht,ve),Ht.forEach(f),nt.forEach(f),pe=I(st),Ve.l(st),st.forEach(f),kt.forEach(f),ne=I(lt),de=u(lt,"DIV",{class:!0,style:!0});var rt=_(de);oe=u(rt,"DIV",{class:!0});var at=_(oe);he=u(at,"DIV",{class:!0});var ot=_(he);ge=u(ot,"INPUT",{type:!0,placeholder:!0,class:!0}),W=I(ot),le=u(ot,"DIV",{class:!0,"data-svelte-h":!0}),J(le)!=="svelte-1duc997"&&(le.textContent=X),ot.forEach(f),fe=I(at),ke=u(at,"P",{class:!0,"data-svelte-h":!0}),J(ke)!=="svelte-hqlo3f"&&(ke.textContent=Me),at.forEach(f),we=I(rt),Ee=u(rt,"DIV",{class:!0});var Dt=_(Ee);Ie.l(Dt),Dt.forEach(f),rt.forEach(f),lt.forEach(f),Ne.forEach(f),He.forEach(f),this.h()},h(){i(l,"class","btn btn-sm btn-circle btn-ghost absolute right-3 top-3 z-10 hover:bg-error/20"),i(l,"aria-label","Cerrar modal"),i(c,"id","condition-modal-title"),i(c,"class","font-bold text-2xl font-medieval text-neutral text-center mb-3"),i(g,"class","text-xl"),i(m,"class","bg-primary/20 flex items-center justify-center"),i(k,"class","w-12 h-12 rounded-full ring-2 ring-secondary"),i(v,"class","avatar"),i(D,"class","text-lg font-medieval text-neutral font-bold truncate"),i(V,"class","badge badge-xs bg-error/30 text-neutral border-error/50"),i(B,"class","badge badge-xs bg-info/30 text-neutral border-info/50"),i(C,"class","flex gap-2 mt-1"),i(y,"class","flex-1 min-w-0"),i(h,"class","bg-gradient-to-r from-primary/10 to-accent/10 p-3 rounded-lg border border-primary/30 flex items-center gap-3"),i(r,"class","p-4 flex-shrink-0 bg-gradient-to-b from-[#f4e4c1] to-transparent"),i(se,"class","font-medieval text-neutral font-bold flex items-center gap-2"),i(Z,"class","badge badge-warning badge-sm"),i(Q,"class","flex items-center justify-between mb-3"),i(K,"class","bg-warning/10 rounded-lg border-2 border-warning/30 p-3 flex flex-col h-full"),i(z,"class","md:w-1/3 flex flex-col"),Ge(z,"min-height","300px"),i(ge,"type","text"),i(ge,"placeholder","Buscar condici√≥n (ej: blinded, poisoned, stunned)..."),i(ge,"class","input input-bordered bg-[#2d241c] text-base-content border-primary/50 w-full pr-10"),i(le,"class","absolute right-3 top-1/2 -translate-y-1/2 text-neutral/50"),i(he,"class","relative"),i(ke,"class","text-xs text-neutral/50 mt-1 italic"),i(oe,"class","mb-3"),i(Ee,"class","flex-1 overflow-y-auto custom-scrollbar bg-neutral/5 rounded-lg border border-primary/20 p-3"),i(de,"class","md:w-2/3 flex flex-col"),Ge(de,"min-height","300px"),i(te,"class","flex-1 overflow-hidden flex flex-col md:flex-row gap-3 p-4"),Ge(te,"min-height","0"),i(t,"class","card-parchment border-4 border-secondary w-5/6 h-5/6 mx-4 relative flex flex-col"),i(e,"class","modal modal-open z-50"),i(e,"role","dialog"),i(e,"aria-modal","true"),i(e,"aria-labelledby","condition-modal-title")},m(Ce,He){F(Ce,e,He),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),n(h,v),n(v,k),n(k,m),n(m,g),n(g,E),n(h,w),n(h,y),n(y,D),n(D,A),n(y,H),n(y,C),n(C,V),n(V,N),n(V,S),n(V,O),n(V,R),n(C,q),n(C,B),n(B,$),n(B,ce),n(t,ie),n(t,te),n(te,z),n(z,K),n(K,Q),n(Q,se),n(Q,ue),n(Q,Z),n(Z,me),n(K,pe),Ve.m(K,null),n(te,ne),n(te,de),n(de,oe),n(oe,he),n(he,ge),De(ge,s[3]),n(he,W),n(he,le),n(oe,fe),n(oe,ke),n(de,we),n(de,Ee),Ie.m(Ee,null),be||(_e=[re(l,"click",s[9]),re(ge,"input",s[12]),re(ge,"input",s[6]),re(e,"keydown",s[10])],be=!0)},p(Ce,He){He&2&&x!==(x=Ce[1].isNpc?"üëπ":"üßô‚Äç‚ôÇÔ∏è")&&ae(E,x),He&2&&L!==(L=Ce[1].name+"")&&ae(A,L),He&2&&M!==(M=Ce[1].currentHp+"")&&ae(S,M),He&2&&P!==(P=Ce[1].maxHp+"")&&ae(R,P),He&2&&ee!==(ee=Ce[1].armorClass+"")&&ae(ce,ee),He&2&&ve!==(ve=(Ce[1].conditions&&Array.isArray(Ce[1].conditions)?Ce[1].conditions.length:0)+"")&&ae(me,ve),Ae===(Ae=Fe(Ce,He))&&Ve?Ve.p(Ce,He):(Ve.d(1),Ve=Ae(Ce),Ve&&(Ve.c(),Ve.m(K,null))),He&8&&ge.value!==Ce[3]&&De(ge,Ce[3]),qe===(qe=Ke(Ce,He))&&Ie?Ie.p(Ce,He):(Ie.d(1),Ie=qe(Ce),Ie&&(Ie.c(),Ie.m(Ee,null)))},d(Ce){Ce&&f(e),Ve.d(),Ie.d(),be=!1,Se(_e)}}}function gs(s){let e,t='<div class="text-4xl mb-2">üòå</div> <p class="text-neutral/70 font-body">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-18t8x0o"&&(e.innerHTML=t),this.h()},h(){i(e,"class","text-center py-6")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function Cs(s){let e,t=Te(s[1].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=hl(dl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&2){t=Te(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=dl(a,t,r);l[r]?l[r].p(c,o):(l[r]=hl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),ze(l,a)}}}function hl(s){let e,t,l=s[21]+"",a,o;return{c(){e=d("div"),t=d("span"),a=U(l),o=T(),this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);t=u(c,"SPAN",{class:!0});var p=_(t);a=j(p,l),p.forEach(f),o=I(c),c.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40")},m(r,c){F(r,e,c),n(e,t),n(t,a),n(e,o)},p(r,c){c&2&&l!==(l=r[21]+"")&&ae(a,l)},d(r){r&&f(e)}}}function ys(s){let e,t='<div class="text-3xl mb-2 opacity-50">üòå</div> <p class="text-xs text-neutral/60 font-body italic">Sin estados activos</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-gjvbew"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex-1 flex flex-col items-center justify-center text-center py-6")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function xs(s){let e,t=Te(s[1].conditions),l=[];for(let a=0;a<t.length;a+=1)l[a]=bl(pl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","flex-1 overflow-y-auto custom-scrollbar pr-1 space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&258){t=Te(a[1].conditions);let r;for(r=0;r<t.length;r+=1){const c=pl(a,t,r);l[r]?l[r].p(c,o):(l[r]=bl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),ze(l,a)}}}function bl(s){let e,t,l=s[21]+"",a,o,r,c="‚úï",p,b,h;function v(){return s[11](s[21])}return{c(){e=d("div"),t=d("span"),a=U(l),o=T(),r=d("button"),r.textContent=c,p=T(),this.h()},l(k){e=u(k,"DIV",{class:!0});var m=_(e);t=u(m,"SPAN",{class:!0});var g=_(t);a=j(g,l),g.forEach(f),o=I(m),r=u(m,"BUTTON",{class:!0,title:!0,"data-svelte-h":!0}),J(r)!=="svelte-5t970f"&&(r.textContent=c),p=I(m),m.forEach(f),this.h()},h(){i(t,"class","font-medieval text-sm text-neutral flex-1"),i(r,"class","btn btn-xs btn-circle btn-ghost hover:bg-error hover:text-white"),i(r,"title","Eliminar"),i(e,"class","bg-warning/20 rounded px-3 py-2 border border-warning/40 flex items-center justify-between gap-2 hover:bg-warning/30 transition-colors")},m(k,m){F(k,e,m),n(e,t),n(t,a),n(e,o),n(e,r),n(e,p),b||(h=re(r,"click",v),b=!0)},p(k,m){s=k,m&2&&l!==(l=s[21]+"")&&ae(a,l)},d(k){k&&f(e),b=!1,h()}}}function Es(s){let e,t='<div class="text-5xl mb-3">üìñ</div> <p class="text-neutral/70 font-body mb-2">Escribe para buscar condiciones</p> <div class="flex flex-wrap gap-1 justify-center text-xs text-neutral/50 mt-2"><span class="bg-neutral/10 px-2 py-1 rounded">blinded</span> <span class="bg-neutral/10 px-2 py-1 rounded">charmed</span> <span class="bg-neutral/10 px-2 py-1 rounded">frightened</span> <span class="bg-neutral/10 px-2 py-1 rounded">grappled</span> <span class="bg-neutral/10 px-2 py-1 rounded">paralyzed</span></div>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-981qn5"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full text-center px-4")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function ks(s){let e,t,l="üîç",a,o,r,c,p,b,h,v,k="‚ûï Agregar como personalizado",m,g;return{c(){e=d("div"),t=d("div"),t.textContent=l,a=T(),o=d("p"),r=U('No se encontr√≥ "'),c=d("span"),p=U(s[3]),b=U('"'),h=T(),v=d("button"),v.textContent=k,this.h()},l(x){e=u(x,"DIV",{class:!0});var E=_(e);t=u(E,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-sy51vw"&&(t.textContent=l),a=I(E),o=u(E,"P",{class:!0});var w=_(o);r=j(w,'No se encontr√≥ "'),c=u(w,"SPAN",{class:!0});var y=_(c);p=j(y,s[3]),y.forEach(f),b=j(w,'"'),w.forEach(f),h=I(E),v=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1rs0apo"&&(v.textContent=k),E.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(c,"class","font-bold"),i(o,"class","text-neutral/70 font-body mb-3"),i(v,"class","btn btn-primary btn-sm"),i(e,"class","flex flex-col items-center justify-center h-full text-center")},m(x,E){F(x,e,E),n(e,t),n(e,a),n(e,o),n(o,r),n(o,c),n(c,p),n(o,b),n(e,h),n(e,v),m||(g=re(v,"click",s[14]),m=!0)},p(x,E){E&8&&ae(p,x[3])},d(x){x&&f(e),m=!1,g()}}}function Hs(s){let e,t=Te(s[4]),l=[];for(let a=0;a<t.length;a+=1)l[a]=vl(fl(s,t,a));return{c(){e=d("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=u(a,"DIV",{class:!0});var o=_(e);for(let r=0;r<l.length;r+=1)l[r].l(o);o.forEach(f),this.h()},h(){i(e,"class","space-y-2")},m(a,o){F(a,e,o);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p(a,o){if(o&146){t=Te(a[4]);let r;for(r=0;r<t.length;r+=1){const c=fl(a,t,r);l[r]?l[r].p(c,o):(l[r]=vl(c),l[r].c(),l[r].m(e,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(a){a&&f(e),ze(l,a)}}}function Ds(s){let e,t='<span class="loading loading-spinner loading-md text-secondary"></span> <p class="text-xs text-neutral/60 mt-2">Buscando...</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-io7n20"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex flex-col items-center justify-center h-full")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function ml(s){let e,t="‚úì Activo";return{c(){e=d("span"),e.textContent=t,this.h()},l(l){e=u(l,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-mm16lr"&&(e.textContent=t),this.h()},h(){i(e,"class","badge badge-xs badge-success shrink-0")},m(l,a){F(l,e,a)},d(l){l&&f(e)}}}function vl(s){let e,t,l,a=s[16].name+"",o,r,c,p,b=Xe.cleanDescription(s[16].desc,120)+"",h,v,k,m,g,x,E=s[18]&&ml();function w(){return s[13](s[16])}return{c(){e=d("button"),t=d("div"),l=d("span"),o=U(a),r=T(),E&&E.c(),c=T(),p=d("p"),h=U(b),v=T(),this.h()},l(y){e=u(y,"BUTTON",{class:!0});var D=_(e);t=u(D,"DIV",{class:!0});var L=_(t);l=u(L,"SPAN",{class:!0});var A=_(l);o=j(A,a),A.forEach(f),r=I(L),E&&E.l(L),L.forEach(f),c=I(D),p=u(D,"P",{class:!0});var H=_(p);h=j(H,b),H.forEach(f),v=I(D),D.forEach(f),this.h()},h(){i(l,"class","font-medieval font-bold text-neutral"),i(t,"class","flex items-start justify-between gap-2 mb-1"),i(p,"class","text-xs text-neutral/70 font-body leading-snug"),e.disabled=k=s[18],i(e,"class",m="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))},m(y,D){F(y,e,D),n(e,t),n(t,l),n(l,o),n(t,r),E&&E.m(t,null),n(e,c),n(e,p),n(p,h),n(e,v),g||(x=re(e,"click",w),g=!0)},p(y,D){s=y,D&16&&a!==(a=s[16].name+"")&&ae(o,a),s[18]?E||(E=ml(),E.c(),E.m(t,null)):E&&(E.d(1),E=null),D&16&&b!==(b=Xe.cleanDescription(s[16].desc,120)+"")&&ae(h,b),D&18&&k!==(k=s[18])&&(e.disabled=k),D&18&&m!==(m="w-full text-left p-3 rounded-lg border-2 transition-all "+(s[18]?"border-success/50 bg-success/10 cursor-not-allowed opacity-60":"border-primary/30 bg-[#f4e4c1]/50 hover:bg-[#f4e4c1] hover:border-primary/50 hover:shadow-md"))&&i(e,"class",m)},d(y){y&&f(e),E&&E.d(),g=!1,x()}}}function ws(s){let e;function t(o,r){if(o[0]&&o[1]&&o[2])return _s;if(o[0]&&o[1]&&!o[2])return vs}let l=t(s),a=l&&l(s);return{c(){a&&a.c(),e=Re()},l(o){a&&a.l(o),e=Re()},m(o,r){a&&a.m(o,r),F(o,e,r)},p(o,[r]){l===(l=t(o))&&a?a.p(o,r):(a&&a.d(1),a=l&&l(o),a&&(a.c(),a.m(e.parentNode,e)))},i:xe,o:xe,d(o){o&&f(e),a&&a.d(o)}}}function Is(s,e,t){let{isOpen:l=!1}=e,{combatant:a=null}=e,{isDM:o=!1}=e;const r=ft();let c="",p=[],b=!1;const h=kl(async()=>{if(!c.trim()){t(4,p=[]);return}t(5,b=!0);try{const D=await Xe.searchConditions(c);t(4,p=D.results)}catch(D){console.error("Error searching conditions:",D),t(4,p=[])}finally{t(5,b=!1)}},300);function v(D){!a||!D.trim()||!o||(Array.isArray(a.conditions)?a.conditions:[]).includes(D)||(r("add",D),t(3,c=""),t(4,p=[]))}function k(D){!a||!o||r("remove",D)}function m(){t(3,c=""),t(4,p=[]),r("close")}function g(D){D.key==="Escape"&&m()}const x=D=>k(D);function E(){c=this.value,t(3,c)}const w=D=>v(D.name),y=()=>v(c.trim());return s.$$set=D=>{"isOpen"in D&&t(0,l=D.isOpen),"combatant"in D&&t(1,a=D.combatant),"isDM"in D&&t(2,o=D.isDM)},[l,a,o,c,p,b,h,v,k,m,g,x,E,w,y]}class Ts extends Ye{constructor(e){super(),Ze(this,e,Is,ws,$e,{isOpen:0,combatant:1,isDM:2})}}function _l(s,e,t){const l=s.slice();return l[51]=e[t],l[53]=t,l}function gl(s){let e,t,l,a,o,r,c="‚úï",p,b;return{c(){e=d("div"),t=d("div"),l=d("span"),a=U(s[7]),o=T(),r=d("button"),r.textContent=c,this.h()},l(h){e=u(h,"DIV",{class:!0});var v=_(e);t=u(v,"DIV",{class:!0});var k=_(t);l=u(k,"SPAN",{});var m=_(l);a=j(m,s[7]),m.forEach(f),o=I(k),r=u(k,"BUTTON",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-4tcifc"&&(r.textContent=c),k.forEach(f),v.forEach(f),this.h()},h(){i(r,"class","btn btn-sm"),i(t,"class","alert alert-error flex justify-between items-center"),i(e,"class","container mx-auto p-4")},m(h,v){F(h,e,v),n(e,t),n(t,l),n(l,a),n(t,o),n(t,r),p||(b=re(r,"click",s[33]),p=!0)},p(h,v){v[0]&128&&ae(a,h[7])},d(h){h&&f(e),p=!1,b()}}}function Vs(s){let e,t,l,a,o,r=s[2].name+"",c,p,b,h,v,k=s[2].round+"",m,g,x,E,w=s[3].length+"",y,D,L,A,H,C,V,N,M=s[14]&&Cl(s),S=s[13]&&yl(s);const O=[As,Ls],P=[];function R(q,B){return q[3].length===0?0:1}return C=R(s),V=P[C]=O[C](s),{c(){e=d("div"),t=d("div"),l=d("div"),a=d("div"),o=d("h2"),c=U(r),p=T(),b=d("div"),h=d("div"),v=U("üîÑ Ronda "),m=U(k),g=T(),x=d("div"),E=U("üë• "),y=U(w),D=U(" Combatientes"),L=T(),M&&M.c(),A=T(),S&&S.c(),H=T(),V.c(),this.h()},l(q){e=u(q,"DIV",{class:!0});var B=_(e);t=u(B,"DIV",{class:!0});var $=_(t);l=u($,"DIV",{class:!0});var ee=_(l);a=u(ee,"DIV",{class:!0});var ce=_(a);o=u(ce,"H2",{class:!0});var ie=_(o);c=j(ie,r),ie.forEach(f),p=I(ce),b=u(ce,"DIV",{class:!0});var te=_(b);h=u(te,"DIV",{class:!0});var z=_(h);v=j(z,"üîÑ Ronda "),m=j(z,k),z.forEach(f),g=I(te),x=u(te,"DIV",{class:!0});var K=_(x);E=j(K,"üë• "),y=j(K,w),D=j(K," Combatientes"),K.forEach(f),te.forEach(f),ce.forEach(f),L=I(ee),M&&M.l(ee),ee.forEach(f),A=I($),S&&S.l($),$.forEach(f),H=I(B),V.l(B),B.forEach(f),this.h()},h(){i(o,"class","text-2xl md:text-3xl font-medieval text-neutral mb-2 sm:mb-0"),i(h,"class","badge badge-ornate badge-md"),i(x,"class","badge bg-info/30 border-info/50 text-neutral badge-md"),i(b,"class","flex flex-wrap gap-2 mt-2 sm:mt-0"),i(a,"class","flex-1 flex flex-col sm:flex-row sm:items-center sm:gap-4 flex-wrap"),i(l,"class","card-body p-6 flex flex-col lg:flex-row justify-between gap-4"),i(t,"class","card-parchment mb-6 corner-ornament"),i(e,"class","p-4 max-w-5xl mx-auto")},m(q,B){F(q,e,B),n(e,t),n(t,l),n(l,a),n(a,o),n(o,c),n(a,p),n(a,b),n(b,h),n(h,v),n(h,m),n(b,g),n(b,x),n(x,E),n(x,y),n(x,D),n(l,L),M&&M.m(l,null),n(t,A),S&&S.m(t,null),n(e,H),P[C].m(e,null),N=!0},p(q,B){(!N||B[0]&4)&&r!==(r=q[2].name+"")&&ae(c,r),(!N||B[0]&4)&&k!==(k=q[2].round+"")&&ae(m,k),(!N||B[0]&8)&&w!==(w=q[3].length+"")&&ae(y,w),q[14]?M?M.p(q,B):(M=Cl(q),M.c(),M.m(l,null)):M&&(M.d(1),M=null),q[13]?S?S.p(q,B):(S=yl(q),S.c(),S.m(t,null)):S&&(S.d(1),S=null);let $=C;C=R(q),C===$?P[C].p(q,B):(Ct(),Be(P[$],1,1,()=>{P[$]=null}),gt(),V=P[C],V?V.p(q,B):(V=P[C]=O[C](q),V.c()),Oe(V,1),V.m(e,null))},i(q){N||(Oe(V),N=!0)},o(q){Be(V),N=!1},d(q){q&&f(e),M&&M.d(),S&&S.d(),P[C].d()}}}function Ms(s){let e,t,l,a="‚öîÔ∏è",o,r,c="No hay combate activo",p,b,h="El DM debe iniciar un encuentro para comenzar la batalla",v;function k(x,E){return x[14]?Os:Ns}let m=k(s),g=m(s);return{c(){e=d("div"),t=d("div"),l=d("div"),l.textContent=a,o=T(),r=d("h2"),r.textContent=c,p=T(),b=d("p"),b.textContent=h,v=T(),g.c(),this.h()},l(x){e=u(x,"DIV",{class:!0});var E=_(e);t=u(E,"DIV",{class:!0});var w=_(t);l=u(w,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-19xxu84"&&(l.textContent=a),o=I(w),r=u(w,"H2",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-itogws"&&(r.textContent=c),p=I(w),b=u(w,"P",{class:!0,"data-svelte-h":!0}),J(b)!=="svelte-1smrxik"&&(b.textContent=h),v=I(w),g.l(w),w.forEach(f),E.forEach(f),this.h()},h(){i(l,"class","text-6xl mb-4"),i(r,"class","text-3xl font-medieval text-neutral mb-4"),i(b,"class","text-neutral/70 font-body mb-6"),i(t,"class","card-parchment max-w-2xl w-full p-12 corner-ornament text-center"),i(e,"class","flex items-center justify-center h-full p-4")},m(x,E){F(x,e,E),n(e,t),n(t,l),n(t,o),n(t,r),n(t,p),n(t,b),n(t,v),g.m(t,null)},p(x,E){m===(m=k(x))&&g?g.p(x,E):(g.d(1),g=m(x),g&&(g.c(),g.m(t,null)))},i:xe,o:xe,d(x){x&&f(e),g.d()}}}function Ps(s){let e,t='<span class="loading loading-spinner loading-lg text-secondary"></span>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(l){e=u(l,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-xh23f2"&&(e.innerHTML=t),this.h()},h(){i(e,"class","flex items-center justify-center h-full")},m(l,a){F(l,e,a)},p:xe,i:xe,o:xe,d(l){l&&f(e)}}}function Cl(s){let e,t,l='<span class="text-lg">‚ûï</span> Agregar',a,o,r,c="‚ñ∂Ô∏è",p,b,h,v,k="üèÅ Finalizar",m,g;return{c(){e=d("div"),t=d("button"),t.innerHTML=l,a=T(),o=d("button"),r=d("span"),r.textContent=c,p=U(" Siguiente Turno"),h=T(),v=d("button"),v.textContent=k,this.h()},l(x){e=u(x,"DIV",{class:!0});var E=_(e);t=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-sdwydq"&&(t.innerHTML=l),a=I(E),o=u(E,"BUTTON",{class:!0});var w=_(o);r=u(w,"SPAN",{class:!0,"data-svelte-h":!0}),J(r)!=="svelte-vhmvlx"&&(r.textContent=c),p=j(w," Siguiente Turno"),w.forEach(f),h=I(E),v=u(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(v)!=="svelte-1oa32z5"&&(v.textContent=k),E.forEach(f),this.h()},h(){i(t,"class","btn btn-success btn-sm gap-2 flex-1 sm:flex-none"),i(r,"class","text-lg"),i(o,"class","btn btn-dnd btn-sm gap-2 flex-1 sm:flex-none"),o.disabled=b=s[3].length===0,i(v,"class","btn btn-error btn-sm flex-1 sm:flex-none"),i(e,"class","flex flex-col sm:flex-row gap-2 mt-2 lg:mt-0 w-full sm:w-auto")},m(x,E){F(x,e,E),n(e,t),n(e,a),n(e,o),n(o,r),n(o,p),n(e,h),n(e,v),m||(g=[re(t,"click",s[35]),re(o,"click",s[29]),re(v,"click",s[18])],m=!0)},p(x,E){E[0]&8&&b!==(b=x[3].length===0)&&(o.disabled=b)},d(x){x&&f(e),m=!1,Se(g)}}}function yl(s){let e,t,l="TURNO ACTUAL",a,o,r=s[13].name+"",c;return{c(){e=d("div"),t=d("p"),t.textContent=l,a=T(),o=d("p"),c=U(r),this.h()},l(p){e=u(p,"DIV",{class:!0});var b=_(e);t=u(b,"P",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-j3qdhu"&&(t.textContent=l),a=I(b),o=u(b,"P",{class:!0});var h=_(o);c=j(h,r),h.forEach(f),b.forEach(f),this.h()},h(){i(t,"class","text-sm font-medieval text-neutral/70 mb-1"),i(o,"class","text-2xl font-bold font-medieval text-neutral"),i(e,"class","bg-gradient-to-r from-secondary/20 to-accent/20 p-4 rounded-lg border-2 border-secondary mt-4")},m(p,b){F(p,e,b),n(e,t),n(e,a),n(e,o),n(o,c)},p(p,b){b[0]&8192&&r!==(r=p[13].name+"")&&ae(c,r)},d(p){p&&f(e)}}}function Ls(s){let e,t,l=Te(s[3]),a=[];for(let r=0;r<l.length;r+=1)a[r]=xl(_l(s,l,r));const o=r=>Be(a[r],1,1,()=>{a[r]=null});return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();this.h()},l(r){e=u(r,"DIV",{class:!0});var c=_(e);for(let p=0;p<a.length;p+=1)a[p].l(c);c.forEach(f),this.h()},h(){i(e,"class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4")},m(r,c){F(r,e,c);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);t=!0},p(r,c){if(c[0]&7356428){l=Te(r[3]);let p;for(p=0;p<l.length;p+=1){const b=_l(r,l,p);a[p]?(a[p].p(b,c),Oe(a[p],1)):(a[p]=xl(b),a[p].c(),Oe(a[p],1),a[p].m(e,null))}for(Ct(),p=l.length;p<a.length;p+=1)o(p);gt()}},i(r){if(!t){for(let c=0;c<l.length;c+=1)Oe(a[c]);t=!0}},o(r){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Be(a[c]);t=!1},d(r){r&&f(e),ze(a,r)}}}function As(s){let e,t,l="üé≤",a,o,r="Sin combatientes",c,p,b=s[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes",h;return{c(){e=d("div"),t=d("div"),t.textContent=l,a=T(),o=d("p"),o.textContent=r,c=T(),p=d("p"),h=U(b),this.h()},l(v){e=u(v,"DIV",{class:!0});var k=_(e);t=u(k,"DIV",{class:!0,"data-svelte-h":!0}),J(t)!=="svelte-9xsxws"&&(t.textContent=l),a=I(k),o=u(k,"P",{class:!0,"data-svelte-h":!0}),J(o)!=="svelte-180lhql"&&(o.textContent=r),c=I(k),p=u(k,"P",{class:!0});var m=_(p);h=j(m,b),m.forEach(f),k.forEach(f),this.h()},h(){i(t,"class","text-4xl mb-3"),i(o,"class","text-xl font-medieval text-neutral mb-2"),i(p,"class","text-neutral/70 font-body"),i(e,"class","card-parchment p-12 text-center")},m(v,k){F(v,e,k),n(e,t),n(e,a),n(e,o),n(e,c),n(e,p),n(p,h)},p(v,k){k[0]&16384&&b!==(b=v[14]?"Agrega personajes y criaturas para comenzar":"Esperando que el DM agregue combatientes")&&ae(h,b)},i:xe,o:xe,d(v){v&&f(e)}}}function xl(s){let e,t;return e=new zl({props:{combatant:s[51],isCurrentTurn:s[53]===s[2].turnIndex%s[3].length,isDM:!!s[14]}}),e.$on("updateHP",s[21]),e.$on("addCondition",s[22]),e.$on("remove",s[20]),{c(){dt(e.$$.fragment)},l(l){ut(e.$$.fragment,l)},m(l,a){ct(e,l,a),t=!0},p(l,a){const o={};a[0]&8&&(o.combatant=l[51]),a[0]&12&&(o.isCurrentTurn=l[53]===l[2].turnIndex%l[3].length),a[0]&16384&&(o.isDM=!!l[14]),e.$set(o)},i(l){t||(Oe(e.$$.fragment,l),t=!0)},o(l){Be(e.$$.fragment,l),t=!1},d(l){it(e,l)}}}function Ns(s){let e,t="Esperando que el DM inicie el combate...";return{c(){e=d("p"),e.textContent=t,this.h()},l(l){e=u(l,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-2v0fgb"&&(e.textContent=t),this.h()},h(){i(e,"class","text-sm text-neutral/50 italic")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function Os(s){let e,t=`<span class="text-2xl">‚öîÔ∏è</span>
                Iniciar Encuentro`,l,a;return{c(){e=d("button"),e.innerHTML=t,this.h()},l(o){e=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-78s565"&&(e.innerHTML=t),this.h()},h(){i(e,"class","btn btn-dnd btn-lg")},m(o,r){F(o,e,r),l||(a=re(e,"click",s[34]),l=!0)},p:xe,d(o){o&&f(e),l=!1,a()}}}function El(s){let e,t,l,a="‚öîÔ∏è Iniciar Encuentro",o,r,c,p='<span class="label-text font-medieval text-neutral text-lg">Nombre del Encuentro <span class="text-error">*</span></span>',b,h,v,k,m,g,x,E="Cancelar",w,y,D,L="‚öîÔ∏è",A,H,C,V;function N(O,P){return O[0]&&O[1]?Bs:Ss}let M=N(s),S=M(s);return{c(){e=d("div"),t=d("div"),l=d("h3"),l.textContent=a,o=T(),r=d("div"),c=d("label"),c.innerHTML=p,b=T(),h=d("input"),k=T(),S.c(),m=T(),g=d("div"),x=d("button"),x.textContent=E,w=T(),y=d("button"),D=d("span"),D.textContent=L,A=U(`\r
          Iniciar Combate`),this.h()},l(O){e=u(O,"DIV",{class:!0});var P=_(e);t=u(P,"DIV",{class:!0});var R=_(t);l=u(R,"H3",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-jkbohq"&&(l.textContent=a),o=I(R),r=u(R,"DIV",{class:!0});var q=_(r);c=u(q,"LABEL",{class:!0,"data-svelte-h":!0}),J(c)!=="svelte-18eazf9"&&(c.innerHTML=p),b=I(q),h=u(q,"INPUT",{type:!0,placeholder:!0,class:!0}),k=I(q),S.l(q),q.forEach(f),m=I(R),g=u(R,"DIV",{class:!0});var B=_(g);x=u(B,"BUTTON",{class:!0,"data-svelte-h":!0}),J(x)!=="svelte-1rt1icx"&&(x.textContent=E),w=I(B),y=u(B,"BUTTON",{class:!0});var $=_(y);D=u($,"SPAN",{class:!0,"data-svelte-h":!0}),J(D)!=="svelte-v5ojki"&&(D.textContent=L),A=j($,`\r
          Iniciar Combate`),$.forEach(f),B.forEach(f),R.forEach(f),P.forEach(f),this.h()},h(){i(l,"class","font-bold text-2xl font-medieval text-neutral mb-4 text-center"),i(c,"class","label"),i(h,"type","text"),i(h,"placeholder","Ej: Emboscada de Orcos"),i(h,"class",v="input input-bordered bg-[#2d241c] text-base-content "+(s[0]&&s[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50"),i(r,"class","form-control"),i(x,"class","btn btn-outline border-2 border-neutral text-neutral hover:bg-neutral hover:text-secondary font-medieval"),i(D,"class","text-xl"),i(y,"class","btn btn-dnd"),y.disabled=H=!s[15],i(g,"class","modal-action justify-center gap-4"),i(t,"class","modal-box card-parchment border-4 border-secondary"),i(e,"class","modal modal-open z-50")},m(O,P){F(O,e,P),n(e,t),n(t,l),n(t,o),n(t,r),n(r,c),n(r,b),n(r,h),De(h,s[4]),n(r,k),S.m(r,null),n(t,m),n(t,g),n(g,x),n(g,w),n(g,y),n(y,D),n(y,A),C||(V=[re(h,"input",s[36]),re(h,"input",s[16]),re(x,"click",s[23]),re(y,"click",s[17])],C=!0)},p(O,P){P[0]&3&&v!==(v="input input-bordered bg-[#2d241c] text-base-content "+(O[0]&&O[1]?"border-error border-2":"border-primary/50")+" text-lg focus:border-secondary focus:outline-none focus:ring-2 focus:ring-secondary/50")&&i(h,"class",v),P[0]&16&&h.value!==O[4]&&De(h,O[4]),M===(M=N(O))&&S?S.p(O,P):(S.d(1),S=M(O),S&&(S.c(),S.m(r,null))),P[0]&32768&&H!==(H=!O[15])&&(y.disabled=H)},d(O){O&&f(e),S.d(),C=!1,Se(V)}}}function Ss(s){let e,t='<span class="label-text-alt text-neutral/60 italic">Nombre del encuentro (3-100 caracteres)</span>';return{c(){e=d("label"),e.innerHTML=t,this.h()},l(l){e=u(l,"LABEL",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-61x4np"&&(e.innerHTML=t),this.h()},h(){i(e,"class","label")},m(l,a){F(l,e,a)},p:xe,d(l){l&&f(e)}}}function Bs(s){let e,t,l,a="‚ö†Ô∏è",o,r;return{c(){e=d("label"),t=d("span"),l=d("span"),l.textContent=a,o=T(),r=U(s[0]),this.h()},l(c){e=u(c,"LABEL",{class:!0});var p=_(e);t=u(p,"SPAN",{class:!0});var b=_(t);l=u(b,"SPAN",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-15g1o1n"&&(l.textContent=a),o=I(b),r=j(b,s[0]),b.forEach(f),p.forEach(f),this.h()},h(){i(l,"class","text-lg"),i(t,"class","label-text-alt text-error"),i(e,"class","label")},m(c,p){F(c,e,p),n(e,t),n(t,l),n(t,o),n(t,r)},p(c,p){p[0]&1&&ae(r,c[0])},d(c){c&&f(e)}}}function js(s){let e,t,l,a,o,r,c,p,b,h,v,k,m,g,x,E,w,y=s[7]&&gl(s);const D=[Ps,Ms,Vs],L=[];function A(P,R){return P[6]?0:P[2]?2:1}o=A(s),r=L[o]=D[o](s);let H=s[9]&&El(s);function C(P){s[37](P)}let V={combatant:s[12],isDM:!!s[14]};s[10]!==void 0&&(V.isOpen=s[10]),b=new ms({props:V}),ht.push(()=>bt(b,"isOpen",C)),b.$on("apply",s[24]),b.$on("updateTemp",s[25]),b.$on("updateDeathSaves",s[26]),b.$on("close",s[38]);function N(P){s[39](P)}let M={combatant:s[12],isDM:!!s[14]};s[11]!==void 0&&(M.isOpen=s[11]),k=new Ts({props:M}),ht.push(()=>bt(k,"isOpen",N)),k.$on("add",s[27]),k.$on("remove",s[28]),k.$on("close",s[40]);function S(P){s[41](P)}let O={players:s[5]};return s[8]!==void 0&&(O.isOpen=s[8]),x=new Kl({props:O}),ht.push(()=>bt(x,"isOpen",S)),x.$on("add",s[19]),x.$on("close",s[42]),{c(){e=d("div"),y&&y.c(),t=T(),l=d("div"),a=d("div"),r.c(),c=T(),H&&H.c(),p=T(),dt(b.$$.fragment),v=T(),dt(k.$$.fragment),g=T(),dt(x.$$.fragment),this.h()},l(P){e=u(P,"DIV",{class:!0});var R=_(e);y&&y.l(R),t=I(R),l=u(R,"DIV",{class:!0});var q=_(l);a=u(q,"DIV",{class:!0});var B=_(a);r.l(B),B.forEach(f),q.forEach(f),R.forEach(f),c=I(P),H&&H.l(P),p=I(P),ut(b.$$.fragment,P),v=I(P),ut(k.$$.fragment,P),g=I(P),ut(x.$$.fragment,P),this.h()},h(){i(a,"class","flex-1"),i(l,"class","flex flex-1"),i(e,"class","min-h-screen flex flex-col")},m(P,R){F(P,e,R),y&&y.m(e,null),n(e,t),n(e,l),n(l,a),L[o].m(a,null),F(P,c,R),H&&H.m(P,R),F(P,p,R),ct(b,P,R),F(P,v,R),ct(k,P,R),F(P,g,R),ct(x,P,R),w=!0},p(P,R){P[7]?y?y.p(P,R):(y=gl(P),y.c(),y.m(e,t)):y&&(y.d(1),y=null);let q=o;o=A(P),o===q?L[o].p(P,R):(Ct(),Be(L[q],1,1,()=>{L[q]=null}),gt(),r=L[o],r?r.p(P,R):(r=L[o]=D[o](P),r.c()),Oe(r,1),r.m(a,null)),P[9]?H?H.p(P,R):(H=El(P),H.c(),H.m(p.parentNode,p)):H&&(H.d(1),H=null);const B={};R[0]&4096&&(B.combatant=P[12]),R[0]&16384&&(B.isDM=!!P[14]),!h&&R[0]&1024&&(h=!0,B.isOpen=P[10],mt(()=>h=!1)),b.$set(B);const $={};R[0]&4096&&($.combatant=P[12]),R[0]&16384&&($.isDM=!!P[14]),!m&&R[0]&2048&&(m=!0,$.isOpen=P[11],mt(()=>m=!1)),k.$set($);const ee={};R[0]&32&&(ee.players=P[5]),!E&&R[0]&256&&(E=!0,ee.isOpen=P[8],mt(()=>E=!1)),x.$set(ee)},i(P){w||(Oe(r),Oe(b.$$.fragment,P),Oe(k.$$.fragment,P),Oe(x.$$.fragment,P),w=!0)},o(P){Be(r),Be(b.$$.fragment,P),Be(k.$$.fragment,P),Be(x.$$.fragment,P),w=!1},d(P){P&&(f(e),f(c),f(p),f(v),f(g)),y&&y.d(),L[o].d(),H&&H.d(P),it(b,P),it(k,P),it(x,P)}}}function Us(s,e,t){let l,a,o,r,c,p;It(s,Pl,W=>t(31,c=W)),It(s,Ml,W=>t(32,p=W)),Vl.set("Combate");let b="",h=!1;function v(){t(1,h=!0)}let k=null,m=null,g=[],x=[],E=!0,w="",y=!1,D=!1,L="",A=!1,H=!1,C=null,V=null,N=null;const M=Ll(Nl);Il(async()=>{await P(),await R(),await S()}),Tl(()=>{V&&V(),N&&N()});async function S(){try{t(6,E=!0);const W=Lt(M,"encounters"),le=At(W,_t("campaignId","==",a),_t("isActive","==",!0));V=Nt(le,X=>{if(X.empty)t(2,m=null),t(3,g=[]),N&&(N(),N=null);else{const fe=X.docs[0];t(2,m={id:fe.id,...fe.data()}),!N&&m&&O(m.id)}t(6,E=!1)},X=>{console.error("Error en listener de encuentro:",X),t(7,w=X.message),t(6,E=!1)})}catch(W){t(7,w=W.message),t(6,E=!1)}}function O(W){const le=Lt(M,"combatants"),X=At(le,_t("encounterId","==",W),Al("initiative","desc"));N=Nt(X,fe=>{if(t(3,g=fe.docs.map(ke=>({id:ke.id,...ke.data()}))),C){const ke=g.find(Me=>Me.id===C.id);ke&&t(12,C=ke)}},fe=>{console.error("Error en listener de combatientes:",fe)})}async function P(){try{t(30,k=await Pe.getCampaign(a))}catch(W){t(7,w=W.message)}}async function R(){try{t(5,x=await Pe.getCampaignCharacters(a))}catch(W){console.error("Error loading characters:",W)}}async function q(){t(1,h=!0);const W=Pt(L);if(!W.valid){t(0,b=W.error||"");return}try{await Pe.createEncounter(a,L),t(9,D=!1),t(4,L=""),t(1,h=!1),t(0,b="")}catch(le){t(7,w=le.message)}}async function B(){if(!(!m||!confirm("¬øFinalizar este encuentro? Los HP actuales se guardar√°n en los personajes.")))try{await Pe.endEncounter(m.id)}catch(W){t(7,w=W.message)}}async function $(W){if(m)try{await Pe.addCombatant(m.id,W.detail),t(8,y=!1)}catch(le){t(7,w=le.message)}}async function ee(W){const le=W.detail;if(confirm(`¬øEliminar a ${le.name} del combate?`))try{await Pe.removeCombatant(le.id)}catch(X){t(7,w=X.message)}}function ce(W){t(12,C=W.detail),t(10,A=!0),t(11,H=!1)}function ie(W){t(12,C=W.detail),t(11,H=!0),t(10,A=!1)}function te(){t(9,D=!1),t(4,L=""),t(1,h=!1),t(0,b="")}async function z(W){if(C)try{const le=W.detail,X=Math.max(0,Math.min(C.maxHp,C.currentHp+le));await Pe.updateCombatant(C.id,{currentHp:X}),t(10,A=!1),t(12,C=null)}catch(le){t(7,w=le.message)}}async function K(W){if(C)try{const le=W.detail;await Pe.updateCombatant(C.id,{temporaryHp:le})}catch(le){t(7,w=le.message)}}async function Q(W){if(C)try{const le=W.detail;await Pe.updateCombatant(C.id,{deathSaves:le})}catch(le){t(7,w=le.message)}}async function se(W){if(C)try{const le=W.detail,X=Array.isArray(C.conditions)?C.conditions:[];if(X.includes(le))return;const fe=[...X,le];await Pe.updateCombatant(C.id,{conditions:fe})}catch(le){t(7,w=le.message)}}async function Y(W){if(C)try{const le=W.detail,fe=(Array.isArray(C.conditions)?C.conditions:[]).filter(ke=>ke!==le);await Pe.updateCombatant(C.id,{conditions:fe})}catch(le){t(7,w=le.message)}}async function ue(){if(m)try{await Pe.nextTurn(m.id)}catch(W){t(7,w=W.message)}}const Z=()=>t(7,w=""),ve=()=>t(9,D=!0),me=()=>t(8,y=!0);function pe(){L=this.value,t(4,L)}function G(W){A=W,t(10,A)}const ne=()=>{t(10,A=!1),t(12,C=null)};function de(W){H=W,t(11,H)}const oe=()=>{t(11,H=!1),t(12,C=null)};function he(W){y=W,t(8,y)}const ge=()=>t(8,y=!1);return s.$$.update=()=>{if(s.$$.dirty[0]&18&&h&&L){const W=Pt(L);t(0,b=W.valid?"":W.error||"")}s.$$.dirty[0]&17&&t(15,l=!b&&L.trim()),s.$$.dirty[1]&2&&(a=p.params.id||""),s.$$.dirty[0]&1073741824|s.$$.dirty[1]&1&&t(14,o=k&&c&&k.dmId===c.uid),s.$$.dirty[0]&12&&t(13,r=m&&g.length>0?g[m.turnIndex%g.length]:null)},[b,h,m,g,L,x,E,w,y,D,A,H,C,r,o,l,v,q,B,$,ee,ce,ie,te,z,K,Q,se,Y,ue,k,c,p,Z,ve,me,pe,G,ne,de,oe,he,ge]}class Xs extends Ye{constructor(e){super(),Ze(this,e,Us,js,$e,{},null,[-1,-1])}}export{Xs as component};
